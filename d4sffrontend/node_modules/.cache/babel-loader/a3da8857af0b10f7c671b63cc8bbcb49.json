{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\EditarInforme.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\EditarInforme.vue","mtime":1681217492538},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\babel.config.js","mtime":1681217492507},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVbmlmaWNhckluZm9ybWUiLAogIHByb3BzOiB7CiAgICBpbmZvcm1lc1NlbGVjY2lvbmFkb3M6IEFycmF5KCksCiAgICBoaXN0b3JpY286IEFycmF5KCksCiAgICBhbGxQYXJjZWxzT2ZFbnRlcnByaXNlczogQXJyYXkoKQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlX2NhcmQ6IGBNb2RpZmljYXIgSW5mb3JtZWAsCiAgICAgIHRleHRfaW5wdXRfbGFiZWw6IGBOb21icmUgZGVsIEluZm9ybWVgLAogICAgICBub21icmVJbmZvcm1lTmV3OiAnJywKICAgICAgYWxpYXM6IGBgLAogICAgICBwYXJjZWxhOiBPYmplY3QoKSwKICAgICAgbWVuc2FqZUFsZXJ0YTogYGAsCiAgICAgIHRpcG9BbGVydGE6IGBlcnJvcmAKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuTW9kYWwoKSB7CiAgICAgIGxldCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS92ZXJfaGlzdC8ke3RoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zWzBdfS9gOwogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIik7CiAgICAgIGF4aW9zLmdldChwYXRoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAoIXJlc3BvbnNlLmRhdGEuYWxpYXMpIHsKICAgICAgICAgIHRoaXMucGFyY2VsYSA9IHRoaXMuaGlzdG9yaWNvLmZpbHRlcihpbmZvcm1lID0+IHsKICAgICAgICAgICAgaWYgKGluZm9ybWUuaWQgPT0gdGhpcy5pbmZvcm1lc1NlbGVjY2lvbmFkb3NbMF0pIHsKICAgICAgICAgICAgICB0aGlzLm5vbWJyZUluZm9ybWVOZXcgPSBpbmZvcm1lLnRpcG8gPT0gMSA/IHRoaXMucGFyY2VsYU5hbWUoaW5mb3JtZS5wYXJjZWxhKSA6IGluZm9ybWUucGFyY2VsYTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubm9tYnJlSW5mb3JtZU5ldyA9IHJlc3BvbnNlLmRhdGEuYWxpYXM7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTsKICAgICAgfSk7CiAgICAgIHRoaXMuJHJlZnMuRWRpdGFySW5mb3JtZUZvcm0uc2hvdygpOwogICAgfSwKICAgIHBhcmNlbGFOYW1lKGlkKSB7CiAgICAgIGNvbnN0IHBhcmNlbGFTZWxlY3QgPSB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzLmZpbHRlcihwYXJjZWxhID0+IHsKICAgICAgICByZXR1cm4gcGFyY2VsYS5pZCA9PSBpZDsKICAgICAgfSk7CiAgICAgIGlmIChwYXJjZWxhU2VsZWN0Lmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gcGFyY2VsYVNlbGVjdFswXS5wcm9wZXJ0aWVzLm5hbWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXJjZWxhID0gewogICAgICAgICAgdGlwbzogMQogICAgICAgIH07CiAgICAgICAgcmV0dXJuICdHcsOhZmljbyBHZW5lcmFkbyBkZSBQYXJjZWxhIEVsaW1pbmFkYSc7CiAgICAgIH0KICAgIH0sCiAgICB1bmlmaWNhSW5mb3JtZXMoKSB7CiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLiRhcGlVUkx9L3Zlcl9oaXN0LyR7dGhpcy5pbmZvcm1lc1NlbGVjY2lvbmFkb3NbMF19L2A7CiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKTsKICAgICAgaWYgKHRoaXMucGFyY2VsYS50aXBvID09IDEpIHsKICAgICAgICBheGlvcy5wdXQocGF0aCwgewogICAgICAgICAgYWxpYXM6IHRoaXMubm9tYnJlSW5mb3JtZU5ldwogICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlKTsKICAgICAgICAgIHRoaXMuJHBhcmVudC5tZW5zYWplQWxlcnRhID0gYEluZm9ybWUgR3VhcmRhZG8gY29ycmVjdGFtZW50ZWA7CiAgICAgICAgICB0aGlzLiRwYXJlbnQudGlwb0FsZXJ0YSA9ICdzdWNjZXNzJzsKICAgICAgICAgIHRoaXMuJGVtaXQoJ21lbnNhamVBbGVydGEnLCBgSW5mb3JtZSBHdWFyZGFkbyBjb3JyZWN0YW1lbnRlYCk7CiAgICAgICAgICB0aGlzLiRlbWl0KCd0aXBvQWxlcnRhJywgYHN1Y2Nlc3NgKTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3ZlckFsZXJ0YScpOwogICAgICAgICAgdGhpcy4kZW1pdCgnZ2V0SW5mb3JtZXNBbnQnKTsKICAgICAgICAgIHRoaXMuJHJlZnMuRWRpdGFySW5mb3JtZUZvcm0uaGlkZSgpOwogICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXhpb3MucHV0KHBhdGgsIHsKICAgICAgICAgIHBhcmNlbGE6IHRoaXMubm9tYnJlSW5mb3JtZU5ldwogICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlKTsKICAgICAgICAgIHRoaXMuJHBhcmVudC5tZW5zYWplQWxlcnRhID0gYEluZm9ybWUgR3VhcmRhZG8gY29ycmVjdGFtZW50ZWA7CiAgICAgICAgICB0aGlzLiRwYXJlbnQudGlwb0FsZXJ0YSA9ICdzdWNjZXNzJzsKICAgICAgICAgIHRoaXMuJGVtaXQoJ21lbnNhamVBbGVydGEnLCBgSW5mb3JtZSBHdWFyZGFkbyBjb3JyZWN0YW1lbnRlYCk7CiAgICAgICAgICB0aGlzLiRlbWl0KCd0aXBvQWxlcnRhJywgYHN1Y2Nlc3NgKTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3ZlckFsZXJ0YScpOwogICAgICAgICAgdGhpcy4kZW1pdCgnZ2V0SW5mb3JtZXNBbnQnKTsKICAgICAgICAgIHRoaXMuJHJlZnMuRWRpdGFySW5mb3JtZUZvcm0uaGlkZSgpOwogICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGNvbnNvbGUuaW5mbygnUHJ1ZWJhcycpOwogIH0KfTs="},{"version":3,"names":["axios","name","props","informesSeleccionados","Array","historico","allParcelsOfEnterprises","data","title_card","text_input_label","nombreInformeNew","alias","parcela","Object","mensajeAlerta","tipoAlerta","methods","openModal","path","$apiURL","defaults","headers","common","sessionStorage","getItem","get","then","response","filter","informe","id","tipo","parcelaName","catch","error","console","warn","$refs","EditarInformeForm","show","parcelaSelect","length","properties","unificaInformes","put","info","$parent","$emit","hide","mounted"],"sources":["src/components/EditarInforme.vue"],"sourcesContent":["<template>\r\n    <cv-modal\r\n        :auto-hide-off=\"false\"\r\n        ref=\"EditarInformeForm\"\r\n        @primary-click=\"unificaInformes\"\r\n        @secondary-click=\"$refs.unificarInformeForm.hide()\"\r\n        :close-aria-label=\"`Close`\"\r\n    >\r\n        <template v-if=\"true\" slot=\"label\"></template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t('graficos.modifica_infor')}}</template>\r\n        <template v-if=\"true\" slot=\"content\" id=\"contenido\">\r\n            <div class=\"bx--grid bx--grid--condensed\">\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Nombre de Informe -->\r\n                        <div class=\"bx--form-item\">\r\n                            <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre_informe')}}</label>\r\n                            <input v-model=\"nombreInformeNew\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\" :placeholder=\"text_input_label\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {{allParcelsOfEnterprises}}\r\n        </template>\r\n        <template v-if=\"true\" slot=\"secondary-button\">{{$t('graficos.cancelar')}}</template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t('graficos.guardar')}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"UnificarInforme\",\r\n    props: {\r\n        informesSeleccionados: Array(),\r\n        historico: Array(),\r\n        allParcelsOfEnterprises: Array()\r\n    },\r\n    data() {\r\n        return {\r\n            title_card: `Modificar Informe`,\r\n            text_input_label: `Nombre del Informe`,\r\n            nombreInformeNew: '',\r\n            alias: ``,\r\n            parcela: Object(),\r\n            mensajeAlerta: ``,\r\n            tipoAlerta: `error`\r\n        }\r\n    },\r\n    methods: {\r\n        openModal(){\r\n            let path = `${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                if(!response.data.alias){\r\n                    this.parcela = this.historico.filter(informe => {\r\n                        if(informe.id == this.informesSeleccionados[0]){\r\n                            this.nombreInformeNew = (informe.tipo == 1) ? this.parcelaName(informe.parcela) : informe.parcela\r\n                        }\r\n                    })\r\n                }else{\r\n                    this.nombreInformeNew = response.data.alias\r\n                }\r\n            })\r\n            .catch(error =>{\r\n                console.warn(error)\r\n            })\r\n            this.$refs.EditarInformeForm.show()\r\n        },\r\n        parcelaName(id){\r\n            const parcelaSelect = this.allParcelsOfEnterprises.filter((parcela)=>{\r\n                return parcela.id == id\r\n            })            \r\n            if(parcelaSelect.length > 0){\r\n                return parcelaSelect[0].properties.name\r\n            }else{\r\n                this.parcela = {tipo: 1}\r\n                return 'GrÃ¡fico Generado de Parcela Eliminada'\r\n            }\r\n        },\r\n        unificaInformes(){\r\n            const path = `${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            if(this.parcela.tipo == 1){\r\n                axios\r\n                .put(path, {\r\n                    alias: this.nombreInformeNew\r\n                })\r\n                .then(response => {\r\n                    console.info(response)\r\n                    this.$parent.mensajeAlerta = `Informe Guardado correctamente`\r\n                    this.$parent.tipoAlerta = 'success'\r\n                    this.$emit('mensajeAlerta', `Informe Guardado correctamente`)\r\n                    this.$emit('tipoAlerta', `success`)\r\n                    this.$emit('verAlerta')\r\n                    this.$emit('getInformesAnt')\r\n                    this.$refs.EditarInformeForm.hide()\r\n                })\r\n                .catch((error) =>{\r\n                    console.warn(error)\r\n                })\r\n            }else{\r\n                axios\r\n                .put(path, {\r\n                    parcela: this.nombreInformeNew\r\n                })\r\n                .then(response => {\r\n                    console.info(response)\r\n                    this.$parent.mensajeAlerta = `Informe Guardado correctamente`\r\n                    this.$parent.tipoAlerta = 'success'\r\n                    this.$emit('mensajeAlerta', `Informe Guardado correctamente`)\r\n                    this.$emit('tipoAlerta', `success`)\r\n                    this.$emit('verAlerta')\r\n                    this.$emit('getInformesAnt')\r\n                    this.$refs.EditarInformeForm.hide()\r\n                })\r\n                .catch((error) =>{\r\n                    console.warn(error)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    mounted: function () {\r\n        console.info('Pruebas')\r\n    },\r\n}\r\n</script>"],"mappings":"AA6BA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,qBAAA,EAAAC,KAAA;IACAC,SAAA,EAAAD,KAAA;IACAE,uBAAA,EAAAF,KAAA;EACA;EACAG,KAAA;IACA;MACAC,UAAA;MACAC,gBAAA;MACAC,gBAAA;MACAC,KAAA;MACAC,OAAA,EAAAC,MAAA;MACAC,aAAA;MACAC,UAAA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,IAAAC,IAAA,WAAAC,OAAA,kBAAAhB,qBAAA;MACAH,KAAA,CAAAoB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAC,cAAA,CAAAC,OAAA;MACAxB,KAAA,CACAyB,GAAA,CAAAP,IAAA,EACAQ,IAAA,CAAAC,QAAA;QACA,KAAAA,QAAA,CAAApB,IAAA,CAAAI,KAAA;UACA,KAAAC,OAAA,QAAAP,SAAA,CAAAuB,MAAA,CAAAC,OAAA;YACA,IAAAA,OAAA,CAAAC,EAAA,SAAA3B,qBAAA;cACA,KAAAO,gBAAA,GAAAmB,OAAA,CAAAE,IAAA,aAAAC,WAAA,CAAAH,OAAA,CAAAjB,OAAA,IAAAiB,OAAA,CAAAjB,OAAA;YACA;UACA;QACA;UACA,KAAAF,gBAAA,GAAAiB,QAAA,CAAApB,IAAA,CAAAI,KAAA;QACA;MACA,GACAsB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,IAAA,CAAAF,KAAA;MACA;MACA,KAAAG,KAAA,CAAAC,iBAAA,CAAAC,IAAA;IACA;IACAP,YAAAF,EAAA;MACA,MAAAU,aAAA,QAAAlC,uBAAA,CAAAsB,MAAA,CAAAhB,OAAA;QACA,OAAAA,OAAA,CAAAkB,EAAA,IAAAA,EAAA;MACA;MACA,IAAAU,aAAA,CAAAC,MAAA;QACA,OAAAD,aAAA,IAAAE,UAAA,CAAAzC,IAAA;MACA;QACA,KAAAW,OAAA;UAAAmB,IAAA;QAAA;QACA;MACA;IACA;IACAY,gBAAA;MACA,MAAAzB,IAAA,WAAAC,OAAA,kBAAAhB,qBAAA;MACAH,KAAA,CAAAoB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAC,cAAA,CAAAC,OAAA;MACA,SAAAZ,OAAA,CAAAmB,IAAA;QACA/B,KAAA,CACA4C,GAAA,CAAA1B,IAAA;UACAP,KAAA,OAAAD;QACA,GACAgB,IAAA,CAAAC,QAAA;UACAQ,OAAA,CAAAU,IAAA,CAAAlB,QAAA;UACA,KAAAmB,OAAA,CAAAhC,aAAA;UACA,KAAAgC,OAAA,CAAA/B,UAAA;UACA,KAAAgC,KAAA;UACA,KAAAA,KAAA;UACA,KAAAA,KAAA;UACA,KAAAA,KAAA;UACA,KAAAV,KAAA,CAAAC,iBAAA,CAAAU,IAAA;QACA,GACAf,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAC,IAAA,CAAAF,KAAA;QACA;MACA;QACAlC,KAAA,CACA4C,GAAA,CAAA1B,IAAA;UACAN,OAAA,OAAAF;QACA,GACAgB,IAAA,CAAAC,QAAA;UACAQ,OAAA,CAAAU,IAAA,CAAAlB,QAAA;UACA,KAAAmB,OAAA,CAAAhC,aAAA;UACA,KAAAgC,OAAA,CAAA/B,UAAA;UACA,KAAAgC,KAAA;UACA,KAAAA,KAAA;UACA,KAAAA,KAAA;UACA,KAAAA,KAAA;UACA,KAAAV,KAAA,CAAAC,iBAAA,CAAAU,IAAA;QACA,GACAf,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAC,IAAA,CAAAF,KAAA;QACA;MACA;IACA;EACA;EACAe,OAAA,WAAAA,CAAA;IACAd,OAAA,CAAAU,IAAA;EACA;AACA","ignoreList":[]}]}