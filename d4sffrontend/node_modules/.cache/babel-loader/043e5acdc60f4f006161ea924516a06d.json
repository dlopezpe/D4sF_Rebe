{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\UnificarInforme.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\UnificarInforme.vue","mtime":1681217492538},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\babel.config.js","mtime":1681217492507},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVW5pZmljYXJJbmZvcm1lIiwKICBwcm9wczogewogICAgaW5mb3JtZXNTZWxsOiBbXSwKICAgIGluZm9ybWVzU2VsZWNjaW9uYWRvczogQXJyYXkoKSwKICAgIGhpc3RvcmljbzogQXJyYXkoKSwKICAgIHRpcG86IFN0cmluZygpLAogICAgY2FwYTogU3RyaW5nKCksCiAgICBlbnRlcnByaXNlSUQ6IFN0cmluZygpLAogICAgYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXM6IEFycmF5KCkKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZV9jYXJkOiB0aGlzLiR0KCdncmFmaWNvcy51bmlmaWNhcl9pbmZvcm1lcycpLAogICAgICB0ZXh0X2lucHV0X2xhYmVsOiB0aGlzLiR0KCdncmFmaWNvcy5ub21icmUnKSwKICAgICAgbGFiZWxfY2hlY2s6IHRoaXMuJHQoJ2dyYWZpY29zLmVsaW1pbmFyX2luZm9ybWVfb3JpZ2luJyksCiAgICAgIGNvbHVtbnNIaXN0b3JpY286IFt0aGlzLiR0KCdncmFmaWNvcy5wYXJjZWxhcycpLCB0aGlzLiR0KCdncmFmaWNvcy5yYW5nb19mZWNoYXNfc2VsJyksIHsKICAgICAgICAnbGFiZWwnOiB0aGlzLiR0KCdncmFmaWNvcy5jcmVhZG8nKQogICAgICB9XSwKICAgICAgbm9tYnJlSW5mb3JtZU5ldzogJycsCiAgICAgIGNoZWNrRGVsbEluZm9ybWU6IGZhbHNlLAogICAgICBhbGlhczogYGAKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBwYXJjZWxhTmFtZShpZCkgewogICAgICBjb25zdCBwYXJjZWxhU2VsZWN0ID0gdGhpcy5hbGxQYXJjZWxzT2ZFbnRlcnByaXNlcy5maWx0ZXIocGFyY2VsYSA9PiB7CiAgICAgICAgcmV0dXJuIHBhcmNlbGEuaWQgPT0gaWQ7CiAgICAgIH0pOwogICAgICBpZiAocGFyY2VsYVNlbGVjdC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHBhcmNlbGFTZWxlY3RbMF0ucHJvcGVydGllcy5uYW1lOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnR3LDoWZpY28gR2VuZXJhZG8gZGUgUGFyY2VsYSBFbGltaW5hZGEnOwogICAgICB9CiAgICB9LAogICAgZGF0ZUZvcm1hdChkYXRlKSB7CiAgICAgIGNvbnN0IGR0cyA9IGRhdGUuc3BsaXQoJ1QnKTsKICAgICAgcmV0dXJuIGR0c1swXTsKICAgIH0sCiAgICBvcGVuTW9kYWwoKSB7CiAgICAgIGlmIChwYXJzZUludCh0aGlzLnRpcG8pID09IDEpIHsKICAgICAgICB0aGlzLnBhcmNlbGEgPSB0aGlzLmluZm9ybWVzU2VsZWNjaW9uYWRvc1swXS5wYXJjZWxhOwogICAgICB9CiAgICAgIHRoaXMuJHJlZnMudW5pZmljYXJJbmZvcm1lRm9ybS5zaG93KCk7CiAgICB9LAogICAgdW5pZmljYUluZm9ybWVzKCkgewogICAgICBpZiAocGFyc2VJbnQodGhpcy50aXBvKSA9PSAyKSB7CiAgICAgICAgdGhpcy5wYXJjZWxhID0gdGhpcy5ub21icmVJbmZvcm1lTmV3OwogICAgICB9CiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLiRhcGlVUkx9L3VuaWZpY2FySW5mb3JtZS9gOwogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIik7CiAgICAgIGF4aW9zLnBvc3QocGF0aCwgewogICAgICAgIHBhcmNlbGE6IHRoaXMucGFyY2VsYSwKICAgICAgICB1cmxTZW50aW5lbDogWydwcnVlYmFzJ10sCiAgICAgICAgLy9hcnIgdXJsCiAgICAgICAgLy9mZWNoYXM6IGZlY2hhc1NlbnRpbmVsLCAvL0FyciBwYXJjZWxhcwogICAgICAgIHBvbHlnb246IFt0aGlzLmluZm9ybWVzU2VsZWNjaW9uYWRvc10sCiAgICAgICAgZW50ZXJwcmlzZV9pZDogdGhpcy5lbnRlcnByaXNlSUQsCiAgICAgICAgY2FwYTogdGhpcy5jYXBhLAogICAgICAgIHRpcG86IHRoaXMudGlwbywKICAgICAgICAvL2ZlY2hhRWxlZ2lkYTogdGhpcy5mZWNoYUdlbmVyYXIKICAgICAgICBjaGVja0RlbGxPdHJvczogdGhpcy5jaGVja0RlbGxJbmZvcm1lLAogICAgICAgIGFsaWFzOiB0aGlzLm5vbWJyZUluZm9ybWVOZXcKICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlKTsKICAgICAgICB0aGlzLiRwYXJlbnQubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ2dyYWZpY29zLmluZm9ybWVfZ2VuX29rJyk7CiAgICAgICAgdGhpcy4kcGFyZW50LnRpcG9BbGVydGEgPSAnc3VjY2Vzcyc7CiAgICAgICAgdGhpcy4kZW1pdCgnbWVuc2FqZUFsZXJ0YScsIHRoaXMuJHQoJ2dyYWZpY29zLmluZm9ybWVfZ2VuX29rJykpOwogICAgICAgIHRoaXMuJGVtaXQoJ3RpcG9BbGVydGEnLCBgc3VjY2Vzc2ApOwogICAgICAgIHRoaXMuJGVtaXQoJ3ZlckFsZXJ0YScpOwogICAgICAgIHRoaXMuJGVtaXQoJ2dldEluZm9ybWVzQW50Jyk7CiAgICAgICAgdGhpcy4kcmVmcy51bmlmaWNhckluZm9ybWVGb3JtLmhpZGUoKTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["axios","name","props","informesSell","informesSeleccionados","Array","historico","tipo","String","capa","enterpriseID","allParcelsOfEnterprises","data","title_card","$t","text_input_label","label_check","columnsHistorico","nombreInformeNew","checkDellInforme","alias","methods","parcelaName","id","parcelaSelect","filter","parcela","length","properties","dateFormat","date","dts","split","openModal","parseInt","$refs","unificarInformeForm","show","unificaInformes","path","$apiURL","defaults","headers","common","sessionStorage","getItem","post","urlSentinel","polygon","enterprise_id","checkDellOtros","then","response","console","info","$parent","mensajeAlerta","tipoAlerta","$emit","hide","catch","error","warn"],"sources":["src/components/UnificarInforme.vue"],"sourcesContent":["<template>\r\n    <cv-modal\r\n        :auto-hide-off=\"false\"\r\n        ref=\"unificarInformeForm\"\r\n        @primary-click=\"unificaInformes\"\r\n        @secondary-click=\"$refs.unificarInformeForm.hide()\"\r\n        :close-aria-label=\"`Close`\"\r\n    >\r\n        <template v-if=\"true\" slot=\"label\"></template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t('graficos.unificar_informes')}}</template>\r\n        <template v-if=\"true\" slot=\"content\" id=\"contenido\">\r\n            <div class=\"bx--grid bx--grid--condensed\">\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Nombre de Informe -->\r\n                        <div class=\"bx--form-item\">\r\n                            <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre')}}</label>\r\n                            <input v-model=\"nombreInformeNew\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\" :placeholder=\"$t('graficos.nombre')\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br>\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Resumen de Informes -->\r\n                        <div class=\"bx--form-item\">\r\n                            <cv-checkbox\r\n                                :label=\"label_check\"\r\n                                :checked=\"false\"\r\n                                value=\"true\"\r\n                                :mixed=\"false\"\r\n                                v-model=\"checkDellInforme\"\r\n                            >\r\n                            </cv-checkbox>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br>\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <h4>{{$t(\"graficos.resumen_unifica\")}}</h4>\r\n                        <p>{{$t(\"graficos.capa\")}} {{capa}}</p>\r\n                        <p>{{$t(\"graficos.tipo\")}} {{tipo}}</p>\r\n                        <cv-data-table\r\n                        :columns=\"[\r\n                this.$t('graficos.parcelas'),\r\n                this.$t('graficos.rango_fechas_sel'),\r\n                {\r\n                    'label': this.$t('graficos.creado'),\r\n                },\r\n            ]\" >\r\n                            <template slot=\"data\">\r\n                                <cv-data-table-row  v-for=\"informe in informesSeleccionados\" :value=\"String(informe.id)\" :key=\"String(informe.id)\">\r\n                                    <cv-data-table-cell v-if=\"informe.tipo == 1\">\r\n                                        {{parcelaName(informe.parcela)}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell v-else>\r\n                                        {{informe.parcela}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell>\r\n                                        {{informe.finifin}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell>\r\n                                        {{dateFormat(informe.created)}}\r\n                                    </cv-data-table-cell>\r\n                                </cv-data-table-row>\r\n                            </template>\r\n                        </cv-data-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template v-if=\"true\" slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t(\"graficos.unificar\")}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"UnificarInforme\",\r\n    props: {\r\n        informesSell: [],\r\n        informesSeleccionados: Array(),\r\n        historico: Array(),\r\n        tipo: String(),\r\n        capa: String(),\r\n        enterpriseID: String(),\r\n        allParcelsOfEnterprises: Array()\r\n    },\r\n    data() {\r\n        return {\r\n            title_card: this.$t('graficos.unificar_informes'),\r\n            text_input_label: this.$t('graficos.nombre'),\r\n            label_check: this.$t('graficos.eliminar_informe_origin'),\r\n            columnsHistorico: [\r\n                this.$t('graficos.parcelas'),\r\n                this.$t('graficos.rango_fechas_sel'),\r\n                {\r\n                    'label': this.$t('graficos.creado'),\r\n                },\r\n            ],\r\n            nombreInformeNew: '',\r\n            checkDellInforme: false,\r\n            alias: ``\r\n        }\r\n    },\r\n    methods: {\r\n        parcelaName(id){\r\n            const parcelaSelect = this.allParcelsOfEnterprises.filter((parcela)=>{\r\n                return parcela.id == id\r\n            })            \r\n            if(parcelaSelect.length > 0){\r\n                return parcelaSelect[0].properties.name\r\n            }else{\r\n                return 'Gráfico Generado de Parcela Eliminada'\r\n            }\r\n        },\r\n        dateFormat(date){\r\n            const dts = date.split('T')\r\n            return dts[0]\r\n        },\r\n        openModal(){\r\n            if(parseInt(this.tipo) == 1){\r\n                this.parcela = this.informesSeleccionados[0].parcela\r\n            }\r\n            this.$refs.unificarInformeForm.show()\r\n        },\r\n        unificaInformes(){\r\n            if(parseInt(this.tipo) == 2){\r\n                this.parcela = this.nombreInformeNew\r\n            }\r\n            const path = `${this.$apiURL}/unificarInforme/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .post(path, {\r\n                parcela: this.parcela,\r\n                urlSentinel: ['pruebas'], //arr url\r\n                //fechas: fechasSentinel, //Arr parcelas\r\n                polygon: [this.informesSeleccionados],\r\n                enterprise_id: this.enterpriseID,\r\n                capa: this.capa,\r\n                tipo: this.tipo,\r\n                //fechaElegida: this.fechaGenerar\r\n                checkDellOtros: this.checkDellInforme,\r\n                alias: this.nombreInformeNew\r\n            })\r\n            .then(response => {\r\n                console.info(response)\r\n                this.$parent.mensajeAlerta = this.$t('graficos.informe_gen_ok')\r\n                this.$parent.tipoAlerta = 'success'\r\n                this.$emit('mensajeAlerta', this.$t('graficos.informe_gen_ok'))\r\n                this.$emit('tipoAlerta', `success`)\r\n                this.$emit('verAlerta')\r\n                this.$emit('getInformesAnt')\r\n                this.$refs.unificarInformeForm.hide()\r\n            })\r\n            .catch((error) =>{\r\n                console.warn(error)\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,YAAA;IACAC,qBAAA,EAAAC,KAAA;IACAC,SAAA,EAAAD,KAAA;IACAE,IAAA,EAAAC,MAAA;IACAC,IAAA,EAAAD,MAAA;IACAE,YAAA,EAAAF,MAAA;IACAG,uBAAA,EAAAN,KAAA;EACA;EACAO,KAAA;IACA;MACAC,UAAA,OAAAC,EAAA;MACAC,gBAAA,OAAAD,EAAA;MACAE,WAAA,OAAAF,EAAA;MACAG,gBAAA,GACA,KAAAH,EAAA,uBACA,KAAAA,EAAA,+BACA;QACA,cAAAA,EAAA;MACA,EACA;MACAI,gBAAA;MACAC,gBAAA;MACAC,KAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAAC,EAAA;MACA,MAAAC,aAAA,QAAAb,uBAAA,CAAAc,MAAA,CAAAC,OAAA;QACA,OAAAA,OAAA,CAAAH,EAAA,IAAAA,EAAA;MACA;MACA,IAAAC,aAAA,CAAAG,MAAA;QACA,OAAAH,aAAA,IAAAI,UAAA,CAAA3B,IAAA;MACA;QACA;MACA;IACA;IACA4B,WAAAC,IAAA;MACA,MAAAC,GAAA,GAAAD,IAAA,CAAAE,KAAA;MACA,OAAAD,GAAA;IACA;IACAE,UAAA;MACA,IAAAC,QAAA,MAAA3B,IAAA;QACA,KAAAmB,OAAA,QAAAtB,qBAAA,IAAAsB,OAAA;MACA;MACA,KAAAS,KAAA,CAAAC,mBAAA,CAAAC,IAAA;IACA;IACAC,gBAAA;MACA,IAAAJ,QAAA,MAAA3B,IAAA;QACA,KAAAmB,OAAA,QAAAR,gBAAA;MACA;MACA,MAAAqB,IAAA,WAAAC,OAAA;MACAxC,KAAA,CAAAyC,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAC,cAAA,CAAAC,OAAA;MACA7C,KAAA,CACA8C,IAAA,CAAAP,IAAA;QACAb,OAAA,OAAAA,OAAA;QACAqB,WAAA;QAAA;QACA;QACAC,OAAA,QAAA5C,qBAAA;QACA6C,aAAA,OAAAvC,YAAA;QACAD,IAAA,OAAAA,IAAA;QACAF,IAAA,OAAAA,IAAA;QACA;QACA2C,cAAA,OAAA/B,gBAAA;QACAC,KAAA,OAAAF;MACA,GACAiC,IAAA,CAAAC,QAAA;QACAC,OAAA,CAAAC,IAAA,CAAAF,QAAA;QACA,KAAAG,OAAA,CAAAC,aAAA,QAAA1C,EAAA;QACA,KAAAyC,OAAA,CAAAE,UAAA;QACA,KAAAC,KAAA,uBAAA5C,EAAA;QACA,KAAA4C,KAAA;QACA,KAAAA,KAAA;QACA,KAAAA,KAAA;QACA,KAAAvB,KAAA,CAAAC,mBAAA,CAAAuB,IAAA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAR,OAAA,CAAAS,IAAA,CAAAD,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}