{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\mapController\\ControllerQuickEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\mapController\\ControllerQuickEdit.vue","mtime":1709553265792},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\babel.config.js","mtime":1681217492507},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBwdXRQYXJjZWxQb2x5Z29uLCBnZXRFbnRlcnByaXNlLCBzZXRQYXJjZWxzRm9ySW5zdGFuY2UsIGRlbGV0ZVBhcmNlbCB9IGZyb20gJ0AvY3J1ZEZ1bmN0aW9ucy9jcnVkRW50ZXJwcmlzZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29udHJvbGxlclF1aWNrRWRpdCcsCiAgcHJvcHM6IHsKICAgIHBhcmNlbFNlbGVjdGVkOiBPYmplY3QsCiAgICB2ZXJFcnJvckRyYXc6IEJvb2xlYW4sCiAgICBlcnJvckRyYXdNc2c6IFN0cmluZywKICAgIGNvb3JkaW5hdGVzUG9seTogU3RyaW5nLAogICAgdmFsdWVEZXNjOiBTdHJpbmcsCiAgICB2YWx1ZU5hbWU6IFN0cmluZywKICAgIGFyckVudGVycHJpc2VzOiBBcnJheSwKICAgIGFyckNvb3BlcmF0aXZhczogQXJyYXksCiAgICBhcmVhRm9yTmV3UG9seWdvbjogTnVtYmVyCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW52YWxpZE1lc3NhZ2VEZXNjOiAnJywKICAgICAgaW52YWxpZE1lc3NhZ2VOYW1lOiAnJywKICAgICAgdmlzaWJsZUFsZXJ0YUVsaW1pbmFyOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHt9LAogIG1ldGhvZHM6IHsKICAgIGd1YXJkYWRvUG9saWdvbm8oKSB7CiAgICAgIGxldCBmbGFnID0gZmFsc2U7CiAgICAgIGlmICh0aGlzLnZhbHVlTmFtZSA9PSAnJykgewogICAgICAgIHRoaXMuaW52YWxpZE1lc3NhZ2VOYW1lID0gdGhpcy4kdCgibmV3RW50ZXJwcmlzZS5jYW1wb19yZXF1ZXJpZG8iKTsKICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoZmxhZykgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5hcmVhRm9yTmV3UG9seWdvbiA9PT0gMCkgewogICAgICAgIHRoaXMuYXJlYUZvck5ld1BvbHlnb24gPSB0aGlzLnBhcmNlbFNlbGVjdGVkLnByb3BlcnRpZXMuYXJlYTsKICAgICAgfQogICAgICBwdXRQYXJjZWxQb2x5Z29uKHRoaXMuY29vcmRpbmF0ZXNQb2x5LCB0aGlzLnBhcmNlbFNlbGVjdGVkLmlkLCB0aGlzLnZhbHVlTmFtZSwgdGhpcy52YWx1ZURlc2MsIHRoaXMuYXJlYUZvck5ld1BvbHlnb24pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGdldEVudGVycHJpc2UocmVzcG9uc2UuZGF0YS5lbnRlcnByaXNlKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnN0IGFsbENvb3JkaW5hdGVzID0gQXJyYXkoKTsKICAgICAgICAgIGNvbnN0IGFyclBhcmNlbHMgPSBbXTsKCiAgICAgICAgICAvL2NvbnN0IGVudGVycHJpc2UgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmFyckVudGVycHJpc2VzLmZpbHRlcihlbnRlcnByaXNlID0+IGVudGVycHJpc2UuaWQgPT0gcmVzcG9uc2UuZGF0YS5pZCk7CiAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PSAxICYmIHRoaXMuYXJyRW50ZXJwcmlzZXMubGVuZ3RoID4gMSkgewogICAgICAgICAgICBjb25zdCBwb3NFbnRlcnByaXNlID0gdGhpcy5hcnJFbnRlcnByaXNlcy5pbmRleE9mKHJlc3VsdFswXSk7CiAgICAgICAgICAgIHRoaXMuYXJyRW50ZXJwcmlzZXNbcG9zRW50ZXJwcmlzZV0gPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB0aGlzLmFyckVudGVycHJpc2VzLm1hcChlbnRlcnByaXNlID0+IHsKICAgICAgICAgICAgICBlbnRlcnByaXNlLnBhcmNlbHMuZmVhdHVyZXMubWFwKHBhcmNlbCA9PiB7CiAgICAgICAgICAgICAgICBhcnJQYXJjZWxzLnB1c2gocGFyY2VsKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsKICAgICAgICAgICAgICBhbGxDb29yZGluYXRlcy5wdXNoKHBhcmNlbC5nZW9tZXRyeS5jb29yZGluYXRlcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5hcnJFbnRlcnByaXNlc1swXSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsKICAgICAgICAgICAgICBhbGxDb29yZGluYXRlcy5wdXNoKHBhcmNlbC5nZW9tZXRyeS5jb29yZGluYXRlcyk7CiAgICAgICAgICAgICAgYXJyUGFyY2Vscy5wdXNoKHBhcmNlbCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgc2V0UGFyY2Vsc0Zvckluc3RhbmNlKHJlc3BvbnNlLmRhdGEubmFtZSwgYWxsQ29vcmRpbmF0ZXMsIHJlc3BvbnNlLmRhdGEuc2VudGluZWxfaW5zdGFuY2UpLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRTZW50aW5lbENsZWFyQ2FjaGUnKTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2V0Y29vcmRpbmF0ZXNQb2x5JywgJycpOwogICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRpZlF1aWNrRWRpdCcsIGZhbHNlKTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2V0dmVyRXJyb3JEcmF3JywgZmFsc2UpOwogICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRFbnRlcnByaXNlJywgdGhpcy5hcnJFbnRlcnByaXNlcyk7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldEFsbFBhcmNlbHNPZkVudGVycHJpc2VzJywgYXJyUGFyY2Vscyk7CiAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gY29uc29sZS5pbmZvKGVycikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxhckVkaWNpb24oKSB7CiAgICAgIHsKICAgICAgICB0aGlzLiRlbWl0KCdzZXRTZW50aW5lbENsZWFyQ2FjaGUnKTsKICAgICAgICB0aGlzLiRlbWl0KCdzZXRjb29yZGluYXRlc1BvbHknLCAnJyk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2V0aWZRdWlja0VkaXQnLCBmYWxzZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2V0dmVyRXJyb3JEcmF3JywgZmFsc2UpOwogICAgICAgIHRoaXMuJGVtaXQoJ3NldENsZWFyUGFyY2VscycpOwoKICAgICAgICAvLyB0b2RvIDogZWR1YXJkbwogICAgICAgIHRoaXMuJGVtaXQoJ3NldFZlckNyZWFyUGFyY2VsJywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2V0VmVyQ3JlYXJQYXJjZWxEcmF3JywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2V0dmVyZ3VhcmRhZG9PSycsIGZhbHNlKTsKICAgICAgICB0aGlzLiRlbWl0KCdzZXRDbGVhckZlYXR1cmVzJyk7CiAgICAgICAgdGhpcy4kZW1pdCgnY2xlYXJDYWNoZURyYXcnKTsKICAgICAgfQogICAgfSwKICAgIGVsaW1pbmFyUG9saWdvbm8oKSB7CiAgICAgIHRoaXMuJHJlZnMuYWxlcnRhX2VsaW1pbmFyLmRhdGFWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBsaW1waWFyRGlidWpvKCkgewogICAgICAvKiB0aGlzLiRlbWl0KCdzZXRDbGVhckZlYXR1cmVzJykNCiAgICAgIHRoaXMuJGVtaXQoJ3NldFNlbnRpbmVsQ2xlYXJDYWNoZScpDQogICAgICB0aGlzLiRlbWl0KCdzZXRjb29yZGluYXRlc1BvbHknLCAnJykgKi8KCiAgICAgIHRoaXMuJGVtaXQoJ3NldENsZWFyRmVhdHVyZXMnKTsKICAgICAgdGhpcy4kZW1pdCgnc2V0VmVyQ3JlYXJQYXJjZWwnLCBmYWxzZSk7CiAgICAgIHRoaXMuJGVtaXQoJ3NldFZlckNyZWFyUGFyY2VsRHJhdycsIGZhbHNlKTsKICAgICAgdGhpcy4kZW1pdCgnc2V0dmVyRXJyb3JEcmF3JywgdHJ1ZSk7CgogICAgICAvL3RoaXMuJGVtaXQoJ3NldGlmUXVpY2tFZGl0JywgZmFsc2UpCiAgICAgIC8vdGhpcy4kZW1pdCgnc2V0dmVyRXJyb3JEcmF3JywgZmFsc2UpCiAgICB9LAogICAgY29uZmlybWFFbGltYXIoKSB7CiAgICAgIC8qKg0KICAgICAgICogdGhpcy5wYXJjZWxTZWxlY3RlZC5pZA0KICAgICAgICogdGhpcy5wYXJjZWxTZWxlY3RlZC5wcm9wZXJ0aWVzLmVudGVycHJpc2VfaWQNCiAgICAgICAqLwogICAgICBkZWxldGVQYXJjZWwodGhpcy5wYXJjZWxTZWxlY3RlZC5pZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGdldEVudGVycHJpc2UodGhpcy5wYXJjZWxTZWxlY3RlZC5wcm9wZXJ0aWVzLmVudGVycHJpc2VfaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3QgYWxsQ29vcmRpbmF0ZXMgPSBBcnJheSgpOwogICAgICAgICAgY29uc3QgYXJyUGFyY2VscyA9IFtdOwoKICAgICAgICAgIC8vY29uc3QgZW50ZXJwcmlzZSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYXJyRW50ZXJwcmlzZXMuZmlsdGVyKGVudGVycHJpc2UgPT4gZW50ZXJwcmlzZS5pZCA9PSByZXNwb25zZS5kYXRhLmlkKTsKICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09IDEgJiYgdGhpcy5hcnJFbnRlcnByaXNlcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgIGNvbnN0IHBvc0VudGVycHJpc2UgPSB0aGlzLmFyckVudGVycHJpc2VzLmluZGV4T2YocmVzdWx0WzBdKTsKICAgICAgICAgICAgdGhpcy5hcnJFbnRlcnByaXNlc1twb3NFbnRlcnByaXNlXSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIHRoaXMuYXJyRW50ZXJwcmlzZXMubWFwKGVudGVycHJpc2UgPT4gewogICAgICAgICAgICAgIGVudGVycHJpc2UucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsKICAgICAgICAgICAgICAgIGFyclBhcmNlbHMucHVzaChwYXJjZWwpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5wYXJjZWxzLmZlYXR1cmVzLm1hcChwYXJjZWwgPT4gewogICAgICAgICAgICAgIGFsbENvb3JkaW5hdGVzLnB1c2gocGFyY2VsLmdlb21ldHJ5LmNvb3JkaW5hdGVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmFyckVudGVycHJpc2VzWzBdID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5wYXJjZWxzLmZlYXR1cmVzLm1hcChwYXJjZWwgPT4gewogICAgICAgICAgICAgIGFsbENvb3JkaW5hdGVzLnB1c2gocGFyY2VsLmdlb21ldHJ5LmNvb3JkaW5hdGVzKTsKICAgICAgICAgICAgICBhcnJQYXJjZWxzLnB1c2gocGFyY2VsKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnBhcmNlbGFTZWxlY2Npb25hZGEgPSAwOwogICAgICAgICAgdGhpcy4kcmVmcy5hbGVydGFfZWxpbWluYXIuZGF0YVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgIHRoaXMubW9udGFyTWFwYSgpOwogICAgICAgICAgdGhpcy5jYW5jZWxhckVkaWNpb24oKTsKICAgICAgICAgIC8qc2V0UGFyY2Vsc0Zvckluc3RhbmNlKHJlc3BvbnNlLmRhdGEubmFtZSwgYWxsQ29vcmRpbmF0ZXMsIHJlc3BvbnNlLmRhdGEuc2VudGluZWxfaW5zdGFuY2UpDQogICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRTZW50aW5lbENsZWFyQ2FjaGUnKQ0KICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRjb29yZGluYXRlc1BvbHknLCAnJykNCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2V0aWZRdWlja0VkaXQnLCBmYWxzZSkNCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2V0dmVyRXJyb3JEcmF3JywgZmFsc2UpDQogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldEVudGVycHJpc2UnLCB0aGlzLmFyckVudGVycHJpc2VzKQ0KICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRBbGxQYXJjZWxzT2ZFbnRlcnByaXNlcycsIGFyclBhcmNlbHMpDQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUuaW5mbyhlcnIpKSovCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiBjb25zb2xlLmluZm8oZXJyKSk7CgogICAgICAvKg0KICAgICAgaWYodGhpcy5wYXJjZWxhU2VsZWNjaW9uYWRhKXsNCiAgICAgICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9wYXJjZWxzLyR7dGhpcy5wYXJjZWxhU2VsZWNjaW9uYWRhfS9gDQogICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgIGF4aW9zDQogICAgICAgICAgLmRlbGV0ZShwYXRoKQ0KICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5wYXJjZWxhU2VsZWNjaW9uYWRhID0gMA0KICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YV9lbGltaW5hci5kYXRhVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgIHRoaXMubW9udGFyTWFwYSgpOw0KICAgICAgICAgICAgICB0aGlzLmNhbmNlbGFyRWRpY2lvbigpDQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2gocmVzcG9uc2UgPT57DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmVycm9yKQ0KICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgKi8KICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHt9LAogIGJlZm9yZUNyZWF0ZSgpIHt9Cn07"},{"version":3,"names":["putParcelPolygon","getEnterprise","setParcelsForInstance","deleteParcel","name","props","parcelSelected","Object","verErrorDraw","Boolean","errorDrawMsg","String","coordinatesPoly","valueDesc","valueName","arrEnterprises","Array","arrCooperativas","areaForNewPolygon","Number","data","invalidMessageDesc","invalidMessageName","visibleAlertaEliminar","components","methods","guardadoPoligono","flag","$t","properties","area","id","then","response","enterprise","allCoordinates","arrParcels","result","filter","length","posEnterprise","indexOf","map","parcels","features","parcel","push","geometry","coordinates","sentinel_instance","$emit","catch","err","console","info","cancelarEdicion","eliminarPoligono","$refs","alerta_eliminar","dataVisible","limpiarDibujo","confirmaElimar","enterprise_id","parcelaSeleccionada","montarMapa","mounted","beforeCreate"],"sources":["src/components/mapController/ControllerQuickEdit.vue"],"sourcesContent":["<template>\r\n    <div id=\"control_der\">\r\n        <div id=\"edicionParcela\">\r\n            <p>{{$t(\"map.edit_rapido\")}} - {{parcelSelected.properties.name}}</p>\r\n            <div class=\"errorDraw\" v-if=\"verErrorDraw\"><br>{{`${errorDrawMsg}`}}</div>\r\n            <br>\r\n            <cv-text-input\r\n                :label=\"'Nombre de la parcela'\"\r\n                :value=\"valueName\"\r\n                :disabled=\"false\"\r\n                :type=\"'text'\"\r\n                :invalid-message=\"invalidMessageName\"\r\n                ref=\"inputName\"\r\n                id=\"input-MIRLwtCq\"\r\n                v-model=\"valueName\">\r\n            </cv-text-input>\r\n            <br>\r\n            <cv-text-input\r\n                :label=\"'Descripción'\"\r\n                :value=\"valueDesc\"\r\n                :disabled=\"false\"\r\n                :type=\"'text'\"\r\n                :invalid-message=\"invalidMessageDesc\"\r\n                ref=\"inputDesc\"\r\n                id=\"input-3zcRveTf\"\r\n                v-model=\"valueDesc\"\r\n            ></cv-text-input>\r\n            <br>\r\n            <!-- D4SF-79 -->\r\n            Area {{parcelSelected.properties.area ? parcelSelected.properties.area : areaForNewPolygon}}\r\n            <!-- Area {{areaForNewPolygon ? areaForNewPolygon : parcelSelected.properties.area}} -->\r\n            <br>\r\n            <br>\r\n            <cv-button\r\n                kind=\"primary\"\r\n                size=\"small\"\r\n                :disabled=\"verErrorDraw\"\r\n                @click=\"guardadoPoligono\"\r\n            >\r\n                {{$t(\"map.guardar\")}}\r\n            </cv-button>\r\n            <cv-button\r\n                kind=\"danger\"\r\n                size=\"small\"\r\n                :disabled=\"false\"\r\n                @click=\"cancelarEdicion\"\r\n            >\r\n                {{$t(\"map.cancelar\")}}\r\n            </cv-button>\r\n            <br>\r\n            <br>\r\n            <hr>\r\n            <br>\r\n            <p>{{$t(\"map.elimina_parcela\")}}</p>\r\n            <br>\r\n            <cv-button\r\n                style=\"width: 100%\"\r\n                kind=\"danger\"\r\n                size=\"small\"\r\n                :disabled=\"false\"\r\n                @click=\"eliminarPoligono\"\r\n            >\r\n            {{$t(\"map.eliminar\")}}\r\n            </cv-button>\r\n            <br>\r\n            <br>\r\n            <cv-button\r\n                style=\"width: 100%\"\r\n                kind=\"primary\"\r\n                size=\"small\"\r\n                :disabled=\"false\"\r\n                @click=\"limpiarDibujo\"\r\n            >\r\n                Volver a dibujar\r\n            </cv-button>\r\n        </div>\r\n        <cv-modal\r\n        ref=\"alerta_eliminar\"\r\n        kind=\"danger\"\r\n        :visible=\"visibleAlertaEliminar\"\r\n        @primary-click=\"confirmaElimar\">\r\n            <template slot=\"label\">{{$t(\"map.seguro\")}}</template>\r\n            <template slot=\"title\">{{$t(\"map.eliminar\")}}</template>\r\n            <template slot=\"content\">\r\n            <p>{{$t(\"map.seguro_parcel_del\")}} {{valueName}}?</p>\r\n            </template>\r\n            <template slot=\"secondary-button\">{{$t(\"map.cancelar\")}}</template>\r\n            <template slot=\"primary-button\">{{$t(\"map.eliminar\")}}</template>\r\n        </cv-modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {putParcelPolygon, getEnterprise, setParcelsForInstance, deleteParcel} from '@/crudFunctions/crudEnterprise'\r\nexport default {\r\n    name: 'ControllerQuickEdit',\r\n    props: {\r\n        parcelSelected: Object,\r\n        verErrorDraw: Boolean,\r\n        errorDrawMsg: String,\r\n        coordinatesPoly: String,\r\n        valueDesc: String,\r\n        valueName: String,\r\n        arrEnterprises: Array,\r\n        arrCooperativas: Array,\r\n        areaForNewPolygon: Number,\r\n    },\r\n    data() {\r\n        return {\r\n            invalidMessageDesc: '',\r\n            invalidMessageName: '',\r\n            visibleAlertaEliminar: false\r\n        }\r\n    },\r\n    components: {\r\n        \r\n    },\r\n    methods: {\r\n        guardadoPoligono(){\r\n            let flag = false\r\n            if(this.valueName == ''){\r\n                this.invalidMessageName = this.$t(\"newEnterprise.campo_requerido\")\r\n                flag = true\r\n            }\r\n            if(flag){\r\n                return false\r\n            }\r\n            if(this.areaForNewPolygon === 0){\r\n                this.areaForNewPolygon = this.parcelSelected.properties.area\r\n            }\r\n            putParcelPolygon(this.coordinatesPoly, this.parcelSelected.id, this.valueName, this.valueDesc, this.areaForNewPolygon)\r\n            .then(response => {\r\n                getEnterprise(response.data.enterprise)\r\n                .then(response => {\r\n                    const allCoordinates = Array();\r\n                    const arrParcels = []\r\n                    \r\n                    //const enterprise = response.data\r\n                    const result = this.arrEnterprises.filter(enterprise => enterprise.id == response.data.id)\r\n                    if(result.length == 1 && this.arrEnterprises.length > 1 ){\r\n                        const posEnterprise = this.arrEnterprises.indexOf(result[0])\r\n                        this.arrEnterprises[posEnterprise] = response.data\r\n                        this.arrEnterprises.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        response.data.parcels.features.map(parcel => {\r\n                            allCoordinates.push(parcel.geometry.coordinates)\r\n                        })\r\n                    }else{\r\n                        this.arrEnterprises[0] = response.data\r\n                        response.data.parcels.features.map(parcel => {\r\n                            allCoordinates.push(parcel.geometry.coordinates)\r\n                            arrParcels.push(parcel)\r\n                        })\r\n                    }\r\n                    \r\n                    setParcelsForInstance(response.data.name, allCoordinates, response.data.sentinel_instance)\r\n                    .then(() => {\r\n                        this.$emit('setSentinelClearCache')\r\n                        this.$emit('setcoordinatesPoly', '')\r\n                        this.$emit('setifQuickEdit', false)\r\n                        this.$emit('setverErrorDraw', false)\r\n                        this.$emit('setEnterprise', this.arrEnterprises)\r\n                        this.$emit('setAllParcelsOfEnterprises', arrParcels)\r\n                    })\r\n                    .catch(err => console.info(err))\r\n                })\r\n            })            \r\n        },\r\n        cancelarEdicion(){ {\r\n            this.$emit('setSentinelClearCache')\r\n            this.$emit('setcoordinatesPoly', '')\r\n            this.$emit('setifQuickEdit', false)\r\n            this.$emit('setverErrorDraw', false)\r\n            this.$emit('setClearParcels')\r\n\r\n\r\n            // todo : eduardo\r\n            this.$emit('setVerCrearParcel', true)\r\n            this.$emit('setVerCrearParcelDraw', true)\r\n            this.$emit('setverguardadoOK', false)\r\n            this.$emit('setClearFeatures')\r\n            this.$emit('clearCacheDraw')\r\n        }},\r\n        eliminarPoligono(){\r\n            this.$refs.alerta_eliminar.dataVisible = true\r\n        },\r\n        limpiarDibujo(){\r\n            \r\n            \r\n            \r\n            /* this.$emit('setClearFeatures')\r\n            this.$emit('setSentinelClearCache')\r\n            this.$emit('setcoordinatesPoly', '') */\r\n\r\n            \r\n\r\n             \r\n            this.$emit('setClearFeatures')\r\n            this.$emit('setVerCrearParcel', false)\r\n            this.$emit('setVerCrearParcelDraw', false)\r\n            \r\n            this.$emit('setverErrorDraw', true)\r\n\r\n            //this.$emit('setifQuickEdit', false)\r\n            //this.$emit('setverErrorDraw', false)\r\n        },\r\n        confirmaElimar(){\r\n            /**\r\n             * this.parcelSelected.id\r\n             * this.parcelSelected.properties.enterprise_id\r\n             */\r\n            deleteParcel(this.parcelSelected.id)\r\n            .then(response => {\r\n                console.info(response.data)\r\n                getEnterprise(this.parcelSelected.properties.enterprise_id)\r\n                .then(response => {\r\n                    const allCoordinates = Array();\r\n                    const arrParcels = []\r\n                    \r\n                    //const enterprise = response.data\r\n                    const result = this.arrEnterprises.filter(enterprise => enterprise.id == response.data.id)\r\n                    if(result.length == 1 && this.arrEnterprises.length > 1 ){\r\n                        const posEnterprise = this.arrEnterprises.indexOf(result[0])\r\n                        this.arrEnterprises[posEnterprise] = response.data\r\n                        this.arrEnterprises.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        response.data.parcels.features.map(parcel => {\r\n                            allCoordinates.push(parcel.geometry.coordinates)\r\n                        })\r\n                    }else{\r\n                        this.arrEnterprises[0] = response.data\r\n                        response.data.parcels.features.map(parcel => {\r\n                            allCoordinates.push(parcel.geometry.coordinates)\r\n                            arrParcels.push(parcel)\r\n                        })\r\n                    }\r\n                    this.parcelaSeleccionada = 0\r\n                    this.$refs.alerta_eliminar.dataVisible = false\r\n                    this.montarMapa();\r\n                    this.cancelarEdicion()\r\n                    /*setParcelsForInstance(response.data.name, allCoordinates, response.data.sentinel_instance)\r\n                    .then(() => {\r\n                        this.$emit('setSentinelClearCache')\r\n                        this.$emit('setcoordinatesPoly', '')\r\n                        this.$emit('setifQuickEdit', false)\r\n                        this.$emit('setverErrorDraw', false)\r\n                        this.$emit('setEnterprise', this.arrEnterprises)\r\n                        this.$emit('setAllParcelsOfEnterprises', arrParcels)\r\n                    })\r\n                    .catch(err => console.info(err))*/\r\n                })\r\n            })\r\n            .catch(err => console.info(err))\r\n            \r\n            /*\r\n            if(this.parcelaSeleccionada){\r\n                const path = `${this.$apiURL}/parcels/${this.parcelaSeleccionada}/`\r\n                axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n                axios\r\n                .delete(path)\r\n                .then(() => {\r\n                    this.parcelaSeleccionada = 0\r\n                    this.$refs.alerta_eliminar.dataVisible = false\r\n                    this.montarMapa();\r\n                    this.cancelarEdicion()\r\n                })\r\n                .catch(response =>{\r\n                    console.log(response.error)\r\n                });\r\n            }\r\n            */\r\n            \r\n        },\r\n    },\r\n    mounted: function () {\r\n        \r\n        \r\n    },\r\n    beforeCreate(){\r\n        \r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    #control_der{\r\n        margin-top: 58px;\r\n        padding: 10px;\r\n        background-color: #f4f4f4;\r\n        position: fixed;\r\n        top: 0px;\r\n        right: 8px;\r\n    }\r\n    .errorDraw{\r\n        color: #da1e28;\r\n        font-weight: 400;\r\n        font-size: 12px;\r\n    }\r\n</style>"],"mappings":"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","ignoreList":[]}]}