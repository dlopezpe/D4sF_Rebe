{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\adminActions\\GenGraficosAnterioresComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\adminActions\\GenGraficosAnterioresComponent.vue","mtime":1709553265783},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\babel.config.js","mtime":1681217492507},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5zZXQuZGlmZmVyZW5jZS52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5zZXQuaW50ZXJzZWN0aW9uLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnNldC5pcy1kaXNqb2ludC1mcm9tLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnNldC5pcy1zdWJzZXQtb2YudjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuc2V0LmlzLXN1cGVyc2V0LW9mLnYyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnNldC5zeW1tZXRyaWMtZGlmZmVyZW5jZS52Mi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5zZXQudW5pb24udjIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuZGVsZXRlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmhhcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5zaXplLmpzIjsKLy9pbXBvcnQge2dldFBhcmNlbHNOb3RTZW50aW5lbEluc3RhbmNlLCBwb3N0UGFyY2Vsc05vdFNlbnRpbmVsSW5zdGFuY2V9IGZyb20gJ0AvY3J1ZEZ1bmN0aW9ucy9jcnVkU2VudGluZWwuanMnCmltcG9ydCB7IGdldFByb2ZpbGUsIGdldFBlcm1pc29zIH0gZnJvbSAnQC9hdXRoL2luZGV4JzsKaW1wb3J0IHsgZ2V0QWxsRW50ZXJwcmlzZXMsIGdldEVudGVycHJpc2UsIGNyZWF0ZUluZm9ybWVzLCBnZXRJbmZvcm1lc0FudGVyaW9yZXNOZXcsIGdldEluZm9ybWVBbnRlcmlvckRhdGEsIGRlbEluZm9ybWVzQW50ZXJpb3Jlc05ldywgcHV0SW5mb3JtZXNVbmlmaWNhck5ldywgcHV0SW5mb3JtZXNBbnRlcmlvcmVzTmV3LCBnZXRVc2Vyc0xpc3QsIGdldFVzZXJzTGlzdFByb2ZpbGVzLCBnZW5lcmFyaW5mb3JtZSB9IGZyb20gJ0AvY3J1ZEZ1bmN0aW9ucy9jcnVkRW50ZXJwcmlzZSc7CmltcG9ydCB7IGdldEFsbENvb3BlcmF0aXZlcywgZ2V0Q29vcGVyYXRpdmUgfSBmcm9tICdAL2NydWRGdW5jdGlvbnMvY3J1ZENvb3BlcmF0aXZhcyc7CmltcG9ydCBTZW50SW1hZ2UgZnJvbSAnQC9jb21wb25lbnRzL2NoYXJ0c19uZXcvaW1hZ2VTZW50LnZ1ZSc7CmltcG9ydCBUYWJsZUNvbG9ycyBmcm9tICdAL2NvbXBvbmVudHMvY2hhcnRzX25ldy90YWJsZUNvbG9ycy52dWUnOwppbXBvcnQgVGFibGVDb2xvcnNNb2lzIGZyb20gJ0AvY29tcG9uZW50cy9jaGFydHNfbmV3L3RhYmxlQ29sb3JzTW9pcy52dWUnOwppbXBvcnQgQ2hhcnRMaW5lIGZyb20gJ0AvY29tcG9uZW50cy9jaGFydHNfbmV3L2NoYXJ0TGluZS52dWUnOwppbXBvcnQgQ2hhcnRMaW5lTW9pcyBmcm9tICdAL2NvbXBvbmVudHMvY2hhcnRzX25ldy9jaGFydExpbmVNb2lzLnZ1ZSc7CmltcG9ydCBDaGFydEJhciBmcm9tICdAL2NvbXBvbmVudHMvY2hhcnRzX25ldy9jaGFydEJhci52dWUnOwppbXBvcnQgQ2hhcnRCYXJNb2lzIGZyb20gJ0AvY29tcG9uZW50cy9jaGFydHNfbmV3L2NoYXJ0QmFyTW9pcy52dWUnOwppbXBvcnQgQWxlcnRhR2VuZXJhbCBmcm9tICJAL2NvbXBvbmVudHMvQWxlcnRhR2VuZXJhbCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGFyY2Vsc1RvU2VudGluZWxDb21wb25lbnQnLAogIGNvbXBvbmVudHM6IHsKICAgIFNlbnRJbWFnZSwKICAgIFRhYmxlQ29sb3JzLAogICAgVGFibGVDb2xvcnNNb2lzLAogICAgQ2hhcnRMaW5lLAogICAgQ2hhcnRCYXIsCiAgICBDaGFydEJhck1vaXMsCiAgICBDaGFydExpbmVNb2lzLAogICAgQWxlcnRhR2VuZXJhbAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vCiAgICAgIHNlbGVjdFZhbHVlRW1wcmVzYTogJycsCiAgICAgIC8vCiAgICAgIGZsYWdJbmRpY2F0aW5nRGF0YUhhc0JlZW5Mb2FkZWRJblZhcmlhYmxlczogZmFsc2UsCiAgICAgIC8vVXN1YXJpbwogICAgICBpc19zdXBlcnVzZXI6IGZhbHNlLAogICAgICBpc19zdGFmZjogZmFsc2UsCiAgICAgIGlzX3N5c3RlbWFkbWluOiBmYWxzZSwKICAgICAgaXNfZW50ZXJwcmlzZWFkbWluOiBmYWxzZSwKICAgICAgaXNfY29vcF91c2VyOiBmYWxzZSwKICAgICAgLy9FbXByZXNhcyBzZWwKICAgICAgYXJyRW1wcmVzYXM6IFtdLAogICAgICBhcnJFbXByZXNhc0xpc3Q6IFtdLAogICAgICBhcnJDb29wZXJhdGl2YXM6IFtdLAogICAgICBhbGxQYXJjZWxzT2ZFbnRlcnByaXNlczogW10sCiAgICAgIGFsbFBhcmNlbHNPZkVudGVycHJpc2VzRmlsdGVyOiBbXSwKICAgICAgLy8KICAgICAgc3RhcnQ6IDAsCiAgICAgIGxlbmd0aDogMTAsCiAgICAgIC8vCiAgICAgIHJvd1NlbGVjdHM6IFtdLAogICAgICAvLwogICAgICBTZW50aW5lbExheWVyOiAnTkRWSScsCiAgICAgIGNhbE9wdGlvbnM6IHsKICAgICAgICAiZGF0ZUZvcm1hdCI6ICJZLW0tZCIKICAgICAgfSwKICAgICAgdGltZTogYCR7dGhpcy5nZXROb3coKX0vJHt0aGlzLmdldE5vdygpfWAsCiAgICAgIHZhbHVlRGF0ZXM6IFtdLAogICAgICB2YWx1ZVJhbmdlOiBbXSwKICAgICAgdGltZVZhbHVlc0FycjogW3RoaXMuZ2V0Tm93KCksIHRoaXMuZ2V0Tm93KCldLAogICAgICBub21icmVJbmZvcm1lOiBgR3LDoWZpY28gLSAke3RoaXMuZ2V0Tm93KCl9YCwKICAgICAgaGlzdG9yaWNvQW50ZXJpb3I6IEFycmF5KCksCiAgICAgIGhpc3Rvcmljb0FudGVyaW9yQ29vcDogQXJyYXkoKSwKICAgICAgaGlzdG9yaWNvU2VsbDoge30sCiAgICAgIHZlckdyYWZpY05EVkk6IGZhbHNlLAogICAgICB2ZXJHcmFmaWNNb2lzOiBmYWxzZSwKICAgICAgZ3JhZmljb0RhdGE6IHt9LAogICAgICB2ZXJJbWFnZW5TZW50OiBmYWxzZSwKICAgICAga2V5VGFibGVDb2xvcnM6IDAsCiAgICAgIHRpbWVzdGFtcDogMCwKICAgICAgbW9zdHJhcjogdHJ1ZSwKICAgICAgLy8KICAgICAgdGlwb0FsZXJ0YTogYGVycm9yYCwKICAgICAgbWVuc2FqZUFsZXJ0YTogJycsCiAgICAgIC8vCiAgICAgIG5vbWJyZUluZm9ybWVOZXc6ICcnLAogICAgICAvLwogICAgICBzaG93VW5pZmljYXJJbmZvcm1lczogZmFsc2UsCiAgICAgIC8vCiAgICAgIG5vbWJyZUluZm9ybWVOZXdVbmlmaWNhZG86IGBHcsOhZmljbyBVbmlmaWNhZG8gLSAke3RoaXMuZ2V0Tm93KCl9YCwKICAgICAgY2hlY2tEZWxsSW5mb3JtZTogZmFsc2UsCiAgICAgIGluZm9ybWVzU2VsZWNjaW9uYWRvczogW10sCiAgICAgIHVuaXF1ZUVtcHJlc2FzVW5pZmljYXJJZDogJycsCiAgICAgIHVuaXF1ZUNhcGFVbmlmaWNhcjogJycsCiAgICAgIHVzZXJzTGlzdDogW10sCiAgICAgIHVzZXJzTGlzdFByb2ZpbGU6IFtdLAogICAgICBpbmZvcm1lRXJyb3Jlczoge30sCiAgICAgIGNvbHVtbmFzOiBbewogICAgICAgIGtleTogJ25hbWUnLAogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdncmFmaWNvcy5ub21icmUnKSwKICAgICAgICAnc29ydGFibGUnOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAga2V5OiAnY2FwYScsCiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2dyYWZpY29zLmNhcGEnKSwKICAgICAgICAnc29ydGFibGUnOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICAnbGFiZWwnOiB0aGlzLiR0KCdncmFmaWNvcy5jcmVhZG8nKSwKICAgICAgICAnc29ydGFibGUnOiB0cnVlCiAgICAgIH0sIHsKICAgICAgICAnbGFiZWwnOiB0aGlzLiR0KCdncmFmaWNvcy5lc3RhZG8nKSwKICAgICAgICAnc29ydGFibGUnOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgJ2xhYmVsJzogdGhpcy4kdCgnZ3JhZmljb3MucmFuZ29fZmVjaGFzX3NlbCcpLAogICAgICAgICdzb3J0YWJsZSc6IGZhbHNlCiAgICAgIH0sIHsKICAgICAgICAnbGFiZWwnOiB0aGlzLiR0KCdncmFmaWNvcy5hbmFsaXNpc19udWJlcycpLAogICAgICAgICdzb3J0YWJsZSc6IHRydWUKICAgICAgfSwgewogICAgICAgICdsYWJlbCc6IHRoaXMuJHQoJ2dyYWZpY29zLmVtcHJlc2EnKSwKICAgICAgICAnc29ydGFibGUnOiBmYWxzZQogICAgICB9XQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGtlZXBQb3NpdGlvblNjcm9sbCgpIHsKICAgICAgdGhpcy5zY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5zY3JvbGxZOwogICAgfSwKICAgIHB1dFBvc2l0aW9uU2Nyb2xsKCkgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgdGhpcy5zY3JvbGxQb3NpdGlvbik7CiAgICAgIH0sIDApOwogICAgfSwKICAgIC8vIHBhcmEgb3JkZW5hciBsYXMgZW1wcmVzYXMgZGUgbGEgY29vcGVyYXRpdmEgYWxmYWLDqXRpY2FtZW50ZQogICAgZ2V0U29ydGVkQ29vcGVyYXRpdmEoY29vcGVyYXRpdmEpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5jb29wZXJhdGl2YSwKICAgICAgICBlbnRlcnByaXNlczogY29vcGVyYXRpdmEuZW50ZXJwcmlzZXMuc2xpY2UoKS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTsKICAgICAgICB9KQogICAgICB9OwogICAgfSwKICAgIGdldFVzZXJOYW1lKHVzZXJfaWQpIHsKICAgICAgaWYgKHRoaXMudXNlcnNMaXN0ICYmIHRoaXMudXNlcnNMaXN0UHJvZmlsZSkgewogICAgICAgIGNvbnN0IHJlc3VsdE5hbWUgPSB0aGlzLnVzZXJzTGlzdC5maWx0ZXIodXNlciA9PiB1c2VyLmlkID09IHVzZXJfaWQpOwogICAgICAgIGlmIChyZXN1bHROYW1lKSB7CiAgICAgICAgICBjb25zdCByZXN1bHRFbWFpbCA9IHRoaXMudXNlcnNMaXN0UHJvZmlsZS5maWx0ZXIodXNlciA9PiB1c2VyLmlkID09IHJlc3VsdE5hbWVbMF0udXNlcik7CiAgICAgICAgICByZXR1cm4gYCR7cmVzdWx0TmFtZVswXS5maXJzdF9uYW1lfSAtICR7cmVzdWx0RW1haWxbMF0uZW1haWx9YDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnZXRFbnRlcnByaXNlTmFtZShpZF9lbXByZXNhKSB7CiAgICAgIGNvbnN0IGVtcHJlc2EgPSB0aGlzLmFyckVtcHJlc2FzLmZpbHRlcih5ID0+IHkuaWQgPT0gaWRfZW1wcmVzYSk7CiAgICAgIHJldHVybiBlbXByZXNhWzBdLm5hbWU7CiAgICB9LAogICAgZ2V0RXN0YWRvKGluZm9ybWUpIHsKICAgICAgaWYgKCFpbmZvcm1lLmVzVW5pZmljYWRvKSB7CiAgICAgICAgaWYgKGluZm9ybWUuZXJyb3IgJiYgaW5mb3JtZS5lc3RhZG8gPT0gMykgewogICAgICAgICAgcmV0dXJuICJUZXJtaW5hZG8gY29uIHBvc2libGVzIGVycm9yZXMiOwogICAgICAgIH0KICAgICAgICBzd2l0Y2ggKGluZm9ybWUuZXN0YWRvKSB7CiAgICAgICAgICBjYXNlICcxJzoKICAgICAgICAgICAgcmV0dXJuICdFbiBQcm9jZXNvIChPYnRlbmllbmRvIGltYWdlbmVzKSc7CiAgICAgICAgICBjYXNlICcyJzoKICAgICAgICAgICAgcmV0dXJuICdFbiBwcm9jZXNvIChQcm9jZXNhbmRvIGV4Y2VsKSc7CiAgICAgICAgICBjYXNlICczJzoKICAgICAgICAgICAgcmV0dXJuICdUZXJtaW5hZG8nOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGBObyBmaW5hbGl6YWRvIChlcnJvcmVzIGVuIFNlbnRpbmVsKWA7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiSW5mb3JtZSB1bmlmaWNhZG8iOwogICAgICB9CiAgICB9LAogICAgbW9kYWxlcnJvcmVzKGluZm9ybWUpIHsKICAgICAgdGhpcy5pbmZvcm1lRXJyb3JlcyA9IGluZm9ybWU7CiAgICAgIHRoaXMuJHJlZnMuZXJyb3Jlcy5kYXRhVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgZ2V0RXJyb3JlcyhpbmZvcm1lKSB7CiAgICAgIGxldCBjb2RpZ28gPSAiIjsKICAgICAgaWYgKGluZm9ybWUucGFyY2VsYXNfZmFsbGlkYXMgPT0gbnVsbCB8fCBpbmZvcm1lLnBhcmNlbGFzX2ZhbGxpZGFzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgcmV0dXJuICJObyBoYXkgZGF0b3MgZXNwZWNpZmljb3MgZGUgcXVlIHBhcmNlbGFzIHB1ZWRlbiBwcmVzZW50YXIgZXJyb3JlcyBcbiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZmFsbGlkYXMgPSBpbmZvcm1lLnBhcmNlbGFzX2ZhbGxpZGFzLnRyaW0oKS5zcGxpdCgiICIpOwogICAgICAgIGZvciAobGV0IGkgaW4gZmFsbGlkYXMpIHsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMuZmlsdGVyKHggPT4geC5pZCA9PSBmYWxsaWRhc1tpXSk7CiAgICAgICAgICBjb2RpZ28gKz0gIklEPSAiICsgcmVzdWx0WzBdLmlkICsgIiBOb21icmU9ICIgKyByZXN1bHRbMF0ucHJvcGVydGllcy5uYW1lICsgJ1xuJzsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coY29kaWdvKTsKICAgICAgICByZXR1cm4gY29kaWdvOwogICAgICB9CiAgICB9LAogICAgc2hvd01vZGlmaWNhckluZm9ybWVzKCkgewogICAgICBpZiAodGhpcy5jb21wcm9iYWNpb25yb3dzKCkpIHsKICAgICAgICAvL2NvbnN0IG51bVNlbCA9IHRoaXMucm93U2VsZWN0cy5sZW5ndGgKICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5oaXN0b3JpY29BbnRlcmlvci5maWx0ZXIoaGlzdG9yaWNvID0+IHRoaXMucm93U2VsZWN0cy5pbmNsdWRlcyhoaXN0b3JpY28uaWQpKTsKICAgICAgICBjb25zdCBlbnRlcnByaXNlc0luUmVzdWx0cyA9IFtdOwogICAgICAgIHJlc3VsdHMubWFwKHJlc3VsdCA9PiB7CiAgICAgICAgICBlbnRlcnByaXNlc0luUmVzdWx0cy5wdXNoKHJlc3VsdC5lbnRlcnByaXNlX2lkKTsKICAgICAgICB9KTsKICAgICAgICBjb25zdCB1bmlxdWVFbXByZXNhcyA9IFsuLi5uZXcgU2V0KGVudGVycHJpc2VzSW5SZXN1bHRzKV07CiAgICAgICAgaWYgKHVuaXF1ZUVtcHJlc2FzLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9ICdMb3MgaW5mb3JtZXMgc2VsZWNjaW9uYWRvcyBwZXJ0ZW5lY2VuIGEgZGlzdGludGFzIGVtcHJlc2FzJzsKICAgICAgICAgIHRoaXMudGlwb0FsZXJ0YSA9ICdlcnJvcic7CiAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBjb25zdCBjYXBhSW5SZXN1bHRzID0gW107CiAgICAgICAgcmVzdWx0cy5tYXAocmVzdWx0ID0+IHsKICAgICAgICAgIGNhcGFJblJlc3VsdHMucHVzaChyZXN1bHQuY2FwYSk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgdW5pcXVlQ2FwYSA9IFsuLi5uZXcgU2V0KGNhcGFJblJlc3VsdHMpXTsKICAgICAgICBpZiAodW5pcXVlQ2FwYS5sZW5ndGggPiAxKSB7CiAgICAgICAgICB0aGlzLm1lbnNhamVBbGVydGEgPSAnTG9zIGluZm9ybWVzIHNlbGVjY2lvbmFkb3Mgc29uIGRlIGRpc3RpbnRhcyBjYXBhcyc7CiAgICAgICAgICB0aGlzLnRpcG9BbGVydGEgPSAnZXJyb3InOwogICAgICAgICAgdGhpcy4kcmVmcy5hbGVydGFHZW5lcmFsbC52ZXJBbGVydGEoKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhpcy51bmlxdWVFbXByZXNhc1VuaWZpY2FySWQgPSB1bmlxdWVFbXByZXNhc1swXTsKICAgICAgICB0aGlzLnVuaXF1ZUNhcGFVbmlmaWNhciA9IHVuaXF1ZUNhcGFbMF07CiAgICAgICAgdGhpcy5pbmZvcm1lc1NlbGVjY2lvbmFkb3MgPSByZXN1bHRzOwogICAgICAgIHRoaXMuJHJlZnMudW5pZmljYXJJbmZvcm1lRm9ybS5kYXRhVmlzaWJsZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tZW5zYWplQWxlcnRhID0gYCJMYXMgYWNjaW9uZXMgYSByZWFsaXphciBzb2JyZSBlbCBpbmZvcm1lIHNlIGhhYmlsaXRhcsOhbiB1bmEgdmV6IHNlIGhheWEgZ2VuZXJhZG8gY29tcGxldGFtZW50ZSJgOwogICAgICAgIHRoaXMudGlwb0FsZXJ0YSA9IGBlcnJvcmA7CiAgICAgICAgdGhpcy4kcmVmcy5hbGVydGFHZW5lcmFsbC52ZXJBbGVydGEoKTsKICAgICAgfQogICAgfSwKICAgIHVuaWZpY2FJbmZvcm1lcygpIHsKICAgICAgLy9jb25zb2xlLmluZm8odGhpcy51bmlxdWVFbXByZXNhc1VuaWZpY2FySWQsIHRoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zLCB0aGlzLmNoZWNrRGVsbEluZm9ybWUsIHRoaXMubm9tYnJlSW5mb3JtZU5ld1VuaWZpY2FkbykKICAgICAgcHV0SW5mb3JtZXNVbmlmaWNhck5ldyh0aGlzLm5vbWJyZUluZm9ybWVOZXdVbmlmaWNhZG8sIHRoaXMudW5pcXVlRW1wcmVzYXNVbmlmaWNhcklkLCB0aGlzLmluZm9ybWVzU2VsZWNjaW9uYWRvcywgdGhpcy5jaGVja0RlbGxJbmZvcm1lLCB0aGlzLnVuaXF1ZUNhcGFVbmlmaWNhcikudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5tZW5zYWplQWxlcnRhID0gYEluZm9ybWUgR2VuZXJhZG8gY29ycmVjdGFtZW50ZWA7CiAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gJ3N1Y2Nlc3MnOwogICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhR2VuZXJhbGwudmVyQWxlcnRhKCk7CiAgICAgICAgdGhpcy5zZWxlY2Npb25hRW1wcmVzYSh0aGlzLnNlbGVjdFZhbHVlRW1wcmVzYSk7CiAgICAgIH0pOwogICAgICB0aGlzLiRyZWZzLnVuaWZpY2FySW5mb3JtZUZvcm0uaGlkZSgpOwogICAgfSwKICAgIHNob3dFZGl0YXJJbmZvcm1lKCkgewogICAgICBpZiAodGhpcy5jb21wcm9iYWNpb25yb3dzKCkpIHsKICAgICAgICAvL2NvbnNvbGUuaW5mbygndmVyIGVkaXRhciBJbmZvcm1lJykKICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmhpc3Rvcmljb0FudGVyaW9yLmZpbHRlcihoaXN0b3JpY28gPT4gdGhpcy5yb3dTZWxlY3RzLmluY2x1ZGVzKGhpc3Rvcmljby5pZCkpOwogICAgICAgIHRoaXMubm9tYnJlSW5mb3JtZU5ldyA9IHJlc3VsdFswXS5ub21icmU7CiAgICAgICAgdGhpcy4kcmVmcy5lZGl0YXJfaW5mb3JtZS5kYXRhVmlzaWJsZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tZW5zYWplQWxlcnRhID0gYCJMYXMgYWNjaW9uZXMgYSByZWFsaXphciBzb2JyZSBlbCBpbmZvcm1lIHNlIGhhYmlsaXRhcsOhbiB1bmEgdmV6IHNlIGhheWEgZ2VuZXJhZG8gY29tcGxldGFtZW50ZSJgOwogICAgICAgIHRoaXMudGlwb0FsZXJ0YSA9IGBlcnJvcmA7CiAgICAgICAgdGhpcy4kcmVmcy5hbGVydGFHZW5lcmFsbC52ZXJBbGVydGEoKTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZU5hbWVJbmZvcm1lKCkgewogICAgICBwdXRJbmZvcm1lc0FudGVyaW9yZXNOZXcodGhpcy5yb3dTZWxlY3RzWzBdLCB0aGlzLm5vbWJyZUluZm9ybWVOZXcpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IGBJbmZvcm1lIEd1YXJkYWRvIGNvcnJlY3RhbWVudGVgOwogICAgICAgIHRoaXMudGlwb0FsZXJ0YSA9ICdzdWNjZXNzJzsKICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpOwogICAgICAgIHRoaXMuc2VsZWNjaW9uYUVtcHJlc2EodGhpcy5zZWxlY3RWYWx1ZUVtcHJlc2EpOwogICAgICB9KTsKICAgICAgdGhpcy4kcmVmcy5lZGl0YXJfaW5mb3JtZS5oaWRlKCk7CiAgICB9LAogICAgZWxpbWluYXJJbmZvcm1lc0NvbmZpcm0oKSB7CiAgICAgIGRlbEluZm9ybWVzQW50ZXJpb3Jlc05ldyh0aGlzLnJvd1NlbGVjdHMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnNvbGUuaW5mbyhyZXNwb25zZS5kYXRhKTsKICAgICAgICB0aGlzLnNlbGVjY2lvbmFFbXByZXNhKHRoaXMuc2VsZWN0VmFsdWVFbXByZXNhKTsKICAgICAgICB0aGlzLm1lbnNhamVBbGVydGEgPSB0aGlzLiR0KCdncmFmaWNvcy5kZWxfaW5mb3JtZV9vaycpOwogICAgICAgIHRoaXMudGlwb0FsZXJ0YSA9ICdzdWNjZXNzJzsKICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpOwogICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhX2VsaW1pbmFyLmhpZGUoKTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUuaW5mbygnRGVsZXRlIEluZm9ybWUvcycsIHRoaXMucm93U2VsZWN0cyk7CiAgICB9LAogICAgY2hhbmdlUm93c1VuaXF1ZSh2YWx1ZSkgewogICAgICBjb25zb2xlLmluZm8odmFsdWUpOwogICAgfSwKICAgIGRlc2NhcmdhRXhjZWwoKSB7CiAgICAgIGlmICh0aGlzLnJvd1NlbGVjdHMubGVuZ3RoID09PSAxICYmIHRoaXMuY29tcHJvYmFjaW9ucm93cygpKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdDb3JyZWN0YSBkZXNjYXJnYSBkZSBleGNlbCcpOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuaGlzdG9yaWNvQW50ZXJpb3IuZmlsdGVyKGhpc3RvcmljbyA9PiB0aGlzLnJvd1NlbGVjdHMuaW5jbHVkZXMoaGlzdG9yaWNvLmlkKSk7CiAgICAgICAgd2luZG93LlVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDsKICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksCiAgICAgICAgICBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLAogICAgICAgICAgZmlsZTsKICAgICAgICB4aHIub3BlbignR0VUJywgYCR7dGhpcy4kYXBpVVJMTWVkaWF9LyR7cmVzdWx0WzBdLnhsc3hGaWxlfWAsIHRydWUpOwogICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7CiAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZpbGUgPSBuZXcgQmxvYihbeGhyLnJlc3BvbnNlXSwgewogICAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnCiAgICAgICAgICB9KTsKICAgICAgICAgIGEuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwogICAgICAgICAgYS5kb3dubG9hZCA9IGAke3Jlc3VsdFswXS5ub21icmV9Lnhsc3hgOyAvLyBTZXQgdG8gd2hhdGV2ZXIgZmlsZSBuYW1lIHlvdSB3YW50CiAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgfTsKICAgICAgICB4aHIuc2VuZCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IGAiTGFzIGFjY2lvbmVzIGEgcmVhbGl6YXIgc29icmUgZWwgaW5mb3JtZSBzZSBoYWJpbGl0YXLDoW4gdW5hIHZleiBzZSBoYXlhIGdlbmVyYWRvIGNvbXBsZXRhbWVudGUiYDsKICAgICAgICB0aGlzLnRpcG9BbGVydGEgPSBgZXJyb3JgOwogICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhR2VuZXJhbGwudmVyQWxlcnRhKCk7CiAgICAgIH0KICAgICAgY29uc29sZS5pbmZvKCdEZXNjYXJnYSBFeGNlbCcsIHRoaXMucm93U2VsZWN0cyk7CiAgICB9LAogICAgYXN5bmMgZGVzY2FyZ2FFeGNlbENvbkltYWdlbmVzKCkgewogICAgICBpZiAodGhpcy5jb21wcm9iYWNpb25yb3dzKCkpIHsKICAgICAgICAvL1RPRE8gRU5EUE9JTlQgREUgQ1JFQUNJT04gREUgSU5GT1JNRSBSRVRSVU4gTkFNRQogICAgICAgIGxldCBub21icmUgPSBhd2FpdCB0aGlzLm5vbWJyZWluZm9ybWUodGhpcy5yb3dTZWxlY3RzWzBdKTsKICAgICAgICBjb25zb2xlLmxvZyhub21icmUpOwogICAgICAgIGF3YWl0IHRoaXMuZGVzY2FyZ2FyaW5mb3JtZShub21icmUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IGAiTGFzIGFjY2lvbmVzIGEgcmVhbGl6YXIgc29icmUgZWwgaW5mb3JtZSBzZSBoYWJpbGl0YXLDoW4gdW5hIHZleiBzZSBoYXlhIGdlbmVyYWRvIGNvbXBsZXRhbWVudGUiYDsKICAgICAgICB0aGlzLnRpcG9BbGVydGEgPSBgZXJyb3JgOwogICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhR2VuZXJhbGwudmVyQWxlcnRhKCk7CiAgICAgIH0KICAgIH0sCiAgICBub21icmVpbmZvcm1lKGlkKSB7CiAgICAgIHJldHVybiBnZW5lcmFyaW5mb3JtZShpZCk7CiAgICB9LAogICAgZGVzY2FyZ2FyaW5mb3JtZShub21icmUpIHsKICAgICAgd2luZG93LlVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDsKICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLAogICAgICAgIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyksCiAgICAgICAgZmlsZTsKICAgICAgeGhyLm9wZW4oJ0dFVCcsIGAke3RoaXMuJGFwaVVSTE1lZGlhfS8ke25vbWJyZVsnZGF0YSddLmRhdGF9YCwgdHJ1ZSk7CiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7CiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZmlsZSA9IG5ldyBCbG9iKFt4aHIucmVzcG9uc2VdLCB7CiAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnCiAgICAgICAgfSk7CiAgICAgICAgYS5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7CiAgICAgICAgYS5kb3dubG9hZCA9IGAke25vbWJyZVsnZGF0YSddLm5hbWV9Lnhsc3hgOyAvLyBTZXQgdG8gd2hhdGV2ZXIgZmlsZSBuYW1lIHlvdSB3YW50CiAgICAgICAgYS5jbGljaygpOwogICAgICB9OwogICAgICB4aHIuc2VuZCgpOwogICAgfSwKICAgIGRlbEluZm9ybWUoKSB7CiAgICAgIGlmICh0aGlzLmNvbXByb2JhY2lvbnJvd3MoKSkgewogICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhX2VsaW1pbmFyLmRhdGFWaXNpYmxlID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1lbnNhamVBbGVydGEgPSBgIkxhcyBhY2Npb25lcyBhIHJlYWxpemFyIHNvYnJlIGVsIGluZm9ybWUgc2UgaGFiaWxpdGFyw6FuIHVuYSB2ZXogc2UgaGF5YSBnZW5lcmFkbyBjb21wbGV0YW1lbnRlImA7CiAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gYGVycm9yYDsKICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpOwogICAgICB9CiAgICB9LAogICAgZ2V0Tm93Q2FjaGUoKSB7CiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsKICAgICAgY29uc3QgZGF0ZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgKyAnLScgKyAodG9kYXkuZ2V0TW9udGgoKSArIDEpICsgJy0nICsgdG9kYXkuZ2V0RGF0ZSgpOwogICAgICBjb25zdCB0aW1lID0gdG9kYXkuZ2V0SG91cnMoKSArICI6IiArIHRvZGF5LmdldE1pbnV0ZXMoKSArICI6IiArIHRvZGF5LmdldFNlY29uZHMoKTsKICAgICAgY29uc3QgZGF0ZVRpbWUgPSBkYXRlICsgJyAnICsgdGltZTsKICAgICAgdGhpcy50aW1lc3RhbXAgPSBkYXRlVGltZTsKICAgICAgLy9yZXR1cm4gZGF0ZQogICAgfSwKICAgIHZlckRhdG9zRmVjaGEoKSB7CiAgICAgIGlmICh0aGlzLmNvbXByb2JhY2lvbnJvd3MoKSkgewogICAgICAgIC8vY29uc29sZS5pbmZvKHRoaXMucm93U2VsZWN0cykKICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmhpc3Rvcmljb0FudGVyaW9yLmZpbHRlcihoaXN0b3JpY28gPT4gdGhpcy5yb3dTZWxlY3RzLmluY2x1ZGVzKGhpc3Rvcmljby5pZCkpOwogICAgICAgIC8vY29uc29sZS5pbmZvKHJlc3VsdCkKICAgICAgICB0aGlzLmhpc3Rvcmljb1NlbGwgPSByZXN1bHRbMF07CiAgICAgICAgZ2V0SW5mb3JtZUFudGVyaW9yRGF0YShgb3JkZXJfJHtyZXN1bHRbMF0uanNvbkZpbGV9YCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAvL2NvbnNvbGUuaW5mbyhyZXNwb25zZS5kYXRhKQogICAgICAgICAgdGhpcy5ncmFmaWNvRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB0aGlzLnZlckltYWdlblNlbnQgPSB0cnVlOwogICAgICAgICAgaWYgKHJlc3VsdFswXS5jYXBhID09PSAnTkRWSScpIHsKICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNORFZJID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNNb2lzID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnZlckdyYWZpY05EVkkgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNNb2lzID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZ2V0Tm93Q2FjaGUoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1lbnNhamVBbGVydGEgPSBgIkxhcyBhY2Npb25lcyBhIHJlYWxpemFyIHNvYnJlIGVsIGluZm9ybWUgc2UgaGFiaWxpdGFyw6FuIHVuYSB2ZXogc2UgaGF5YSBnZW5lcmFkbyBjb21wbGV0YW1lbnRlImA7CiAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gYGVycm9yYDsKICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpOwogICAgICB9CiAgICB9LAogICAgdmVyRGF0b3NQYXJjZWxhcygpIHsKICAgICAgaWYgKHRoaXMuY29tcHJvYmFjaW9ucm93cygpKSB7CiAgICAgICAgLy9jb25zb2xlLmluZm8odGhpcy5yb3dTZWxlY3RzKQogICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuaGlzdG9yaWNvQW50ZXJpb3IuZmlsdGVyKGhpc3RvcmljbyA9PiB0aGlzLnJvd1NlbGVjdHMuaW5jbHVkZXMoaGlzdG9yaWNvLmlkKSk7CiAgICAgICAgLy9jb25zb2xlLmluZm8ocmVzdWx0KQogICAgICAgIHRoaXMuaGlzdG9yaWNvU2VsbCA9IHJlc3VsdFswXTsKICAgICAgICBnZXRJbmZvcm1lQW50ZXJpb3JEYXRhKGAke3Jlc3VsdFswXS5qc29uRmlsZX1gKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIC8vY29uc29sZS5pbmZvKHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICB0aGlzLmdyYWZpY29EYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIHRoaXMudmVySW1hZ2VuU2VudCA9IHRydWU7CiAgICAgICAgICBpZiAocmVzdWx0WzBdLmNhcGEgPT09ICdORFZJJykgewogICAgICAgICAgICB0aGlzLnZlckdyYWZpY05EVkkgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnZlckdyYWZpY01vaXMgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMudmVyR3JhZmljTkRWSSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnZlckdyYWZpY01vaXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5nZXROb3dDYWNoZSgpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IGBMYXMgYWNjaW9uZXMgYSByZWFsaXphciBzb2JyZSBlbCBpbmZvcm1lIHNlIGhhYmlsaXRhcsOhbiB1bmEgdmV6IHNlIGhheWEgZ2VuZXJhZG8gY29tcGxldGFtZW50ZWA7CiAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gYGVycm9yYDsKICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpOwogICAgICB9CiAgICB9LAogICAgdG9HZW5lcmFyKGlkX2VudGVycHJpc2UsIGlzX2Nvb3BlcmF0aXZlKSB7CiAgICAgIC8qDQogICAgICBjb25zb2xlLmluZm8oJ05vbWJyZSBkZWwgR3LDoWZpY28gJywgdGhpcy5ub21icmVJbmZvcm1lKQ0KICAgICAgY29uc29sZS5pbmZvKCdDYXBhIFNlbGVjY2lvbmFkYSAnLCB0aGlzLlNlbnRpbmVsTGF5ZXIpDQogICAgICBjb25zb2xlLmluZm8oJ0ZlY2hhcyAnLCB0aGlzLnRpbWVWYWx1ZXNBcnIpDQogICAgICBjb25zb2xlLmluZm8oJ1BhcmNlbGFzICcsIHRoaXMucm93U2VsZWN0cykNCiAgICAgIGNvbnNvbGUuaW5mbygnRXMgQ29vcGVyYXRpdmEgJywgaXNfY29vcGVyYXRpdmUpDQogICAgICBjb25zb2xlLmluZm8oJ0lEICcsIGlkX2VudGVycHJpc2UpDQogICAgICAqLwogICAgICBjcmVhdGVJbmZvcm1lcyh0aGlzLm5vbWJyZUluZm9ybWUsIHRoaXMuU2VudGluZWxMYXllciwgdGhpcy50aW1lVmFsdWVzQXJyLCB0aGlzLnJvd1NlbGVjdHMsIGlzX2Nvb3BlcmF0aXZlLCBpZF9lbnRlcnByaXNlKTsKICAgIH0sCiAgICBkYXRlRm9ybWF0KGRhdGVSZWNvcmRlZCkgewogICAgICBjb25zdCBkYXRlT2JqID0gbmV3IERhdGUoZGF0ZVJlY29yZGVkKTsKICAgICAgY29uc3QgZm9ybWF0dGVkID0gZGF0ZU9iai50b0xvY2FsZVN0cmluZygnZXMtRVMnLCB7CiAgICAgICAgeWVhcjogJ251bWVyaWMnLAogICAgICAgIG1vbnRoOiAnMi1kaWdpdCcsCiAgICAgICAgZGF5OiAnMi1kaWdpdCcsCiAgICAgICAgaG91cjogJzItZGlnaXQnLAogICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLAogICAgICAgIHNlY29uZDogJzItZGlnaXQnCiAgICAgIH0pLnJlcGxhY2UoL1wvL2csICctJyk7CiAgICAgIHJldHVybiBmb3JtYXR0ZWQ7CiAgICB9LAogICAgZ2VuZXJhckluZm9ybWUoKSB7CiAgICAgIC8vY29uc29sZS5pbmZvKHRoaXMucm93U2VsZWN0cykKICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXNGaWx0ZXIuZmlsdGVyKHBhcmNlbCA9PiB0aGlzLnJvd1NlbGVjdHMuaW5jbHVkZXMoU3RyaW5nKHBhcmNlbC5pZCkpKTsKICAgICAgLy9jb25zb2xlLmluZm8ocmVzdWx0cykKICAgICAgY29uc3QgZW50ZXJwcmlzZXNJblJlc3VsdHMgPSBbXTsKICAgICAgcmVzdWx0cy5tYXAocmVzdWx0ID0+IHsKICAgICAgICBlbnRlcnByaXNlc0luUmVzdWx0cy5wdXNoKHJlc3VsdC5wcm9wZXJ0aWVzLmVudGVycHJpc2VfaWQpOwogICAgICB9KTsKICAgICAgLy9jb25zb2xlLmluZm8oJ1Jlc3VsdGFkb3MgZW1wcmVzYSA9PiAnLGVudGVycHJpc2VzSW5SZXN1bHRzKQogICAgICBjb25zdCB1bmlxdWVFbXByZXNhcyA9IFsuLi5uZXcgU2V0KGVudGVycHJpc2VzSW5SZXN1bHRzKV07CiAgICAgIC8vY29uc29sZS5pbmZvKCdVbmlmaWNhbW9zIGVtcHJlc2EgPT4gJyx1bmlxdWVFbXByZXNhcykKICAgICAgaWYgKHVuaXF1ZUVtcHJlc2FzLmxlbmd0aCA+IDEpIHsKICAgICAgICAvLypFcyBtdWx0aWVtcHJlc2EKICAgICAgICAvL2NvbnNvbGUuaW5mbygnU2VsZWNjaW9uIE11bHRpZW1wcmVzYScpCiAgICAgICAgLy9Db21wcm9iYXIgc2kgZXMgY29vcGVyYXRpdmEKICAgICAgICBjb25zdCBlbnRlcnByaXNlc0luUmVzdWx0c0Nvb3AgPSBbXTsKICAgICAgICB0aGlzLmFyckNvb3BlcmF0aXZhcy5tYXAoY29vcGVyYXRpdmUgPT4gewogICAgICAgICAgY29vcGVyYXRpdmUuZW50ZXJwcmlzZXMubWFwKGVudGVycHJpc2UgPT4gewogICAgICAgICAgICBpZiAodW5pcXVlRW1wcmVzYXMuaW5jbHVkZXMoZW50ZXJwcmlzZS5pZCkpIHsKICAgICAgICAgICAgICBlbnRlcnByaXNlc0luUmVzdWx0c0Nvb3AucHVzaChjb29wZXJhdGl2ZS5pZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIC8vY29uc29sZS5pbmZvKCdSZXN1bHRhZG8gQ29vcGVyYXRpdmFzID0+ICcsZW50ZXJwcmlzZXNJblJlc3VsdHNDb29wKQogICAgICAgIGlmIChlbnRlcnByaXNlc0luUmVzdWx0c0Nvb3AubGVuZ3RoID09IHVuaXF1ZUVtcHJlc2FzLmxlbmd0aCkgewogICAgICAgICAgY29uc29sZS5pbmZvKCdUb2RhcyBsYXMgZW1wcmVzYXMgUGVydGVuZWNlbiBhIGNvb3BlcmF0aXZhcycpOwogICAgICAgICAgY29uc3QgdW5pcXVlQ29vcHMgPSBbLi4ubmV3IFNldChlbnRlcnByaXNlc0luUmVzdWx0c0Nvb3ApXTsKICAgICAgICAgIGlmICh1bmlxdWVDb29wcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnTXVsdGlDb29wJyk7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnQ29vcGVyYXRpdmFzJywgdW5pcXVlQ29vcHMpOwogICAgICAgICAgICBjb25zb2xlLmluZm8oJ05vIHNlIHB1ZWRlIGdlbmVyYXIgZWwgaW5mb3JtZSwgcGFyY2VsYXMgZGUgZGlzdGludGFzIENvb3BlcmF0aXZhcycpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKCdVbmlDb29wJyk7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnQ29vcGVyYXRpdmEnLCB1bmlxdWVDb29wcyk7CiAgICAgICAgICAgIHRoaXMudG9HZW5lcmFyKHVuaXF1ZUNvb3BzWzBdLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5pbmZvKCdObyBzZSBwdWVkZSBnZW5lcmFyIGVsIGluZm9ybWUsIEhheSB1bmEgZW1wcmVzYSBxdWUgbm8gcGVydGVuZWNlIGEgbmluZ3VuYSBjb29wZXJhdGl2YScpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmluZm8oJ1NlbGVjY2lvbiBVbmllbXByZXNhJyk7CiAgICAgICAgdGhpcy50b0dlbmVyYXIodW5pcXVlRW1wcmVzYXNbMF0sIGZhbHNlKTsKICAgICAgfQogICAgfSwKICAgIGFjdGlvbkNoYW5nZURhdGVSYW5nZShyYW5nZSkgewogICAgICBjb25zb2xlLmluZm8ocmFuZ2UpOwogICAgICB0aGlzLnRpbWVWYWx1ZXNBcnIgPSBbcmFuZ2Uuc3RhcnREYXRlLCByYW5nZS5lbmREYXRlXTsKICAgICAgY29uc29sZS5pbmZvKHRoaXMudGltZVZhbHVlc0Fycik7CiAgICAgIHRoaXMudGltZSA9IGAke3JhbmdlLnN0YXJ0RGF0ZX0vJHtyYW5nZS5lbmREYXRlfWA7CiAgICB9LAogICAgY2hhZ2VDYXBhcyhjYXBhKSB7CiAgICAgIHRoaXMuU2VudGluZWxMYXllciA9IGNhcGE7CiAgICB9LAogICAgc2VsZWNjaW9uYUVtcHJlc2EoZW1wcmVzYSwgY29sdW1uYSA9ICdjcmVhdGVkJywgb3JkZW4gPSAnZGVzY2VuZGluZycpIHsKICAgICAgY29uc3QgYXJyUGFyY2VscyA9IFtdOwogICAgICBpZiAoZW1wcmVzYSA9PSAnYWxsJykgewogICAgICAgIGdldEFsbEVudGVycHJpc2VzKCkudGhlbihhc3luYyByZXNwb25zZSA9PiB7CiAgICAgICAgICByZXNwb25zZS5kYXRhLm1hcChlbnRlcnByaXNlID0+IHsKICAgICAgICAgICAgZW50ZXJwcmlzZS5wYXJjZWxzLmZlYXR1cmVzLm1hcChwYXJjZWwgPT4gewogICAgICAgICAgICAgIGFyclBhcmNlbHMucHVzaChwYXJjZWwpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5hcnJFbXByZXNhcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzID0gYXJyUGFyY2VsczsKICAgICAgICAgIHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXNGaWx0ZXIgPSBhcnJQYXJjZWxzOwogICAgICAgIH0pOwogICAgICAgIGdldEluZm9ybWVzQW50ZXJpb3Jlc05ldyhlbXByZXNhLCBjb2x1bW5hLCBvcmRlbikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBjb25zb2xlLmluZm8ocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICB0aGlzLmhpc3Rvcmljb0FudGVyaW9yID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCByZXN1bHQgPSBlbXByZXNhLnNwbGl0KCdfJyk7CiAgICAgICAgaWYgKHJlc3VsdFswXSA9PSAnY29vcCcpIHsKICAgICAgICAgIGdldENvb3BlcmF0aXZlKHJlc3VsdFsxXSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZW50ZXJwcmlzZXMubWFwKGVudGVycHJpc2UgPT4gewogICAgICAgICAgICAgIGVudGVycHJpc2UucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsKICAgICAgICAgICAgICAgIGFyclBhcmNlbHMucHVzaChwYXJjZWwpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5hcnJFbXByZXNhcyA9IHJlc3BvbnNlLmRhdGEuZW50ZXJwcmlzZXM7CiAgICAgICAgICAgIHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMgPSBhcnJQYXJjZWxzOwogICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzRmlsdGVyID0gYXJyUGFyY2VsczsKICAgICAgICAgIH0pOwogICAgICAgICAgZ2V0SW5mb3JtZXNBbnRlcmlvcmVzTmV3KHJlc3VsdFsxXSwgY29sdW1uYSwgb3JkZW4pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICBjb25zb2xlLmluZm8ocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIHRoaXMuaGlzdG9yaWNvQW50ZXJpb3IgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGdldEVudGVycHJpc2UoZW1wcmVzYSkudGhlbihhc3luYyByZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsKICAgICAgICAgICAgICBhcnJQYXJjZWxzLnB1c2gocGFyY2VsKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuYXJyRW1wcmVzYXMgPSBbcmVzcG9uc2UuZGF0YV07CiAgICAgICAgICAgIHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMgPSBhcnJQYXJjZWxzOwogICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzRmlsdGVyID0gYXJyUGFyY2VsczsKICAgICAgICAgIH0pOwogICAgICAgICAgZ2V0SW5mb3JtZXNBbnRlcmlvcmVzTmV3KGVtcHJlc2EsIGNvbHVtbmEsIG9yZGVuKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB0aGlzLmhpc3Rvcmljb0FudGVyaW9yID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGdldE5vdygpIHsKICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICBjb25zdCBkYXRlID0gdG9kYXkuZ2V0RnVsbFllYXIoKSArICctJyArICh0b2RheS5nZXRNb250aCgpICsgMSkgKyAnLScgKyB0b2RheS5nZXREYXRlKCk7CiAgICAgIGNvbnN0IHRpbWUgPSB0b2RheS5nZXRIb3VycygpICsgIjoiICsgdG9kYXkuZ2V0TWludXRlcygpICsgIjoiICsgdG9kYXkuZ2V0U2Vjb25kcygpOwogICAgICBjb25zdCBkYXRlVGltZSA9IGRhdGUgKyAnICcgKyB0aW1lOwogICAgICAvL3RoaXMudGltZXN0YW1wID0gZGF0ZVRpbWU7CiAgICAgIGNvbnNvbGUuaW5mbyhkYXRlVGltZSk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfSwKICAgIGdldE5hbWVFbnRlcnByaXNlKHZhbHVlKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYXJyRW1wcmVzYXMuZmlsdGVyKGVudGVycHJpc2UgPT4gZW50ZXJwcmlzZS5pZCA9PSB2YWx1ZSk7CiAgICAgIHJldHVybiByZXN1bHRbMF0ubmFtZTsKICAgIH0sCiAgICBvbkJ1c2NhcihidXNxdWVkYSkgewogICAgICBpZiAoYnVzcXVlZGEpIHsKICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzLmZpbHRlcihwYXJjZWwgPT4gcGFyY2VsLnByb3BlcnRpZXMubmFtZS50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKGJ1c3F1ZWRhLnRvVXBwZXJDYXNlKCkpKTsKICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzRmlsdGVyID0gcmVzdWx0OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXNGaWx0ZXIgPSB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzOwogICAgICB9CiAgICB9LAogICAgYWN0aW9uT25QYWdpbmF0aW9uKGV2KSB7CiAgICAgIHRoaXMuc3RhcnQgPSBldi5zdGFydCAtIDE7CiAgICAgIHRoaXMubGVuZ3RoID0gZXYubGVuZ3RoOwogICAgfSwKICAgIG9uU29ydChvcmRlcikgewogICAgICBjb25zb2xlLmluZm8ob3JkZXIpOwogICAgICBjb25zdCBpbmRleCA9IG9yZGVyLmluZGV4OwogICAgICBsZXQgY29sdW1uID0gYGA7CiAgICAgIGNvbnN0IG9yZGVuID0gb3JkZXIub3JkZXI7CiAgICAgIHN3aXRjaCAoaW5kZXgpIHsKICAgICAgICBjYXNlICcwJzoKICAgICAgICAgIGNvbHVtbiA9IGBub21icmVgOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnMSc6CiAgICAgICAgICBjb2x1bW4gPSBgY2FwYWA7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICcyJzoKICAgICAgICAgIGNvbHVtbiA9ICdjcmVhdGVkJzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJzQnOgogICAgICAgICAgY29sdW1uID0gJ2luY2x1ZGVDbG91ZHMnOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGNvbHVtbiA9ICdjcmVhdGVkJzsKICAgICAgfQogICAgICB0aGlzLnNlbGVjY2lvbmFFbXByZXNhKHRoaXMuc2VsZWN0VmFsdWVFbXByZXNhLCBjb2x1bW4sIG9yZGVuKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmhpc3Rvcmljb0FudGVyaW9yID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICAgIC8qDQogICAgICBpZihvcmRlbiA9PSAnYXNjZW5kaW5nJyl7DQogICAgICAgICAgdGhpcy5hbGxQYXJjZWxzT2ZFbnRlcnByaXNlc0ZpbHRlci5zb3J0KChhLCBiKSA9PiBwYXJzZUZsb2F0KGEubmFtZSkgLSBwYXJzZUZsb2F0KGIubmFtZSkpOw0KICAgICAgfQ0KICAgICAgKi8KICAgICAgY29uc29sZS5pbmZvKGNvbHVtbik7CiAgICB9LAogICAgY29tcHJvYmFjaW9ucm93cygpIHsKICAgICAgbGV0IGlzX3Rlcm1pbmFkbzsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5oaXN0b3JpY29BbnRlcmlvci5maWx0ZXIoaGlzdG9yaWNvID0+IHRoaXMucm93U2VsZWN0cy5pbmNsdWRlcyhoaXN0b3JpY28uaWQpKTsKICAgICAgZm9yIChsZXQgaSBpbiByZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0W2ldLmVzdGFkbyA9PSAzIHx8IHJlc3VsdFtpXS5lc1VuaWZpY2FkbyA9PSB0cnVlKSB7CiAgICAgICAgICBpc190ZXJtaW5hZG8gPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKGlzX3Rlcm1pbmFkbyk7CiAgICAgIHJldHVybiBpc190ZXJtaW5hZG87CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmdldE5vdygpOwogICAgLy9jb25zb2xlLmluZm8oJ1VzZXIgTG9nZ2VkJykKICB9LAogIGJlZm9yZUNyZWF0ZSgpIHsKICAgIGdldFByb2ZpbGUoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgY29uc3QgdXNlciA9IHJlc3BvbnNlLmRhdGFbMF07CiAgICAgIGdldFBlcm1pc29zKHJlc3BvbnNlLmRhdGFbMF0udXNlcikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5pc19zdXBlcnVzZXIgPSByZXNwb25zZS5kYXRhLmlzX3N1cGVydXNlcjsKICAgICAgICB0aGlzLmlzX3N0YWZmID0gcmVzcG9uc2UuZGF0YS5pc19zdGFmZjsKICAgICAgICB0aGlzLmlzX3N5c3RlbWFkbWluID0gcmVzcG9uc2UuZGF0YS5pc19zeXN0ZW1hZG1pbjsKICAgICAgICB0aGlzLmlzX2VudGVycHJpc2VhZG1pbiA9IHJlc3BvbnNlLmRhdGEuaXNfZW50ZXJwcmlzZWFkbWluOwogICAgICAgIHRoaXMuaXNfY29vcF91c2VyID0gdXNlci5jb29wZXJhdGl2ZV91c2VyOwogICAgICAgIC8qDQogICAgICAgIC8vKk9idGVuZW1vcyBsYSBlbXByZXNhIGRlbCB1c3VhcmlvDQogICAgICAgIGNvbnN0IGVudGVycHJpc2VfaWQgPSB1c2VyLmVudGVycHJpc2VfaWQNCiAgICAgICAgZ2V0RW50ZXJwcmlzZShlbnRlcnByaXNlX2lkKQ0KICAgICAgICAudGhlbihhc3luYyByZXNwb25zZSA9PiB7DQogICAgICAgICAgICB0aGlzLnBhcmNlbGFzID0gcmVzcG9uc2UuZGF0YS5wYXJjZWxzDQogICAgICAgICAgICBhd2FpdCB0aGlzLmFyckVtcHJlc2FzLnB1c2gocmVzcG9uc2UuZGF0YSkNCiAgICAgICAgICAgIHRoaXMuZmxhZ0luZGljYXRpbmdEYXRhSGFzQmVlbkxvYWRlZEluVmFyaWFibGVzID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wKCkNCiAgICAgICAgfSkNCiAgICAgICAgKi8KICAgICAgICBpZiAodGhpcy5pc19zdXBlcnVzZXIpIHsKICAgICAgICAgIHRoaXMuY29sdW1uYXMuc3BsaWNlKDYsIDAsIHsKICAgICAgICAgICAgJ2xhYmVsJzogdGhpcy4kdCgnZ3JhZmljb3Muc29saWNpdGFudGVfaW5mb3JtZScpLAogICAgICAgICAgICAnc29ydGFibGUnOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgICBnZXRVc2Vyc0xpc3QoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy51c2Vyc0xpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgfSk7CiAgICAgICAgICBnZXRVc2Vyc0xpc3RQcm9maWxlcygpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLnVzZXJzTGlzdFByb2ZpbGUgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmlzX3N1cGVydXNlciB8fCB0aGlzLmlzX3N5c3RlbWFkbWluKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ2VudHJhJyk7CiAgICAgICAgICBnZXRBbGxFbnRlcnByaXNlcygpLnRoZW4oYXN5bmMgcmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmFyckVtcHJlc2FzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgLy90aGlzLmFyckVtcHJlc2FzTGlzdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgICAgdGhpcy5hcnJFbXByZXNhc0xpc3QgPSByZXNwb25zZS5kYXRhLnNsaWNlKCkuc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgYXJyUGFyY2VscyA9IFtdOwogICAgICAgICAgICByZXNwb25zZS5kYXRhLm1hcChlbnRlcnByaXNlID0+IHsKICAgICAgICAgICAgICBlbnRlcnByaXNlLnBhcmNlbHMuZmVhdHVyZXMubWFwKHBhcmNlbCA9PiB7CiAgICAgICAgICAgICAgICBhcnJQYXJjZWxzLnB1c2gocGFyY2VsKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMgPSBhcnJQYXJjZWxzOwogICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzRmlsdGVyID0gYXJyUGFyY2VsczsKICAgICAgICAgICAgdGhpcy5mbGFnSW5kaWNhdGluZ0RhdGFIYXNCZWVuTG9hZGVkSW5WYXJpYWJsZXMgPSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgICBnZXRJbmZvcm1lc0FudGVyaW9yZXNOZXcoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB0aGlzLmhpc3Rvcmljb0FudGVyaW9yID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoKHRoaXMuaXNfZW50ZXJwcmlzZWFkbWluIHx8IHRoaXMuaXNfc3RhZmYpICYmICF0aGlzLmlzX2Nvb3BfdXNlcikgewogICAgICAgICAgZ2V0RW50ZXJwcmlzZSh1c2VyLmVudGVycHJpc2VfaWQpLnRoZW4oYXN5bmMgcmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmFyckVtcHJlc2FzID0gW3Jlc3BvbnNlLmRhdGFdOwogICAgICAgICAgICB0aGlzLmFyckVtcHJlc2FzTGlzdCA9IFtyZXNwb25zZS5kYXRhXTsKICAgICAgICAgICAgY29uc3QgYXJyUGFyY2VscyA9IFtdOwogICAgICAgICAgICByZXNwb25zZS5kYXRhLnBhcmNlbHMuZmVhdHVyZXMubWFwKHBhcmNlbCA9PiB7CiAgICAgICAgICAgICAgYXJyUGFyY2Vscy5wdXNoKHBhcmNlbCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzID0gYXJyUGFyY2VsczsKICAgICAgICAgICAgdGhpcy5hbGxQYXJjZWxzT2ZFbnRlcnByaXNlc0ZpbHRlciA9IGFyclBhcmNlbHM7CiAgICAgICAgICAgIHRoaXMuZmxhZ0luZGljYXRpbmdEYXRhSGFzQmVlbkxvYWRlZEluVmFyaWFibGVzID0gdHJ1ZTsKICAgICAgICAgIH0pOwogICAgICAgICAgZ2V0SW5mb3JtZXNBbnRlcmlvcmVzTmV3KHVzZXIuZW50ZXJwcmlzZV9pZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgdGhpcy5oaXN0b3JpY29BbnRlcmlvciA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNfY29vcF91c2VyKSB7CiAgICAgICAgICBnZXRDb29wZXJhdGl2ZSh1c2VyLmVudGVycHJpc2VfaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmFyckNvb3BlcmF0aXZhcyA9IFtyZXNwb25zZS5kYXRhXTsKICAgICAgICAgICAgLy90aGlzLmFyckVtcHJlc2FzID0gcmVzcG9uc2UuZGF0YS5lbnRlcnByaXNlcwogICAgICAgICAgICB0aGlzLmZsYWdJbmRpY2F0aW5nRGF0YUhhc0JlZW5Mb2FkZWRJblZhcmlhYmxlcyA9IHRydWU7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuaXNfc3VwZXJ1c2VyIHx8IHRoaXMuaXNfc3lzdGVtYWRtaW4pIHsKICAgICAgICAgIGdldEFsbENvb3BlcmF0aXZlcygpLnRoZW4oYXN5bmMgcmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmFyckNvb3BlcmF0aXZhcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5pc0FjdGl2ZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLmlzVmlzaWJsZUxvYWQgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9KTsKICB9Cn07"},{"version":3,"names":["getProfile","getPermisos","getAllEnterprises","getEnterprise","createInformes","getInformesAnterioresNew","getInformeAnteriorData","delInformesAnterioresNew","putInformesUnificarNew","putInformesAnterioresNew","getUsersList","getUsersListProfiles","generarinforme","getAllCooperatives","getCooperative","SentImage","TableColors","TableColorsMois","ChartLine","ChartLineMois","ChartBar","ChartBarMois","AlertaGeneral","name","components","data","selectValueEmpresa","flagIndicatingDataHasBeenLoadedInVariables","is_superuser","is_staff","is_systemadmin","is_enterpriseadmin","is_coop_user","arrEmpresas","arrEmpresasList","arrCooperativas","allParcelsOfEnterprises","allParcelsOfEnterprisesFilter","start","length","rowSelects","SentinelLayer","calOptions","time","getNow","valueDates","valueRange","timeValuesArr","nombreInforme","historicoAnterior","Array","historicoAnteriorCoop","historicoSell","verGraficNDVI","verGraficMois","graficoData","verImagenSent","keyTableColors","timestamp","mostrar","tipoAlerta","mensajeAlerta","nombreInformeNew","showUnificarInformes","nombreInformeNewUnificado","checkDellInforme","informesSeleccionados","uniqueEmpresasUnificarId","uniqueCapaUnificar","usersList","usersListProfile","informeErrores","columnas","key","label","$t","methods","keepPositionScroll","scrollPosition","window","scrollY","putPositionScroll","setTimeout","scrollTo","getSortedCooperativa","cooperativa","enterprises","slice","sort","a","b","localeCompare","getUserName","user_id","resultName","filter","user","id","resultEmail","first_name","email","getEnterpriseName","id_empresa","empresa","y","getEstado","informe","esUnificado","error","estado","modalerrores","$refs","errores","dataVisible","getErrores","codigo","parcelas_fallidas","fallidas","trim","split","i","result","x","properties","console","log","showModificarInformes","comprobacionrows","results","historico","includes","enterprisesInResults","map","push","enterprise_id","uniqueEmpresas","Set","alertaGenerall","verAlerta","capaInResults","capa","uniqueCapa","unificarInformeForm","unificaInformes","then","seleccionaEmpresa","hide","showEditarInforme","nombre","editar_informe","changeNameInforme","eliminarInformesConfirm","response","info","alerta_eliminar","changeRowsUnique","value","descargaExcel","URL","webkitURL","xhr","XMLHttpRequest","document","createElement","file","open","$apiURLMedia","xlsxFile","responseType","onload","Blob","type","href","createObjectURL","download","click","send","descargaExcelConImagenes","nombreinforme","descargarinforme","delInforme","getNowCache","today","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","dateTime","verDatosFecha","jsonFile","verDatosParcelas","toGenerar","id_enterprise","is_cooperative","dateFormat","dateRecorded","dateObj","formatted","toLocaleString","year","month","day","hour","minute","second","replace","generarInforme","parcel","String","enterprisesInResultsCoop","cooperative","enterprise","uniqueCoops","actionChangeDateRange","range","startDate","endDate","chageCapas","columna","orden","arrParcels","parcels","features","getNameEnterprise","onBuscar","busqueda","toUpperCase","actionOnPagination","ev","onSort","order","index","column","is_terminado","mounted","beforeCreate","cooperative_user","splice","isActiveLoading","isVisibleLoad"],"sources":["src/components/adminActions/GenGraficosAnterioresComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"bx--grid\" @mousedown=\"keepPositionScroll\" @mouseup=\"putPositionScroll\">\r\n        <div id=\"txt-explicativo\" class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <h2>Informes Anteriores <img src=\"../../assets/agriculture-analytics.svg\" style=\"width: 40px;\"></h2>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <cv-select\r\n                    theme=\"\"\r\n                    :label=\"$t('map.listado_empresas')\"\r\n                    :hide-label=\"false\"\r\n                    :inline=\"false\"\r\n                    :disabled=\"false\"\r\n                    @change=\"seleccionaEmpresa\"\r\n                    v-model=\"selectValueEmpresa\"\r\n                >\r\n                    <cv-select-option :value=\"''\" disabled selected hidden>{{$t(\"map.sel_empresa\")}}</cv-select-option>\r\n                    <cv-select-optgroup label=\"Todas las Empresas\" v-if=\"is_superuser || is_systemadmin\">\r\n                        <cv-select-option :value=\"`all`\" v-if=\"is_superuser || is_systemadmin\">{{$t(\"map.most_todas_empresas\")}}</cv-select-option>\r\n                        <cv-select-option v-for=\"empresa in arrEmpresasList\" :value=\"String(empresa.id)\"  v-bind:key=\"empresa.id\">\r\n                            {{empresa.name}}\r\n                        </cv-select-option>\r\n                    </cv-select-optgroup>\r\n                    <cv-select-optgroup :label=\"`Cooperativa ${cooperativa.name}`\" v-bind:key=\"cooperativa.id\" v-for=\"cooperativa in arrCooperativas\">\r\n                        <cv-select-option :value=\"`coop_${cooperativa.id}`\">{{$t(\"map.most_todas_empresas\")}}</cv-select-option>\r\n                        <cv-select-option v-for=\"empresa in getSortedCooperativa(cooperativa).enterprises\" :value=\"String(empresa.id)\"  v-bind:key=\"empresa.id\">\r\n                            {{empresa.name}}\r\n                        </cv-select-option>\r\n                    </cv-select-optgroup>\r\n                </cv-select>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div id=\"txt-explicativo\" class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <p><strong><u>IMPORTANTE:</u></strong> Los informes anteriores al 04-08-2022 (incluido) se van a descargar siempre con imágenes, la opción de descargar los informes con/sin imágenes se implementó a partir de esa fecha.</p>\r\n                <br><p>{{$t(\"adminEnterprise.info_nav\")}}</p>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <div id=\"sentinelLayersList\">\r\n                    <cv-data-table\r\n                        :sortable=\"false\"\r\n                        :pagination=\"{ numberOfItems: historicoAnterior.length, pageSizes: [10, 15, 20, 25, historicoAnterior.length] }\" @pagination=\"actionOnPagination\"\r\n                        :columns=\"columnas\"\r\n                        :title=\"`Informes Generados`\"\r\n                        @sort=\"onSort\"\r\n                        v-model=\"rowSelects\"\r\n                        ref=\"tableLstadoT2MultiCoop\"\r\n                        searchLabel=\"Filter\" searchPlaceholder=\"Filter\" searchClearLabel=\"Clear filter\"\r\n                        @row-select-change=\"changeRowsUnique\"\r\n                    >\r\n                        <template v-if=\"true\" slot=\"actions\">\r\n                            <cv-search :placeholder=\"$t('graficos.buscar_nombre')\" @input=\"onBuscar\"></cv-search>\r\n                        </template>\r\n                        <template v-if=\"rowSelects.length == 1\" slot=\"batch-actions\">\r\n                            <cv-button @click=\"verDatosFecha\">\r\n                                {{$t(\"graficos.ver_datos\")}} Ordenado por Fecha\r\n                                <Charbar20 class=\"bx--btn__icon\"/>\r\n                            </cv-button> \r\n                        </template>\r\n                        <template v-if=\"rowSelects.length == 1\" slot=\"batch-actions\">\r\n                            <cv-button @click=\"verDatosParcelas\">\r\n                                {{$t(\"graficos.ver_datos\")}} Agrupado por Parcelas\r\n                                <Charbar20 class=\"bx--btn__icon\"/>\r\n                            </cv-button> \r\n                        </template>\r\n                        <template v-if=\"rowSelects.length == 1\" slot=\"batch-actions\">\r\n                            <cv-button @click=\"descargaExcel\" v-if=\"true\">\r\n                                {{$t(\"graficos.desc_excel\")}}\r\n                                <Download16 class=\"bx--btn__icon\"/>\r\n                            </cv-button>\r\n                        </template>\r\n                        <template v-if=\"rowSelects.length == 1\" slot=\"batch-actions\">\r\n                            <cv-button @click=\"descargaExcelConImagenes\" v-if=\"true\">\r\n                                {{$t(\"graficos.desc_excel_img\")}}\r\n                                <Download16 class=\"bx--btn__icon\"/>\r\n                            </cv-button>\r\n                        </template>            \r\n                        <template v-if=\"rowSelects.length == 1\" slot=\"batch-actions\">\r\n                            <cv-button @click=\"showEditarInforme\" >\r\n                                {{$t(\"graficos.editar\")}}\r\n                                <Edit32 class=\"bx--btn__icon\" />\r\n                            </cv-button>\r\n                        </template>\r\n                        <template v-if=\"rowSelects.length > 1\" slot=\"batch-actions\">\r\n                            <cv-button @click=\"showModificarInformes\" >\r\n                                {{$t(\"graficos.unificar_informes\")}}\r\n                                <AppConnectivity32 class=\"bx--btn__icon\"/>\r\n                            </cv-button>\r\n                        </template>\r\n                        <template v-if=\"true\" slot=\"batch-actions\">\r\n                            <cv-button @click=\"delInforme\">\r\n                                {{$t(\"graficos.del_informe\")}}\r\n                                <TrashCan32 class=\"bx--btn__icon\" />\r\n                            </cv-button>\r\n                        </template>\r\n                        <template slot=\"data\">\r\n                            <cv-data-table-row\r\n                                v-for=\"feature in historicoAnterior.slice(start, start+length)\"\r\n                                :key=\"`${feature.id}`\"\r\n                                :value=\"`${feature.id}`\"\r\n                                :aria-label-for-batch-checkbox=\"`Custom aria label for row ${feature.id} batch`\"\r\n                            >\r\n                                <cv-data-table-cell>{{feature.nombre}}</cv-data-table-cell>\r\n                                <cv-data-table-cell>{{feature.capa}}</cv-data-table-cell>\r\n                                <cv-data-table-cell>{{dateFormat(feature.created)}}</cv-data-table-cell>\r\n                                <cv-data-table-cell>{{getEstado(feature)}} <img src=\"../../assets/information--square--filled.svg\" style=\"width: 15px; cursor:pointer\" title=\"Parcelas reportadas por Sentinel\" @click=\"modalerrores(feature)\" v-if=\"feature.error\"> </cv-data-table-cell>\r\n                                <cv-data-table-cell>{{feature.fechaInicio}} - {{feature.fechaFin}}</cv-data-table-cell>\r\n                                <cv-data-table-cell style=\"text-aling: center\">\r\n                                    <img src=\"../../assets/mostly-cloudy.svg\" style=\"width: 15px;\" v-if=\"feature.includeClouds\"> \r\n                                    <img src=\"../../assets/outlook-severe.svg\" style=\"width: 15px;\" v-else>\r\n                                    <label v-if=\"feature.includeClouds\">  Sí</label>\r\n                                    <label v-else>  No</label>\r\n                                </cv-data-table-cell>\r\n                                <cv-data-table-cell v-if=\"is_superuser\">{{getUserName(feature.user_created)}}</cv-data-table-cell>\r\n                                <cv-data-table-cell>{{getEnterpriseName(feature.enterprise_id)}}</cv-data-table-cell>\r\n                            </cv-data-table-row>\r\n                        </template>\r\n                    </cv-data-table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <ChartLine :datos=\"graficoData\" v-if=\"verGraficNDVI\" :key=\"`chart_line_ndvi_${timestamp}`\"/>\r\n                <ChartLineMois :datos=\"graficoData\" v-if=\"verGraficMois\" :key=\"`chart_line_mois_${timestamp}`\"/>\r\n            </div>\r\n        </div>\r\n        <div class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <ChartBar :datos=\"graficoData\" v-if=\"verGraficNDVI\" :key=\"`chart_bar_ndvi_${timestamp}`\"/>\r\n                <ChartBarMois :datos=\"graficoData\" v-if=\"verGraficMois\" :key=\"`chart_bar_mois_${timestamp}`\"/>\r\n            </div>\r\n        </div>\r\n        <div class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <TableColors :urlMedia=\"$apiURLMedia\" :datos=\"graficoData\" v-if=\"verGraficNDVI\" :key=\"`table_ndvi_${timestamp}`\"/>\r\n                <TableColorsMois :urlMedia=\"$apiURLMedia\" :datos=\"graficoData\" v-if=\"verGraficMois\" :key=\"`table_mois_${timestamp}`\"/>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <SentImage :urlMedia=\"$apiURLMedia\" :datos=\"graficoData\" v-if=\"verImagenSent\" :key=\"`imgs_${timestamp}`\"/>\r\n            </div>\r\n        </div>\r\n        <cv-modal\r\n        ref=\"alerta_eliminar\"\r\n        kind=\"danger\"\r\n        @primary-click=\"eliminarInformesConfirm\">\r\n            <template slot=\"label\">{{$t(\"graficos.seguro\")}}</template>\r\n            <template slot=\"title\">{{$t(\"graficos.eliminar\")}}</template>\r\n            <template slot=\"content\">\r\n            <p>{{$t(\"graficos.seguro_parcel_del\")}}</p>\r\n            </template>\r\n            <template slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n            <template slot=\"primary-button\">{{$t(\"graficos.eliminar\")}}</template>\r\n        </cv-modal>\r\n\r\n        <cv-modal\r\n            ref=\"editar_informe\"\r\n            @primary-click=\"changeNameInforme\"\r\n        >\r\n            <template slot=\"label\">{{$t('graficos.modifica_infor')}}</template>\r\n            <template slot=\"title\">{{$t('graficos.modifica_infor')}}</template>\r\n            <template slot=\"content\">\r\n                <div class=\"bx--grid bx--grid--condensed\">\r\n                    <div class=\"bx--row\">\r\n                        <div class=\"bx--col\">\r\n                            <!-- Nombre de Informe -->\r\n                            <div class=\"bx--form-item\">\r\n                                <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre_informe')}}</label>\r\n                                <input v-model=\"nombreInformeNew\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n            <template slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n            <template slot=\"primary-button\">{{$t('graficos.guardar')}}</template>\r\n        </cv-modal>\r\n        <cv-modal\r\n            ref=\"unificarInformeForm\"\r\n            @primary-click=\"unificaInformes\"\r\n            @secondary-click=\"$refs.unificarInformeForm.hide()\"\r\n        >\r\n            <template v-if=\"true\" slot=\"label\"></template>\r\n            <template v-if=\"true\" slot=\"title\">{{$t('graficos.unificar_informes')}}</template>\r\n            <template v-if=\"true\" slot=\"content\" id=\"contenido\">\r\n                <div class=\"bx--grid bx--grid--condensed\">\r\n                    <div class=\"bx--row\">\r\n                        <!-- Nombre de Informe -->\r\n                        <div class=\"bx--form-item\">\r\n                            <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre')}}</label>\r\n                            <input v-model=\"nombreInformeNewUnificado\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\" :placeholder=\"$t('graficos.nombre')\">\r\n                        </div>\r\n                    </div>\r\n                    <br>\r\n                    <div class=\"bx--row\">\r\n                        <div class=\"bx--col\">\r\n                            <div class=\"bx--form-item\">\r\n                                <cv-checkbox\r\n                                    :label=\"$t('graficos.eliminar_informe_origin')\"\r\n                                    :checked=\"false\"\r\n                                    value=\"true\"\r\n                                    :mixed=\"false\"\r\n                                    v-model=\"checkDellInforme\"\r\n                                >\r\n                                </cv-checkbox>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <br>\r\n                    <div class=\"bx--row\">\r\n                        <div class=\"bx--col\">\r\n                            <h4>{{$t(\"graficos.resumen_unifica\")}}</h4>\r\n                            <cv-data-table\r\n                                :columns=\"[\r\n                                    this.$t('graficos.parcelas'),\r\n                                    'Capa',\r\n                                    this.$t('graficos.rango_fechas_sel'),\r\n                                    {\r\n                                        'label': this.$t('graficos.creado'),\r\n                                    },\r\n                                ]\"\r\n                            >\r\n                                <template slot=\"data\">\r\n                                    <cv-data-table-row  v-for=\"informe in informesSeleccionados\" :value=\"String(informe.id)\" :key=\"String(informe.id)\">\r\n                                        <cv-data-table-cell>{{informe.nombre}}</cv-data-table-cell>\r\n                                        <cv-data-table-cell>{{informe.capa}}</cv-data-table-cell>\r\n                                        <cv-data-table-cell>{{dateFormat(informe.created)}}</cv-data-table-cell>\r\n                                        <cv-data-table-cell>{{informe.fechaInicio}} - {{informe.fechaFin}}</cv-data-table-cell>\r\n                                    </cv-data-table-row>\r\n                                </template>\r\n                            </cv-data-table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n            <template v-if=\"true\" slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n            <template v-if=\"true\" slot=\"primary-button\">{{$t(\"graficos.unificar\")}}</template>\r\n        </cv-modal>\r\n        <cv-modal\r\n        ref=\"errores\"\r\n        @primary-click=\"$refs.errores.hide()\"\r\n        >\r\n            <template slot=\"title\">Parcelas reportadas por Sentinel</template>\r\n            <template slot=\"content\">\r\n            <p style=\"white-space: pre-line\">Sentinel ha reportado algún posible error al obtener los datos de la/s parcela/s:\r\n            <br> \r\n            {{getErrores(informeErrores)}}\r\n            Por favor, revisa el informe y solicita de nuevo esas parcelas en caso de que falte algún dato.</p>\r\n            </template>\r\n            <template slot=\"primary-button\">OK</template>\r\n        </cv-modal>\r\n        <AlertaGeneral ref=\"alertaGenerall\" :tituloAlert=\"mensajeAlerta\" :tipoAlert=\"tipoAlerta\" />\r\n    </div>\r\n</template>\r\n<script>\r\n//import {getParcelsNotSentinelInstance, postParcelsNotSentinelInstance} from '@/crudFunctions/crudSentinel.js'\r\nimport {getProfile, getPermisos} from '@/auth/index'\r\nimport {getAllEnterprises, getEnterprise, createInformes, getInformesAnterioresNew,\r\ngetInformeAnteriorData, delInformesAnterioresNew,putInformesUnificarNew, putInformesAnterioresNew, getUsersList, getUsersListProfiles, generarinforme} from '@/crudFunctions/crudEnterprise'\r\nimport {getAllCooperatives, getCooperative} from '@/crudFunctions/crudCooperativas'\r\nimport SentImage from '@/components/charts_new/imageSent.vue'\r\nimport TableColors from '@/components/charts_new/tableColors.vue'\r\nimport TableColorsMois from '@/components/charts_new/tableColorsMois.vue'\r\nimport ChartLine from '@/components/charts_new/chartLine.vue'\r\nimport ChartLineMois from '@/components/charts_new/chartLineMois.vue'\r\nimport ChartBar from '@/components/charts_new/chartBar.vue'\r\nimport ChartBarMois from '@/components/charts_new/chartBarMois.vue'\r\nimport AlertaGeneral from \"@/components/AlertaGeneral\"\r\nexport default {\r\n    name: 'ParcelsToSentinelComponent',\r\n    components: {\r\n        SentImage,\r\n        TableColors,\r\n        TableColorsMois,\r\n        ChartLine,\r\n        ChartBar,\r\n        ChartBarMois,\r\n        ChartLineMois,\r\n        AlertaGeneral\r\n    },\r\n    data(){\r\n        return {\r\n            //\r\n            selectValueEmpresa: '',\r\n            //\r\n            flagIndicatingDataHasBeenLoadedInVariables: false,\r\n            //Usuario\r\n            is_superuser: false,\r\n            is_staff: false,\r\n            is_systemadmin: false,\r\n            is_enterpriseadmin: false,\r\n            is_coop_user: false,\r\n            //Empresas sel\r\n            arrEmpresas: [],\r\n            arrEmpresasList: [],\r\n            arrCooperativas: [],\r\n            allParcelsOfEnterprises: [],\r\n            allParcelsOfEnterprisesFilter: [],\r\n            //\r\n            start: 0,\r\n            length: 10,\r\n            //\r\n            rowSelects: [],\r\n            //\r\n            SentinelLayer: 'NDVI',\r\n            calOptions: {\r\n                \"dateFormat\": \"Y-m-d\"\r\n            },\r\n            time: `${this.getNow()}/${this.getNow()}`,\r\n            valueDates: [],\r\n            valueRange: [],\r\n            timeValuesArr: [this.getNow(), this.getNow()],\r\n            nombreInforme: `Gráfico - ${this.getNow()}`,\r\n            historicoAnterior: Array(),\r\n            historicoAnteriorCoop: Array(),\r\n            historicoSell: {},\r\n            verGraficNDVI: false,\r\n            verGraficMois: false,\r\n            graficoData: {},\r\n            verImagenSent: false,\r\n            keyTableColors: 0,\r\n            timestamp: 0,\r\n            mostrar:true,\r\n            //\r\n            tipoAlerta: `error`,\r\n            mensajeAlerta: '',\r\n            //\r\n            nombreInformeNew: '',\r\n            //\r\n            showUnificarInformes: false,\r\n            //\r\n            nombreInformeNewUnificado: `Gráfico Unificado - ${this.getNow()}`,\r\n            checkDellInforme: false,\r\n            informesSeleccionados: [],\r\n            uniqueEmpresasUnificarId: '',\r\n            uniqueCapaUnificar: '',\r\n            usersList: [],\r\n            usersListProfile: [],\r\n            informeErrores:{},\r\n            columnas:[\r\n                            {\r\n                                key: 'name',\r\n                                label: this.$t('graficos.nombre'),\r\n                                'sortable': false\r\n                            },\r\n                            {\r\n                                key: 'capa',\r\n                                label: this.$t('graficos.capa'),\r\n                                'sortable': true\r\n                            },\r\n                            {\r\n                                'label': this.$t('graficos.creado'),\r\n                                'sortable': true\r\n                            },\r\n                            {\r\n                                'label': this.$t('graficos.estado'),\r\n                                'sortable': false\r\n                            },\r\n                            {\r\n                                'label': this.$t('graficos.rango_fechas_sel'),\r\n                                'sortable': false\r\n                            },\r\n                            {\r\n                                'label': this.$t('graficos.analisis_nubes'),\r\n                                'sortable': true\r\n                            },\r\n                            {\r\n                                'label': this.$t('graficos.empresa'),\r\n                                'sortable': false\r\n                            },\r\n                        ]\r\n        }\r\n    },\r\n    methods: {\r\n        keepPositionScroll(){\r\n            this.scrollPosition = window.scrollY;\r\n        },\r\n        putPositionScroll(){\r\n            setTimeout(() => {\r\n                window.scrollTo(0, this.scrollPosition);\r\n            }, 0);\r\n        },\r\n        // para ordenar las empresas de la cooperativa alfabéticamente\r\n        getSortedCooperativa(cooperativa) {\r\n            return {\r\n                ...cooperativa,\r\n                enterprises: cooperativa.enterprises.slice().sort((a, b) => {\r\n                return a.name.localeCompare(b.name);\r\n                }),\r\n            };\r\n        },\r\n        getUserName(user_id){\r\n            if(this.usersList && this.usersListProfile){\r\n                const resultName = this.usersList.filter(user => user.id == user_id)\r\n                if(resultName){\r\n                    const resultEmail = this.usersListProfile.filter(user => user.id == resultName[0].user)\r\n                    return `${resultName[0].first_name} - ${resultEmail[0].email}`\r\n                }\r\n            }\r\n        },\r\n        getEnterpriseName(id_empresa){\r\n            const empresa=this.arrEmpresas.filter(y=>y.id==id_empresa)\r\n            return empresa[0].name\r\n        },\r\n        getEstado(informe){\r\n            if(!informe.esUnificado){\r\n            if(informe.error && informe.estado==3){\r\n                return \"Terminado con posibles errores\"\r\n            }\r\n            switch (informe.estado) {\r\n                case '1':\r\n                    return 'En Proceso (Obteniendo imagenes)'\r\n                case '2':\r\n                    return 'En proceso (Procesando excel)'\r\n                case '3':\r\n                    return 'Terminado'\r\n                default:\r\n                    return `No finalizado (errores en Sentinel)`\r\n            }\r\n            }else{\r\n                return \"Informe unificado\"\r\n            }\r\n        },\r\n        modalerrores(informe){\r\n            this.informeErrores=informe\r\n            this.$refs.errores.dataVisible = true\r\n        },\r\n        getErrores(informe){\r\n            let codigo=\"\"\r\n            if(informe.parcelas_fallidas==null || informe.parcelas_fallidas.length==0){\r\n                return \"No hay datos especificos de que parcelas pueden presentar errores \\n\"\r\n            }\r\n            else{\r\n                const fallidas=informe.parcelas_fallidas.trim().split(\" \")\r\n                for (let i in fallidas){\r\n                    const result=this.allParcelsOfEnterprises.filter(x=>x.id==fallidas[i])\r\n                    codigo+=\"ID= \"+result[0].id+\" Nombre= \"+result[0].properties.name+'\\n'\r\n                }\r\n                console.log(codigo)\r\n                return codigo\r\n            }\r\n        },\r\n        showModificarInformes(){\r\n            if(this.comprobacionrows()){\r\n                //const numSel = this.rowSelects.length\r\n                const results = this.historicoAnterior.filter(historico => this.rowSelects.includes(historico.id) )\r\n                const enterprisesInResults = []\r\n                results.map(result => {\r\n                    enterprisesInResults.push(result.enterprise_id)\r\n                })\r\n                const uniqueEmpresas = [...new Set(enterprisesInResults)]\r\n                if(uniqueEmpresas.length > 1){\r\n                    this.mensajeAlerta = 'Los informes seleccionados pertenecen a distintas empresas'\r\n                    this.tipoAlerta = 'error'\r\n                    this.$refs.alertaGenerall.verAlerta()\r\n                    return false\r\n                }\r\n                const capaInResults = []\r\n                results.map(result => {\r\n                    capaInResults.push(result.capa)\r\n                })\r\n                const uniqueCapa = [...new Set(capaInResults)]\r\n                if(uniqueCapa.length > 1){\r\n                    this.mensajeAlerta = 'Los informes seleccionados son de distintas capas'\r\n                    this.tipoAlerta = 'error'\r\n                    this.$refs.alertaGenerall.verAlerta()\r\n                    return false\r\n                }\r\n                this.uniqueEmpresasUnificarId = uniqueEmpresas[0]\r\n                this.uniqueCapaUnificar = uniqueCapa[0]\r\n                this.informesSeleccionados = results\r\n                this.$refs.unificarInformeForm.dataVisible = true\r\n            }\r\n            else{\r\n                this.mensajeAlerta = `\"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente\"`\r\n                this.tipoAlerta = `error`\r\n                this.$refs.alertaGenerall.verAlerta()\r\n            }\r\n        },\r\n        unificaInformes(){\r\n            //console.info(this.uniqueEmpresasUnificarId, this.informesSeleccionados, this.checkDellInforme, this.nombreInformeNewUnificado)\r\n            putInformesUnificarNew(this.nombreInformeNewUnificado, this.uniqueEmpresasUnificarId, this.informesSeleccionados, this.checkDellInforme, this.uniqueCapaUnificar)\r\n            .then(() => {\r\n                this.mensajeAlerta = `Informe Generado correctamente`\r\n                this.tipoAlerta = 'success'\r\n                this.$refs.alertaGenerall.verAlerta()\r\n                this.seleccionaEmpresa(this.selectValueEmpresa)\r\n            })\r\n            this.$refs.unificarInformeForm.hide()\r\n        },\r\n        showEditarInforme(){\r\n            if(this.comprobacionrows()){\r\n                //console.info('ver editar Informe')\r\n                const result = this.historicoAnterior.filter(historico => this.rowSelects.includes(historico.id) )\r\n                this.nombreInformeNew = result[0].nombre\r\n                this.$refs.editar_informe.dataVisible = true\r\n            }else{\r\n                this.mensajeAlerta = `\"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente\"`\r\n                this.tipoAlerta = `error`\r\n                this.$refs.alertaGenerall.verAlerta()\r\n            }\r\n        },\r\n        changeNameInforme(){\r\n            putInformesAnterioresNew(this.rowSelects[0], this.nombreInformeNew)\r\n            .then(() => {\r\n                this.mensajeAlerta = `Informe Guardado correctamente`\r\n                this.tipoAlerta = 'success'\r\n                this.$refs.alertaGenerall.verAlerta()\r\n                this.seleccionaEmpresa(this.selectValueEmpresa)\r\n            })\r\n            this.$refs.editar_informe.hide()\r\n        },\r\n        eliminarInformesConfirm(){\r\n            delInformesAnterioresNew(this.rowSelects)\r\n            .then(response => {\r\n                console.info(response.data)\r\n                this.seleccionaEmpresa(this.selectValueEmpresa)\r\n                this.mensajeAlerta = this.$t('graficos.del_informe_ok')\r\n                this.tipoAlerta = 'success'\r\n                this.$refs.alertaGenerall.verAlerta()\r\n                this.$refs.alerta_eliminar.hide()\r\n            })\r\n            console.info('Delete Informe/s', this.rowSelects)\r\n        },\r\n        changeRowsUnique(value){\r\n            console.info(value)\r\n        },\r\n        descargaExcel(){\r\n            if(this.rowSelects.length === 1 && this.comprobacionrows()){\r\n                console.info('Correcta descarga de excel')\r\n                const result = this.historicoAnterior.filter(historico => this.rowSelects.includes(historico.id) )\r\n                window.URL = window.URL || window.webkitURL;\r\n                let xhr = new XMLHttpRequest(),\r\n                a = document.createElement('a'), file;\r\n                xhr.open('GET', `${this.$apiURLMedia}/${result[0].xlsxFile}`, true);\r\n                xhr.responseType = 'blob';\r\n                xhr.onload = function () {\r\n                    file = new Blob([xhr.response], { type : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n                    a.href = window.URL.createObjectURL(file);\r\n                    a.download = `${result[0].nombre}.xlsx`;  // Set to whatever file name you want\r\n                    a.click();\r\n                };\r\n                xhr.send();\r\n            }\r\n            else{\r\n                this.mensajeAlerta = `\"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente\"`\r\n                this.tipoAlerta = `error`\r\n                this.$refs.alertaGenerall.verAlerta()\r\n            }\r\n            console.info('Descarga Excel', this.rowSelects)\r\n        },\r\n        async descargaExcelConImagenes(){\r\n            if (this.comprobacionrows()){\r\n                //TODO ENDPOINT DE CREACION DE INFORME RETRUN NAME\r\n                let nombre=await this.nombreinforme(this.rowSelects[0])\r\n                console.log (nombre)\r\n                await this.descargarinforme(nombre)\r\n            }else{\r\n                this.mensajeAlerta = `\"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente\"`\r\n                this.tipoAlerta = `error`\r\n                this.$refs.alertaGenerall.verAlerta()\r\n            }\r\n        },\r\n        nombreinforme(id){\r\n            return generarinforme(id)\r\n        },\r\n        descargarinforme(nombre){\r\n            window.URL = window.URL || window.webkitURL;\r\n                let xhr = new XMLHttpRequest(),\r\n                a = document.createElement('a'), file;\r\n                xhr.open('GET', `${this.$apiURLMedia}/${nombre['data'].data}`, true);\r\n                xhr.responseType = 'blob';\r\n                xhr.onload = function () {\r\n                    file = new Blob([xhr.response], { type : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n                    a.href = window.URL.createObjectURL(file);\r\n                    a.download = `${nombre['data'].name}.xlsx`;  // Set to whatever file name you want\r\n                    a.click();\r\n                };\r\n                xhr.send();\r\n        },\r\n        delInforme(){\r\n            if(this.comprobacionrows()){\r\n                this.$refs.alerta_eliminar.dataVisible = true\r\n            }\r\n            else{\r\n                this.mensajeAlerta = `\"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente\"`\r\n                this.tipoAlerta = `error`\r\n                this.$refs.alertaGenerall.verAlerta()\r\n            }\r\n        },\r\n        getNowCache() {\r\n            const today = new Date();\r\n            const date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\r\n            const time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n            const dateTime = date +' '+ time;\r\n            this.timestamp = dateTime;\r\n            //return date\r\n        },\r\n        verDatosFecha(){\r\n            if(this.comprobacionrows()){\r\n                //console.info(this.rowSelects)\r\n                const result = this.historicoAnterior.filter(historico => this.rowSelects.includes(historico.id) )\r\n                //console.info(result)\r\n                this.historicoSell = result[0]\r\n            \r\n                getInformeAnteriorData(`order_${result[0].jsonFile}`)\r\n                .then(response => {\r\n                    //console.info(response.data)\r\n                    this.graficoData = response.data\r\n                    this.verImagenSent = true\r\n                    if(result[0].capa === 'NDVI'){\r\n                        this.verGraficNDVI = true\r\n                        this.verGraficMois = false\r\n                    }else{\r\n                        this.verGraficNDVI = false\r\n                        this.verGraficMois = true\r\n                    }\r\n                    this.getNowCache()\r\n                })\r\n            }\r\n            else{\r\n                this.mensajeAlerta = `\"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente\"`\r\n                this.tipoAlerta = `error`\r\n                this.$refs.alertaGenerall.verAlerta()\r\n            }\r\n        },\r\n        verDatosParcelas(){\r\n            if(this.comprobacionrows()){\r\n                //console.info(this.rowSelects)\r\n                const result = this.historicoAnterior.filter(historico => this.rowSelects.includes(historico.id) )\r\n                //console.info(result)\r\n                this.historicoSell = result[0]\r\n            \r\n                getInformeAnteriorData(`${result[0].jsonFile}`)\r\n                .then(response => {\r\n                    //console.info(response.data)\r\n                    this.graficoData = response.data\r\n                    this.verImagenSent = true\r\n                    if(result[0].capa === 'NDVI'){\r\n                        this.verGraficNDVI = true\r\n                        this.verGraficMois = false\r\n                    }else{\r\n                        this.verGraficNDVI = false\r\n                        this.verGraficMois = true\r\n                    }\r\n                    this.getNowCache()\r\n                })\r\n            }\r\n            else{\r\n                this.mensajeAlerta = `Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente`\r\n                this.tipoAlerta = `error`\r\n                this.$refs.alertaGenerall.verAlerta()\r\n            }\r\n        },\r\n        toGenerar(id_enterprise, is_cooperative){\r\n            /*\r\n            console.info('Nombre del Gráfico ', this.nombreInforme)\r\n            console.info('Capa Seleccionada ', this.SentinelLayer)\r\n            console.info('Fechas ', this.timeValuesArr)\r\n            console.info('Parcelas ', this.rowSelects)\r\n            console.info('Es Cooperativa ', is_cooperative)\r\n            console.info('ID ', id_enterprise)\r\n            */\r\n            createInformes(this.nombreInforme, this.SentinelLayer, this.timeValuesArr, this.rowSelects, is_cooperative, id_enterprise)\r\n        },\r\n        dateFormat(dateRecorded){\r\n            const dateObj = new Date(dateRecorded);\r\n            const formatted = dateObj.toLocaleString('es-ES', {\r\n                year: 'numeric',\r\n                month: '2-digit',\r\n                day: '2-digit',\r\n                hour: '2-digit',\r\n                minute: '2-digit',\r\n                second: '2-digit'\r\n            }).replace(/\\//g, '-');\r\n            return formatted;\r\n        },\r\n        generarInforme(){\r\n            //console.info(this.rowSelects)\r\n            const results = this.allParcelsOfEnterprisesFilter.filter(parcel => this.rowSelects.includes(String(parcel.id)))\r\n            //console.info(results)\r\n            const enterprisesInResults = []\r\n            results.map(result => {\r\n                enterprisesInResults.push(result.properties.enterprise_id)\r\n            })\r\n            //console.info('Resultados empresa => ',enterprisesInResults)\r\n            const uniqueEmpresas = [...new Set(enterprisesInResults)]\r\n            //console.info('Unificamos empresa => ',uniqueEmpresas)\r\n            if(uniqueEmpresas.length > 1){\r\n                //*Es multiempresa\r\n                //console.info('Seleccion Multiempresa')\r\n                //Comprobar si es cooperativa\r\n                const enterprisesInResultsCoop = []\r\n                this.arrCooperativas.map(cooperative => {\r\n                    cooperative.enterprises.map(enterprise => {\r\n                        if(uniqueEmpresas.includes(enterprise.id)){\r\n                            enterprisesInResultsCoop.push(cooperative.id)\r\n                        }\r\n                    })\r\n                })\r\n                //console.info('Resultado Cooperativas => ',enterprisesInResultsCoop)\r\n                if(enterprisesInResultsCoop.length == uniqueEmpresas.length){\r\n                    console.info('Todas las empresas Pertenecen a cooperativas')\r\n                    const uniqueCoops = [...new Set(enterprisesInResultsCoop)]\r\n                    if(uniqueCoops.length > 1){\r\n                        console.info('MultiCoop')\r\n                        console.info('Cooperativas', uniqueCoops)\r\n                        console.info('No se puede generar el informe, parcelas de distintas Cooperativas')\r\n                    }else{\r\n                        console.info('UniCoop')\r\n                        console.info('Cooperativa', uniqueCoops)\r\n                        this.toGenerar(uniqueCoops[0], true)\r\n                    }\r\n                }else{\r\n                    console.info('No se puede generar el informe, Hay una empresa que no pertenece a ninguna cooperativa')\r\n                }\r\n            }else{\r\n                console.info('Seleccion Uniempresa')\r\n                this.toGenerar(uniqueEmpresas[0], false)\r\n            }\r\n        },\r\n        actionChangeDateRange(range){\r\n            console.info(range)\r\n            this.timeValuesArr = [range.startDate, range.endDate]\r\n            console.info(this.timeValuesArr)\r\n            this.time = `${range.startDate}/${range.endDate}`\r\n        },\r\n        chageCapas(capa){\r\n            this.SentinelLayer = capa\r\n        },\r\n        seleccionaEmpresa(empresa, columna='created', orden='descending'){\r\n            const arrParcels = []\r\n            if(empresa == 'all'){\r\n                getAllEnterprises()\r\n                    .then(async response => {\r\n                        response.data.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        this.arrEmpresas = response.data\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.allParcelsOfEnterprisesFilter = arrParcels\r\n                    })\r\n                getInformesAnterioresNew(empresa, columna, orden)\r\n                    .then(response => {\r\n                        console.info(response.data)\r\n                        this.historicoAnterior = response.data\r\n                    })\r\n            }else{\r\n                const result = empresa.split('_')\r\n                if(result[0] == 'coop'){\r\n                    getCooperative(result[1])\r\n                    .then(response => {\r\n                        response.data.enterprises.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        this.arrEmpresas = response.data.enterprises\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.allParcelsOfEnterprisesFilter = arrParcels\r\n                    })\r\n                    getInformesAnterioresNew(result[1], columna, orden)\r\n                    .then(response => {\r\n                        console.info(response.data)\r\n                        this.historicoAnterior= response.data\r\n                    })\r\n                }else{\r\n                    getEnterprise(empresa)\r\n                    .then(async response => {\r\n                        response.data.parcels.features.map(parcel => {\r\n                            arrParcels.push(parcel)\r\n                        })\r\n                        this.arrEmpresas = [response.data]\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.allParcelsOfEnterprisesFilter = arrParcels\r\n                    })\r\n                    getInformesAnterioresNew(empresa, columna, orden)\r\n                    .then(response => {\r\n                        console.info(response.data)\r\n                        this.historicoAnterior= response.data\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        getNow() {\r\n            const today = new Date();\r\n            const date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\r\n            const time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n            const dateTime = date +' '+ time;\r\n            //this.timestamp = dateTime;\r\n            console.info(dateTime)\r\n            return date\r\n        },\r\n        getNameEnterprise(value){\r\n            const result = this.arrEmpresas.filter(enterprise => enterprise.id == value)\r\n            return result[0].name\r\n        },\r\n        onBuscar(busqueda){\r\n            if(busqueda){\r\n                const result = this.allParcelsOfEnterprises.filter(parcel => parcel.properties.name.toUpperCase().includes(busqueda.toUpperCase()))\r\n                this.allParcelsOfEnterprisesFilter = result\r\n            }else{\r\n                this.allParcelsOfEnterprisesFilter = this.allParcelsOfEnterprises\r\n            }\r\n        },\r\n        actionOnPagination(ev){\r\n            this.start = ev.start-1\r\n            this.length = ev.length\r\n        },\r\n        onSort(order) {\r\n            console.info(order)\r\n            const index = order.index\r\n            let column = ``\r\n            const orden = order.order\r\n            \r\n            switch (index) {\r\n                case '0':\r\n                    column = `nombre`\r\n                    break\r\n                case '1':\r\n                    column = `capa`\r\n                    break\r\n                case '2':\r\n                    column = 'created'\r\n                    break\r\n                case '4':\r\n                    column = 'includeClouds'\r\n                    break\r\n                default:\r\n                    column = 'created'\r\n            }\r\n            this.seleccionaEmpresa(this.selectValueEmpresa, column, orden)\r\n            .then(response => {\r\n                this.historicoAnterior= response.data\r\n            })\r\n            /*\r\n            if(orden == 'ascending'){\r\n                this.allParcelsOfEnterprisesFilter.sort((a, b) => parseFloat(a.name) - parseFloat(b.name));\r\n            }\r\n            */\r\n            console.info(column)\r\n        },\r\n        comprobacionrows(){\r\n            let is_terminado\r\n            const result = this.historicoAnterior.filter(historico => this.rowSelects.includes(historico.id))\r\n            for (let i in result){\r\n                if(result[i].estado==3 || result[i].esUnificado==true){\r\n                    is_terminado =true\r\n                }\r\n                else{\r\n                    return false\r\n                }\r\n            }\r\n            console.log(is_terminado)\r\n            return is_terminado\r\n        },\r\n    },\r\n    mounted: function () {\r\n        this.getNow()\r\n        //console.info('User Logged')\r\n    },\r\n    beforeCreate(){\r\n        getProfile()\r\n        .then(response => {\r\n            const user = response.data[0]\r\n            getPermisos(response.data[0].user)\r\n            .then(response => {\r\n                this.is_superuser = response.data.is_superuser\r\n                this.is_staff = response.data.is_staff\r\n                this.is_systemadmin = response.data.is_systemadmin\r\n                this.is_enterpriseadmin = response.data.is_enterpriseadmin\r\n                this.is_coop_user = user.cooperative_user\r\n                /*\r\n                //*Obtenemos la empresa del usuario\r\n                const enterprise_id = user.enterprise_id\r\n                getEnterprise(enterprise_id)\r\n                .then(async response => {\r\n                    this.parcelas = response.data.parcels\r\n                    await this.arrEmpresas.push(response.data)\r\n                    this.flagIndicatingDataHasBeenLoadedInVariables = false\r\n                    this.timestamp()\r\n                })\r\n                */\r\n                if(this.is_superuser){\r\n                    this.columnas.splice(6,0,{'label': this.$t('graficos.solicitante_informe'),'sortable': false },)\r\n                    getUsersList()\r\n                    .then(response => {\r\n                        this.usersList = response.data\r\n                    })\r\n                    getUsersListProfiles()\r\n                    .then(response => {this.usersListProfile = response.data})\r\n                }\r\n                if(this.is_superuser || this.is_systemadmin){\r\n                    console.info('entra')\r\n                    getAllEnterprises()\r\n                    .then(async response => {\r\n                        this.arrEmpresas = response.data\r\n                        //this.arrEmpresasList = response.data\r\n                        this.arrEmpresasList = response.data.slice().sort((a, b) => {\r\n                            return a.name.localeCompare(b.name);\r\n                        });\r\n                        const arrParcels = []\r\n                        response.data.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.allParcelsOfEnterprisesFilter = arrParcels\r\n                        this.flagIndicatingDataHasBeenLoadedInVariables = true\r\n                    })\r\n                    getInformesAnterioresNew()\r\n                    .then(response => {\r\n                        console.info(response.data)\r\n                        this.historicoAnterior = response.data\r\n                    })\r\n                }else if((this.is_enterpriseadmin || this.is_staff) && !this.is_coop_user){ \r\n                    getEnterprise(user.enterprise_id)\r\n                    .then(async response => {\r\n                        this.arrEmpresas = [response.data]\r\n                        this.arrEmpresasList = [response.data]\r\n                        const arrParcels = []\r\n                        response.data.parcels.features.map(parcel => {\r\n                            arrParcels.push(parcel)\r\n                        })\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.allParcelsOfEnterprisesFilter = arrParcels\r\n                        this.flagIndicatingDataHasBeenLoadedInVariables = true\r\n                    })\r\n                    getInformesAnterioresNew(user.enterprise_id)\r\n                    .then(response => {\r\n                        console.info(response.data)\r\n                        this.historicoAnterior= response.data\r\n                    })\r\n                }else if(this.is_coop_user){\r\n                    getCooperative(user.enterprise_id)\r\n                    .then(response => {\r\n                        this.arrCooperativas = [response.data]\r\n                        //this.arrEmpresas = response.data.enterprises\r\n                        this.flagIndicatingDataHasBeenLoadedInVariables = true\r\n                    })\r\n                }\r\n\r\n                if(this.is_superuser || this.is_systemadmin){\r\n                    getAllCooperatives()\r\n                    .then(async response => {\r\n                        this.arrCooperativas = response.data\r\n                    })\r\n                }\r\n                this.isActiveLoading = false\r\n                this.isVisibleLoad = false\r\n            })\r\n        })\r\n    }\r\n}\r\n</script>"],"mappings":"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","ignoreList":[]}]}