{"remainingRequest":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\src\\components\\adminActions\\SentinelInstancesRefreshParcels.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\src\\components\\adminActions\\SentinelInstancesRefreshParcels.vue","mtime":1652779238921},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvaWNhbW9uLlNNQi9EZXNrdG9wL1BhcmNlbGFzL2RhdGFmb3JzbWFydGZhcm1pbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRBbGxFbnRlcnByaXNlcywgc2V0UGFyY2Vsc0Zvckluc3RhbmNlIH0gZnJvbSAnQC9jcnVkRnVuY3Rpb25zL2NydWRFbnRlcnByaXNlJzsgLy9nZXRFbnRlcnByaXNlCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1BhcmNlbHNUb1NlbnRpbmVsQ29tcG9uZW50JywKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm93U2VsZWN0czogW10sCiAgICAgIGxpc3RhZG9QYXJjZWxhczogQXJyYXksCiAgICAgIGxpc3RhZG9QYXJjZWxhc0ZpbHRlcjogQXJyYXksCiAgICAgIGFyckVtcHJlc2FzOiBbXSwKICAgICAgcm93U2l6ZTogIiIsCiAgICAgIGF1dG9XaWR0aDogZmFsc2UsCiAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgdGl0bGU6ICJMaXN0YWRvIGRlIEVtcHJlc2FzIiwKICAgICAgYWN0aW9uQmFyQXJpYUxhYmVsOiAiQ3VzdG9tIGFjdGlvbiBiYXIgYXJpYSBsYWJlbCIsCiAgICAgIGJhdGNoQ2FuY2VsTGFiZWw6ICJDYW5jZWwiLAogICAgICB6ZWJyYTogdHJ1ZSwKICAgICAgY29sdW1uczogW3sKICAgICAgICBrZXk6ICdpZCcsCiAgICAgICAgbGFiZWw6ICdJRCcKICAgICAgfSwgewogICAgICAgIGtleTogJ25hbWUnLAogICAgICAgIGxhYmVsOiAnTm9tYnJlIGRlIGxhIGVtcHJlc2EnCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdzZW50aW5lbF9pbnN0YW5jZScsCiAgICAgICAgbGFiZWw6ICJJbnN0YW5jaWEgZGUgc2VudGluZWwiCiAgICAgIH1dCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVmcmVzY2FySW5zYW5jaWE6IGZ1bmN0aW9uIHJlZnJlc2Nhckluc2FuY2lhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuYXJyRW1wcmVzYXMuZmlsdGVyKGZ1bmN0aW9uIChlbXByZXNhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLnJvd1NlbGVjdHMuaW5jbHVkZXMoZW1wcmVzYS5pZCk7CiAgICAgIH0pOwogICAgICBjb25zb2xlLmluZm8ocmVzdWx0KTsKICAgICAgcmVzdWx0Lm1hcCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShlbnRlcnByaXNlKSB7CiAgICAgICAgICB2YXIgYWxsQ29vcmRpbmF0ZXM7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGFsbENvb3JkaW5hdGVzID0gQXJyYXkoKTsKICAgICAgICAgICAgICAgICAgZW50ZXJwcmlzZS5wYXJjZWxzLmZlYXR1cmVzLm1hcChmdW5jdGlvbiAocGFyY2VsKSB7CiAgICAgICAgICAgICAgICAgICAgYWxsQ29vcmRpbmF0ZXMucHVzaChwYXJjZWwuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCJwYXJjZWxhcyBkZSAiLmNvbmNhdChlbnRlcnByaXNlLm5hbWUpLCBhbGxDb29yZGluYXRlcyk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICByZXR1cm4gc2V0UGFyY2Vsc0Zvckluc3RhbmNlKGVudGVycHJpc2UubmFtZSwgYWxsQ29vcmRpbmF0ZXMsIGVudGVycHJpc2Uuc2VudGluZWxfaW5zdGFuY2UpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCJPSyByZWZyZXNjYWRvIHBhcmNlbGFzIGRlICIuY29uY2F0KGVudGVycHJpc2UubmFtZSksIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuaW5mbygiRVJST1IgcmVmcmVzY2FkbyBwYXJjZWxhcyBkZSAiLmNvbmNhdChlbnRlcnByaXNlLm5hbWUpLCBlcnIpOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7IC8vcG9zdFBhcmNlbHNOb3RTZW50aW5lbEluc3RhbmNlKHRoaXMucm93U2VsZWN0cykKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7Ly9jb25zb2xlLmluZm8oJ1VzZXIgTG9nZ2VkJykKICB9LAogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgZ2V0QWxsRW50ZXJwcmlzZXMoKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5hcnJFbXByZXNhcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpczIuZmxhZ0luZGljYXRpbmdEYXRhSGFzQmVlbkxvYWRlZEluVmFyaWFibGVzID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKSk7CiAgfQp9Ow=="},{"version":3,"sources":["SentinelInstancesRefreshParcels.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,SAAA,iBAAA,EAAA,qBAAA,QAAA,gCAAA,C,CAAA;;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,4BADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,eAAA,EAAA,KAFA;AAGA,MAAA,qBAAA,EAAA,KAHA;AAIA,MAAA,WAAA,EAAA,EAJA;AAKA,MAAA,OAAA,EAAA,EALA;AAMA,MAAA,SAAA,EAAA,KANA;AAOA,MAAA,QAAA,EAAA,KAPA;AAQA,MAAA,KAAA,EAAA,qBARA;AASA,MAAA,kBAAA,EAAA,8BATA;AAUA,MAAA,gBAAA,EAAA,QAVA;AAWA,MAAA,KAAA,EAAA,IAXA;AAYA,MAAA,OAAA,EAAA,CACA;AACA,QAAA,GAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA;AAFA,OADA,EAKA;AACA,QAAA,GAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA;AAFA,OALA,EASA;AACA,QAAA,GAAA,EAAA,mBADA;AAEA,QAAA,KAAA;AAFA,OATA;AAZA,KAAA;AA2BA,GAhCA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,iBADA,+BACA;AAAA;;AACA,UAAA,MAAA,GAAA,KAAA,WAAA,CAAA,MAAA,CAAA,UAAA,OAAA;AAAA,eAAA,KAAA,CAAA,UAAA,CAAA,QAAA,CAAA,OAAA,CAAA,EAAA,CAAA;AAAA,OAAA,CAAA;AACA,MAAA,OAAA,CAAA,IAAA,CAAA,MAAA;AACA,MAAA,MAAA,CAAA,GAAA;AAAA,2EAAA,iBAAA,UAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,kBAAA,cADA,GACA,KAAA,EADA;AAEA,kBAAA,UAAA,CAAA,OAAA,CAAA,QAAA,CAAA,GAAA,CAAA,UAAA,MAAA,EAAA;AACA,oBAAA,cAAA,CAAA,IAAA,CAAA,MAAA,CAAA,QAAA,CAAA,WAAA;AACA,mBAFA;AAGA,kBAAA,OAAA,CAAA,IAAA,uBAAA,UAAA,CAAA,IAAA,GAAA,cAAA;AALA;AAAA,yBAMA,qBAAA,CAAA,UAAA,CAAA,IAAA,EAAA,cAAA,EAAA,UAAA,CAAA,iBAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,oBAAA,OAAA,CAAA,IAAA,qCAAA,UAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,mBAHA,EAIA,KAJA,CAIA,UAAA,GAAA;AAAA,2BAAA,OAAA,CAAA,IAAA,wCAAA,UAAA,CAAA,IAAA,GAAA,GAAA,CAAA;AAAA,mBAJA,CANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA;;AAAA;AAAA;AAAA;AAAA,WAHA,CAeA;AACA;AAjBA,GAjCA;AAoDA,EAAA,OAAA,EAAA,mBAAA,CACA;AACA,GAtDA;AAuDA,EAAA,YAvDA,0BAuDA;AAAA;;AACA,IAAA,iBAAA,GACA,IADA;AAAA,0EACA,kBAAA,QAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,WAAA,GAAA,QAAA,CAAA,IAAA;AACA,gBAAA,MAAA,CAAA,0CAAA,GAAA,IAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADA;;AAAA;AAAA;AAAA;AAAA;AAKA;AA7DA,CAAA","sourcesContent":["<template>\r\n    <div class=\"bx--grid\">\r\n        <template id=\"txt-explicativo\" class=\"bx--row\">\r\n            <div class=\"bx--col\">\r\n                <p>Procesado de las instancias de Sentinel para volver a cargar todas las parcelas en la instancia de nuevo</p>\r\n            </div>\r\n        </template>\r\n        <template class=\"bx--row\">\r\n            <cv-data-table\r\n                :row-size=\"rowSize\"\r\n                :auto-width=\"autoWidth\"\r\n                :sortable=\"sortable\"\r\n                :title=\"title\"\r\n                :action-bar-aria-label=\"actionBarAriaLabel\"\r\n                :batch-cancel-label=\"batchCancelLabel\"\r\n                :zebra=\"zebra\"\r\n                :columns=\"columns\"\r\n                v-model=\"rowSelects\"\r\n            >\r\n            <template v-if=\"true\" slot=\"batch-actions\">\r\n                <cv-button @click=\"refrescarInsancia\">\r\n                    Refrescar Instancia\r\n                    <Analytics20 class=\"bx--btn__icon\" />\r\n                </cv-button> \r\n            </template>\r\n            <template slot=\"data\" v-if=\"listadoParcelas\">\r\n                <cv-data-table-row\r\n                    v-for=\"enterprise in arrEmpresas\"\r\n                    :key=\"`${enterprise.id}`\"\r\n                    :value=\"`${enterprise.id}`\"\r\n                >\r\n                    <cv-data-table-cell>{{enterprise.id}}</cv-data-table-cell>\r\n                    <cv-data-table-cell>{{enterprise.name}}</cv-data-table-cell>\r\n                    <cv-data-table-cell>{{enterprise.sentinel_instance}}</cv-data-table-cell>\r\n                </cv-data-table-row>\r\n            </template>\r\n            </cv-data-table>\r\n        </template>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {getAllEnterprises, setParcelsForInstance} from '@/crudFunctions/crudEnterprise'//getEnterprise\r\n\r\nexport default {\r\n    name: 'ParcelsToSentinelComponent',\r\n    components: {\r\n    },\r\n    data(){\r\n        return {\r\n            rowSelects: [],\r\n            listadoParcelas: Array,\r\n            listadoParcelasFilter: Array,\r\n            arrEmpresas: [],\r\n            rowSize: \"\",\r\n            autoWidth: false,\r\n            sortable: false,\r\n            title: \"Listado de Empresas\",\r\n            actionBarAriaLabel: \"Custom action bar aria label\",\r\n            batchCancelLabel: \"Cancel\",\r\n            zebra: true,\r\n            columns: [\r\n                {\r\n                    key: 'id',\r\n                    label: 'ID',\r\n                },\r\n                {\r\n                    key: 'name',\r\n                    label: 'Nombre de la empresa',\r\n                },\r\n                {\r\n                    key: 'sentinel_instance',\r\n                    label: `Instancia de sentinel`,\r\n                },\r\n            ],\r\n        }\r\n    },\r\n    methods: {\r\n        refrescarInsancia(){\r\n            const result = this.arrEmpresas.filter(empresa => this.rowSelects.includes(empresa.id))\r\n            console.info(result)\r\n            result.map( async enterprise => {\r\n                const allCoordinates = Array();\r\n                enterprise.parcels.features.map(parcel => {\r\n                    allCoordinates.push(parcel.geometry.coordinates)\r\n                })\r\n                console.info(`parcelas de ${enterprise.name}`, allCoordinates)\r\n                await setParcelsForInstance(enterprise.name, allCoordinates, enterprise.sentinel_instance)\r\n                    .then(response => {\r\n                        console.info(`OK refrescado parcelas de ${enterprise.name}`, response.data)\r\n                    })\r\n                    .catch(err => console.info(`ERROR refrescado parcelas de ${enterprise.name}`, err))\r\n            })\r\n            //postParcelsNotSentinelInstance(this.rowSelects)\r\n        }\r\n    },\r\n    mounted: function () {\r\n        //console.info('User Logged')\r\n    },\r\n    beforeCreate(){\r\n        getAllEnterprises()\r\n            .then(async response => {\r\n                this.arrEmpresas = response.data\r\n                this.flagIndicatingDataHasBeenLoadedInVariables = true\r\n            })\r\n    }\r\n}\r\n</script>"],"sourceRoot":"src/components/adminActions"}]}