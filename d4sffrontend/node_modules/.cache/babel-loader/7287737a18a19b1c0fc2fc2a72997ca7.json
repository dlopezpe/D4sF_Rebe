{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\src\\components\\EditarInforme.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\src\\components\\EditarInforme.vue","mtime":1622648933771},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVW5pZmljYXJJbmZvcm1lIiwKICBwcm9wczogewogICAgaW5mb3JtZXNTZWxlY2Npb25hZG9zOiBBcnJheSgpLAogICAgaGlzdG9yaWNvOiBBcnJheSgpLAogICAgYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXM6IEFycmF5KCkKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZV9jYXJkOiAiTW9kaWZpY2FyIEluZm9ybWUiLAogICAgICB0ZXh0X2lucHV0X2xhYmVsOiAiTm9tYnJlIGRlbCBJbmZvcm1lIiwKICAgICAgbm9tYnJlSW5mb3JtZU5ldzogJycsCiAgICAgIGFsaWFzOiAiIiwKICAgICAgcGFyY2VsYTogT2JqZWN0KCksCiAgICAgIG1lbnNhamVBbGVydGE6ICIiLAogICAgICB0aXBvQWxlcnRhOiAiZXJyb3IiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb3Blbk1vZGFsOiBmdW5jdGlvbiBvcGVuTW9kYWwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGF0aCA9ICIiLmNvbmNhdCh0aGlzLiRhcGlVUkwsICIvdmVyX2hpc3QvIikuY29uY2F0KHRoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zWzBdLCAiLyIpOwogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIik7CiAgICAgIGF4aW9zLmdldChwYXRoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmICghcmVzcG9uc2UuZGF0YS5hbGlhcykgewogICAgICAgICAgX3RoaXMucGFyY2VsYSA9IF90aGlzLmhpc3Rvcmljby5maWx0ZXIoZnVuY3Rpb24gKGluZm9ybWUpIHsKICAgICAgICAgICAgaWYgKGluZm9ybWUuaWQgPT0gX3RoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zWzBdKSB7CiAgICAgICAgICAgICAgX3RoaXMubm9tYnJlSW5mb3JtZU5ldyA9IGluZm9ybWUudGlwbyA9PSAxID8gX3RoaXMucGFyY2VsYU5hbWUoaW5mb3JtZS5wYXJjZWxhKSA6IGluZm9ybWUucGFyY2VsYTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLm5vbWJyZUluZm9ybWVOZXcgPSByZXNwb25zZS5kYXRhLmFsaWFzOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTsKICAgICAgfSk7CiAgICAgIHRoaXMuJHJlZnMuRWRpdGFySW5mb3JtZUZvcm0uc2hvdygpOwogICAgfSwKICAgIHBhcmNlbGFOYW1lOiBmdW5jdGlvbiBwYXJjZWxhTmFtZShpZCkgewogICAgICB2YXIgcGFyY2VsYVNlbGVjdCA9IHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMuZmlsdGVyKGZ1bmN0aW9uIChwYXJjZWxhKSB7CiAgICAgICAgcmV0dXJuIHBhcmNlbGEuaWQgPT0gaWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKHBhcmNlbGFTZWxlY3QubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBwYXJjZWxhU2VsZWN0WzBdLnByb3BlcnRpZXMubmFtZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhcmNlbGEgPSB7CiAgICAgICAgICB0aXBvOiAxCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gJ0dyw6FmaWNvIEdlbmVyYWRvIGRlIFBhcmNlbGEgRWxpbWluYWRhJzsKICAgICAgfQogICAgfSwKICAgIHVuaWZpY2FJbmZvcm1lczogZnVuY3Rpb24gdW5pZmljYUluZm9ybWVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBwYXRoID0gIiIuY29uY2F0KHRoaXMuJGFwaVVSTCwgIi92ZXJfaGlzdC8iKS5jb25jYXQodGhpcy5pbmZvcm1lc1NlbGVjY2lvbmFkb3NbMF0sICIvIik7CiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKTsKCiAgICAgIGlmICh0aGlzLnBhcmNlbGEudGlwbyA9PSAxKSB7CiAgICAgICAgYXhpb3MucHV0KHBhdGgsIHsKICAgICAgICAgIGFsaWFzOiB0aGlzLm5vbWJyZUluZm9ybWVOZXcKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlKTsKICAgICAgICAgIF90aGlzMi4kcGFyZW50Lm1lbnNhamVBbGVydGEgPSAiSW5mb3JtZSBHdWFyZGFkbyBjb3JyZWN0YW1lbnRlIjsKICAgICAgICAgIF90aGlzMi4kcGFyZW50LnRpcG9BbGVydGEgPSAnc3VjY2Vzcyc7CgogICAgICAgICAgX3RoaXMyLiRlbWl0KCdtZW5zYWplQWxlcnRhJywgIkluZm9ybWUgR3VhcmRhZG8gY29ycmVjdGFtZW50ZSIpOwoKICAgICAgICAgIF90aGlzMi4kZW1pdCgndGlwb0FsZXJ0YScsICJzdWNjZXNzIik7CgogICAgICAgICAgX3RoaXMyLiRlbWl0KCd2ZXJBbGVydGEnKTsKCiAgICAgICAgICBfdGhpczIuJGVtaXQoJ2dldEluZm9ybWVzQW50Jyk7CgogICAgICAgICAgX3RoaXMyLiRyZWZzLkVkaXRhckluZm9ybWVGb3JtLmhpZGUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXhpb3MucHV0KHBhdGgsIHsKICAgICAgICAgIHBhcmNlbGE6IHRoaXMubm9tYnJlSW5mb3JtZU5ldwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8ocmVzcG9uc2UpOwogICAgICAgICAgX3RoaXMyLiRwYXJlbnQubWVuc2FqZUFsZXJ0YSA9ICJJbmZvcm1lIEd1YXJkYWRvIGNvcnJlY3RhbWVudGUiOwogICAgICAgICAgX3RoaXMyLiRwYXJlbnQudGlwb0FsZXJ0YSA9ICdzdWNjZXNzJzsKCiAgICAgICAgICBfdGhpczIuJGVtaXQoJ21lbnNhamVBbGVydGEnLCAiSW5mb3JtZSBHdWFyZGFkbyBjb3JyZWN0YW1lbnRlIik7CgogICAgICAgICAgX3RoaXMyLiRlbWl0KCd0aXBvQWxlcnRhJywgInN1Y2Nlc3MiKTsKCiAgICAgICAgICBfdGhpczIuJGVtaXQoJ3ZlckFsZXJ0YScpOwoKICAgICAgICAgIF90aGlzMi4kZW1pdCgnZ2V0SW5mb3JtZXNBbnQnKTsKCiAgICAgICAgICBfdGhpczIuJHJlZnMuRWRpdGFySW5mb3JtZUZvcm0uaGlkZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGNvbnNvbGUuaW5mbygnUHJ1ZWJhcycpOwogIH0KfTs="},{"version":3,"sources":["EditarInforme.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <cv-modal\r\n        :auto-hide-off=\"false\"\r\n        ref=\"EditarInformeForm\"\r\n        @primary-click=\"unificaInformes\"\r\n        @secondary-click=\"$refs.unificarInformeForm.hide()\"\r\n        :close-aria-label=\"`Close`\"\r\n    >\r\n        <template v-if=\"true\" slot=\"label\"></template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t('graficos.modifica_infor')}}</template>\r\n        <template v-if=\"true\" slot=\"content\" id=\"contenido\">\r\n            <div class=\"bx--grid bx--grid--condensed\">\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Nombre de Informe -->\r\n                        <div class=\"bx--form-item\">\r\n                            <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre_informe')}}</label>\r\n                            <input v-model=\"nombreInformeNew\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\" :placeholder=\"text_input_label\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {{allParcelsOfEnterprises}}\r\n        </template>\r\n        <template v-if=\"true\" slot=\"secondary-button\">{{$t('graficos.cancelar')}}</template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t('graficos.guardar')}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"UnificarInforme\",\r\n    props: {\r\n        informesSeleccionados: Array(),\r\n        historico: Array(),\r\n        allParcelsOfEnterprises: Array()\r\n    },\r\n    data() {\r\n        return {\r\n            title_card: `Modificar Informe`,\r\n            text_input_label: `Nombre del Informe`,\r\n            nombreInformeNew: '',\r\n            alias: ``,\r\n            parcela: Object(),\r\n            mensajeAlerta: ``,\r\n            tipoAlerta: `error`\r\n        }\r\n    },\r\n    methods: {\r\n        openModal(){\r\n            let path = `${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                if(!response.data.alias){\r\n                    this.parcela = this.historico.filter(informe => {\r\n                        if(informe.id == this.informesSeleccionados[0]){\r\n                            this.nombreInformeNew = (informe.tipo == 1) ? this.parcelaName(informe.parcela) : informe.parcela\r\n                        }\r\n                    })\r\n                }else{\r\n                    this.nombreInformeNew = response.data.alias\r\n                }\r\n            })\r\n            .catch(error =>{\r\n                console.warn(error)\r\n            })\r\n            this.$refs.EditarInformeForm.show()\r\n        },\r\n        parcelaName(id){\r\n            const parcelaSelect = this.allParcelsOfEnterprises.filter((parcela)=>{\r\n                return parcela.id == id\r\n            })            \r\n            if(parcelaSelect.length > 0){\r\n                return parcelaSelect[0].properties.name\r\n            }else{\r\n                this.parcela = {tipo: 1}\r\n                return 'GrÃ¡fico Generado de Parcela Eliminada'\r\n            }\r\n        },\r\n        unificaInformes(){\r\n            const path = `${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            if(this.parcela.tipo == 1){\r\n                axios\r\n                .put(path, {\r\n                    alias: this.nombreInformeNew\r\n                })\r\n                .then(response => {\r\n                    console.info(response)\r\n                    this.$parent.mensajeAlerta = `Informe Guardado correctamente`\r\n                    this.$parent.tipoAlerta = 'success'\r\n                    this.$emit('mensajeAlerta', `Informe Guardado correctamente`)\r\n                    this.$emit('tipoAlerta', `success`)\r\n                    this.$emit('verAlerta')\r\n                    this.$emit('getInformesAnt')\r\n                    this.$refs.EditarInformeForm.hide()\r\n                })\r\n                .catch((error) =>{\r\n                    console.warn(error)\r\n                })\r\n            }else{\r\n                axios\r\n                .put(path, {\r\n                    parcela: this.nombreInformeNew\r\n                })\r\n                .then(response => {\r\n                    console.info(response)\r\n                    this.$parent.mensajeAlerta = `Informe Guardado correctamente`\r\n                    this.$parent.tipoAlerta = 'success'\r\n                    this.$emit('mensajeAlerta', `Informe Guardado correctamente`)\r\n                    this.$emit('tipoAlerta', `success`)\r\n                    this.$emit('verAlerta')\r\n                    this.$emit('getInformesAnt')\r\n                    this.$refs.EditarInformeForm.hide()\r\n                })\r\n                .catch((error) =>{\r\n                    console.warn(error)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    mounted: function () {\r\n        console.info('Pruebas')\r\n    },\r\n}\r\n</script>"],"sourceRoot":"src/components"}]}