{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\src\\components\\UnificarInforme.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\src\\components\\UnificarInforme.vue","mtime":1622647148407},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVbmlmaWNhckluZm9ybWUiLAogIHByb3BzOiB7CiAgICBpbmZvcm1lc1NlbGw6IFtdLAogICAgaW5mb3JtZXNTZWxlY2Npb25hZG9zOiBBcnJheSgpLAogICAgaGlzdG9yaWNvOiBBcnJheSgpLAogICAgdGlwbzogU3RyaW5nKCksCiAgICBjYXBhOiBTdHJpbmcoKSwKICAgIGVudGVycHJpc2VJRDogU3RyaW5nKCksCiAgICBhbGxQYXJjZWxzT2ZFbnRlcnByaXNlczogQXJyYXkoKQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlX2NhcmQ6IHRoaXMuJHQoJ2dyYWZpY29zLnVuaWZpY2FyX2luZm9ybWVzJyksCiAgICAgIHRleHRfaW5wdXRfbGFiZWw6IHRoaXMuJHQoJ2dyYWZpY29zLm5vbWJyZScpLAogICAgICBsYWJlbF9jaGVjazogdGhpcy4kdCgnZ3JhZmljb3MuZWxpbWluYXJfaW5mb3JtZV9vcmlnaW4nKSwKICAgICAgY29sdW1uc0hpc3RvcmljbzogW3RoaXMuJHQoJ2dyYWZpY29zLnBhcmNlbGFzJyksIHRoaXMuJHQoJ2dyYWZpY29zLnJhbmdvX2ZlY2hhc19zZWwnKSwgewogICAgICAgICdsYWJlbCc6IHRoaXMuJHQoJ2dyYWZpY29zLmNyZWFkbycpCiAgICAgIH1dLAogICAgICBub21icmVJbmZvcm1lTmV3OiAnJywKICAgICAgY2hlY2tEZWxsSW5mb3JtZTogZmFsc2UsCiAgICAgIGFsaWFzOiAiIgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHBhcmNlbGFOYW1lOiBmdW5jdGlvbiBwYXJjZWxhTmFtZShpZCkgewogICAgICB2YXIgcGFyY2VsYVNlbGVjdCA9IHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMuZmlsdGVyKGZ1bmN0aW9uIChwYXJjZWxhKSB7CiAgICAgICAgcmV0dXJuIHBhcmNlbGEuaWQgPT0gaWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKHBhcmNlbGFTZWxlY3QubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybiBwYXJjZWxhU2VsZWN0WzBdLnByb3BlcnRpZXMubmFtZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ0dyw6FmaWNvIEdlbmVyYWRvIGRlIFBhcmNlbGEgRWxpbWluYWRhJzsKICAgICAgfQogICAgfSwKICAgIGRhdGVGb3JtYXQ6IGZ1bmN0aW9uIGRhdGVGb3JtYXQoZGF0ZSkgewogICAgICB2YXIgZHRzID0gZGF0ZS5zcGxpdCgnVCcpOwogICAgICByZXR1cm4gZHRzWzBdOwogICAgfSwKICAgIG9wZW5Nb2RhbDogZnVuY3Rpb24gb3Blbk1vZGFsKCkgewogICAgICBpZiAocGFyc2VJbnQodGhpcy50aXBvKSA9PSAxKSB7CiAgICAgICAgdGhpcy5wYXJjZWxhID0gdGhpcy5pbmZvcm1lc1NlbGVjY2lvbmFkb3NbMF0ucGFyY2VsYTsKICAgICAgfQoKICAgICAgdGhpcy4kcmVmcy51bmlmaWNhckluZm9ybWVGb3JtLnNob3coKTsKICAgIH0sCiAgICB1bmlmaWNhSW5mb3JtZXM6IGZ1bmN0aW9uIHVuaWZpY2FJbmZvcm1lcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChwYXJzZUludCh0aGlzLnRpcG8pID09IDIpIHsKICAgICAgICB0aGlzLnBhcmNlbGEgPSB0aGlzLm5vbWJyZUluZm9ybWVOZXc7CiAgICAgIH0KCiAgICAgIHZhciBwYXRoID0gIiIuY29uY2F0KHRoaXMuJGFwaVVSTCwgIi91bmlmaWNhckluZm9ybWUvIik7CiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIgKyBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKTsKICAgICAgYXhpb3MucG9zdChwYXRoLCB7CiAgICAgICAgcGFyY2VsYTogdGhpcy5wYXJjZWxhLAogICAgICAgIHVybFNlbnRpbmVsOiBbJ3BydWViYXMnXSwKICAgICAgICAvL2FyciB1cmwKICAgICAgICAvL2ZlY2hhczogZmVjaGFzU2VudGluZWwsIC8vQXJyIHBhcmNlbGFzCiAgICAgICAgcG9seWdvbjogW3RoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zXSwKICAgICAgICBlbnRlcnByaXNlX2lkOiB0aGlzLmVudGVycHJpc2VJRCwKICAgICAgICBjYXBhOiB0aGlzLmNhcGEsCiAgICAgICAgdGlwbzogdGhpcy50aXBvLAogICAgICAgIC8vZmVjaGFFbGVnaWRhOiB0aGlzLmZlY2hhR2VuZXJhcgogICAgICAgIGNoZWNrRGVsbE90cm9zOiB0aGlzLmNoZWNrRGVsbEluZm9ybWUsCiAgICAgICAgYWxpYXM6IHRoaXMubm9tYnJlSW5mb3JtZU5ldwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUuaW5mbyhyZXNwb25zZSk7CiAgICAgICAgX3RoaXMuJHBhcmVudC5tZW5zYWplQWxlcnRhID0gX3RoaXMuJHQoJ2dyYWZpY29zLmluZm9ybWVfZ2VuX29rJyk7CiAgICAgICAgX3RoaXMuJHBhcmVudC50aXBvQWxlcnRhID0gJ3N1Y2Nlc3MnOwoKICAgICAgICBfdGhpcy4kZW1pdCgnbWVuc2FqZUFsZXJ0YScsIF90aGlzLiR0KCdncmFmaWNvcy5pbmZvcm1lX2dlbl9vaycpKTsKCiAgICAgICAgX3RoaXMuJGVtaXQoJ3RpcG9BbGVydGEnLCAic3VjY2VzcyIpOwoKICAgICAgICBfdGhpcy4kZW1pdCgndmVyQWxlcnRhJyk7CgogICAgICAgIF90aGlzLiRlbWl0KCdnZXRJbmZvcm1lc0FudCcpOwoKICAgICAgICBfdGhpcy4kcmVmcy51bmlmaWNhckluZm9ybWVGb3JtLmhpZGUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["UnificarInforme.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <cv-modal\r\n        :auto-hide-off=\"false\"\r\n        ref=\"unificarInformeForm\"\r\n        @primary-click=\"unificaInformes\"\r\n        @secondary-click=\"$refs.unificarInformeForm.hide()\"\r\n        :close-aria-label=\"`Close`\"\r\n    >\r\n        <template v-if=\"true\" slot=\"label\"></template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t('graficos.unificar_informes')}}</template>\r\n        <template v-if=\"true\" slot=\"content\" id=\"contenido\">\r\n            <div class=\"bx--grid bx--grid--condensed\">\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Nombre de Informe -->\r\n                        <div class=\"bx--form-item\">\r\n                            <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre')}}</label>\r\n                            <input v-model=\"nombreInformeNew\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\" :placeholder=\"$t('graficos.nombre')\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br>\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Resumen de Informes -->\r\n                        <div class=\"bx--form-item\">\r\n                            <cv-checkbox\r\n                                :label=\"label_check\"\r\n                                :checked=\"false\"\r\n                                value=\"true\"\r\n                                :mixed=\"false\"\r\n                                v-model=\"checkDellInforme\"\r\n                            >\r\n                            </cv-checkbox>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br>\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <h4>{{$t(\"graficos.resumen_unifica\")}}</h4>\r\n                        <p>{{$t(\"graficos.capa\")}} {{capa}}</p>\r\n                        <p>{{$t(\"graficos.tipo\")}} {{tipo}}</p>\r\n                        <cv-data-table\r\n                        :columns=\"[\r\n                this.$t('graficos.parcelas'),\r\n                this.$t('graficos.rango_fechas_sel'),\r\n                {\r\n                    'label': this.$t('graficos.creado'),\r\n                },\r\n            ]\" >\r\n                            <template slot=\"data\">\r\n                                <cv-data-table-row  v-for=\"informe in informesSeleccionados\" :value=\"String(informe.id)\" :key=\"String(informe.id)\">\r\n                                    <cv-data-table-cell v-if=\"informe.tipo == 1\">\r\n                                        {{parcelaName(informe.parcela)}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell v-else>\r\n                                        {{informe.parcela}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell>\r\n                                        {{informe.finifin}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell>\r\n                                        {{dateFormat(informe.created)}}\r\n                                    </cv-data-table-cell>\r\n                                </cv-data-table-row>\r\n                            </template>\r\n                        </cv-data-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template v-if=\"true\" slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t(\"graficos.unificar\")}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"UnificarInforme\",\r\n    props: {\r\n        informesSell: [],\r\n        informesSeleccionados: Array(),\r\n        historico: Array(),\r\n        tipo: String(),\r\n        capa: String(),\r\n        enterpriseID: String(),\r\n        allParcelsOfEnterprises: Array()\r\n    },\r\n    data() {\r\n        return {\r\n            title_card: this.$t('graficos.unificar_informes'),\r\n            text_input_label: this.$t('graficos.nombre'),\r\n            label_check: this.$t('graficos.eliminar_informe_origin'),\r\n            columnsHistorico: [\r\n                this.$t('graficos.parcelas'),\r\n                this.$t('graficos.rango_fechas_sel'),\r\n                {\r\n                    'label': this.$t('graficos.creado'),\r\n                },\r\n            ],\r\n            nombreInformeNew: '',\r\n            checkDellInforme: false,\r\n            alias: ``\r\n        }\r\n    },\r\n    methods: {\r\n        parcelaName(id){\r\n            const parcelaSelect = this.allParcelsOfEnterprises.filter((parcela)=>{\r\n                return parcela.id == id\r\n            })            \r\n            if(parcelaSelect.length > 0){\r\n                return parcelaSelect[0].properties.name\r\n            }else{\r\n                return 'Gráfico Generado de Parcela Eliminada'\r\n            }\r\n        },\r\n        dateFormat(date){\r\n            const dts = date.split('T')\r\n            return dts[0]\r\n        },\r\n        openModal(){\r\n            if(parseInt(this.tipo) == 1){\r\n                this.parcela = this.informesSeleccionados[0].parcela\r\n            }\r\n            this.$refs.unificarInformeForm.show()\r\n        },\r\n        unificaInformes(){\r\n            if(parseInt(this.tipo) == 2){\r\n                this.parcela = this.nombreInformeNew\r\n            }\r\n            const path = `${this.$apiURL}/unificarInforme/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .post(path, {\r\n                parcela: this.parcela,\r\n                urlSentinel: ['pruebas'], //arr url\r\n                //fechas: fechasSentinel, //Arr parcelas\r\n                polygon: [this.informesSeleccionados],\r\n                enterprise_id: this.enterpriseID,\r\n                capa: this.capa,\r\n                tipo: this.tipo,\r\n                //fechaElegida: this.fechaGenerar\r\n                checkDellOtros: this.checkDellInforme,\r\n                alias: this.nombreInformeNew\r\n            })\r\n            .then(response => {\r\n                console.info(response)\r\n                this.$parent.mensajeAlerta = this.$t('graficos.informe_gen_ok')\r\n                this.$parent.tipoAlerta = 'success'\r\n                this.$emit('mensajeAlerta', this.$t('graficos.informe_gen_ok'))\r\n                this.$emit('tipoAlerta', `success`)\r\n                this.$emit('verAlerta')\r\n                this.$emit('getInformesAnt')\r\n                this.$refs.unificarInformeForm.hide()\r\n            })\r\n            .catch((error) =>{\r\n                console.warn(error)\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>"],"sourceRoot":"src/components"}]}