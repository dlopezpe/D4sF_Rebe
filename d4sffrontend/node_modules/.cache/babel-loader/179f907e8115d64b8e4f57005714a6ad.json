{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\EditarInforme.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\EditarInforme.vue","mtime":1681217492538},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\babel.config.js","mtime":1681217492507},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVW5pZmljYXJJbmZvcm1lIiwKICBwcm9wczogewogICAgaW5mb3JtZXNTZWxlY2Npb25hZG9zOiBBcnJheSgpLAogICAgaGlzdG9yaWNvOiBBcnJheSgpLAogICAgYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXM6IEFycmF5KCkKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZV9jYXJkOiBgTW9kaWZpY2FyIEluZm9ybWVgLAogICAgICB0ZXh0X2lucHV0X2xhYmVsOiBgTm9tYnJlIGRlbCBJbmZvcm1lYCwKICAgICAgbm9tYnJlSW5mb3JtZU5ldzogJycsCiAgICAgIGFsaWFzOiBgYCwKICAgICAgcGFyY2VsYTogT2JqZWN0KCksCiAgICAgIG1lbnNhamVBbGVydGE6IGBgLAogICAgICB0aXBvQWxlcnRhOiBgZXJyb3JgCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb3Blbk1vZGFsKCkgewogICAgICBsZXQgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vdmVyX2hpc3QvJHt0aGlzLmluZm9ybWVzU2VsZWNjaW9uYWRvc1swXX0vYDsKICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIiArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpOwogICAgICBheGlvcy5nZXQocGF0aCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhLmFsaWFzKSB7CiAgICAgICAgICB0aGlzLnBhcmNlbGEgPSB0aGlzLmhpc3Rvcmljby5maWx0ZXIoaW5mb3JtZSA9PiB7CiAgICAgICAgICAgIGlmIChpbmZvcm1lLmlkID09IHRoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zWzBdKSB7CiAgICAgICAgICAgICAgdGhpcy5ub21icmVJbmZvcm1lTmV3ID0gaW5mb3JtZS50aXBvID09IDEgPyB0aGlzLnBhcmNlbGFOYW1lKGluZm9ybWUucGFyY2VsYSkgOiBpbmZvcm1lLnBhcmNlbGE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm5vbWJyZUluZm9ybWVOZXcgPSByZXNwb25zZS5kYXRhLmFsaWFzOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7CiAgICAgIH0pOwogICAgICB0aGlzLiRyZWZzLkVkaXRhckluZm9ybWVGb3JtLnNob3coKTsKICAgIH0sCiAgICBwYXJjZWxhTmFtZShpZCkgewogICAgICBjb25zdCBwYXJjZWxhU2VsZWN0ID0gdGhpcy5hbGxQYXJjZWxzT2ZFbnRlcnByaXNlcy5maWx0ZXIocGFyY2VsYSA9PiB7CiAgICAgICAgcmV0dXJuIHBhcmNlbGEuaWQgPT0gaWQ7CiAgICAgIH0pOwogICAgICBpZiAocGFyY2VsYVNlbGVjdC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIHBhcmNlbGFTZWxlY3RbMF0ucHJvcGVydGllcy5uYW1lOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFyY2VsYSA9IHsKICAgICAgICAgIHRpcG86IDEKICAgICAgICB9OwogICAgICAgIHJldHVybiAnR3LDoWZpY28gR2VuZXJhZG8gZGUgUGFyY2VsYSBFbGltaW5hZGEnOwogICAgICB9CiAgICB9LAogICAgdW5pZmljYUluZm9ybWVzKCkgewogICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS92ZXJfaGlzdC8ke3RoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zWzBdfS9gOwogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIik7CiAgICAgIGlmICh0aGlzLnBhcmNlbGEudGlwbyA9PSAxKSB7CiAgICAgICAgYXhpb3MucHV0KHBhdGgsIHsKICAgICAgICAgIGFsaWFzOiB0aGlzLm5vbWJyZUluZm9ybWVOZXcKICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnNvbGUuaW5mbyhyZXNwb25zZSk7CiAgICAgICAgICB0aGlzLiRwYXJlbnQubWVuc2FqZUFsZXJ0YSA9IGBJbmZvcm1lIEd1YXJkYWRvIGNvcnJlY3RhbWVudGVgOwogICAgICAgICAgdGhpcy4kcGFyZW50LnRpcG9BbGVydGEgPSAnc3VjY2Vzcyc7CiAgICAgICAgICB0aGlzLiRlbWl0KCdtZW5zYWplQWxlcnRhJywgYEluZm9ybWUgR3VhcmRhZG8gY29ycmVjdGFtZW50ZWApOwogICAgICAgICAgdGhpcy4kZW1pdCgndGlwb0FsZXJ0YScsIGBzdWNjZXNzYCk7CiAgICAgICAgICB0aGlzLiRlbWl0KCd2ZXJBbGVydGEnKTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldEluZm9ybWVzQW50Jyk7CiAgICAgICAgICB0aGlzLiRyZWZzLkVkaXRhckluZm9ybWVGb3JtLmhpZGUoKTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGF4aW9zLnB1dChwYXRoLCB7CiAgICAgICAgICBwYXJjZWxhOiB0aGlzLm5vbWJyZUluZm9ybWVOZXcKICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnNvbGUuaW5mbyhyZXNwb25zZSk7CiAgICAgICAgICB0aGlzLiRwYXJlbnQubWVuc2FqZUFsZXJ0YSA9IGBJbmZvcm1lIEd1YXJkYWRvIGNvcnJlY3RhbWVudGVgOwogICAgICAgICAgdGhpcy4kcGFyZW50LnRpcG9BbGVydGEgPSAnc3VjY2Vzcyc7CiAgICAgICAgICB0aGlzLiRlbWl0KCdtZW5zYWplQWxlcnRhJywgYEluZm9ybWUgR3VhcmRhZG8gY29ycmVjdGFtZW50ZWApOwogICAgICAgICAgdGhpcy4kZW1pdCgndGlwb0FsZXJ0YScsIGBzdWNjZXNzYCk7CiAgICAgICAgICB0aGlzLiRlbWl0KCd2ZXJBbGVydGEnKTsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2dldEluZm9ybWVzQW50Jyk7CiAgICAgICAgICB0aGlzLiRyZWZzLkVkaXRhckluZm9ybWVGb3JtLmhpZGUoKTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICBjb25zb2xlLmluZm8oJ1BydWViYXMnKTsKICB9Cn07"},{"version":3,"names":["axios","name","props","informesSeleccionados","Array","historico","allParcelsOfEnterprises","data","title_card","text_input_label","nombreInformeNew","alias","parcela","Object","mensajeAlerta","tipoAlerta","methods","openModal","path","$apiURL","defaults","headers","common","sessionStorage","getItem","get","then","response","filter","informe","id","tipo","parcelaName","catch","error","console","warn","$refs","EditarInformeForm","show","parcelaSelect","length","properties","unificaInformes","put","info","$parent","$emit","hide","mounted"],"sources":["src/components/EditarInforme.vue"],"sourcesContent":["<template>\r\n    <cv-modal\r\n        :auto-hide-off=\"false\"\r\n        ref=\"EditarInformeForm\"\r\n        @primary-click=\"unificaInformes\"\r\n        @secondary-click=\"$refs.unificarInformeForm.hide()\"\r\n        :close-aria-label=\"`Close`\"\r\n    >\r\n        <template v-if=\"true\" slot=\"label\"></template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t('graficos.modifica_infor')}}</template>\r\n        <template v-if=\"true\" slot=\"content\" id=\"contenido\">\r\n            <div class=\"bx--grid bx--grid--condensed\">\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Nombre de Informe -->\r\n                        <div class=\"bx--form-item\">\r\n                            <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre_informe')}}</label>\r\n                            <input v-model=\"nombreInformeNew\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\" :placeholder=\"text_input_label\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {{allParcelsOfEnterprises}}\r\n        </template>\r\n        <template v-if=\"true\" slot=\"secondary-button\">{{$t('graficos.cancelar')}}</template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t('graficos.guardar')}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"UnificarInforme\",\r\n    props: {\r\n        informesSeleccionados: Array(),\r\n        historico: Array(),\r\n        allParcelsOfEnterprises: Array()\r\n    },\r\n    data() {\r\n        return {\r\n            title_card: `Modificar Informe`,\r\n            text_input_label: `Nombre del Informe`,\r\n            nombreInformeNew: '',\r\n            alias: ``,\r\n            parcela: Object(),\r\n            mensajeAlerta: ``,\r\n            tipoAlerta: `error`\r\n        }\r\n    },\r\n    methods: {\r\n        openModal(){\r\n            let path = `${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                if(!response.data.alias){\r\n                    this.parcela = this.historico.filter(informe => {\r\n                        if(informe.id == this.informesSeleccionados[0]){\r\n                            this.nombreInformeNew = (informe.tipo == 1) ? this.parcelaName(informe.parcela) : informe.parcela\r\n                        }\r\n                    })\r\n                }else{\r\n                    this.nombreInformeNew = response.data.alias\r\n                }\r\n            })\r\n            .catch(error =>{\r\n                console.warn(error)\r\n            })\r\n            this.$refs.EditarInformeForm.show()\r\n        },\r\n        parcelaName(id){\r\n            const parcelaSelect = this.allParcelsOfEnterprises.filter((parcela)=>{\r\n                return parcela.id == id\r\n            })            \r\n            if(parcelaSelect.length > 0){\r\n                return parcelaSelect[0].properties.name\r\n            }else{\r\n                this.parcela = {tipo: 1}\r\n                return 'GrÃ¡fico Generado de Parcela Eliminada'\r\n            }\r\n        },\r\n        unificaInformes(){\r\n            const path = `${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            if(this.parcela.tipo == 1){\r\n                axios\r\n                .put(path, {\r\n                    alias: this.nombreInformeNew\r\n                })\r\n                .then(response => {\r\n                    console.info(response)\r\n                    this.$parent.mensajeAlerta = `Informe Guardado correctamente`\r\n                    this.$parent.tipoAlerta = 'success'\r\n                    this.$emit('mensajeAlerta', `Informe Guardado correctamente`)\r\n                    this.$emit('tipoAlerta', `success`)\r\n                    this.$emit('verAlerta')\r\n                    this.$emit('getInformesAnt')\r\n                    this.$refs.EditarInformeForm.hide()\r\n                })\r\n                .catch((error) =>{\r\n                    console.warn(error)\r\n                })\r\n            }else{\r\n                axios\r\n                .put(path, {\r\n                    parcela: this.nombreInformeNew\r\n                })\r\n                .then(response => {\r\n                    console.info(response)\r\n                    this.$parent.mensajeAlerta = `Informe Guardado correctamente`\r\n                    this.$parent.tipoAlerta = 'success'\r\n                    this.$emit('mensajeAlerta', `Informe Guardado correctamente`)\r\n                    this.$emit('tipoAlerta', `success`)\r\n                    this.$emit('verAlerta')\r\n                    this.$emit('getInformesAnt')\r\n                    this.$refs.EditarInformeForm.hide()\r\n                })\r\n                .catch((error) =>{\r\n                    console.warn(error)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    mounted: function () {\r\n        console.info('Pruebas')\r\n    },\r\n}\r\n</script>"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,qBAAA,EAAAC,KAAA;IACAC,SAAA,EAAAD,KAAA;IACAE,uBAAA,EAAAF,KAAA;EACA;EACAG,KAAA;IACA;MACAC,UAAA;MACAC,gBAAA;MACAC,gBAAA;MACAC,KAAA;MACAC,OAAA,EAAAC,MAAA;MACAC,aAAA;MACAC,UAAA;IACA;EACA;EACAC,OAAA;IACAC,UAAA;MACA,IAAAC,IAAA,WAAAC,OAAA,kBAAAhB,qBAAA;MACAH,KAAA,CAAAoB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAC,cAAA,CAAAC,OAAA;MACAxB,KAAA,CACAyB,GAAA,CAAAP,IAAA,EACAQ,IAAA,CAAAC,QAAA;QACA,KAAAA,QAAA,CAAApB,IAAA,CAAAI,KAAA;UACA,KAAAC,OAAA,QAAAP,SAAA,CAAAuB,MAAA,CAAAC,OAAA;YACA,IAAAA,OAAA,CAAAC,EAAA,SAAA3B,qBAAA;cACA,KAAAO,gBAAA,GAAAmB,OAAA,CAAAE,IAAA,aAAAC,WAAA,CAAAH,OAAA,CAAAjB,OAAA,IAAAiB,OAAA,CAAAjB,OAAA;YACA;UACA;QACA;UACA,KAAAF,gBAAA,GAAAiB,QAAA,CAAApB,IAAA,CAAAI,KAAA;QACA;MACA,GACAsB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,IAAA,CAAAF,KAAA;MACA;MACA,KAAAG,KAAA,CAAAC,iBAAA,CAAAC,IAAA;IACA;IACAP,YAAAF,EAAA;MACA,MAAAU,aAAA,QAAAlC,uBAAA,CAAAsB,MAAA,CAAAhB,OAAA;QACA,OAAAA,OAAA,CAAAkB,EAAA,IAAAA,EAAA;MACA;MACA,IAAAU,aAAA,CAAAC,MAAA;QACA,OAAAD,aAAA,IAAAE,UAAA,CAAAzC,IAAA;MACA;QACA,KAAAW,OAAA;UAAAmB,IAAA;QAAA;QACA;MACA;IACA;IACAY,gBAAA;MACA,MAAAzB,IAAA,WAAAC,OAAA,kBAAAhB,qBAAA;MACAH,KAAA,CAAAoB,QAAA,CAAAC,OAAA,CAAAC,MAAA,gCAAAC,cAAA,CAAAC,OAAA;MACA,SAAAZ,OAAA,CAAAmB,IAAA;QACA/B,KAAA,CACA4C,GAAA,CAAA1B,IAAA;UACAP,KAAA,OAAAD;QACA,GACAgB,IAAA,CAAAC,QAAA;UACAQ,OAAA,CAAAU,IAAA,CAAAlB,QAAA;UACA,KAAAmB,OAAA,CAAAhC,aAAA;UACA,KAAAgC,OAAA,CAAA/B,UAAA;UACA,KAAAgC,KAAA;UACA,KAAAA,KAAA;UACA,KAAAA,KAAA;UACA,KAAAA,KAAA;UACA,KAAAV,KAAA,CAAAC,iBAAA,CAAAU,IAAA;QACA,GACAf,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAC,IAAA,CAAAF,KAAA;QACA;MACA;QACAlC,KAAA,CACA4C,GAAA,CAAA1B,IAAA;UACAN,OAAA,OAAAF;QACA,GACAgB,IAAA,CAAAC,QAAA;UACAQ,OAAA,CAAAU,IAAA,CAAAlB,QAAA;UACA,KAAAmB,OAAA,CAAAhC,aAAA;UACA,KAAAgC,OAAA,CAAA/B,UAAA;UACA,KAAAgC,KAAA;UACA,KAAAA,KAAA;UACA,KAAAA,KAAA;UACA,KAAAA,KAAA;UACA,KAAAV,KAAA,CAAAC,iBAAA,CAAAU,IAAA;QACA,GACAf,KAAA,CAAAC,KAAA;UACAC,OAAA,CAAAC,IAAA,CAAAF,KAAA;QACA;MACA;IACA;EACA;EACAe,OAAA,WAAAA,CAAA;IACAd,OAAA,CAAAU,IAAA;EACA;AACA","ignoreList":[]}]}