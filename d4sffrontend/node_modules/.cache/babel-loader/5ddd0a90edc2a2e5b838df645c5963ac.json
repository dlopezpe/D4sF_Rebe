{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\mapController\\ControllerQuickCreate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\mapController\\ControllerQuickCreate.vue","mtime":1709553265791},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\babel.config.js","mtime":1681217492507},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgeyBjcmVhdGVRdWlja1BhcmNlbCwgZ2V0RW50ZXJwcmlzZSwgc2V0UGFyY2Vsc0Zvckluc3RhbmNlIH0gZnJvbSAnQC9jcnVkRnVuY3Rpb25zL2NydWRFbnRlcnByaXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb250cm9sbGVyUXVpY2tDcmVhdGUnLAogIHByb3BzOiB7CiAgICB2ZXJDcmVhclBhcmNlbDogQm9vbGVhbiwKICAgIHZlckVycm9yRHJhdzogQm9vbGVhbiwKICAgIGVycm9yRHJhd01zZzogU3RyaW5nLAogICAgdmVyZ3VhcmRhZG9PSzogQm9vbGVhbiwKICAgIGd1YXJkYWRvT0tNc2c6IFN0cmluZywKICAgIGNvb3JkaW5hdGVzUG9seTogU3RyaW5nLAogICAgYXJyRW50ZXJwcmlzZXM6IEFycmF5LAogICAgYXJyRW50ZXJwcmlzZXNTZWxlY3RlZDogQXJyYXksCiAgICBhcnJDb29wZXJhdGl2YXM6IEFycmF5LAogICAgaXNfc3VwZXJ1c2VyOiBCb29sZWFuLAogICAgaXNfc3lzdGVtYWRtaW46IEJvb2xlYW4sCiAgICBhcmVhRm9yTmV3UG9seWdvbjogTnVtYmVyLAogICAgdXNlcjogT2JqZWN0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdGFkb0VtcHJlc2FzOiB0aGlzLmFyckVudGVycHJpc2VzLAogICAgICBhcnJFbnRlcnByaXNlc1NlbGVjdGVkT2JqOiB0aGlzLmFyckVudGVycHJpc2VzU2VsZWN0ZWRbMF0sCiAgICAgIHZhbHVlTmFtZTogJycsCiAgICAgIGludmFsaWRNZXNzYWdlTmFtZTogJycsCiAgICAgIHZhbHVlRGVzYzogJycsCiAgICAgIGludmFsaWRNZXNzYWdlRGVzYzogJycsCiAgICAgIGVudGVycHJpc2VGb3JDcmVhdGVQYXJjZWw6ICcnCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgbWV0aG9kczogewogICAgc2VsZWNjaW9uYUVtcHJlc2EoZW1wcmVzYSkgewogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmxpc3RhZG9FbXByZXNhcy5maWx0ZXIoZW50ZXJwcmlzZSA9PiBlbnRlcnByaXNlLmlkID09IGVtcHJlc2EpOwogICAgICBjb25zb2xlLmluZm8ocmVzdWx0KTsKICAgICAgdGhpcy5hcnJFbnRlcnByaXNlc1NlbGVjdGVkT2JqID0gcmVzdWx0WzBdOwogICAgICAvL3RoaXMuYXJyRW50ZXJwcmlzZXNTZWxlY3RlZCA9IHJlc3VsdAogICAgICAvL3RoaXMuZW50ZXJwcmlzZUZvckNyZWF0ZVBhcmNlbCA9IHJlc3VsdAogICAgICB0aGlzLiRlbWl0KCdzZXRFbnRlcnByaXNlU2VsZWN0JywgcmVzdWx0KTsKICAgICAgdGhpcy5ndWFyZGFkb09LTXNnID0gJyc7CiAgICB9LAogICAgY3JlYXJQYXJjZWxhKCkgewogICAgICAvL3NldFZlckNyZWFyUGFyY2VsOiBtdWVzdHJhIGVsIGZvcm11bGFyaW8gZGUgY3JlYWNpw7NuIGRlIHBhcmNlbGEgeSBoYWJpbGl0YSBlbCBkaWJ1am8KICAgICAgdGhpcy4kZW1pdCgnc2V0VmVyQ3JlYXJQYXJjZWwnLCBmYWxzZSk7CiAgICAgIHRoaXMuJGVtaXQoJ3NldHZlckVycm9yRHJhdycsIHRydWUpOwogICAgICB0aGlzLiRlbWl0KCdzZXR2ZXJndWFyZGFkb09LJywgdHJ1ZSk7CiAgICAgIHRoaXMuJGVtaXQoJ3NldFZlckNyZWFyUGFyY2VsRHJhdycsIGZhbHNlKTsKICAgIH0sCiAgICBndWFyZGFkb1BvbGlnb25vKCkgewogICAgICB0aGlzLmd1YXJkYWRvT0tNc2cgPSB0aGlzLiR0KCdwYXJjZWxhcy5wYXJjZWxhX2d1YXJkYWRhXzInKTsKICAgICAgdGhpcy52ZXJndWFyZGFkb09LID0gdHJ1ZTsKICAgICAgLy8gY3JlYSBsYSBwYXJjZWxhIGVuIGVsIGJhY2tlbmQgL3BhcmNlbHMvCiAgICAgIGNyZWF0ZVF1aWNrUGFyY2VsKHRoaXMudmFsdWVOYW1lLCB0aGlzLnZhbHVlRGVzYywgdGhpcy5jb29yZGluYXRlc1BvbHksIHRoaXMuYXJlYUZvck5ld1BvbHlnb24sIHRoaXMuYXJyRW50ZXJwcmlzZXNTZWxlY3RlZE9iai5pZCwgdGhpcy51c2VyLmlkKS50aGVuKCgpID0+IHsKICAgICAgICAvLyB0cmFlIGxhIGluZm9ybWFjaW9uIGRlIGxhIGVtcHJlc2EgeSBzdXMgcGFyY2VsYXMgdmlhIGdldCAgCiAgICAgICAgZ2V0RW50ZXJwcmlzZSh0aGlzLmFyckVudGVycHJpc2VzU2VsZWN0ZWRPYmouaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc3QgYWxsQ29vcmRpbmF0ZXMgPSBBcnJheSgpOwogICAgICAgICAgY29uc3QgYXJyUGFyY2VscyA9IFtdOwoKICAgICAgICAgIC8vY29uc3QgZW50ZXJwcmlzZSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYXJyRW50ZXJwcmlzZXMuZmlsdGVyKGVudGVycHJpc2UgPT4gZW50ZXJwcmlzZS5pZCA9PSByZXNwb25zZS5kYXRhLmlkKTsKICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09IDEgJiYgdGhpcy5hcnJFbnRlcnByaXNlcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgIGNvbnN0IHBvc0VudGVycHJpc2UgPSB0aGlzLmFyckVudGVycHJpc2VzLmluZGV4T2YocmVzdWx0WzBdKTsKICAgICAgICAgICAgdGhpcy5hcnJFbnRlcnByaXNlc1twb3NFbnRlcnByaXNlXSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIHRoaXMuYXJyRW50ZXJwcmlzZXMubWFwKGVudGVycHJpc2UgPT4gewogICAgICAgICAgICAgIGVudGVycHJpc2UucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsKICAgICAgICAgICAgICAgIGFyclBhcmNlbHMucHVzaChwYXJjZWwpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5wYXJjZWxzLmZlYXR1cmVzLm1hcChwYXJjZWwgPT4gewogICAgICAgICAgICAgIGFsbENvb3JkaW5hdGVzLnB1c2gocGFyY2VsLmdlb21ldHJ5LmNvb3JkaW5hdGVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmFyckVudGVycHJpc2VzWzBdID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5wYXJjZWxzLmZlYXR1cmVzLm1hcChwYXJjZWwgPT4gewogICAgICAgICAgICAgIGFsbENvb3JkaW5hdGVzLnB1c2gocGFyY2VsLmdlb21ldHJ5LmNvb3JkaW5hdGVzKTsKICAgICAgICAgICAgICBhcnJQYXJjZWxzLnB1c2gocGFyY2VsKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmd1YXJkYWRvT0tNc2cgPSB0aGlzLiR0KCdwYXJjZWxhcy5wYXJjZWxhX2d1YXJkYWRhXzInKTsKICAgICAgICAgIHRoaXMuc2V0dmVyZ3VhcmRhZG9PSyA9IHRydWU7CiAgICAgICAgICBzZXRQYXJjZWxzRm9ySW5zdGFuY2UocmVzcG9uc2UuZGF0YS5uYW1lLCBhbGxDb29yZGluYXRlcywgcmVzcG9uc2UuZGF0YS5zZW50aW5lbF9pbnN0YW5jZSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldFNlbnRpbmVsQ2xlYXJDYWNoZScpOwogICAgICAgICAgICB0aGlzLiRlbWl0KCdzZXRFbnRlcnByaXNlJywgdGhpcy5hcnJFbnRlcnByaXNlcyk7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldEFsbFBhcmNlbHNPZkVudGVycHJpc2VzJywgYXJyUGFyY2Vscyk7CiAgICAgICAgICAgIHRoaXMuY2FuY2VsYXJFZGljaW9uKCk7CiAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gY29uc29sZS5pbmZvKGVycikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgLyoNCiAgICAgIG5hbWU6IHRoaXMuJHJlZnMuaW5wdXROYW1lLiRyZWZzLmlucHV0LnZhbHVlLA0KICAgICAgZGVzY3JpcHRpb246IHRoaXMuJHJlZnMuaW5wdXREZXNjLiRyZWZzLmlucHV0LnZhbHVlLA0KICAgICAgcG9seWdvbjogdGhpcy5wb2xpZ29uT2JqZWN0bywNCiAgICAgIGFyZWE6IHRoaXMuYXJlYSwNCiAgICAgIGVudGVycHJpc2U6IHRoaXMuZW50ZXJwcmlzZS5pZCwNCiAgICAgIHVzZXJfY3JlYXRlZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpDQogICAgICAqLwogICAgICAvKg0KICAgICAgcHV0UGFyY2VsUG9seWdvbih0aGlzLmNvb3JkaW5hdGVzUG9seSwgdGhpcy5wYXJjZWxTZWxlY3RlZC5pZCkNCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBjb25zb2xlLmluZm8ocmVzcG9uc2UuZGF0YSkNCiAgICAgICAgICBnZXRFbnRlcnByaXNlKHJlc3BvbnNlLmRhdGEuZW50ZXJwcmlzZSkNCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgIGNvbnN0IGFsbENvb3JkaW5hdGVzID0gQXJyYXkoKTsNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5wYXJjZWxzLmZlYXR1cmVzLm1hcChwYXJjZWwgPT4gew0KICAgICAgICAgICAgICAgICAgYWxsQ29vcmRpbmF0ZXMucHVzaChwYXJjZWwuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIHRoaXMuZ3VhcmRhZG9PS01zZyA9IHRoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbGFfZ3VhcmRhZGFfMicpDQogICAgICAgICAgICAgIHRoaXMuc2V0dmVyZ3VhcmRhZG9PSyA9IHRydWUNCiAgICAgICAgICAgICAgc2V0UGFyY2Vsc0Zvckluc3RhbmNlKHJlc3BvbnNlLmRhdGEubmFtZSwgYWxsQ29vcmRpbmF0ZXMsIHJlc3BvbnNlLmRhdGEuc2VudGluZWxfaW5zdGFuY2UpDQogICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhyZXNwb25zZS5kYXRhKQ0KICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2V0U2VudGluZWxDbGVhckNhY2hlJykNCiAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldGNvb3JkaW5hdGVzUG9seScsICcnKQ0KICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2V0aWZRdWlja0VkaXQnLCBmYWxzZSkNCiAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldHZlckVycm9yRHJhdycsIHRydWUpDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5pbmZvKGVycikpDQogICAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICAqLwogICAgfSwKICAgIGNhbmNlbGFyRWRpY2lvbigpIHsKICAgICAgewogICAgICAgIHRoaXMuJGVtaXQoJ3NldFZlckNyZWFyUGFyY2VsJywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2V0VmVyQ3JlYXJQYXJjZWxEcmF3JywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2V0dmVyRXJyb3JEcmF3JywgZmFsc2UpOwogICAgICAgIHRoaXMuJGVtaXQoJ3NldFNlbnRpbmVsQ2xlYXJDYWNoZScpOwogICAgICAgIHRoaXMuJGVtaXQoJ3NldGNvb3JkaW5hdGVzUG9seScsICcnKTsKICAgICAgICB0aGlzLiRlbWl0KCdzZXRpZlF1aWNrRWRpdCcsIGZhbHNlKTsKICAgICAgICB0aGlzLiRlbWl0KCdzZXR2ZXJFcnJvckRyYXcnLCBmYWxzZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2V0dmVyZ3VhcmRhZG9PSycsIGZhbHNlKTsKICAgICAgICB0aGlzLiRlbWl0KCdzZXRDbGVhclBhcmNlbHMnKTsKICAgICAgICB0aGlzLiRlbWl0KCdzZXRDbGVhckZlYXR1cmVzJyk7CiAgICAgICAgdGhpcy4kZW1pdCgnY2xlYXJDYWNoZURyYXcnKTsKICAgICAgfQogICAgfSwKICAgIGxpbXBpYXJEaWJ1am8oKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3NldENsZWFyRmVhdHVyZXMnKTsKICAgICAgdGhpcy4kZW1pdCgnc2V0VmVyQ3JlYXJQYXJjZWwnLCBmYWxzZSk7CiAgICAgIHRoaXMuJGVtaXQoJ3NldFZlckNyZWFyUGFyY2VsRHJhdycsIGZhbHNlKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHt9LAogIGJlZm9yZUNyZWF0ZSgpIHsKICAgIGNvbnNvbGUuaW5mbyh0aGlzLmFyckVudGVycHJpc2VzKTsKICB9Cn07"},{"version":3,"names":["createQuickParcel","getEnterprise","setParcelsForInstance","name","props","verCrearParcel","Boolean","verErrorDraw","errorDrawMsg","String","verguardadoOK","guardadoOKMsg","coordinatesPoly","arrEnterprises","Array","arrEnterprisesSelected","arrCooperativas","is_superuser","is_systemadmin","areaForNewPolygon","Number","user","Object","data","listadoEmpresas","arrEnterprisesSelectedObj","valueName","invalidMessageName","valueDesc","invalidMessageDesc","enterpriseForCreateParcel","components","methods","seleccionaEmpresa","empresa","result","filter","enterprise","id","console","info","$emit","crearParcela","guardadoPoligono","$t","then","response","allCoordinates","arrParcels","length","posEnterprise","indexOf","map","parcels","features","parcel","push","geometry","coordinates","setverguardadoOK","sentinel_instance","cancelarEdicion","catch","err","limpiarDibujo","mounted","beforeCreate"],"sources":["src/components/mapController/ControllerQuickCreate.vue"],"sourcesContent":["<template>\r\n    <div id=\"control_der\">\r\n        <div id=\"btnCrearParcela\" v-if=\"verCrearParcel\">\r\n            <cv-button\r\n            kind=\"primary\"\r\n            size=\"small\"\r\n            :disabled=\"verErrorDraw\"\r\n            @click=\"crearParcela\"\r\n            >\r\n            {{$t(\"map.crear_parcela\")}}\r\n            </cv-button>  \r\n        </div>\r\n        <div id=\"edicionParcela\" v-if=\"!verCrearParcel\">\r\n            <p>{{$t(\"map.parcela_nueva\")}}</p>\r\n            <div>\r\n            <cv-select\r\n                theme=\"\"\r\n                :label=\"$t('map.listado_empresas')\"\r\n                :hide-label=\"false\"\r\n                :inline=\"false\"\r\n                :disabled=\"false\"\r\n                @change=\"seleccionaEmpresa\"\r\n                >\r\n                <cv-select-option disabled selected hidden>{{$t(\"map.sel_empresa\")}}</cv-select-option>\r\n                <cv-select-optgroup label=\"Todas las Empresas\" v-if=\"is_superuser || is_systemadmin\">\r\n                    <cv-select-option :value=\"`all`\" v-if=\"is_superuser || is_systemadmin\">{{$t(\"map.most_todas_empresas\")}}</cv-select-option>\r\n                    <cv-select-option v-for=\"empresa in listadoEmpresas\" :value=\"String(empresa.id)\"  v-bind:key=\"empresa.id\">\r\n                        {{empresa.name}}\r\n                    </cv-select-option>\r\n                </cv-select-optgroup>\r\n                <cv-select-optgroup :label=\"`Cooperativa ${cooperativa.name}`\" v-bind:key=\"cooperativa.id\" v-for=\"cooperativa in arrCooperativas\">\r\n                    <cv-select-option :value=\"`coop_${cooperativa.id}`\">{{$t(\"map.most_todas_empresas\")}}</cv-select-option>\r\n                    <cv-select-option v-for=\"empresa in cooperativa.enterprises\" :value=\"String(empresa.id)\"  v-bind:key=\"empresa.id\">\r\n                        {{empresa.name}}\r\n                    </cv-select-option>\r\n                </cv-select-optgroup>\r\n            </cv-select>\r\n            </div>\r\n            <div class=\"errorDraw\" v-if=\"verErrorDraw\"><br>{{`${errorDrawMsg}`}}</div>\r\n            <p>Creando parcela para {{arrEnterprisesSelectedObj.name}}</p>\r\n            <p>Area {{areaForNewPolygon}}</p>\r\n            <cv-text-input\r\n                :label=\"'Nombre de la parcela'\"\r\n                :value=\"valueName\"\r\n                :disabled=\"false\"\r\n                :type=\"'text'\"\r\n                :invalid-message=\"invalidMessageName\"\r\n                ref=\"inputName\"\r\n                id=\"input-MIRLwtCq\"\r\n                v-model=\"valueName\">\r\n            </cv-text-input>\r\n            <br>\r\n            <cv-text-input\r\n                :label=\"'Descripción'\"\r\n                :value=\"valueDesc\"\r\n                :disabled=\"false\"\r\n                :type=\"'text'\"\r\n                :invalid-message=\"invalidMessageDesc\"\r\n                ref=\"inputDesc\"\r\n                id=\"input-3zcRveTf\"\r\n                v-model=\"valueDesc\"\r\n                ></cv-text-input>\r\n            <br>\r\n            <br>\r\n            <br>\r\n            <cv-button\r\n                kind=\"primary\"\r\n                size=\"small\"\r\n                :disabled=\"verErrorDraw\"\r\n                @click=\"guardadoPoligono\"\r\n            >\r\n                {{$t(\"map.guardar\")}}\r\n            </cv-button>\r\n            <cv-button\r\n                kind=\"danger\"\r\n                size=\"small\"\r\n                :disabled=\"false\"\r\n                @click=\"cancelarEdicion\"\r\n            >\r\n                {{$t(\"map.cancelar\")}}\r\n            </cv-button>\r\n            <br>\r\n            <div class=\"guardadoOK\" v-if=\"verguardadoOK\"><br>{{`${guardadoOKMsg}`}}</div>\r\n            <br>\r\n            <cv-button\r\n                kind=\"primary\"\r\n                size=\"small\"\r\n                :disabled=\"false\"\r\n                @click=\"limpiarDibujo\"\r\n            >\r\n                Volver a dibujar\r\n            </cv-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {createQuickParcel, getEnterprise, setParcelsForInstance} from '@/crudFunctions/crudEnterprise'\r\n\r\nexport default {\r\n    name: 'ControllerQuickCreate',\r\n    props: {\r\n        verCrearParcel: Boolean,\r\n        verErrorDraw: Boolean,\r\n        errorDrawMsg: String,\r\n        verguardadoOK: Boolean,\r\n        guardadoOKMsg: String,\r\n        coordinatesPoly: String,\r\n        arrEnterprises: Array,\r\n        arrEnterprisesSelected: Array,\r\n        arrCooperativas: Array,\r\n        is_superuser: Boolean,\r\n        is_systemadmin: Boolean,\r\n        areaForNewPolygon: Number,\r\n        user: Object\r\n    },\r\n    data() {\r\n        return {\r\n            listadoEmpresas: this.arrEnterprises,\r\n            arrEnterprisesSelectedObj: this.arrEnterprisesSelected[0],\r\n            valueName:'',\r\n            invalidMessageName:'',\r\n            valueDesc:'',\r\n            invalidMessageDesc:'',\r\n            enterpriseForCreateParcel: ''\r\n        }\r\n    },\r\n    components: {\r\n        \r\n    },\r\n    methods: {\r\n        seleccionaEmpresa(empresa){\r\n            const result = this.listadoEmpresas.filter(enterprise => enterprise.id == empresa)\r\n            console.info(result)\r\n            this.arrEnterprisesSelectedObj = result[0]\r\n            //this.arrEnterprisesSelected = result\r\n            //this.enterpriseForCreateParcel = result\r\n            this.$emit('setEnterpriseSelect', result)\r\n            this.guardadoOKMsg = ''\r\n        },\r\n        crearParcela(){\r\n            //setVerCrearParcel: muestra el formulario de creación de parcela y habilita el dibujo\r\n            this.$emit('setVerCrearParcel', false)\r\n            this.$emit('setverErrorDraw', true)\r\n            this.$emit('setverguardadoOK', true)\r\n            this.$emit('setVerCrearParcelDraw', false)\r\n        },\r\n        guardadoPoligono(){\r\n            \r\n            this.guardadoOKMsg = this.$t('parcelas.parcela_guardada_2')\r\n            this.verguardadoOK = true\r\n            // crea la parcela en el backend /parcels/\r\n            createQuickParcel(this.valueName, this.valueDesc, this.coordinatesPoly, this.areaForNewPolygon, this.arrEnterprisesSelectedObj.id, this.user.id)\r\n            .then(() => {\r\n                // trae la informacion de la empresa y sus parcelas via get  \r\n                getEnterprise(this.arrEnterprisesSelectedObj.id)\r\n                .then(response => {\r\n                    const allCoordinates = Array();\r\n                    const arrParcels = []\r\n                    \r\n                    //const enterprise = response.data\r\n                    const result = this.arrEnterprises.filter(enterprise => enterprise.id == response.data.id)\r\n                    if(result.length == 1 && this.arrEnterprises.length > 1 ){\r\n                        const posEnterprise = this.arrEnterprises.indexOf(result[0])\r\n                        this.arrEnterprises[posEnterprise] = response.data\r\n                        this.arrEnterprises.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        response.data.parcels.features.map(parcel => {\r\n                            allCoordinates.push(parcel.geometry.coordinates)\r\n                        })\r\n                    }else{\r\n                        this.arrEnterprises[0] = response.data\r\n                        response.data.parcels.features.map(parcel => {\r\n                            allCoordinates.push(parcel.geometry.coordinates)\r\n                            arrParcels.push(parcel)\r\n                        })\r\n                    }\r\n                    this.guardadoOKMsg = this.$t('parcelas.parcela_guardada_2')\r\n                    this.setverguardadoOK = true\r\n                    setParcelsForInstance(response.data.name, allCoordinates, response.data.sentinel_instance)\r\n                    .then(() => {\r\n                        this.$emit('setSentinelClearCache')\r\n                        this.$emit('setEnterprise', this.arrEnterprises)\r\n                        this.$emit('setAllParcelsOfEnterprises', arrParcels)\r\n                        this.cancelarEdicion()\r\n                    })\r\n                    .catch(err => console.info(err))\r\n                })\r\n            })\r\n            /*\r\n            name: this.$refs.inputName.$refs.input.value,\r\n            description: this.$refs.inputDesc.$refs.input.value,\r\n            polygon: this.poligonObjecto,\r\n            area: this.area,\r\n            enterprise: this.enterprise.id,\r\n            user_created: sessionStorage.getItem('user')\r\n            */\r\n            /*\r\n            putParcelPolygon(this.coordinatesPoly, this.parcelSelected.id)\r\n            .then(response => {\r\n                console.info(response.data)\r\n                getEnterprise(response.data.enterprise)\r\n                .then(response => {\r\n                    const allCoordinates = Array();\r\n                    response.data.parcels.features.map(parcel => {\r\n                        allCoordinates.push(parcel.geometry.coordinates)\r\n                    })\r\n                    this.guardadoOKMsg = this.$t('parcelas.parcela_guardada_2')\r\n                    this.setverguardadoOK = true\r\n                    setParcelsForInstance(response.data.name, allCoordinates, response.data.sentinel_instance)\r\n                    .then(response => {\r\n                        console.info(response.data)\r\n                        this.$emit('setSentinelClearCache')\r\n                        this.$emit('setcoordinatesPoly', '')\r\n                        this.$emit('setifQuickEdit', false)\r\n                        this.$emit('setverErrorDraw', true)\r\n                    })\r\n                    .catch(err => console.info(err))\r\n                })\r\n            })\r\n            */\r\n        },\r\n        cancelarEdicion(){ {\r\n            this.$emit('setVerCrearParcel', true)\r\n            this.$emit('setVerCrearParcelDraw', true)\r\n            this.$emit('setverErrorDraw', false)\r\n            this.$emit('setSentinelClearCache')\r\n            this.$emit('setcoordinatesPoly', '')\r\n            this.$emit('setifQuickEdit', false)\r\n            this.$emit('setverErrorDraw', false)\r\n            this.$emit('setverguardadoOK', false)\r\n            this.$emit('setClearParcels')\r\n            this.$emit('setClearFeatures')\r\n            this.$emit('clearCacheDraw')\r\n        }},\r\n        limpiarDibujo(){\r\n            this.$emit('setClearFeatures')\r\n            this.$emit('setVerCrearParcel', false)\r\n            this.$emit('setVerCrearParcelDraw', false)\r\n        }\r\n    },\r\n    mounted: function () {\r\n        \r\n        \r\n    },\r\n    beforeCreate(){\r\n        console.info(this.arrEnterprises)\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    #control_der{\r\n        margin-top: 58px;\r\n        padding: 10px;\r\n        background-color: #f4f4f4;\r\n        position: fixed;\r\n        top: 0px;\r\n        right: 8px;\r\n    }\r\n    .errorDraw{\r\n        color: #da1e28;\r\n        font-weight: 400;\r\n        font-size: 12px;\r\n    }\r\n    .guardadoOK{\r\n        color: #00CC00;\r\n        font-weight: 400;\r\n        font-size: 12px;\r\n    }\r\n</style>"],"mappings":"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","ignoreList":[]}]}