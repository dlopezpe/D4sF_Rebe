{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\LoginComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\LoginComponent.vue","mtime":1681217492538},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\babel.config.js","mtime":1681217492507},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681731147886},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1681731156386},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681731147886},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1681731148945}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBSZWNvcmRhclBhc3NDb21wb25lbnQgZnJvbSAiLi4vY29tcG9uZW50cy9SZWNvcmRhclBhc3NDb21wb25lbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luQ29tcG9uZW50IiwKICBwcm9wczoge30sCiAgY29tcG9uZW50czogewogICAgUmVjb3JkYXJQYXNzQ29tcG9uZW50CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNBY3RpdmVMb2FkaW5nOiBmYWxzZSwKICAgICAgaXNWaXNpYmxlTG9hZDogZmFsc2UsCiAgICAgIGRpc2FibGVkTGlua1JlY29yZGFyOiBmYWxzZSwKICAgICAgaHJlZjogImphdmFzY3JpcHQ6dm9pZCgwKSIsCiAgICAgIGlubGluZTogZmFsc2UsCiAgICAgIGVtYWlsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBlcnJvckVtYWlsOiAiIiwKICAgICAgZXJyb3JQYXNzOiAiIiwKICAgICAgdmlzaWJsZUFsZXJ0OiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlY29yZGFyUGFzcygpIHsKICAgICAgdGhpcy4kcmVmcy5yZWNvcmRhclBhc3NDb21wb25lbnQudmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgbG9naW4oKSB7CiAgICAgIHRoaXMuaXNBY3RpdmVMb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5pc1Zpc2libGVMb2FkID0gdHJ1ZTsKICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vc2lnbmluL2A7CiAgICAgIGF4aW9zLnBvc3QocGF0aCwgewogICAgICAgICJlbWFpbCI6IHRoaXMuJHJlZnMuZW1haWxJbnB1dC4kcmVmcy5pbnB1dC52YWx1ZSwKICAgICAgICAicGFzc3dvcmQiOiB0aGlzLiRyZWZzLnBhc3NJbnB1dC4kcmVmcy5pbnB1dC52YWx1ZQogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhcGlBY2Nlc3MiLCByZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNBY3RpdmVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmlzVmlzaWJsZUxvYWQgPSBmYWxzZTsKICAgICAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKSkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL21hcCIpOwogICAgICAgICAgfQogICAgICAgIH0sIDEwMDApOwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhpcy5pc0FjdGl2ZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLmlzVmlzaWJsZUxvYWQgPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmluZm8oZXJyb3IpOwogICAgICAgIGlmICghZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSB7CiAgICAgICAgICB0aGlzLmxvZ2luOwogICAgICAgIH0KICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5lbWFpbCkgdGhpcy5lcnJvckVtYWlsID0gZXJyb3IucmVzcG9uc2UuZGF0YS5lbWFpbFswXTsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5wYXNzd29yZCkgdGhpcy5lcnJvclBhc3MgPSBlcnJvci5yZXNwb25zZS5kYXRhLnBhc3N3b3JkWzBdOwogICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLm5vbl9maWVsZF9lcnJvcnMpIHsKICAgICAgICAgIHRoaXMudmlzaWJsZUFsZXJ0ID0gdHJ1ZTsKICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSAiIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvKg0KICAgICAgY29uc3QgaW5zdGFuY2VJbnMgPSBheGlvcy5jcmVhdGUoew0KICAgICAgICAgIGJhc2VVUkw6IHRoaXMuJGFwaVVSTA0KICAgICAgfSkNCiAgICAgIGNvbnN0IGNvbmZpZ0lucyA9IHsNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsDQogICAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgY29uc3QgYm9keUlucyA9IEpTT04uc3RyaW5naWZ5KHsNCiAgICAgICAgICAiZW1haWwiOnRoaXMuZW1haWwsDQogICAgICAgICAgInBhc3N3b3JkIjp0aGlzLnBhc3N3b3JkLA0KICAgICAgICAgIA0KICAgICAgfSkNCiAgICAgIGluc3RhbmNlSW5zLnBvc3QoIi9zaWduaW4vIiwgYm9keUlucywgY29uZmlnSW5zKS50aGVuKHJlc3AgPT4gew0KICAgICAgICAgIGNvbnNvbGUuaW5mbyhyZXNwKQ0KICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImFwaUFjY2VzcyIsIHJlc3AuZGF0YS50b2tlbik7DQogICAgICAgICAgdmFyIGNvb2tpZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpDQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsNCiAgICAgICAgICBpZihjb29raWUgIT0gbnVsbCl7DQogICAgICAgICAgICAgIC8vdGhpcy5nZXREYXRvc1VzZXIoKTsNCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsNCiAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOw0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICBjb25zb2xlLmluZm8oZXJyb3IuZGF0YSkNCiAgICAgICAgICBpZihlcnJvci5zdGF0dXMgPT0gNDAwKXsNCiAgICAgICAgICAgICAgaWYoZXJyb3IucmVzcG9uc2UuZGF0YS5lbWFpbCkNCiAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JFbWFpbCA9IGVycm9yLnJlc3BvbnNlLmRhdGEuZW1haWxbMF0NCiAgICAgICAgICAgICAgaWYoZXJyb3IucmVzcG9uc2UuZGF0YS5wYXNzd29yZCkNCiAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JQYXNzID0gZXJyb3IucmVzcG9uc2UuZGF0YS5wYXNzd29yZFswXQ0KICAgICAgICAgICAgICBpZihlcnJvci5yZXNwb25zZS5kYXRhLm5vbl9maWVsZF9lcnJvcnMpDQogICAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVBbGVydCA9IHRydWUNCiAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSAiIg0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihlcnJvci5zdGF0dXMgPT0gNDAxKXsNCiAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGVycm9yKQ0KICAgICAgICAgICAgICB0aGlzLmxvZ2luKCkNCiAgICAgICAgICB9DQogICAgICB9KQ0KICAgICAgKi8KICAgIH0sCgogICAgZG9DbG9zZSgpIHsKICAgICAgdGhpcy52aXNpYmxlQWxlcnQgPSBmYWxzZTsKICAgIH0sCiAgICBxdWl0YXJFcnJvclBhc3MoKSB7CiAgICAgIHRoaXMuZXJyb3JQYXNzID0gJyc7CiAgICB9LAogICAgcXVpdGFyRXJyb3JFbWFpbCgpIHsKICAgICAgdGhpcy5lcnJvckVtYWlsID0gJyc7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdmFyIHVzZXJMYW5nID0gbmF2aWdhdG9yLmxhbmd1YWdlIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2U7CiAgICBpZiAodXNlckxhbmcgPT0gJ2VzLUVTJykgewogICAgICB0aGlzLiRyb290LiRpMThuLmxvY2FsZSA9ICdlcyc7CiAgICB9IGVsc2UgewogICAgICB0aGlzLiRyb290LiRpMThuLmxvY2FsZSA9ICdlbic7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["axios","RecordarPassComponent","name","props","components","data","isActiveLoading","isVisibleLoad","disabledLinkRecordar","href","inline","email","password","errorEmail","errorPass","visibleAlert","methods","recordarPass","$refs","recordarPassComponent","visible","login","path","$apiURL","post","emailInput","input","value","passInput","then","response","sessionStorage","setItem","token","setTimeout","getItem","$router","push","catch","error","console","info","status","non_field_errors","doClose","quitarErrorPass","quitarErrorEmail","created","userLang","navigator","language","userLanguage","$root","$i18n","locale"],"sources":["src/components/LoginComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"bx--grid-fluid\" id=\"gridContainer\">\r\n        <div class=\"bx--row-fixed\" id=\"rowLogin\">\r\n            <div class=\"bx--col-sm-12 bx--col-md-3 bx--col-lg-3\" id=\"bxFormLogin\">\r\n                <div>\r\n                    <img alt=\"D4SF\" id=\"logo\" src=\"../assets/logo-D4SF-login.png\">\r\n                    \r\n                    <h2 id=\"loginTitle\">\r\n                        Login\r\n                    </h2>\r\n                    <cv-text-input\r\n                    :label=\"$t('login.email')\"\r\n                    placeholder=\"example@example.com\"\r\n                    :invalid-message=\"errorEmail\"\r\n                    @input=\"quitarErrorEmail\"\r\n                    type=\"email\" id=\"emailInput\" ref=\"emailInput\" v-model=\"email\"></cv-text-input>\r\n                    <br>\r\n                    <cv-text-input\r\n                    :label=\"$t('login.password')\"\r\n                    :placeholder=\"$t('login.password')\"\r\n                    v-model=\"password\"\r\n                    :invalid-message=\"errorPass\"\r\n                    @input=\"quitarErrorPass\"\r\n                    type=\"password\" id=\"passInput\" ref=\"passInput\"></cv-text-input>\r\n                    <br>\r\n                    <cv-toast-notification v-if=\"visibleAlert\" \r\n                    kind=\"error\"\r\n                    sub-title=\"Usuario o contraseña inválidos\"\r\n                    @close=\"doClose\"\r\n                    low-contrast=\"false\"\r\n                    class=\"errorlogin\"></cv-toast-notification>\r\n                    <br>\r\n                    <cv-button\r\n                        id=\"loginButt\"\r\n                        @click=\"login\">\r\n                        Login\r\n                        <cv-loading\r\n                            :small=\"true\"\r\n                            :active=\"isActiveLoading\"\r\n                            :overlay=\"false\" v-if=\"isVisibleLoad\"></cv-loading>\r\n                    </cv-button>\r\n                    <br>\r\n                    <br>\r\n                    <p>\r\n                        <cv-link\r\n                        :href=\"href\"\r\n                        @click=\"recordarPass\"\r\n                        :disabled=\"disabledLinkRecordar\"\r\n                        :inline=\"inline\">\r\n                            {{$t(\"login.olvidar_pass\")}}\r\n                        </cv-link>\r\n                    </p>\r\n                </div>\r\n                <img alt=\"D4SF\" id=\"logoSMB\" src=\"../assets/logo-SMB-login.png\">\r\n            </div>\r\n        </div>\r\n        <RecordarPassComponent ref=\"recordarPassComponent\" />\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport RecordarPassComponent from \"../components/RecordarPassComponent\";\r\n\r\nexport default {\r\n    name: \"LoginComponent\",\r\n    props: {},\r\n    components: {RecordarPassComponent},\r\n    data() {\r\n        return {\r\n            isActiveLoading: false,\r\n            isVisibleLoad: false,\r\n            disabledLinkRecordar: false,\r\n            href: \"javascript:void(0)\",\r\n            inline: false,\r\n            email: \"\",\r\n            password: \"\",\r\n            errorEmail: \"\",\r\n            errorPass: \"\",\r\n            visibleAlert: false,\r\n        }\r\n    },\r\n    methods: {\r\n        recordarPass(){\r\n            this.$refs.recordarPassComponent.visible = true\r\n        },\r\n        login(){\r\n            this.isActiveLoading = true\r\n            this.isVisibleLoad = true\r\n            const path = `${this.$apiURL}/signin/`;\r\n            axios\r\n            .post(path, {\"email\": this.$refs.emailInput.$refs.input.value,\"password\":this.$refs.passInput.$refs.input.value})\r\n            .then(response => {\r\n                sessionStorage.setItem(\"apiAccess\", response.data.token);\r\n                setTimeout(() =>{\r\n                    this.isActiveLoading = false\r\n                    this.isVisibleLoad = false\r\n                    if(sessionStorage.getItem(\"apiAccess\")){\r\n                        this.$router.push(\"/map\");\r\n                    }\r\n                }, 1000)\r\n            })\r\n            .catch(error =>{\r\n                this.isActiveLoading = false\r\n                this.isVisibleLoad = false\r\n                console.info(error)\r\n                if(!error.response.status){\r\n                    this.login\r\n                }\r\n                if(error.response.data.email)\r\n                    this.errorEmail = error.response.data.email[0]\r\n                if(error.response.data.password)\r\n                    this.errorPass = error.response.data.password[0]\r\n                if(error.response.data.non_field_errors){\r\n                    this.visibleAlert = true\r\n                    this.password = \"\"\r\n                }\r\n            })\r\n            /*\r\n            const instanceIns = axios.create({\r\n                baseURL: this.$apiURL\r\n            })\r\n            const configIns = {\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                }\r\n            }\r\n            const bodyIns = JSON.stringify({\r\n                \"email\":this.email,\r\n                \"password\":this.password,\r\n                \r\n            })\r\n            instanceIns.post(\"/signin/\", bodyIns, configIns).then(resp => {\r\n                console.info(resp)\r\n                sessionStorage.setItem(\"apiAccess\", resp.data.token);\r\n                var cookie = sessionStorage.getItem(\"apiAccess\")\r\n                this.$router.push(\"/\");\r\n                if(cookie != null){\r\n                    //this.getDatosUser();\r\n                    this.$router.push(\"/\");\r\n                }else{\r\n                    this.$router.push(\"/login\");\r\n                }\r\n                \r\n            }).catch(error => {\r\n                console.info(error.data)\r\n                if(error.status == 400){\r\n                    if(error.response.data.email)\r\n                        this.errorEmail = error.response.data.email[0]\r\n                    if(error.response.data.password)\r\n                        this.errorPass = error.response.data.password[0]\r\n                    if(error.response.data.non_field_errors)\r\n                        this.visibleAlert = true\r\n                        this.password = \"\"\r\n                }\r\n                if(error.status == 401){\r\n                    console.info(error)\r\n                    this.login()\r\n                }\r\n            })\r\n            */\r\n        },\r\n        doClose(){\r\n            this.visibleAlert = false\r\n        },\r\n        quitarErrorPass(){\r\n            this.errorPass = ''\r\n        },\r\n        quitarErrorEmail(){\r\n            this.errorEmail = ''\r\n        }\r\n    },\r\n    created(){\r\n        var userLang = navigator.language || navigator.userLanguage; \r\n        if (userLang == 'es-ES'){\r\n            this.$root.$i18n.locale = 'es'\r\n        }else{\r\n            this.$root.$i18n.locale = 'en'\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    #gridContainer{\r\n        background-image: url('../assets/fondo-login-D4SF-v2.png');\r\n        background-repeat: no-repeat;\r\n        background-size: cover;\r\n    }\r\n    #gridContainer, #rowLogin, #bxFormLogin{\r\n        height: 100vh;\r\n    }\r\n    #bxFormLogin{\r\n        background-color: #f4f4f4;\r\n        padding-top: 3%;\r\n    }\r\n    #rowLogin{\r\n        padding: 0%;\r\n    }\r\n    #loginTitle{\r\n        margin-bottom: 48px;\r\n    }\r\n    #loginButt{\r\n        width: 100%;\r\n    }\r\n    #logo{\r\n        width: 100%;\r\n        max-width: 280px;\r\n        margin-bottom: 5%;\r\n    }\r\n    .errorlogin{\r\n        width: 100%;\r\n    }\r\n    #logoSMB{\r\n        position: absolute;\r\n        left: 19px;\r\n        bottom: 10px;\r\n    }\r\n</style>"],"mappings":";AA4DA,OAAAA,KAAA;AACA,OAAAC,qBAAA;AAEA;EACAC,IAAA;EACAC,KAAA;EACAC,UAAA;IAAAH;EAAA;EACAI,KAAA;IACA;MACAC,eAAA;MACAC,aAAA;MACAC,oBAAA;MACAC,IAAA;MACAC,MAAA;MACAC,KAAA;MACAC,QAAA;MACAC,UAAA;MACAC,SAAA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IACAC,aAAA;MACA,KAAAC,KAAA,CAAAC,qBAAA,CAAAC,OAAA;IACA;IACAC,MAAA;MACA,KAAAf,eAAA;MACA,KAAAC,aAAA;MACA,MAAAe,IAAA,WAAAC,OAAA;MACAvB,KAAA,CACAwB,IAAA,CAAAF,IAAA;QAAA,cAAAJ,KAAA,CAAAO,UAAA,CAAAP,KAAA,CAAAQ,KAAA,CAAAC,KAAA;QAAA,iBAAAT,KAAA,CAAAU,SAAA,CAAAV,KAAA,CAAAQ,KAAA,CAAAC;MAAA,GACAE,IAAA,CAAAC,QAAA;QACAC,cAAA,CAAAC,OAAA,cAAAF,QAAA,CAAAzB,IAAA,CAAA4B,KAAA;QACAC,UAAA;UACA,KAAA5B,eAAA;UACA,KAAAC,aAAA;UACA,IAAAwB,cAAA,CAAAI,OAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA;QACA;MACA,GACAC,KAAA,CAAAC,KAAA;QACA,KAAAjC,eAAA;QACA,KAAAC,aAAA;QACAiC,OAAA,CAAAC,IAAA,CAAAF,KAAA;QACA,KAAAA,KAAA,CAAAT,QAAA,CAAAY,MAAA;UACA,KAAArB,KAAA;QACA;QACA,IAAAkB,KAAA,CAAAT,QAAA,CAAAzB,IAAA,CAAAM,KAAA,EACA,KAAAE,UAAA,GAAA0B,KAAA,CAAAT,QAAA,CAAAzB,IAAA,CAAAM,KAAA;QACA,IAAA4B,KAAA,CAAAT,QAAA,CAAAzB,IAAA,CAAAO,QAAA,EACA,KAAAE,SAAA,GAAAyB,KAAA,CAAAT,QAAA,CAAAzB,IAAA,CAAAO,QAAA;QACA,IAAA2B,KAAA,CAAAT,QAAA,CAAAzB,IAAA,CAAAsC,gBAAA;UACA,KAAA5B,YAAA;UACA,KAAAH,QAAA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA;;IACAgC,QAAA;MACA,KAAA7B,YAAA;IACA;IACA8B,gBAAA;MACA,KAAA/B,SAAA;IACA;IACAgC,iBAAA;MACA,KAAAjC,UAAA;IACA;EACA;EACAkC,QAAA;IACA,IAAAC,QAAA,GAAAC,SAAA,CAAAC,QAAA,IAAAD,SAAA,CAAAE,YAAA;IACA,IAAAH,QAAA;MACA,KAAAI,KAAA,CAAAC,KAAA,CAAAC,MAAA;IACA;MACA,KAAAF,KAAA,CAAAC,KAAA,CAAAC,MAAA;IACA;EACA;AACA"}]}