{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\src\\views\\EditarEmpresa.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\src\\views\\EditarEmpresa.vue","mtime":1622446401600},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\respana\\source\\D4SF\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRWRpdGFyRW1wcmVzYUNvbXBvbmVudCBmcm9tICIuLi9jb21wb25lbnRzL0VkaXRhckVtcHJlc2FDb21wb25lbnQudnVlIjsNCmltcG9ydCBMaXN0YVVzdWFyaW9zIGZyb20gIi4uL3ZpZXdzL0xpc3RhVXN1YXJpb3MudnVlIjsNCmltcG9ydCBQYXJjZWxzTGlzdCBmcm9tICIuLi92aWV3cy9QYXJjZWxzTGlzdC52dWUiOw0KaW1wb3J0IEZvb3RlciBmcm9tICIuLi92aWV3cy9Gb290ZXIudnVlIjsNCmltcG9ydCBCb2FyZCBmcm9tICJAL3ZpZXdzL0JvYXJkLnZ1ZSI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJFZGl0YXJFbXByZXNhIiwNCiAgICBwcm9wczoge30sDQogICAgY29tcG9uZW50czogew0KICAgICAgICBFZGl0YXJFbXByZXNhQ29tcG9uZW50LA0KICAgICAgICBMaXN0YVVzdWFyaW9zLA0KICAgICAgICBQYXJjZWxzTGlzdCwNCiAgICAgICAgRm9vdGVyLA0KICAgICAgICBCb2FyZA0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGVudGVycHJpc2U6ICcnDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgZ2V0RGF0b3NVc2VyKCl7DQogICAgICAgICAgICBpZihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKSl7DQogICAgICAgICAgICAgICAgY29uc3QgcGF0aF9sYW5nID0gYCR7dGhpcy4kYXBpVVJMfS9wcm9maWxlZGF0YS8ke3RoaXMuJHNlc3Npb24uZ2V0KCd1c2VyJyl9L2A7DQogICAgICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAgICAgLmdldChwYXRoX2xhbmcpDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT57DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvb3QuJGkxOG4ubG9jYWxlID0gcmVzcG9uc2UuZGF0YS5sYW5ndWFnZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vcHJvZmlsZS9gOw0KICAgICAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHNlc3Npb24uc3RhcnQoKQ0KICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgnaXNfY29vcF91c2VyJywgcmVzcG9uc2UuZGF0YVswXS5jb29wZXJhdGl2ZV91c2VyKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgnZW50ZXJwcmlzZScsIHJlc3BvbnNlLmRhdGFbMF0uZW50ZXJwcmlzZV9pZCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoJ3VzZXInLCByZXNwb25zZS5kYXRhWzBdLnVzZXIpDQogICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2VudGVycHJpc2UnLCByZXNwb25zZS5kYXRhWzBdLmVudGVycHJpc2VfaWQpDQogICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCByZXNwb25zZS5kYXRhWzBdLnVzZXIpDQoNCiAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGhFbnRlcnByaXNlSW5zdGFuY2UgPSBgJHt0aGlzLiRhcGlVUkx9L2VudGVycHJpc2VzLyR7cmVzcG9uc2UuZGF0YVswXS5lbnRlcnByaXNlX2lkfS9gOw0KICAgICAgICAgICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiK3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpDQogICAgICAgICAgICAgICAgICAgIGF4aW9zLmdldChwYXRoRW50ZXJwcmlzZUluc3RhbmNlKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PnsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3NJJywgcmVzcG9uc2UuZGF0YS5zZW50aW5lbF9pbnN0YW5jZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFBlcm1pc29zVXNlcihyZXNwb25zZS5kYXRhWzBdLnVzZXIpDQogICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT57DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcikNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBnZXRQZXJtaXNvc1VzZXIoaWQpew0KICAgICAgICAgICAgY29uc3QgcGF0aFJvbCA9IGAke3RoaXMuJGFwaVVSTH0vcGVybWlzb3MvJHtpZH0vYDsNCiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGhSb2wpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgnaXNfZW50ZXJwcmlzZWFkbWluJywgcmVzcG9uc2UuZGF0YS5pc19lbnRlcnByaXNlYWRtaW4pDQogICAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoJ2lzX3N0YWZmJywgcmVzcG9uc2UuZGF0YS5pc19zdGFmZikNCiAgICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgnaXNfc3VwZXJ1c2VyJywgcmVzcG9uc2UuZGF0YS5pc19zdXBlcnVzZXIpDQogICAgICAgICAgICAgICAgdGhpcy4kc2Vzc2lvbi5zZXQoJ2lzX3N5c3RlbWFkbWluJywgcmVzcG9uc2UuZGF0YS5pc19zeXN0ZW1hZG1pbikNCiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc19lbnRlcnByaXNlYWRtaW4nLCByZXNwb25zZS5kYXRhLmlzX2VudGVycHJpc2VhZG1pbikNCiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc19zdGFmZicsIHJlc3BvbnNlLmRhdGEuaXNfc3RhZmYpDQogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNfc3VwZXJ1c2VyJywgcmVzcG9uc2UuZGF0YS5pc19zdXBlcnVzZXIpDQogICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnaXNfc3lzdGVtYWRtaW4nLCByZXNwb25zZS5kYXRhLmlzX3N5c3RlbWFkbWluKQ0KICAgICAgICAgICAgICAgIHRoaXMuJHBhcmVudC5pc19zdXBlcnVzZXIgPSByZXNwb25zZS5kYXRhLmlzX3N1cGVydXNlcg0KICAgICAgICAgICAgICAgIHRoaXMuJHBhcmVudC5pc19zdGFmZiA9IHJlc3BvbnNlLmRhdGEuaXNfc3RhZmYsDQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmlzX3N5c3RlbWFkbWluID0gcmVzcG9uc2UuZGF0YS5pc19zeXN0ZW1hZG1pbiwNCiAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQuaXNfZW50ZXJwcmlzZWFkbWluID0gcmVzcG9uc2UuZGF0YS5pc19lbnRlcnByaXNlYWRtaW4NCiAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQuY3VzdG9tTGlua0VudGVycHJpc2UgPSAnZWRpdC1lbnRlcnByaXNlP2VudGVycHJpc2U9Jyt0aGlzLiRzZXNzaW9uLmdldCgnZW50ZXJwcmlzZScpDQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LiRwYXJlbnQuaXNfY29vcF91c2VyID0gdGhpcy4kc2Vzc2lvbi5nZXQoJ2lzX2Nvb3BfdXNlcicpDQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LiRwYXJlbnQuY3VzdG9tTGlua0Nvb3AgPSAnZWRpdC1jb29wZXJhdGl2ZT9jb29wZXJhdGl2ZT0nK3RoaXMuJHNlc3Npb24uZ2V0KCdlbnRlcnByaXNlJykNCiAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICAgICAgICAgICAgIHRoaXMubW9udGFyTWFwYSgpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgY29uc3QgcGF0aF9sYW5nID0gYCR7dGhpcy4kYXBpVVJMfS9wcm9maWxlZGF0YS8ke3RoaXMuJHNlc3Npb24uZ2V0KCd1c2VyJyl9L2A7DQogICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgYXhpb3MNCiAgICAgICAgLmdldChwYXRoX2xhbmcpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+ew0KICAgICAgICAgICAgdGhpcy4kcm9vdC4kaTE4bi5sb2NhbGUgPSByZXNwb25zZS5kYXRhLmxhbmd1YWdlDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuZW50ZXJwcmlzZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmVudGVycHJpc2UNCiAgICAgICAgdGhpcy4kcmVmcy5kYXRvc2VtcHJlc2EuZ2V0RGF0b3NFbXByZXNhKHRoaXMuZW50ZXJwcmlzZSkNCiAgICAgICAgdGhpcy4kcmVmcy5saXN0YXVzdWFyaW9zLmdldFVzdWFyaW9zRW1wcmVzYSh0aGlzLmVudGVycHJpc2UpDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICBjb25zdCBwYXRoX2xhbmcgPSBgJHt0aGlzLiRhcGlVUkx9L3Byb2ZpbGVkYXRhLyR7dGhpcy4kc2Vzc2lvbi5nZXQoJ3VzZXInKX0vYDsNCiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICBheGlvcw0KICAgICAgICAuZ2V0KHBhdGhfbGFuZykNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT57DQogICAgICAgICAgICB0aGlzLiRyb290LiRpMThuLmxvY2FsZSA9IHJlc3BvbnNlLmRhdGEubGFuZ3VhZ2UNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5nZXREYXRvc1VzZXIoKQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["EditarEmpresa.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditarEmpresa.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div>\r\n        <Board />\r\n        <div class=\"bx--grid\" id=\"grid-admin\">\r\n            <br>\r\n            <h2>{{$t(\"newEnterprise.editar_enterprise\")}}</h2>\r\n            <br><br>\r\n            <EditarEmpresaComponent :idEmpresa=\"enterprise\" ref=\"datosempresa\" />\r\n            <br><br>\r\n            <ListaUsuarios  ref=\"listausuarios\" />\r\n            <br><br>\r\n            <ParcelsList/>\r\n            <br><br>\r\n            \r\n        </div>\r\n        <Footer/>\r\n    </div>\r\n</template>\r\n<script>\r\nimport EditarEmpresaComponent from \"../components/EditarEmpresaComponent.vue\";\r\nimport ListaUsuarios from \"../views/ListaUsuarios.vue\";\r\nimport ParcelsList from \"../views/ParcelsList.vue\";\r\nimport Footer from \"../views/Footer.vue\";\r\nimport Board from \"@/views/Board.vue\";\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"EditarEmpresa\",\r\n    props: {},\r\n    components: {\r\n        EditarEmpresaComponent,\r\n        ListaUsuarios,\r\n        ParcelsList,\r\n        Footer,\r\n        Board\r\n    },\r\n    data() {\r\n        return {\r\n            enterprise: ''\r\n        }\r\n    },\r\n    methods: {\r\n        getDatosUser(){\r\n            if(sessionStorage.getItem(\"apiAccess\")){\r\n                const path_lang = `${this.$apiURL}/profiledata/${this.$session.get('user')}/`;\r\n                axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n                axios\r\n                .get(path_lang)\r\n                .then(response =>{\r\n                    this.$root.$i18n.locale = response.data.language\r\n                })\r\n                const path = `${this.$apiURL}/profile/`;\r\n                axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n                axios\r\n                .get(path)\r\n                .then(response => {\r\n                    this.$session.start()\r\n                    //---------------------------------------------------------------\r\n                    this.$session.set('is_coop_user', response.data[0].cooperative_user)\r\n                    this.$session.set('enterprise', response.data[0].enterprise_id)\r\n                    this.$session.set('user', response.data[0].user)\r\n                    sessionStorage.setItem('enterprise', response.data[0].enterprise_id)\r\n                    sessionStorage.setItem('user', response.data[0].user)\r\n\r\n                    let pathEnterpriseInstance = `${this.$apiURL}/enterprises/${response.data[0].enterprise_id}/`;\r\n                    axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n                    axios.get(pathEnterpriseInstance)\r\n                    .then(response =>{\r\n                        sessionStorage.setItem('sI', response.data.sentinel_instance)\r\n                        \r\n                    })\r\n                    //---------------------------------------------------------------\r\n                    this.getPermisosUser(response.data[0].user)\r\n                }).catch(error =>{\r\n                    console.warn(error)\r\n                })\r\n            }\r\n        },\r\n        getPermisosUser(id){\r\n            const pathRol = `${this.$apiURL}/permisos/${id}/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(pathRol)\r\n            .then(response => {\r\n                //---------------------------------------------------------------\r\n                this.$session.set('is_enterpriseadmin', response.data.is_enterpriseadmin)\r\n                this.$session.set('is_staff', response.data.is_staff)\r\n                this.$session.set('is_superuser', response.data.is_superuser)\r\n                this.$session.set('is_systemadmin', response.data.is_systemadmin)\r\n                sessionStorage.setItem('is_enterpriseadmin', response.data.is_enterpriseadmin)\r\n                sessionStorage.setItem('is_staff', response.data.is_staff)\r\n                sessionStorage.setItem('is_superuser', response.data.is_superuser)\r\n                sessionStorage.setItem('is_systemadmin', response.data.is_systemadmin)\r\n                this.$parent.is_superuser = response.data.is_superuser\r\n                this.$parent.is_staff = response.data.is_staff,\r\n                this.$parent.is_systemadmin = response.data.is_systemadmin,\r\n                this.$parent.is_enterpriseadmin = response.data.is_enterpriseadmin\r\n                this.$parent.customLinkEnterprise = 'edit-enterprise?enterprise='+this.$session.get('enterprise')\r\n                this.$parent.$parent.is_coop_user = this.$session.get('is_coop_user')\r\n                this.$parent.$parent.customLinkCoop = 'edit-cooperative?cooperative='+this.$session.get('enterprise')\r\n                //---------------------------------------------------------------\r\n                this.montarMapa()\r\n            })\r\n        },\r\n    },\r\n    mounted() {\r\n        const path_lang = `${this.$apiURL}/profiledata/${this.$session.get('user')}/`;\r\n        axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n        axios\r\n        .get(path_lang)\r\n        .then(response =>{\r\n            this.$root.$i18n.locale = response.data.language\r\n        })\r\n        this.enterprise = this.$route.query.enterprise\r\n        this.$refs.datosempresa.getDatosEmpresa(this.enterprise)\r\n        this.$refs.listausuarios.getUsuariosEmpresa(this.enterprise)\r\n    },\r\n    created() {\r\n        const path_lang = `${this.$apiURL}/profiledata/${this.$session.get('user')}/`;\r\n        axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n        axios\r\n        .get(path_lang)\r\n        .then(response =>{\r\n            this.$root.$i18n.locale = response.data.language\r\n        })\r\n        this.getDatosUser()\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n#grid-admin{\r\n        margin-bottom: 50px;\r\n    }\r\n</style>"]}]}