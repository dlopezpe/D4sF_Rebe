{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\EditCooperativeEnterprise.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\EditCooperativeEnterprise.vue","mtime":1681217492538},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681731147886},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1681731156386},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681731147886},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1681731148945}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJOZXdDb29wZXJhdGl2ZSIsDQogICAgcHJvcHM6IHsNCiAgICAgICAgY29vcGVyYXRpdmVfaWQ6IFN0cmluZw0KICAgIH0sDQogICAgY29tcG9uZW50czoge30sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlTm9tYnJlOiBgYCwNCiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlRGlyZWN0aW9uOiBgYCwNCiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlUGhvbmU6IGBgLA0KICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2VDaWY6IGBgLA0KICAgICAgICAgICAgZW50ZXJwcmlzZXM6IEFycmF5KCksDQogICAgICAgICAgICBzdGFydDogMCwNCiAgICAgICAgICAgIGxlbmd0aDogMTAsDQogICAgICAgICAgICBtZW5zYWplQWxlcnRhOiBgYCwNCiAgICAgICAgICAgIHRpcG9BbGVydGE6IGBgLA0KICAgICAgICAgICAgcGFyZW50OiBPYmplY3QsDQogICAgICAgICAgICBjb29wZXJhdGl2ZTogYGAsDQogICAgICAgICAgICBlbnRlcnByaXNlc0luQ29vcDogW10sDQogICAgICAgICAgICBjb21wb25lbnRLZXk6IDANCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBvcGVuTW9kYWwoKSB7DQogICAgICAgICAgICB0aGlzLmNvb3BlcmF0aXZlID0gdGhpcy5jb29wZXJhdGl2ZV9pZA0KICAgICAgICAgICAgdGhpcy4kcmVmcy5uZXdDb29wZXJhdGl2ZUZvcm0uc2hvdygpDQogICAgICAgICAgICB0aGlzLnBhcmVudCA9IHRoaXMuJHJlZnMubmV3Q29vcGVyYXRpdmVGb3JtLiRwYXJlbnQuJHBhcmVudA0KICAgICAgICAgICAgdGhpcy5vYnRlbmVyRW1wcmVzYXMoKQ0KICAgICAgICB9LA0KICAgICAgICBvYnRlbmVyRW1wcmVzYXMoKXsNCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLiRhcGlVUkx9L2VudGVycHJpc2VzL2A7DQogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiK3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpDQogICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgLmdldChwYXRoKQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZW50ZXJwcmlzZXMgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0YVNlbGVjY2lvbmFkb3MoKQ0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT57DQogICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGVycm9yKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0TGlzdGFTZWxlY2Npb25hZG9zKCl7DQogICAgICAgICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9jb29wZXJhdGl2ZXMvJHt0aGlzLmNvb3BlcmF0aXZlfS9gOw0KICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAvL3RoaXMuZW50ZXJwcmlzZXNJbkNvb3AgPSByZXNwb25zZS5kYXRhLmVudGVycHJpc2VzDQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5lbnRlcnByaXNlcy5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVudGVycHJpc2VzSW5Db29wLnB1c2goZWxlbWVudC5pZCkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+ew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhlcnJvcikNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICBjb25zb2xlLmluZm8odGhpcy5lbnRlcnByaXNlc0luQ29vcCkNCiAgICAgICAgfSwNCiAgICAgICAgYWN0aW9uUHJpbWFyeSgpew0KICAgICAgICAgICAgY29uc3Qgcm93U2VsZWNjaW9uYWRvcyA9IHRoaXMuJHJlZnMudGFibGVFbXByZXNhcy5zZWxlY3RlZFJvd3MNCiAgICAgICAgICAgIGlmKHJvd1NlbGVjY2lvbmFkb3MubGVuZ3RoID09IDApew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbGV0IHBhdGggPSBgJHt0aGlzLiRhcGlVUkx9L2Nvb3BlcmF0aXZlc3IvJHt0aGlzLmNvb3BlcmF0aXZlfS9gOw0KICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5wdXQocGF0aCwgew0KICAgICAgICAgICAgICAgIGlkX2VtcHJlc2FzOiByb3dTZWxlY2Npb25hZG9zLA0KICAgICAgICAgICAgICAgIGVudGVycHJpc2VzOiByb3dTZWxlY2Npb25hZG9zDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm1lbnNhamVBbGVydGEgPSB0aGlzLiR0KCduZXdDb29wLmNyZWF0ZV9jb29wX3N1Y2Nlc3MnKQ0KICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnRpcG9BbGVydGEgPSAnc3VjY2VzcycNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LiRyZWZzLmFsZXJ0YUdlbmVyYWwudmVyQWxlcnRhKCkNCiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXREYXRvc0Nvb3AoKQ0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMubmV3Q29vcGVyYXRpdmVGb3JtLmhpZGUoKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgaWYoZXJyb3IucmVzcG9uc2UuZGF0YS5uYW1lWzBdLmluY2x1ZGVzKCdub3QgYmUgYmxhbmsnKSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZE1lc3NhZ2VOb21icmUgPSBgJHt0aGlzLiR0KCduZXdDb29wLmludmFsaWRvX2JsYW5rJyl9YA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQoKXsNCiAgICB9DQp9DQo="},{"version":3,"sources":["EditCooperativeEnterprise.vue"],"names":[],"mappings":";AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditCooperativeEnterprise.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <cv-modal\r\n        @primary-click=\"actionPrimary\"\r\n        ref=\"newCooperativeForm\"\r\n    >\r\n        <template v-if=\"true\" slot=\"label\">{{$t(\"editCoop.title\")}}</template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t(\"editCoop.title\")}}</template>\r\n        <template v-if=\"true\" slot=\"content\" class=\"formcontent\" ref=\"content_form\">\r\n            <div class=\"bx--row\">\r\n                <div class=\"bx--col-lg-12 bx--col-md-12 bx--col-sm-12\">\r\n                    <cv-data-table\r\n                        :sortable=\"false\"\r\n                        :columns=\"[\r\n                            {\r\n                                key: 'name',\r\n                                label: this.$t('adminEnterprise.nombre')\r\n                            },\r\n                            {\r\n                                key: 'cif',\r\n                                label: this.$t('adminEnterprise.cif')\r\n                            },\r\n                        ]\"\r\n                        :title=\"$t('adminEnterprise.listado_empresas')\"\r\n                        ref=\"tableEmpresas\"\r\n                        :rows-selected=\"enterprisesInCoop\"\r\n                        :key=\"componentKey\"\r\n                    >\r\n                        <template v-if=\"true\" slot=\"batch-actions\">\r\n                            <cv-button>\r\n                                {{''}}\r\n                            </cv-button>\r\n                        </template>\r\n\r\n                        <template slot=\"data\">\r\n                            <cv-data-table-row\r\n                                v-for=\"enterprise in enterprises\"\r\n                                :key=\"`${enterprise.id}`\"\r\n                                :value=\"`${enterprise.id}`\"\r\n                                \r\n                            >\r\n                                <cv-data-table-cell>{{enterprise.name}}</cv-data-table-cell>\r\n                                <cv-data-table-cell>{{enterprise.cif}}</cv-data-table-cell>\r\n                            </cv-data-table-row>\r\n                        </template>\r\n                    </cv-data-table>\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t(\"newEnterprise.guardar\")}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"NewCooperative\",\r\n    props: {\r\n        cooperative_id: String\r\n    },\r\n    components: {},\r\n    data() {\r\n        return {\r\n            invalidMessageNombre: ``,\r\n            invalidMessageDirection: ``,\r\n            invalidMessagePhone: ``,\r\n            invalidMessageCif: ``,\r\n            enterprises: Array(),\r\n            start: 0,\r\n            length: 10,\r\n            mensajeAlerta: ``,\r\n            tipoAlerta: ``,\r\n            parent: Object,\r\n            cooperative: ``,\r\n            enterprisesInCoop: [],\r\n            componentKey: 0\r\n        }\r\n    },\r\n    methods: {\r\n        openModal() {\r\n            this.cooperative = this.cooperative_id\r\n            this.$refs.newCooperativeForm.show()\r\n            this.parent = this.$refs.newCooperativeForm.$parent.$parent\r\n            this.obtenerEmpresas()\r\n        },\r\n        obtenerEmpresas(){\r\n            const path = `${this.$apiURL}/enterprises/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.enterprises = response.data\r\n                this.getListaSeleccionados()\r\n            }).catch(error =>{\r\n                console.info(error)\r\n            })\r\n        },\r\n        getListaSeleccionados(){\r\n            const path = `${this.$apiURL}/cooperatives/${this.cooperative}/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                //this.enterprisesInCoop = response.data.enterprises\r\n                response.data.enterprises.forEach(element => {\r\n                    this.enterprisesInCoop.push(element.id)\r\n                });\r\n            }).catch(error =>{\r\n                console.info(error)\r\n            })\r\n            console.info(this.enterprisesInCoop)\r\n        },\r\n        actionPrimary(){\r\n            const rowSeleccionados = this.$refs.tableEmpresas.selectedRows\r\n            if(rowSeleccionados.length == 0){\r\n                return false\r\n            }\r\n            let path = `${this.$apiURL}/cooperativesr/${this.cooperative}/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .put(path, {\r\n                id_empresas: rowSeleccionados,\r\n                enterprises: rowSeleccionados\r\n            })\r\n            .then(() => {\r\n                this.parent.mensajeAlerta = this.$t('newCoop.create_coop_success')\r\n                this.parent.tipoAlerta = 'success'\r\n            \r\n                this.parent.$refs.alertaGeneral.verAlerta()\r\n                this.parent.getDatosCoop()\r\n                this.$refs.newCooperativeForm.hide()\r\n                \r\n            })\r\n            .catch(error => {\r\n                if(error.response.data.name[0].includes('not be blank')){\r\n                    this.invalidMessageNombre = `${this.$t('newCoop.invalido_blank')}`\r\n                }\r\n            })\r\n        }\r\n    },\r\n    created(){\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>"]}]}