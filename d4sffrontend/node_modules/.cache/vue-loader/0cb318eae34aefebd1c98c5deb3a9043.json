{"remainingRequest":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\src\\components\\GraficosController.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\src\\components\\GraficosController.vue","mtime":1624012118261},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovL2ltcG9ydCBDaGFydENvbXBvbmVudCBmcm9tICdAL2NvbXBvbmVudHMvQ2hhcnRDb21wb25lbnRORFZJdjIudnVlJw0KaW1wb3J0IHtnZXRQcm9maWxlLCBnZXRQZXJtaXNvc30gZnJvbSAnQC9hdXRoL2luZGV4Jw0KaW1wb3J0IHtnZXRBbGxFbnRlcnByaXNlcywgZ2V0RW50ZXJwcmlzZX0gZnJvbSAnQC9jcnVkRnVuY3Rpb25zL2NydWRFbnRlcnByaXNlJy8vZ2V0RW50ZXJwcmlzZQ0KaW1wb3J0IHtnZXRBbGxDb29wZXJhdGl2ZXMsIGdldENvb3BlcmF0aXZlfSBmcm9tICdAL2NydWRGdW5jdGlvbnMvY3J1ZENvb3BlcmF0aXZhcycNCi8vaW1wb3J0IEdyYWZpY29UMUNvbnRyb2xsZXIgZnJvbSAnQC9jb21wb25lbnRzL0dyYWZpY29zVGlwby9HcmFmaWNvVDFDb250cm9sbGVyLnZ1ZScNCi8vaW1wb3J0IEdyYWZpY29UMkNvbnRyb2xsZXIgZnJvbSAnQC9jb21wb25lbnRzL0dyYWZpY29zVGlwby9HcmFmaWNvVDJDb250cm9sbGVyLnZ1ZScNCmltcG9ydCBHcmFmaWNvc0FudGVyaW9yZXNDb250cm9sbGVyIGZyb20gJ0AvY29tcG9uZW50cy9HcmFmaWNvc1RpcG8vR3JhZmljb3NBbnRlcmlvcmVzQ29udHJvbGxlci52dWUnDQoNCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycNCg0KaW1wb3J0IEFsZXJ0YUdlbmVyYWwgZnJvbSAiQC9jb21wb25lbnRzL0FsZXJ0YUdlbmVyYWwiOw0KaW1wb3J0IFVuaWZpY2FySW5mb3JtZXMgZnJvbSAiQC9jb21wb25lbnRzL1VuaWZpY2FySW5mb3JtZS52dWUiOw0KaW1wb3J0IEVkaXRhckluZm9ybWUgZnJvbSAiQC9jb21wb25lbnRzL0VkaXRhckluZm9ybWUudnVlIjsNCmltcG9ydCBDaGFydExpbmUgZnJvbSAnQC9jb21wb25lbnRzL2NoYXJ0cy9jaGFydExpbmUudnVlJw0KaW1wb3J0IENoYXJ0TGluZU1vaXMgZnJvbSAnQC9jb21wb25lbnRzL2NoYXJ0cy9jaGFydExpbmVNb2lzLnZ1ZScNCmltcG9ydCBTZW50SW1hZ2UgZnJvbSAnQC9jb21wb25lbnRzL2NoYXJ0cy9pbWFnZVNlbnQudnVlJw0KaW1wb3J0IENoYXJ0QmFyIGZyb20gJ0AvY29tcG9uZW50cy9jaGFydHMvY2hhcnRCYXIudnVlJw0KaW1wb3J0IENoYXJ0QmFyTW9pcyBmcm9tICdAL2NvbXBvbmVudHMvY2hhcnRzL2NoYXJ0QmFyTW9pcy52dWUnDQppbXBvcnQgVGFibGVDb2xvcnMgZnJvbSAnQC9jb21wb25lbnRzL2NoYXJ0cy90YWJsZUNvbG9ycy52dWUnDQppbXBvcnQgVGFibGVDb2xvcnNNb2lzIGZyb20gJ0AvY29tcG9uZW50cy9jaGFydHMvdGFibGVDb2xvcnNNb2lzLnZ1ZScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAiR3JhZmljb3NDb250cm9sbGVyIiwNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIC8vR3JhZmljb1QxQ29udHJvbGxlciwNCiAgICAgICAgLy9HcmFmaWNvVDJDb250cm9sbGVyLA0KICAgICAgICBHcmFmaWNvc0FudGVyaW9yZXNDb250cm9sbGVyLA0KICAgICAgICBDaGFydExpbmUsDQogICAgICAgIFNlbnRJbWFnZSwNCiAgICAgICAgQ2hhcnRCYXIsDQogICAgICAgIFRhYmxlQ29sb3JzLA0KICAgICAgICBBbGVydGFHZW5lcmFsLA0KICAgICAgICBDaGFydExpbmVNb2lzLA0KICAgICAgICBDaGFydEJhck1vaXMsDQogICAgICAgIFRhYmxlQ29sb3JzTW9pcywNCiAgICAgICAgVW5pZmljYXJJbmZvcm1lcywNCiAgICAgICAgRWRpdGFySW5mb3JtZQ0KICAgIH0sDQogICAgZGF0YSgpew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZmxhZ0luZGljYXRpbmdEYXRhSGFzQmVlbkxvYWRlZEluVmFyaWFibGVzOiBmYWxzZSwNCiAgICAgICAgICAgIC8vVXN1YXJpbw0KICAgICAgICAgICAgaXNfc3VwZXJ1c2VyOiBmYWxzZSwNCiAgICAgICAgICAgIGlzX3N0YWZmOiBmYWxzZSwNCiAgICAgICAgICAgIGlzX3N5c3RlbWFkbWluOiBmYWxzZSwNCiAgICAgICAgICAgIGlzX2VudGVycHJpc2VhZG1pbjogZmFsc2UsDQogICAgICAgICAgICBpc19jb29wX3VzZXI6IGZhbHNlLA0KICAgICAgICAgICAgLy9FbXByZXNhcyBzZWwNCiAgICAgICAgICAgIGFyckVtcHJlc2FzOiBbXSwNCiAgICAgICAgICAgIGFyckNvb3BlcmF0aXZhczogW10sDQogICAgICAgICAgICBhbGxQYXJjZWxzT2ZFbnRlcnByaXNlczogW10sDQogICAgICAgICAgICBhbGxQYXJjZWxzT2ZFbnRlcnByaXNlc0ZpbHRlcjogW10sDQogICAgICAgICAgICAvL0dyYWZpY29zDQoNCiAgICAgICAgICAgIHN0YXJ0OiAwLA0KICAgICAgICAgICAgbGVuZ3RoOiAxMCwNCiAgICAgICAgICAgIHN0YXJ0MjogMCwNCiAgICAgICAgICAgIGxlbmd0aDI6IDEwLA0KICAgICAgICAgICAgbGlzdGFkb0VtcHJlc2FzOiB0aGlzLmFyckVudGVycHJpc2VzLA0KICAgICAgICAgICAgaGlzdG9yaWNvQW50ZXJpb3I6IEFycmF5KCksDQogICAgICAgICAgICBoaXN0b3JpY29BbnRlcmlvckNvb3A6IEFycmF5KCksDQogICAgICAgICAgICBjb2x1bW5zSGlzdG9yaWNvOiBbDQogICAgICAgICAgICAgICAgdGhpcy4kdCgnZ3JhZmljb3MucGFyY2VsYScpLA0KICAgICAgICAgICAgICAgIHRoaXMuJHQoJ2dyYWZpY29zLnJhbmdvX2ZlY2hhc19zZWwnKSwgDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiB0aGlzLiR0KCdncmFmaWNvcy5jcmVhZG8nKSwNCiAgICAgICAgICAgICAgICAgICAgJ3NvcnRhYmxlJzogdHJ1ZQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiB0aGlzLiR0KCdncmFmaWNvcy50aXBvJyksDQogICAgICAgICAgICAgICAgICAgICdzb3J0YWJsZSc6IHRydWUNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJzogdGhpcy4kdCgnZ3JhZmljb3MuY2FwYScpLA0KICAgICAgICAgICAgICAgICAgICAnc29ydGFibGUnOiB0cnVlDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGtleTogIiIsDQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICAgICAgc2hvd1VuaWZpY2FyOiBmYWxzZSwNCiAgICAgICAgICAgIHNob3dFZGl0YXI6IGZhbHNlLA0KICAgICAgICAgICAgdmVyR3JhZmljTkRWSTogZmFsc2UsDQogICAgICAgICAgICB2ZXJHcmFmaWNNb2lzOiBmYWxzZSwNCiAgICAgICAgICAgIHZlckltYWdlblNlbnQ6IGZhbHNlLA0KICAgICAgICAgICAgaW5mb3JtZXNTZWxsOiBBcnJheSgpLA0KICAgICAgICAgICAgaW5mb3JtZVNlbGw6IEFycmF5KCksDQogICAgICAgICAgICBjYXBhSW5mb3JVbmk6IGBgLA0KICAgICAgICAgICAgdGlwb0luZm9yVW5pOiBgYCwNCiAgICAgICAgICAgIGNvbXBvbmVudFRhYmxlSGlzdDogMCwNCiAgICAgICAgICAgIGVtcHJlc2FTZWxlY2Npb25hZGFJRDogJycsDQogICAgICAgICAgICBlbXByZXNhU2VsZWNjaW9uYWRhT2JqOiBPYmplY3QoKSwNCiAgICAgICAgICAgIGNvb3BlcmF0aXZhU2VsZWNjaW9uYWRhT2JqOiBPYmplY3QoKSwNCiAgICAgICAgICAgIGNvbHVtbjogJ2NyZWF0ZWQnLA0KICAgICAgICAgICAgb3JkZW46ICdkZXNjZW5kaW5nJywNCiAgICAgICAgICAgIGtleUNvbXBvbmVudDogMCwNCiAgICAgICAgICAgIG1lbnNhamVBbGVydGE6IGBgLA0KICAgICAgICAgICAgdGlwb0FsZXJ0YTogYGVycm9yYA0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGFjdGlvbk9uUGFnaW5hdGlvbihldil7DQogICAgICAgICAgICB0aGlzLnN0YXJ0ID0gZXYuc3RhcnQtMQ0KICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBldi5sZW5ndGgNCiAgICAgICAgfSwNCiAgICAgICAgYWN0aW9uT25QYWdpbmF0aW9uMihldil7DQogICAgICAgICAgICB0aGlzLnN0YXJ0MiA9IGV2LnN0YXJ0LTENCiAgICAgICAgICAgIHRoaXMubGVuZ3RoMiA9IGV2Lmxlbmd0aA0KICAgICAgICB9LA0KICAgICAgICBkYXRlRm9ybWF0KGRhdGUpew0KICAgICAgICAgICAgY29uc3QgZHRzID0gZGF0ZS5zcGxpdCgnVCcpDQogICAgICAgICAgICByZXR1cm4gZHRzWzBdDQogICAgICAgIH0sDQogICAgICAgIHNob3dFZGl0YXJJbmZvcm1lKCl7DQogICAgICAgICAgICBjb25zb2xlLmluZm8odGhpcy5lZGl0YXJJbmZvcm1lKQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy5lZGl0YXJJbmZvcm1lLm9wZW5Nb2RhbCgpDQogICAgICAgIH0sDQogICAgICAgIHZlckRhdG9zUm93KHJvdyl7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlSGlzdC5zZWxlY3RlZFJvd3MuZm9yRWFjaCgoKT0+ew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0LnNlbGVjdGVkUm93cy5wb3AoKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0LnNlbGVjdGVkUm93cy5wdXNoKHJvdykNCiAgICAgICAgICAgIHRoaXMudmVyRGF0b3MoKQ0KICAgICAgICB9LA0KICAgICAgICB2ZXJEYXRvcygpew0KICAgICAgICAgICAgaWYodGhpcy4kcmVmcy50YWJsZUhpc3Quc2VsZWN0ZWRSb3dzLmxlbmd0aCAhPSAxKXsNCiAgICAgICAgICAgICAgICB0aGlzLm1lbnNhamVBbGVydGEgPSB0aGlzLiR0KCdncmFmaWNvcy5zZWxlY3Rfb25lX2luZm9ybWUnKQ0KICAgICAgICAgICAgICAgIHRoaXMudGlwb0FsZXJ0YSA9ICdlcnJvcicNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCByb3dTZWxlY2Npb25hZG8gPSB0aGlzLiRyZWZzLnRhYmxlSGlzdC5zZWxlY3RlZFJvd3M7DQogICAgICAgICAgICBsZXQgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vdmVyX2hpc3QvJHtyb3dTZWxlY2Npb25hZG99L2ANCiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5jYXBhID09ICdORFZJJyl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmVyR3JhZmljTkRWSSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNNb2lzID0gZmFsc2UNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNORFZJID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNNb2lzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBwYXRoID0gYCR7dGhpcy4kYXBpVVJMTWVkaWF9LyR7cmVzcG9uc2UuZGF0YS5pbWFnZW59L2ANCiAgICAgICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlbnQgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgICAgIHRoaXMudmVySW1hZ2VuU2VudCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlDb21wb25lbnQgKz0xDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT57DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICB2ZXJEYXRvc1JvdzIocm93KXsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0Mi5zZWxlY3RlZFJvd3MuZm9yRWFjaCgoKT0+ew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0Mi5zZWxlY3RlZFJvd3MucG9wKCkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlSGlzdDIuc2VsZWN0ZWRSb3dzLnB1c2gocm93KQ0KICAgICAgICAgICAgdGhpcy52ZXJEYXRvczIoKQ0KICAgICAgICB9LA0KICAgICAgICB2ZXJEYXRvczIoKXsNCiAgICAgICAgICAgIGlmKHRoaXMuJHJlZnMudGFibGVIaXN0Mi5zZWxlY3RlZFJvd3MubGVuZ3RoICE9IDEpew0KICAgICAgICAgICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ2dyYWZpY29zLnNlbGVjdF9vbmVfaW5mb3JtZScpDQogICAgICAgICAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gJ2Vycm9yJw0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhR2VuZXJhbGwudmVyQWxlcnRhKCkNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnN0IHJvd1NlbGVjY2lvbmFkbyA9IHRoaXMuJHJlZnMudGFibGVIaXN0Mi5zZWxlY3RlZFJvd3M7DQogICAgICAgICAgICBsZXQgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vdmVyX2hpc3QvJHtyb3dTZWxlY2Npb25hZG99L2ANCiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5jYXBhID09ICdORFZJJyl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmVyR3JhZmljTkRWSSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNNb2lzID0gZmFsc2UNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNORFZJID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJHcmFmaWNNb2lzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBwYXRoID0gYCR7dGhpcy4kYXBpVVJMTWVkaWF9LyR7cmVzcG9uc2UuZGF0YS5pbWFnZW59L2ANCiAgICAgICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNlbnQgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgICAgIHRoaXMudmVySW1hZ2VuU2VudCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlDb21wb25lbnQgKz0xDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT57DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICBkZXNjYXJnYUV4Y2VsUm93KHJvdyl7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlSGlzdC5zZWxlY3RlZFJvd3MuZm9yRWFjaCgoKT0+ew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0LnNlbGVjdGVkUm93cy5wb3AoKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0LnNlbGVjdGVkUm93cy5wdXNoKHJvdykNCiAgICAgICAgICAgIHRoaXMuZGVzY2FyZ2FFeGNlbCgpDQogICAgICAgIH0sDQogICAgICAgIGRlc2NhcmdhRXhjZWwoKXsNCiAgICAgICAgICAgIGlmKHRoaXMuJHJlZnMudGFibGVIaXN0LnNlbGVjdGVkUm93cy5sZW5ndGggIT0gMSl7DQogICAgICAgICAgICAgICAgdGhpcy5tZW5zYWplQWxlcnRhID0gdGhpcy4kdCgnZ3JhZmljb3Muc2VsZWN0X29uZV9pbmZvcm1lJykNCiAgICAgICAgICAgICAgICB0aGlzLnRpcG9BbGVydGEgPSAnZXJyb3InDQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hbGVydGFHZW5lcmFsbC52ZXJBbGVydGEoKQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3Qgcm93U2VsZWNjaW9uYWRvID0gdGhpcy4kcmVmcy50YWJsZUhpc3Quc2VsZWN0ZWRSb3dzOw0KICAgICAgICAgICAgY29uc3QgcGFyY2VsYVNlbGVjdCA9IHRoaXMuaGlzdG9yaWNvQW50ZXJpb3IuZmlsdGVyKChwYXJjZWxhKT0+ew0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJjZWxhLmlkID09IHJvd1NlbGVjY2lvbmFkbw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGxldCBwYXJjZWxhbmFtZSA9IGBgDQogICAgICAgICAgICBpZihwYXJjZWxhU2VsZWN0WzBdLmFsaWFzKXsNCiAgICAgICAgICAgICAgICBwYXJjZWxhbmFtZSA9IHBhcmNlbGFTZWxlY3RbMF0uYWxpYXMNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHBhcmNlbGFuYW1lID0gKHBhcmNlbGFTZWxlY3RbMF0udGlwbyA9PSAxKSA/IHRoaXMucGFyY2VsYU5hbWUocGFyY2VsYVNlbGVjdFswXS5wYXJjZWxhKSA6IHBhcmNlbGFTZWxlY3RbMF0ucGFyY2VsYQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQoNCiAgICAgICAgICAgIHdpbmRvdy5VUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7DQogICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksDQogICAgICAgICAgICAgICAgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSwgZmlsZTsNCiAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCBgJHt0aGlzLiRhcGlVUkxNZWRpYX0vJHtwYXJjZWxhU2VsZWN0WzBdLnhsc3hGaWxlfWAsIHRydWUpOw0KICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJzsNCiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgZmlsZSA9IG5ldyBCbG9iKFt4aHIucmVzcG9uc2VdLCB7IHR5cGUgOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnIH0pOw0KICAgICAgICAgICAgICAgIGEuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOw0KICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSBgJHtwYXJjZWxhbmFtZX0ueGxzeGA7ICAvLyBTZXQgdG8gd2hhdGV2ZXIgZmlsZSBuYW1lIHlvdSB3YW50DQogICAgICAgICAgICAgICAgYS5jbGljaygpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHhoci5zZW5kKCk7DQogICAgICAgIH0sDQogICAgICAgIGRlc2NhcmdhRXhjZWxSb3cyKHJvdyl7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlSGlzdDIuc2VsZWN0ZWRSb3dzLmZvckVhY2goKCk9PnsNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlSGlzdDIuc2VsZWN0ZWRSb3dzLnBvcCgpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy50YWJsZUhpc3QyLnNlbGVjdGVkUm93cy5wdXNoKHJvdykNCiAgICAgICAgICAgIHRoaXMuZGVzY2FyZ2FFeGNlbDIoKQ0KICAgICAgICB9LA0KICAgICAgICBkZXNjYXJnYUV4Y2VsMigpew0KICAgICAgICAgICAgaWYodGhpcy4kcmVmcy50YWJsZUhpc3QyLnNlbGVjdGVkUm93cy5sZW5ndGggIT0gMSl7DQogICAgICAgICAgICAgICAgdGhpcy5tZW5zYWplQWxlcnRhID0gdGhpcy4kdCgnZ3JhZmljb3Muc2VsZWN0X29uZV9pbmZvcm1lJykNCiAgICAgICAgICAgICAgICB0aGlzLnRpcG9BbGVydGEgPSAnZXJyb3InDQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hbGVydGFHZW5lcmFsbC52ZXJBbGVydGEoKQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3Qgcm93U2VsZWNjaW9uYWRvID0gdGhpcy4kcmVmcy50YWJsZUhpc3QyLnNlbGVjdGVkUm93czsNCiAgICAgICAgICAgIGNvbnN0IHBhcmNlbGFTZWxlY3QgPSB0aGlzLmhpc3Rvcmljb0FudGVyaW9yQ29vcC5maWx0ZXIoKHBhcmNlbGEpPT57DQogICAgICAgICAgICAgICAgcmV0dXJuIHBhcmNlbGEuaWQgPT0gcm93U2VsZWNjaW9uYWRvDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgbGV0IHBhcmNlbGFuYW1lID0gYGANCiAgICAgICAgICAgIGlmKHBhcmNlbGFTZWxlY3RbMF0uYWxpYXMpew0KICAgICAgICAgICAgICAgIHBhcmNlbGFuYW1lID0gcGFyY2VsYVNlbGVjdFswXS5hbGlhcw0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgcGFyY2VsYW5hbWUgPSAocGFyY2VsYVNlbGVjdFswXS50aXBvID09IDEpID8gdGhpcy5wYXJjZWxhTmFtZShwYXJjZWxhU2VsZWN0WzBdLnBhcmNlbGEpIDogcGFyY2VsYVNlbGVjdFswXS5wYXJjZWxhDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCg0KICAgICAgICAgICAgd2luZG93LlVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDsNCiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSwNCiAgICAgICAgICAgICAgICBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLCBmaWxlOw0KICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIGAke3RoaXMuJGFwaVVSTE1lZGlhfS8ke3BhcmNlbGFTZWxlY3RbMF0ueGxzeEZpbGV9YCwgdHJ1ZSk7DQogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InOw0KICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBmaWxlID0gbmV3IEJsb2IoW3hoci5yZXNwb25zZV0sIHsgdHlwZSA6ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcgfSk7DQogICAgICAgICAgICAgICAgYS5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7DQogICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9IGAke3BhcmNlbGFuYW1lfS54bHN4YDsgIC8vIFNldCB0byB3aGF0ZXZlciBmaWxlIG5hbWUgeW91IHdhbnQNCiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgeGhyLnNlbmQoKTsNCiAgICAgICAgfSwNCiAgICAgICAgcGFyY2VsYU5hbWUoaWQpew0KICAgICAgICAgICAgY29uc3QgcGFyY2VsYVNlbGVjdCA9IHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMuZmlsdGVyKChwYXJjZWxhKT0+ew0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJjZWxhLmlkID09IGlkDQogICAgICAgICAgICB9KSAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYocGFyY2VsYVNlbGVjdC5sZW5ndGggPiAwKXsNCiAgICAgICAgICAgICAgICByZXR1cm4gcGFyY2VsYVNlbGVjdFswXS5wcm9wZXJ0aWVzLm5hbWUNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHJldHVybiAnR3LDoWZpY28gR2VuZXJhZG8gZGUgUGFyY2VsYSBFbGltaW5hZGEnDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNlbGVjY2lvbmFFbXByZXNhKGVtcHJlc2Epew0KICAgICAgICAgICAgY29uc3QgYXJyUGFyY2VscyA9IFtdDQogICAgICAgICAgICBpZihlbXByZXNhID09ICdhbGwnKXsNCiAgICAgICAgICAgICAgICBnZXRBbGxFbnRlcnByaXNlcygpDQogICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWFwKGVudGVycHJpc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGVycHJpc2UucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyUGFyY2Vscy5wdXNoKHBhcmNlbCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyRW1wcmVzYXMgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzID0gYXJyUGFyY2Vscw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbXByZXNhU2VsZWNjaW9uYWRhT2JqID0gcmVzcG9uc2UuZGF0YVswXQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbmZvcm1lc0FudGVyaW9yZXMocmVzcG9uc2UuZGF0YVswXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVtcHJlc2Euc3BsaXQoJ18nKQ0KICAgICAgICAgICAgICAgIGlmKHJlc3VsdFswXSA9PSAnY29vcCcpew0KICAgICAgICAgICAgICAgICAgICBnZXRDb29wZXJhdGl2ZShyZXN1bHRbMV0pDQogICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZW50ZXJwcmlzZXMubWFwKGVudGVycHJpc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGVycHJpc2UucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyUGFyY2Vscy5wdXNoKHBhcmNlbCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyRW1wcmVzYXMgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzID0gYXJyUGFyY2Vscw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbXByZXNhU2VsZWNjaW9uYWRhT2JqID0gcmVzcG9uc2UuZGF0YS5lbnRlcnByaXNlc1swXQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbmZvcm1lc0FudGVyaW9yZXMocmVzcG9uc2UuZGF0YS5lbnRlcnByaXNlc1swXS5pZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29vcGVyYXRpdmFTZWxlY2Npb25hZGFPYmogPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEluZm9ybWVzQW50ZXJpb3Jlc0Nvb3AocmVzcG9uc2UuZGF0YS5pZCkNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgZ2V0RW50ZXJwcmlzZShlbXByZXNhKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihhc3luYyByZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnBhcmNlbHMuZmVhdHVyZXMubWFwKHBhcmNlbCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyUGFyY2Vscy5wdXNoKHBhcmNlbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFyckVtcHJlc2FzID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxQYXJjZWxzT2ZFbnRlcnByaXNlcyA9IGFyclBhcmNlbHMNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1wcmVzYVNlbGVjY2lvbmFkYU9iaiA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5mb3JtZXNBbnRlcmlvcmVzKHJlc3BvbnNlLmRhdGEuaWQpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBkZWxJbmZvcm1lUm93KHJvdyl7DQogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlSGlzdC5zZWxlY3RlZFJvd3MuZm9yRWFjaCgoKT0+ew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0LnNlbGVjdGVkUm93cy5wb3AoKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0LnNlbGVjdGVkUm93cy5wdXNoKHJvdykNCiAgICAgICAgICAgIHRoaXMuZGVsSW5mb3JtZSgpDQogICAgICAgIH0sDQogICAgICAgIGRlbEluZm9ybWUoKXsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhX2VsaW1pbmFyLmRhdGFWaXNpYmxlID0gdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICBkZWxJbmZvcm1lUm93Mihyb3cpew0KICAgICAgICAgICAgdGhpcy4kcmVmcy50YWJsZUhpc3QyLnNlbGVjdGVkUm93cy5mb3JFYWNoKCgpPT57DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy50YWJsZUhpc3QyLnNlbGVjdGVkUm93cy5wb3AoKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0Mi5zZWxlY3RlZFJvd3MucHVzaChyb3cpDQogICAgICAgICAgICB0aGlzLmRlbEluZm9ybWUyKCkNCiAgICAgICAgfSwNCiAgICAgICAgZGVsSW5mb3JtZVJvdzMocm93KXsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0Mi5zZWxlY3RlZFJvd3MuZm9yRWFjaCgoKT0+ew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudGFibGVIaXN0Mi5zZWxlY3RlZFJvd3MucG9wKCkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlSGlzdDIuc2VsZWN0ZWRSb3dzLnB1c2gocm93KQ0KICAgICAgICAgICAgdGhpcy5kZWxJbmZvcm1lMygpDQogICAgICAgIH0sDQogICAgICAgIGRlbEluZm9ybWUyKCl7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YV9lbGltaW5hcjIuZGF0YVZpc2libGUgPSB0cnVlDQogICAgICAgIH0sDQogICAgICAgIGRlbEluZm9ybWUzKCl7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YV9lbGltaW5hcjMuZGF0YVZpc2libGUgPSB0cnVlDQogICAgICAgIH0sDQogICAgICAgIGVsaW1pbmFyVXN1YXJpbygpew0KICAgICAgICAgICAgY29uc3Qgcm93U2VsZWNjaW9uYWRvID0gdGhpcy4kcmVmcy50YWJsZUhpc3Quc2VsZWN0ZWRSb3dzDQogICAgICAgICAgICBsZXQgZmxhZyA9IGZhbHNlDQogICAgICAgICAgICByb3dTZWxlY2Npb25hZG8uZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50KQ0KICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLiRhcGlVUkx9L3Zlcl9oaXN0LyR7ZWxlbWVudH0vYA0KICAgICAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAgICAgLmRlbGV0ZShwYXRoKQ0KICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbmZvcm1lc0FudGVyaW9yZXModGhpcy5lbXByZXNhU2VsZWNjaW9uYWRhT2JqLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRUYWJsZUhpc3QgKz0xDQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ2dyYWZpY29zLmRlbF9pbmZvcm1lX29rJykNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gJ3N1Y2Nlc3MnDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhR2VuZXJhbGwudmVyQWxlcnRhKCkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PnsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbmZvcm1lc0FudGVyaW9yZXModGhpcy5lbXByZXNhU2VsZWNjaW9uYWRhT2JqLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW5zYWplQWxlcnRhID0gdGhpcy4kdCgnZ3JhZmljb3MuZGVsX2luZm9ybWVfZXJyb3InKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRpcG9BbGVydGEgPSAnZXJyb3InDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhR2VuZXJhbGwudmVyQWxlcnRhKCkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYoZmxhZyl7DQogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZXJyb3InKQ0KICAgICAgICAgICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ2dyYWZpY29zLmRlbF9pbmZvcm1lX2Vycm9yJykNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YS52ZXJBbGVydGEoKQ0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hbGVydGFfZWxpbWluYXIuaGlkZSgpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGVsaW1pbmFyVXN1YXJpbzIoKXsNCiAgICAgICAgICAgIGNvbnN0IHJvd1NlbGVjY2lvbmFkbyA9IHRoaXMuJHJlZnMudGFibGVIaXN0Mi5zZWxlY3RlZFJvd3MNCiAgICAgICAgICAgIGxldCBmbGFnID0gZmFsc2UNCiAgICAgICAgICAgIHJvd1NlbGVjY2lvbmFkby5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsZW1lbnQpDQogICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vdmVyX2hpc3QvJHtlbGVtZW50fS9gDQogICAgICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgICAgICAuZGVsZXRlKHBhdGgpDQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEluZm9ybWVzQW50ZXJpb3Jlc0Nvb3AoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRUYWJsZUhpc3QgKz0xDQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ2dyYWZpY29zLmRlbF9pbmZvcm1lX29rJykNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gJ3N1Y2Nlc3MnDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhR2VuZXJhbGwudmVyQWxlcnRhKCkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PnsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbmZvcm1lc0FudGVyaW9yZXNDb29wKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ2dyYWZpY29zLmRlbF9pbmZvcm1lX2Vycm9yJykNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gJ2Vycm9yJw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGlmKGZsYWcpew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yJykNCiAgICAgICAgICAgICAgICB0aGlzLm1lbnNhamVBbGVydGEgPSB0aGlzLiR0KCdncmFmaWNvcy5kZWxfaW5mb3JtZV9lcnJvcicpDQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hbGVydGEudmVyQWxlcnRhKCkNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhX2VsaW1pbmFyLmhpZGUoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBlbGltaW5hclVzdWFyaW8zKCl7DQogICAgICAgICAgICBjb25zdCByb3dTZWxlY2Npb25hZG8gPSB0aGlzLiRyZWZzLnRhYmxlSGlzdDIuc2VsZWN0ZWRSb3dzDQogICAgICAgICAgICBsZXQgZmxhZyA9IGZhbHNlDQogICAgICAgICAgICByb3dTZWxlY2Npb25hZG8uZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50KQ0KICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLiRhcGlVUkx9L3Zlcl9oaXN0LyR7ZWxlbWVudH0vYA0KICAgICAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAgICAgLmRlbGV0ZShwYXRoKQ0KICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbmZvcm1lc0FudGVyaW9yZXNDb29wQURNKHRoaXMuY29vcGVyYXRpdmVTZWxlY3RPYmouaWQpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudFRhYmxlSGlzdCArPTENCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW5zYWplQWxlcnRhID0gdGhpcy4kdCgnZ3JhZmljb3MuZGVsX2luZm9ybWVfb2snKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRpcG9BbGVydGEgPSAnc3VjY2VzcycNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hbGVydGFHZW5lcmFsbC52ZXJBbGVydGEoKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+ew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEluZm9ybWVzQW50ZXJpb3Jlc0Nvb3BBRE0odGhpcy5jb29wZXJhdGl2ZVNlbGVjdE9iai5pZCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ2dyYWZpY29zLmRlbF9pbmZvcm1lX2Vycm9yJykNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gJ2Vycm9yJw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWxsLnZlckFsZXJ0YSgpDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGlmKGZsYWcpew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Vycm9yJykNCiAgICAgICAgICAgICAgICB0aGlzLm1lbnNhamVBbGVydGEgPSB0aGlzLiR0KCdncmFmaWNvcy5kZWxfaW5mb3JtZV9lcnJvcicpDQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5hbGVydGEudmVyQWxlcnRhKCkNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuYWxlcnRhX2VsaW1pbmFyLmhpZGUoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBzaG93TW9kaWZpY2FySW5mb3JtZXMoKXsNCiAgICAgICAgICAgIHRoaXMuJHJlZnMudW5pZmljYXJJbmZvcm1lcy5vcGVuTW9kYWwoKQ0KICAgICAgICB9LA0KICAgICAgICBhZ3J1cGFyQ29tcGF0aWJsZShhcnJTZWwpew0KICAgICAgICAgICAgbGV0IGNhcGFBbnQgPSBgYA0KICAgICAgICAgICAgbGV0IHRpcG9BbnQgPSBgYA0KICAgICAgICAgICAgbGV0IHBhcmNlbGFBbnQgPSBgYA0KICAgICAgICAgICAgbGV0IGZsYWcgPSB0cnVlDQogICAgICAgICAgICB2YXIgQnJlYWtFeGNlcHRpb24gPSB7fTsNCiAgICAgICAgICAgIGxldCBhcnJQYXJjZWxzU2VsID0gQXJyYXkoKQ0KICAgICAgICAgICAgbGV0IGFyclBhcmNlbEZpbHRlciA9IEFycmF5KCkNCiAgICAgICAgICAgIHRyeXsNCiAgICAgICAgICAgICAgICBpZihhcnJTZWwubGVuZ3RoID4gMSl7DQogICAgICAgICAgICAgICAgICAgIGFyclNlbC5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgYXJyUGFyY2VsRmlsdGVyID0gdGhpcy5oaXN0b3JpY29BbnRlcmlvci5maWx0ZXIoaW5mb3JtZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5mb3JtZS5pZCA9PSBlbGVtZW50KXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWNhcGFBbnQpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwYUFudCA9IGluZm9ybWUuY2FwYQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhcGFBbnQgIT0gaW5mb3JtZS5jYXBhKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBCcmVha0V4Y2VwdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aXBvQW50KXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpcG9BbnQgPSBpbmZvcm1lLnRpcG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmNlbGFBbnQgPSBpbmZvcm1lLnBhcmNlbGENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwYXJzZUludCh0aXBvQW50KSAhPSBwYXJzZUludChpbmZvcm1lLnRpcG8pKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBCcmVha0V4Y2VwdGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocGFyc2VJbnQodGlwb0FudCkgPT0gMSAmJiBwYXJjZWxhQW50ICE9IGluZm9ybWUucGFyY2VsYSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgQnJlYWtFeGNlcHRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5mb3JtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICBhcnJQYXJjZWxzU2VsLnB1c2goYXJyUGFyY2VsRmlsdGVyWzBdKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgQnJlYWtFeGNlcHRpb24NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9IGNhdGNoIChlKXsNCiAgICAgICAgICAgICAgICBpZighZmxhZyl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1VuaWZpY2FyID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgaWYoYXJyU2VsLmxlbmd0aCA9PSAxKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0VkaXRhciA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mb3JtZVNlbGwgPSBhcnJTZWwNCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFZGl0YXIgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHRocm93IGUNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLmluZm9ybWVzU2VsbCA9IGFyclBhcmNlbHNTZWwNCiAgICAgICAgICAgIHRoaXMuY2FwYUluZm9yVW5pID0gY2FwYUFudA0KICAgICAgICAgICAgdGhpcy50aXBvSW5mb3JVbmkgPSB0aXBvQW50DQogICAgICAgICAgICB0aGlzLnNob3dVbmlmaWNhciA9IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0SGlzdG9yaWNvKCl7DQogICAgICAgICAgICBpZih0aGlzLmFyckVtcHJlc2FzLmxlbmd0aCl7DQogICAgICAgICAgICAgICAgdGhpcy5lbXByZXNhU2VsZWNjaW9uYWRhT2JqID0gdGhpcy5hcnJFbXByZXNhc1swXQ0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5mb3JtZXNBbnRlcmlvcmVzKHRoaXMuYXJyRW1wcmVzYXNbMF0uaWQpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZih0aGlzLmFyckNvb3BlcmF0aXZhcy5sZW5ndGgpew0KICAgICAgICAgICAgICAgIHRoaXMuY29vcGVyYXRpdmFTZWxlY2Npb25hZGFPYmogPSB0aGlzLmFyckNvb3BlcmF0aXZhc1swXQ0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5mb3JtZXNBbnRlcmlvcmVzQ29vcCh0aGlzLmFyckNvb3BlcmF0aXZhc1swXS5pZCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZ2V0SW5mb3JtZXNBbnRlcmlvcmVzKGVudGVycHJpc2VfaWQpew0KICAgICAgICAgICAgbGV0IHBhdGggPSBgJHt0aGlzLiRhcGlVUkx9L3Byb2Nlc2Fkby8/ZW50ZXJwcmlzZV9pZD0ke2VudGVycHJpc2VfaWR9JmNvbHVtX25hbWU9JHt0aGlzLmNvbHVtbn0mb3JkZXI9JHt0aGlzLm9yZGVufWANCiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdpbmZvcm1lcyBkZSBsYSBlbXByZXNhOicsIHRoaXMuZW1wcmVzYVNlbGVjY2lvbmFkYU9iai5uYW1lKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhyZXNwb25zZS5kYXRhKQ0KICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yaWNvQW50ZXJpb3IgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+ew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcikNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGdldEluZm9ybWVzQW50ZXJpb3Jlc0Nvb3AoY29vcCl7DQogICAgICAgICAgICBsZXQgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vcHJvY2VzYWRvLz9lbnRlcnByaXNlX2lkPSR7Y29vcH0mY29sdW1fbmFtZT0ke3RoaXMuY29sdW1ufSZvcmRlcj0ke3RoaXMub3JkZW59YA0KICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ2luZm9ybWVzIGRlIGxhIENvb3BlcmF0aXZhOicsIHRoaXMuY29vcGVyYXRpdmFTZWxlY2Npb25hZGFPYmoubmFtZSkNCiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8ocmVzcG9uc2UuZGF0YSkNCiAgICAgICAgICAgICAgICB0aGlzLmhpc3Rvcmljb0FudGVyaW9yQ29vcCA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT57DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIGJlZm9yZU1vdW50KCl7DQogICAgICAgIC8vdGhpcy5nZXRIaXN0b3JpY28oKQ0KICAgIH0sDQogICAgbW91bnRlZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAvL2NvbnNvbGUuaW5mbygnVXNlciBMb2dnZWQnKQ0KICAgIH0sDQogICAgYmVmb3JlQ3JlYXRlKCl7DQogICAgICAgIGdldFByb2ZpbGUoKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICBjb25zdCB1c2VyID0gcmVzcG9uc2UuZGF0YVswXQ0KICAgICAgICAgICAgZ2V0UGVybWlzb3MocmVzcG9uc2UuZGF0YVswXS51c2VyKQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuaXNfc3VwZXJ1c2VyID0gcmVzcG9uc2UuZGF0YS5pc19zdXBlcnVzZXINCiAgICAgICAgICAgICAgICB0aGlzLmlzX3N0YWZmID0gcmVzcG9uc2UuZGF0YS5pc19zdGFmZg0KICAgICAgICAgICAgICAgIHRoaXMuaXNfc3lzdGVtYWRtaW4gPSByZXNwb25zZS5kYXRhLmlzX3N5c3RlbWFkbWluDQogICAgICAgICAgICAgICAgdGhpcy5pc19lbnRlcnByaXNlYWRtaW4gPSByZXNwb25zZS5kYXRhLmlzX2VudGVycHJpc2VhZG1pbg0KICAgICAgICAgICAgICAgIHRoaXMuaXNfY29vcF91c2VyID0gdXNlci5jb29wZXJhdGl2ZV91c2VyDQogICAgICAgICAgICAgICAgLyoNCiAgICAgICAgICAgICAgICAvLypPYnRlbmVtb3MgbGEgZW1wcmVzYSBkZWwgdXN1YXJpbw0KICAgICAgICAgICAgICAgIGNvbnN0IGVudGVycHJpc2VfaWQgPSB1c2VyLmVudGVycHJpc2VfaWQNCiAgICAgICAgICAgICAgICBnZXRFbnRlcnByaXNlKGVudGVycHJpc2VfaWQpDQogICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgcmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmNlbGFzID0gcmVzcG9uc2UuZGF0YS5wYXJjZWxzDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJyRW1wcmVzYXMucHVzaChyZXNwb25zZS5kYXRhKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmZsYWdJbmRpY2F0aW5nRGF0YUhhc0JlZW5Mb2FkZWRJblZhcmlhYmxlcyA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMudGltZXN0YW1wKCkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICovDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYodGhpcy5pc19zdXBlcnVzZXIgfHwgdGhpcy5pc19zeXN0ZW1hZG1pbil7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnZW50cmEnKQ0KICAgICAgICAgICAgICAgICAgICBnZXRBbGxFbnRlcnByaXNlcygpDQogICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyRW1wcmVzYXMgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJQYXJjZWxzID0gW10NCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEubWFwKGVudGVycHJpc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGVycHJpc2UucGFyY2Vscy5mZWF0dXJlcy5tYXAocGFyY2VsID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyUGFyY2Vscy5wdXNoKHBhcmNlbCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMgPSBhcnJQYXJjZWxzDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzRmlsdGVyID0gYXJyUGFyY2Vscw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFnSW5kaWNhdGluZ0RhdGFIYXNCZWVuTG9hZGVkSW5WYXJpYWJsZXMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEhpc3RvcmljbygpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfWVsc2UgaWYoKHRoaXMuaXNfZW50ZXJwcmlzZWFkbWluIHx8IHRoaXMuaXNfc3RhZmYpICYmICF0aGlzLmlzX2Nvb3BfdXNlcil7IA0KICAgICAgICAgICAgICAgICAgICBnZXRFbnRlcnByaXNlKHVzZXIuZW50ZXJwcmlzZV9pZCkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgcmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnJFbXByZXNhcyA9IFtyZXNwb25zZS5kYXRhXQ0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyUGFyY2VscyA9IFtdDQogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnBhcmNlbHMuZmVhdHVyZXMubWFwKHBhcmNlbCA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyUGFyY2Vscy5wdXNoKHBhcmNlbCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHNPZkVudGVycHJpc2VzID0gYXJyUGFyY2Vscw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxQYXJjZWxzT2ZFbnRlcnByaXNlc0ZpbHRlciA9IGFyclBhcmNlbHMNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhZ0luZGljYXRpbmdEYXRhSGFzQmVlbkxvYWRlZEluVmFyaWFibGVzID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRIaXN0b3JpY28oKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMuaXNfY29vcF91c2VyKXsNCiAgICAgICAgICAgICAgICAgICAgZ2V0Q29vcGVyYXRpdmUodXNlci5lbnRlcnByaXNlX2lkKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFyckNvb3BlcmF0aXZhcyA9IFtyZXNwb25zZS5kYXRhXQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmFyckVtcHJlc2FzID0gcmVzcG9uc2UuZGF0YS5lbnRlcnByaXNlcw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFnSW5kaWNhdGluZ0RhdGFIYXNCZWVuTG9hZGVkSW5WYXJpYWJsZXMgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEhpc3RvcmljbygpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYodGhpcy5pc19zdXBlcnVzZXIgfHwgdGhpcy5pc19zeXN0ZW1hZG1pbil7DQogICAgICAgICAgICAgICAgICAgIGdldEFsbENvb3BlcmF0aXZlcygpDQogICAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXJyQ29vcGVyYXRpdmFzID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgdGhpcy5pc1Zpc2libGVMb2FkID0gZmFsc2UNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgfQ0KfTsNCg=="},{"version":3,"sources":["GraficosController.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsVA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GraficosController.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"bx--grid\">\r\n        <cv-tabs :container=\"false\" aria-label=\"navigation tab label\">\r\n            <!--\r\n            <cv-tab :label=\"$t('graficos.grafico_tipo_uno')\">\r\n                <br>\r\n                <br>\r\n                <GraficoT1Controller\r\n                    v-if=\"flagIndicatingDataHasBeenLoadedInVariables\"\r\n                    :arr-enterprises=\"arrEmpresas\"\r\n                    :arr-cooperativas=\"arrCooperativas\"\r\n                    :is_superuser=\"is_superuser\"\r\n                    :is_systemadmin=\"is_systemadmin\"\r\n                    :is_staff=\"is_staff\"\r\n                    :is_enterpriseadmin=\"is_enterpriseadmin\"\r\n                    :is_coop_user=\"is_coop_user\"\r\n                    :all-parcels-of-enterprises=\"allParcelsOfEnterprises\"\r\n                    :all-parcels-of-enterprises-filter=\"allParcelsOfEnterprisesFilter\"\r\n\r\n                    v-on:setCenter=\"center = $event\"  \r\n                    v-on:setToggleMostrarTexto=\"checkedToggleMostarTexto = $event\"\r\n                    v-on:setEnterprise=\"arrEmpresas = $event\"\r\n                    v-on:setSentinelLayer=\"SentinelLayer = $event\"\r\n                    v-on:setSentinelOpacity=\"opacitylayer = $event\"\r\n                    v-on:setFechaSentinel=\"time = $event\"\r\n                    v-on:setAllParcelsOfEnterprises=\"allParcelsOfEnterprises = $event, allParcelsOfEnterprisesFilter = $event\"\r\n                />\r\n            </cv-tab>\r\n            <cv-tab :label=\"$t('graficos.grafico_tipo_dos')\">\r\n                <br>\r\n                <br>\r\n                <GraficoT2Controller\r\n                    v-if=\"flagIndicatingDataHasBeenLoadedInVariables\"\r\n                    :arr-enterprises=\"arrEmpresas\"\r\n                    :arr-cooperativas=\"arrCooperativas\"\r\n                    :is_superuser=\"is_superuser\"\r\n                    :is_systemadmin=\"is_systemadmin\"\r\n                    :is_staff=\"is_staff\"\r\n                    :is_enterpriseadmin=\"is_enterpriseadmin\"\r\n                    :is_coop_user=\"is_coop_user\"\r\n                    \r\n                    :all-parcels-of-enterprises=\"allParcelsOfEnterprises\"\r\n                    :all-parcels-of-enterprises-filter=\"allParcelsOfEnterprisesFilter\"\r\n                    v-on:setEnterprise=\"arrEmpresas = $event\"\r\n                    v-on:setAllParcelsOfEnterprises=\"allParcelsOfEnterprises = $event, allParcelsOfEnterprisesFilter = $event\"\r\n                />\r\n            </cv-tab>\r\n            -->\r\n            <cv-tab :label=\"$t('graficos.grafico_ant')\" >\r\n                <br>\r\n                <br>\r\n                <div class=\"bx--grid\" v-if=\"flagIndicatingDataHasBeenLoadedInVariables\">\r\n                    <div class=\"bx--row\">\r\n                        <div class=\"bx--col\">\r\n                            <h3>{{$t(\"graficos.grafico_ant\")}}</h3>\r\n                        </div>\r\n                    </div>\r\n                    <br>\r\n                    <div class=\"bx--row\">\r\n                        <div class=\"bx--col\">\r\n                            <GraficosAnterioresController \r\n                                v-if=\"flagIndicatingDataHasBeenLoadedInVariables && is_superuser || is_systemadmin || is_coop_user\"\r\n                                :arr-enterprises=\"arrEmpresas\"\r\n                                :arr-cooperativas=\"arrCooperativas\"\r\n                                :is_superuser=\"is_superuser\"\r\n                                :is_systemadmin=\"is_systemadmin\"\r\n                                :is_staff=\"is_staff\"\r\n                                :is_enterpriseadmin=\"is_enterpriseadmin\"\r\n                                :is_coop_user=\"is_coop_user\"\r\n                                :all-parcels-of-enterprises=\"allParcelsOfEnterprises\"\r\n                                :all-parcels-of-enterprises-filter=\"allParcelsOfEnterprisesFilter\"\r\n\r\n                                v-on:setEnterprise=\"arrEmpresas = $event\"\r\n                                v-on:setAllParcelsOfEnterprises=\"allParcelsOfEnterprises = $event, allParcelsOfEnterprisesFilter = $event\"\r\n                                v-on:setEmpresaSeleccionadaObj =\"empresaSeleccionadaObj = $event\"\r\n                                v-on:setGetGraficosAnteriores =\"getInformesAnteriores($event)\"\r\n                                v-on:setCooperativaSeleccionadaObj =\"cooperativaSeleccionadaObj = $event\"\r\n                                v-on:setGetGraficosAnterioresCoop =\"getInformesAnterioresCoop($event)\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <br>\r\n                    \r\n                    <div class=\"bx--row\" v-if=\"Object.keys(cooperativaSeleccionadaObj).length == 0\">\r\n                        <div class=\"bx--col\">\r\n                            <div id=\"sentinelLayersList\">\r\n                                <h4>{{$t(\"graficos.inform_ant_de\")}} {{empresaSeleccionadaObj.name}}</h4>\r\n                                <cv-data-table\r\n                                    @sort=\"onSort\"\r\n                                    @row-select-changes=\"agruparCompatible\"\r\n                                    :pagination=\"{ numberOfItems: historicoAnterior.length, pageSizes: [10, 15, 20, 25, historicoAnterior.length] }\" @pagination=\"actionOnPagination\"\r\n                                    :columns=\"[\r\n                                        this.$t('graficos.parcela'),\r\n                                        this.$t('graficos.rango_fechas_sel'),\r\n                                        {\r\n                                            'label': this.$t('graficos.creado'),\r\n                                            'sortable': true\r\n                                        },\r\n                                        {\r\n                                            'label': this.$t('graficos.tipo'),\r\n                                            'sortable': true\r\n                                        },\r\n                                        {\r\n                                            'label': this.$t('graficos.capa'),\r\n                                            'sortable': true\r\n                                        },\r\n                                        {\r\n                                            key: '',\r\n                                            label: ''\r\n                                        },\r\n                                    ]\"\r\n                                    ref=\"tableHist\" :key=\"componentTableHist\"\r\n                                >\r\n                                    <template v-if=\"true\" slot=\"batch-actions\" >\r\n                                        <cv-button @click=\"showModificarInformes\" v-if=\"showUnificar\">\r\n                                            {{$t(\"graficos.unificar_informes\")}}\r\n                                            <AppConnectivity32 class=\"bx--btn__icon\"/>\r\n                                        </cv-button>\r\n                                        <cv-button @click=\"showEditarInforme\" v-if=\"showEditar\">\r\n                                            {{$t(\"graficos.editar\")}}\r\n                                            <Edit32 class=\"bx--btn__icon\" />\r\n                                        </cv-button>\r\n                                        <cv-button @click=\"verDatos\">\r\n                                            {{$t(\"graficos.ver_datos\")}}\r\n                                            <Charbar20 class=\"bx--btn__icon\"/>\r\n                                        </cv-button>\r\n                                        <cv-button @click=\"descargaExcel\" v-if=\"true\">\r\n                                            {{$t(\"graficos.desc_excel\")}}\r\n                                            <Download16 class=\"bx--btn__icon\"/>\r\n                                        </cv-button>\r\n                                        <cv-button @click=\"delInforme\">\r\n                                            {{$t(\"graficos.del_informe\")}}\r\n                                            <TrashCan32 class=\"bx--btn__icon\" />\r\n                                        </cv-button>\r\n                                    </template>\r\n                                    <template slot=\"data\">\r\n                                        <cv-data-table-row  v-for=\"historico in historicoAnterior.slice(start, start+length)\" @click=\"verDatos\" :value=\"String(historico.id)\" :key=\"String(historico.id)\">\r\n                                            <cv-data-table-cell v-if=\"historico.tipo == 1 && !historico.alias\">\r\n                                                {{parcelaName(historico.parcela)}} - {{historico.alias}}\r\n                                            </cv-data-table-cell>\r\n                                            <cv-data-table-cell v-else-if=\"historico.tipo == 1 && historico.alias\">\r\n                                                {{historico.alias}}\r\n                                            </cv-data-table-cell>\r\n                                            <cv-data-table-cell v-else>\r\n                                                {{historico.parcela}}\r\n                                            </cv-data-table-cell>\r\n                                            <cv-data-table-cell>\r\n                                                {{historico.finifin}}\r\n                                            </cv-data-table-cell>\r\n                                            <cv-data-table-cell>\r\n                                                {{dateFormat(historico.created)}}\r\n                                            </cv-data-table-cell>\r\n                                            <cv-data-table-cell>\r\n                                                {{$t(\"graficos.grafico_tipo\")}} {{historico.tipo}}\r\n                                            </cv-data-table-cell>\r\n                                            <cv-data-table-cell>\r\n                                                {{historico.capa}}\r\n                                            </cv-data-table-cell>\r\n                                        </cv-data-table-row>\r\n                                    </template>\r\n                                </cv-data-table>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"bx--row\" v-if=\"Object.keys(cooperativaSeleccionadaObj).length != 0\">\r\n                        <div class=\"bx--col\" >\r\n                            <h4>Gficos Anteriores de la Cooperativa {{cooperativaSeleccionadaObj.name}}</h4>\r\n                            <cv-data-table\r\n                                @sort=\"onSort\"\r\n                                @row-select-changes=\"agruparCompatible\"\r\n                                :pagination=\"{ numberOfItems: historicoAnteriorCoop.length, pageSizes: [10, 15, 20, 25, historicoAnteriorCoop.length] }\" @pagination=\"actionOnPagination2\"\r\n                                :columns=\"[\r\n                                    this.$t('graficos.parcela'),\r\n                                    this.$t('graficos.rango_fechas_sel'), \r\n                                    {\r\n                                        'label': this.$t('graficos.creado'),\r\n                                        'sortable': true\r\n                                    },\r\n                                    {\r\n                                        'label': this.$t('graficos.tipo'),\r\n                                        'sortable': true\r\n                                    },\r\n                                    {\r\n                                        'label': this.$t('graficos.capa'),\r\n                                        'sortable': true\r\n                                    },\r\n                                    {\r\n                                        key: '',\r\n                                        label: ''\r\n                                    },\r\n                                ]\"  ref=\"tableHist2\" :key=\"componentTableHist2\">\r\n                                <template v-if=\"true\" slot=\"batch-actions\" >\r\n                                    <cv-button @click=\"verDatos2\">\r\n                                        {{$t(\"graficos.ver_datos\")}}\r\n                                        <Charbar20 class=\"bx--btn__icon\"/>\r\n                                    </cv-button>\r\n                                    <cv-button @click=\"descargaExcel2\" v-if=\"true\">\r\n                                        {{$t(\"graficos.desc_excel\")}}\r\n                                        <Download16 class=\"bx--btn__icon\"/>\r\n                                    </cv-button>\r\n                                    <cv-button @click=\"delInforme2\">\r\n                                        {{$t(\"graficos.del_informe\")}}\r\n                                        <TrashCan32 class=\"bx--btn__icon\" />\r\n                                    </cv-button>\r\n                                </template>\r\n                                <template slot=\"data\">\r\n                                    <cv-data-table-row  v-for=\"historico in historicoAnteriorCoop.slice(start2, start2+length2)\" @click=\"verDatos\" :value=\"String(historico.id)\" :key=\"String(historico.id)\">\r\n                                        <cv-data-table-cell v-if=\"historico.tipo == 1 && !historico.alias\">\r\n                                            {{parcelaName(historico.parcela)}}\r\n                                        </cv-data-table-cell>\r\n                                        <cv-data-table-cell v-else-if=\"historico.tipo == 1 && historico.alias\">\r\n                                            {{historico.alias}}\r\n                                        </cv-data-table-cell>\r\n                                        <cv-data-table-cell v-else>\r\n                                            {{historico.parcela}}\r\n                                        </cv-data-table-cell>\r\n                                        <cv-data-table-cell>\r\n                                            {{historico.finifin}}\r\n                                        </cv-data-table-cell>\r\n                                        <cv-data-table-cell>\r\n                                            {{dateFormat(historico.created)}}\r\n                                        </cv-data-table-cell>\r\n                                        <cv-data-table-cell>\r\n                                            {{$t(\"graficos.grafico_tipo\")}} {{historico.tipo}}\r\n                                        </cv-data-table-cell>\r\n                                        <cv-data-table-cell>\r\n                                            {{historico.capa}}\r\n                                        </cv-data-table-cell>\r\n                                        <cv-data-table-cell>\r\n                                            <cv-overflow-menu flip-menu style=\"margin: 0 auto;\">\r\n                                                <cv-overflow-menu-item @click=\"verDatosRow2(String(historico.id))\">{{$t(\"graficos.ver_datos\")}}</cv-overflow-menu-item>\r\n                                                <cv-overflow-menu-item @click=\"descargaExcelRow2(String(historico.id))\">{{$t(\"graficos.desc_excel\")}}</cv-overflow-menu-item>\r\n                                                <cv-overflow-menu-item @click=\"delInformeRow2(String(historico.id))\">{{$t(\"graficos.del_informe\")}}</cv-overflow-menu-item>\r\n                                            </cv-overflow-menu>\r\n                                        </cv-data-table-cell>\r\n                                    </cv-data-table-row>\r\n                                </template>\r\n                            </cv-data-table>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"bx--row\">\r\n                        <div class=\"bx--col-sm-12 bx--col-md-12 bx--col-lg-12\">\r\n                            <br>\r\n                            <ChartLine :datos=\"dataSent\" :key=\"keyComponent\" v-if=\"verGraficNDVI\"/>\r\n                            <ChartLineMois :datos=\"dataSent\" :key=\"keyComponent\" v-if=\"verGraficMois\"/>\r\n                            <br>\r\n                            <ChartRadar :bbox=\"bbox\" :sentinelLay=\"SentinelLayer\" v-if=\"false\" :rangeTime=\"time\" :key=\"keyComponent\"/>\r\n                            <br>\r\n                            <ChartBar :datos=\"dataSent\" :key=\"keyComponent\" v-if=\"verGraficNDVI\"/>\r\n                            <ChartBarMois :datos=\"dataSent\" :key=\"keyComponent\" v-if=\"verGraficMois\"/>\r\n                            <br>\r\n                            <br>\r\n                            <TableColors :urlMedia=\"$apiURLMedia\" :datos=\"dataSent\" :key=\"keyComponent\" v-if=\"verGraficNDVI\"/>\r\n                            <TableColorsMois :urlMedia=\"$apiURLMedia\" :datos=\"dataSent\" :key=\"keyComponent\" v-if=\"verGraficMois\"/>\r\n                            <br>\r\n                            <SentImage :urlMedia=\"$apiURLMedia\" :datos=\"dataSent\" :key=\"keyComponent\" v-if=\"verImagenSent\"/>\r\n                            <br>\r\n                        </div>\r\n                    </div>\r\n                    <cv-modal @modal-shown=\"actionShown\" @modal-hidden=\"actionHidden\" ref=\"modal_procesando\">\r\n                    <template slot=\"label\">{{this.$t('graficos.gen_iformes')}}</template>\r\n                    <template slot=\"title\">{{this.$t('graficos.grafico_tipo_uno')}}</template>\r\n                    <template slot=\"content\"\r\n                        ><p>\r\n                            {{this.$t('graficos.grafico_procensandose')}}\r\n                        </p></template\r\n                        >\r\n                        <template slot=\"primary-button\">{{this.$t('graficos.gen_informes_acceptar')}}</template>\r\n                    </cv-modal>\r\n                    <AlertaGeneral ref=\"alertaGenerall\" :tituloAlert.sync=\"mensajeAlerta\" :tipoAlert.sync=\"tipoAlerta\" />\r\n                    <UnificarInformes ref=\"unificarInformes\"\r\n                    :informes-sell.sync=\"informesSell\"\r\n                    :informes-seleccionados.sync=\"informesSell\" \r\n                    :historico.sync=\"historicoAnterior\" \r\n                    :tipo=\"tipoInforUni\" \r\n                    :capa=\"capaInforUni\" \r\n                    :enterpriseID.sync=\"empresaSeleccionadaObj.id\"\r\n                    :all-parcels-of-enterprises=\"allParcelsOfEnterprises\"\r\n\r\n\r\n                    v-on:mensajeAlerta=\"mensajeAlerta = $event\"\r\n                    v-on:tipoAlerta=\"tipoAlerta = $event\"\r\n                    v-on:verAlerta=\"$refs.alertaGenerall.verAlerta()\"\r\n                    v-on:getInformesAnt=\"getInformesAnteriores(empresaSeleccionadaObj.id)\"\r\n                    \r\n                    />\r\n                    <EditarInforme ref=\"editarInforme\" \r\n                    :informesSeleccionados.sync=\"informeSell\" \r\n                    :historico.sync=\"historicoAnterior\"\r\n                    :all-parcels-of-enterprises.sync=\"allParcelsOfEnterprises\"\r\n\r\n                    v-on:mensajeAlerta=\"mensajeAlerta = $event\"\r\n                    v-on:tipoAlerta=\"tipoAlerta = $event\"\r\n                    v-on:verAlerta=\"$refs.alertaGenerall.verAlerta()\"\r\n                    \r\n                    v-on:getInformesAnt=\"getInformesAnteriores(empresaSeleccionadaObj.id)\"\r\n                    />\r\n                    <cv-modal\r\n                    ref=\"alerta_eliminar\"\r\n                    kind=\"danger\"\r\n                    @primary-click=\"eliminarUsuario\">\r\n                        <template slot=\"label\">{{$t(\"graficos.seguro\")}}</template>\r\n                        <template slot=\"title\">{{$t(\"graficos.eliminar\")}}</template>\r\n                        <template slot=\"content\">\r\n                        <p>{{$t(\"graficos.seguro_parcel_del\")}}</p>\r\n                        </template>\r\n                        <template slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n                        <template slot=\"primary-button\">{{$t(\"graficos.eliminar\")}}</template>\r\n                    </cv-modal>\r\n                    <cv-modal\r\n                    ref=\"alerta_eliminar2\"\r\n                    kind=\"danger\"\r\n                    @primary-click=\"eliminarUsuario2\">\r\n                        <template slot=\"label\">{{$t(\"graficos.seguro\")}}</template>\r\n                        <template slot=\"title\">{{$t(\"graficos.eliminar\")}}</template>\r\n                        <template slot=\"content\">\r\n                        <p>{{$t(\"graficos.seguro_parcel_del\")}}</p>\r\n                        </template>\r\n                        <template slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n                        <template slot=\"primary-button\">{{$t(\"graficos.eliminar\")}}</template>\r\n                    </cv-modal>\r\n                    <cv-modal\r\n                    ref=\"alerta_eliminar3\"\r\n                    kind=\"danger\"\r\n                    @primary-click=\"eliminarUsuario3\">\r\n                        <template slot=\"label\">{{$t(\"graficos.seguro\")}}</template>\r\n                        <template slot=\"title\">{{$t(\"graficos.eliminar\")}}</template>\r\n                        <template slot=\"content\">\r\n                        <p>{{$t(\"graficos.seguro_parcel_del\")}}</p>\r\n                        </template>\r\n                        <template slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n                        <template slot=\"primary-button\">{{$t(\"graficos.eliminar\")}}</template>\r\n                    </cv-modal>\r\n                    \r\n                </div>\r\n                \r\n            </cv-tab>\r\n        </cv-tabs>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n//import ChartComponent from '@/components/ChartComponentNDVIv2.vue'\r\nimport {getProfile, getPermisos} from '@/auth/index'\r\nimport {getAllEnterprises, getEnterprise} from '@/crudFunctions/crudEnterprise'//getEnterprise\r\nimport {getAllCooperatives, getCooperative} from '@/crudFunctions/crudCooperativas'\r\n//import GraficoT1Controller from '@/components/GraficosTipo/GraficoT1Controller.vue'\r\n//import GraficoT2Controller from '@/components/GraficosTipo/GraficoT2Controller.vue'\r\nimport GraficosAnterioresController from '@/components/GraficosTipo/GraficosAnterioresController.vue'\r\n\r\nimport axios from 'axios'\r\n\r\nimport AlertaGeneral from \"@/components/AlertaGeneral\";\r\nimport UnificarInformes from \"@/components/UnificarInforme.vue\";\r\nimport EditarInforme from \"@/components/EditarInforme.vue\";\r\nimport ChartLine from '@/components/charts/chartLine.vue'\r\nimport ChartLineMois from '@/components/charts/chartLineMois.vue'\r\nimport SentImage from '@/components/charts/imageSent.vue'\r\nimport ChartBar from '@/components/charts/chartBar.vue'\r\nimport ChartBarMois from '@/components/charts/chartBarMois.vue'\r\nimport TableColors from '@/components/charts/tableColors.vue'\r\nimport TableColorsMois from '@/components/charts/tableColorsMois.vue'\r\nexport default {\r\n    name: \"GraficosController\",\r\n    components: {\r\n        //GraficoT1Controller,\r\n        //GraficoT2Controller,\r\n        GraficosAnterioresController,\r\n        ChartLine,\r\n        SentImage,\r\n        ChartBar,\r\n        TableColors,\r\n        AlertaGeneral,\r\n        ChartLineMois,\r\n        ChartBarMois,\r\n        TableColorsMois,\r\n        UnificarInformes,\r\n        EditarInforme\r\n    },\r\n    data(){\r\n        return {\r\n            flagIndicatingDataHasBeenLoadedInVariables: false,\r\n            //Usuario\r\n            is_superuser: false,\r\n            is_staff: false,\r\n            is_systemadmin: false,\r\n            is_enterpriseadmin: false,\r\n            is_coop_user: false,\r\n            //Empresas sel\r\n            arrEmpresas: [],\r\n            arrCooperativas: [],\r\n            allParcelsOfEnterprises: [],\r\n            allParcelsOfEnterprisesFilter: [],\r\n            //Graficos\r\n\r\n            start: 0,\r\n            length: 10,\r\n            start2: 0,\r\n            length2: 10,\r\n            listadoEmpresas: this.arrEnterprises,\r\n            historicoAnterior: Array(),\r\n            historicoAnteriorCoop: Array(),\r\n            columnsHistorico: [\r\n                this.$t('graficos.parcela'),\r\n                this.$t('graficos.rango_fechas_sel'), \r\n                {\r\n                    'label': this.$t('graficos.creado'),\r\n                    'sortable': true\r\n                },\r\n                {\r\n                    'label': this.$t('graficos.tipo'),\r\n                    'sortable': true\r\n                },\r\n                {\r\n                    'label': this.$t('graficos.capa'),\r\n                    'sortable': true\r\n                },\r\n                {\r\n                    key: \"\",\r\n                    label: \"\"\r\n                },\r\n            ],\r\n            showUnificar: false,\r\n            showEditar: false,\r\n            verGraficNDVI: false,\r\n            verGraficMois: false,\r\n            verImagenSent: false,\r\n            informesSell: Array(),\r\n            informeSell: Array(),\r\n            capaInforUni: ``,\r\n            tipoInforUni: ``,\r\n            componentTableHist: 0,\r\n            empresaSeleccionadaID: '',\r\n            empresaSeleccionadaObj: Object(),\r\n            cooperativaSeleccionadaObj: Object(),\r\n            column: 'created',\r\n            orden: 'descending',\r\n            keyComponent: 0,\r\n            mensajeAlerta: ``,\r\n            tipoAlerta: `error`\r\n        }\r\n    },\r\n    methods: {\r\n        actionOnPagination(ev){\r\n            this.start = ev.start-1\r\n            this.length = ev.length\r\n        },\r\n        actionOnPagination2(ev){\r\n            this.start2 = ev.start-1\r\n            this.length2 = ev.length\r\n        },\r\n        dateFormat(date){\r\n            const dts = date.split('T')\r\n            return dts[0]\r\n        },\r\n        showEditarInforme(){\r\n            console.info(this.editarInforme)\r\n            this.$refs.editarInforme.openModal()\r\n        },\r\n        verDatosRow(row){\r\n            this.$refs.tableHist.selectedRows.forEach(()=>{\r\n                this.$refs.tableHist.selectedRows.pop()\r\n            })\r\n            this.$refs.tableHist.selectedRows.push(row)\r\n            this.verDatos()\r\n        },\r\n        verDatos(){\r\n            if(this.$refs.tableHist.selectedRows.length != 1){\r\n                this.mensajeAlerta = this.$t('graficos.select_one_informe')\r\n                this.tipoAlerta = 'error'\r\n                this.$refs.alertaGenerall.verAlerta()\r\n                return false\r\n            }\r\n            const rowSeleccionado = this.$refs.tableHist.selectedRows;\r\n            let path = `${this.$apiURL}/ver_hist/${rowSeleccionado}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                if(response.data.capa == 'NDVI'){\r\n                    this.verGraficNDVI = true\r\n                    this.verGraficMois = false\r\n                }else{\r\n                    this.verGraficNDVI = false\r\n                    this.verGraficMois = true\r\n                }\r\n                path = `${this.$apiURLMedia}/${response.data.imagen}/`\r\n                axios\r\n                .get(path)\r\n                .then(response => {\r\n                    this.dataSent = response.data\r\n                    this.verImagenSent = true\r\n                    this.keyComponent +=1\r\n                })\r\n            })\r\n            .catch(error =>{\r\n                console.warn(error)\r\n            })\r\n            \r\n        },\r\n        verDatosRow2(row){\r\n            this.$refs.tableHist2.selectedRows.forEach(()=>{\r\n                this.$refs.tableHist2.selectedRows.pop()\r\n            })\r\n            this.$refs.tableHist2.selectedRows.push(row)\r\n            this.verDatos2()\r\n        },\r\n        verDatos2(){\r\n            if(this.$refs.tableHist2.selectedRows.length != 1){\r\n                this.mensajeAlerta = this.$t('graficos.select_one_informe')\r\n                this.tipoAlerta = 'error'\r\n                this.$refs.alertaGenerall.verAlerta()\r\n                return false\r\n            }\r\n            const rowSeleccionado = this.$refs.tableHist2.selectedRows;\r\n            let path = `${this.$apiURL}/ver_hist/${rowSeleccionado}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                if(response.data.capa == 'NDVI'){\r\n                    this.verGraficNDVI = true\r\n                    this.verGraficMois = false\r\n                }else{\r\n                    this.verGraficNDVI = false\r\n                    this.verGraficMois = true\r\n                }\r\n                path = `${this.$apiURLMedia}/${response.data.imagen}/`\r\n                axios\r\n                .get(path)\r\n                .then(response => {\r\n                    this.dataSent = response.data\r\n                    this.verImagenSent = true\r\n                    this.keyComponent +=1\r\n                })\r\n            })\r\n            .catch(error =>{\r\n                console.warn(error)\r\n            })\r\n            \r\n        },\r\n        descargaExcelRow(row){\r\n            this.$refs.tableHist.selectedRows.forEach(()=>{\r\n                this.$refs.tableHist.selectedRows.pop()\r\n            })\r\n            this.$refs.tableHist.selectedRows.push(row)\r\n            this.descargaExcel()\r\n        },\r\n        descargaExcel(){\r\n            if(this.$refs.tableHist.selectedRows.length != 1){\r\n                this.mensajeAlerta = this.$t('graficos.select_one_informe')\r\n                this.tipoAlerta = 'error'\r\n                this.$refs.alertaGenerall.verAlerta()\r\n                return false\r\n            }\r\n            const rowSeleccionado = this.$refs.tableHist.selectedRows;\r\n            const parcelaSelect = this.historicoAnterior.filter((parcela)=>{\r\n                return parcela.id == rowSeleccionado\r\n            })\r\n            let parcelaname = ``\r\n            if(parcelaSelect[0].alias){\r\n                parcelaname = parcelaSelect[0].alias\r\n            }else{\r\n                parcelaname = (parcelaSelect[0].tipo == 1) ? this.parcelaName(parcelaSelect[0].parcela) : parcelaSelect[0].parcela\r\n            }\r\n            \r\n\r\n            window.URL = window.URL || window.webkitURL;\r\n            var xhr = new XMLHttpRequest(),\r\n                a = document.createElement('a'), file;\r\n            xhr.open('GET', `${this.$apiURLMedia}/${parcelaSelect[0].xlsxFile}`, true);\r\n            xhr.responseType = 'blob';\r\n            xhr.onload = function () {\r\n                file = new Blob([xhr.response], { type : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n                a.href = window.URL.createObjectURL(file);\r\n                a.download = `${parcelaname}.xlsx`;  // Set to whatever file name you want\r\n                a.click();\r\n            };\r\n            xhr.send();\r\n        },\r\n        descargaExcelRow2(row){\r\n            this.$refs.tableHist2.selectedRows.forEach(()=>{\r\n                this.$refs.tableHist2.selectedRows.pop()\r\n            })\r\n            this.$refs.tableHist2.selectedRows.push(row)\r\n            this.descargaExcel2()\r\n        },\r\n        descargaExcel2(){\r\n            if(this.$refs.tableHist2.selectedRows.length != 1){\r\n                this.mensajeAlerta = this.$t('graficos.select_one_informe')\r\n                this.tipoAlerta = 'error'\r\n                this.$refs.alertaGenerall.verAlerta()\r\n                return false\r\n            }\r\n            const rowSeleccionado = this.$refs.tableHist2.selectedRows;\r\n            const parcelaSelect = this.historicoAnteriorCoop.filter((parcela)=>{\r\n                return parcela.id == rowSeleccionado\r\n            })\r\n            let parcelaname = ``\r\n            if(parcelaSelect[0].alias){\r\n                parcelaname = parcelaSelect[0].alias\r\n            }else{\r\n                parcelaname = (parcelaSelect[0].tipo == 1) ? this.parcelaName(parcelaSelect[0].parcela) : parcelaSelect[0].parcela\r\n            }\r\n            \r\n\r\n            window.URL = window.URL || window.webkitURL;\r\n            var xhr = new XMLHttpRequest(),\r\n                a = document.createElement('a'), file;\r\n            xhr.open('GET', `${this.$apiURLMedia}/${parcelaSelect[0].xlsxFile}`, true);\r\n            xhr.responseType = 'blob';\r\n            xhr.onload = function () {\r\n                file = new Blob([xhr.response], { type : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n                a.href = window.URL.createObjectURL(file);\r\n                a.download = `${parcelaname}.xlsx`;  // Set to whatever file name you want\r\n                a.click();\r\n            };\r\n            xhr.send();\r\n        },\r\n        parcelaName(id){\r\n            const parcelaSelect = this.allParcelsOfEnterprises.filter((parcela)=>{\r\n                return parcela.id == id\r\n            })            \r\n            if(parcelaSelect.length > 0){\r\n                return parcelaSelect[0].properties.name\r\n            }else{\r\n                return 'Grfico Generado de Parcela Eliminada'\r\n            }\r\n        },\r\n        seleccionaEmpresa(empresa){\r\n            const arrParcels = []\r\n            if(empresa == 'all'){\r\n                getAllEnterprises()\r\n                    .then(async response => {\r\n                        response.data.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        this.arrEmpresas = response.data\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.empresaSeleccionadaObj = response.data[0]\r\n                        this.getInformesAnteriores(response.data[0].id)\r\n                    })\r\n            }else{\r\n                const result = empresa.split('_')\r\n                if(result[0] == 'coop'){\r\n                    getCooperative(result[1])\r\n                    .then(response => {\r\n                        response.data.enterprises.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        this.arrEmpresas = response.data\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.empresaSeleccionadaObj = response.data.enterprises[0]\r\n                        this.getInformesAnteriores(response.data.enterprises[0].id)\r\n                        this.cooperativaSeleccionadaObj = response.data\r\n                        this.getInformesAnterioresCoop(response.data.id)\r\n                    })\r\n                }else{\r\n                    getEnterprise(empresa)\r\n                    .then(async response => {\r\n                        response.data.parcels.features.map(parcel => {\r\n                            arrParcels.push(parcel)\r\n                        })\r\n                        this.arrEmpresas = response.data\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.empresaSeleccionadaObj = response.data\r\n                        this.getInformesAnteriores(response.data.id)\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        delInformeRow(row){\r\n            this.$refs.tableHist.selectedRows.forEach(()=>{\r\n                this.$refs.tableHist.selectedRows.pop()\r\n            })\r\n            this.$refs.tableHist.selectedRows.push(row)\r\n            this.delInforme()\r\n        },\r\n        delInforme(){\r\n            this.$refs.alerta_eliminar.dataVisible = true\r\n        },\r\n        delInformeRow2(row){\r\n            this.$refs.tableHist2.selectedRows.forEach(()=>{\r\n                this.$refs.tableHist2.selectedRows.pop()\r\n            })\r\n            this.$refs.tableHist2.selectedRows.push(row)\r\n            this.delInforme2()\r\n        },\r\n        delInformeRow3(row){\r\n            this.$refs.tableHist2.selectedRows.forEach(()=>{\r\n                this.$refs.tableHist2.selectedRows.pop()\r\n            })\r\n            this.$refs.tableHist2.selectedRows.push(row)\r\n            this.delInforme3()\r\n        },\r\n        delInforme2(){\r\n            this.$refs.alerta_eliminar2.dataVisible = true\r\n        },\r\n        delInforme3(){\r\n            this.$refs.alerta_eliminar3.dataVisible = true\r\n        },\r\n        eliminarUsuario(){\r\n            const rowSeleccionado = this.$refs.tableHist.selectedRows\r\n            let flag = false\r\n            rowSeleccionado.forEach(element => {\r\n                console.log(element)\r\n                const path = `${this.$apiURL}/ver_hist/${element}/`\r\n                axios\r\n                .delete(path)\r\n                .then(() => {\r\n                    this.getInformesAnteriores(this.empresaSeleccionadaObj.id);\r\n                    this.componentTableHist +=1\r\n                    this.mensajeAlerta = this.$t('graficos.del_informe_ok')\r\n                    this.tipoAlerta = 'success'\r\n                    this.$refs.alertaGenerall.verAlerta()\r\n                })\r\n                .catch(() =>{\r\n                    this.getInformesAnteriores(this.empresaSeleccionadaObj.id);\r\n                    this.mensajeAlerta = this.$t('graficos.del_informe_error')\r\n                    this.tipoAlerta = 'error'\r\n                    this.$refs.alertaGenerall.verAlerta()\r\n                });\r\n            });\r\n            if(flag){\r\n                console.error('error')\r\n                this.mensajeAlerta = this.$t('graficos.del_informe_error')\r\n                this.$refs.alerta.verAlerta()\r\n            }else{\r\n                this.$refs.alerta_eliminar.hide()\r\n            }\r\n        },\r\n        eliminarUsuario2(){\r\n            const rowSeleccionado = this.$refs.tableHist2.selectedRows\r\n            let flag = false\r\n            rowSeleccionado.forEach(element => {\r\n                console.log(element)\r\n                const path = `${this.$apiURL}/ver_hist/${element}/`\r\n                axios\r\n                .delete(path)\r\n                .then(() => {\r\n                    this.getInformesAnterioresCoop();\r\n                    this.componentTableHist +=1\r\n                    this.mensajeAlerta = this.$t('graficos.del_informe_ok')\r\n                    this.tipoAlerta = 'success'\r\n                    this.$refs.alertaGenerall.verAlerta()\r\n                })\r\n                .catch(() =>{\r\n                    this.getInformesAnterioresCoop();\r\n                    this.mensajeAlerta = this.$t('graficos.del_informe_error')\r\n                    this.tipoAlerta = 'error'\r\n                    this.$refs.alertaGenerall.verAlerta()\r\n                });\r\n            });\r\n            if(flag){\r\n                console.error('error')\r\n                this.mensajeAlerta = this.$t('graficos.del_informe_error')\r\n                this.$refs.alerta.verAlerta()\r\n            }else{\r\n                this.$refs.alerta_eliminar.hide()\r\n            }\r\n        },\r\n        eliminarUsuario3(){\r\n            const rowSeleccionado = this.$refs.tableHist2.selectedRows\r\n            let flag = false\r\n            rowSeleccionado.forEach(element => {\r\n                console.log(element)\r\n                const path = `${this.$apiURL}/ver_hist/${element}/`\r\n                axios\r\n                .delete(path)\r\n                .then(() => {\r\n                    this.getInformesAnterioresCoopADM(this.cooperativeSelectObj.id);\r\n                    this.componentTableHist +=1\r\n                    this.mensajeAlerta = this.$t('graficos.del_informe_ok')\r\n                    this.tipoAlerta = 'success'\r\n                    this.$refs.alertaGenerall.verAlerta()\r\n                })\r\n                .catch(() =>{\r\n                    this.getInformesAnterioresCoopADM(this.cooperativeSelectObj.id);\r\n                    this.mensajeAlerta = this.$t('graficos.del_informe_error')\r\n                    this.tipoAlerta = 'error'\r\n                    this.$refs.alertaGenerall.verAlerta()\r\n                });\r\n            });\r\n            if(flag){\r\n                console.error('error')\r\n                this.mensajeAlerta = this.$t('graficos.del_informe_error')\r\n                this.$refs.alerta.verAlerta()\r\n            }else{\r\n                this.$refs.alerta_eliminar.hide()\r\n            }\r\n        },\r\n        showModificarInformes(){\r\n            this.$refs.unificarInformes.openModal()\r\n        },\r\n        agruparCompatible(arrSel){\r\n            let capaAnt = ``\r\n            let tipoAnt = ``\r\n            let parcelaAnt = ``\r\n            let flag = true\r\n            var BreakException = {};\r\n            let arrParcelsSel = Array()\r\n            let arrParcelFilter = Array()\r\n            try{\r\n                if(arrSel.length > 1){\r\n                    arrSel.forEach(element => {\r\n                        arrParcelFilter = this.historicoAnterior.filter(informe => {\r\n                            if(informe.id == element){\r\n                                if(!capaAnt){\r\n                                    capaAnt = informe.capa\r\n                                }else{\r\n                                    if(capaAnt != informe.capa){\r\n                                        flag = false\r\n                                        throw BreakException\r\n                                    }\r\n                                }\r\n                                if(!tipoAnt){\r\n                                    tipoAnt = informe.tipo\r\n                                    parcelaAnt = informe.parcela\r\n                                }else{\r\n                                    if(parseInt(tipoAnt) != parseInt(informe.tipo)){\r\n                                        flag = false\r\n                                        throw BreakException\r\n                                    }else if(parseInt(tipoAnt) == 1 && parcelaAnt != informe.parcela){\r\n                                        flag = false\r\n                                        throw BreakException\r\n                                    }\r\n                                }\r\n                                return informe\r\n                            }\r\n                        })\r\n                        arrParcelsSel.push(arrParcelFilter[0])\r\n                    })\r\n                }else{\r\n                    flag = false\r\n                    throw BreakException\r\n                }\r\n                \r\n            } catch (e){\r\n                if(!flag){\r\n                    this.showUnificar = false\r\n                    if(arrSel.length == 1){\r\n                        this.showEditar = true\r\n                        this.informeSell = arrSel\r\n                    }else{\r\n                        this.showEditar = false\r\n                    }\r\n                    throw e\r\n                }\r\n            }\r\n            this.informesSell = arrParcelsSel\r\n            this.capaInforUni = capaAnt\r\n            this.tipoInforUni = tipoAnt\r\n            this.showUnificar = true\r\n        },\r\n        getHistorico(){\r\n            if(this.arrEmpresas.length){\r\n                this.empresaSeleccionadaObj = this.arrEmpresas[0]\r\n                this.getInformesAnteriores(this.arrEmpresas[0].id)\r\n            }\r\n            if(this.arrCooperativas.length){\r\n                this.cooperativaSeleccionadaObj = this.arrCooperativas[0]\r\n                this.getInformesAnterioresCoop(this.arrCooperativas[0].id)\r\n            }\r\n        },\r\n        getInformesAnteriores(enterprise_id){\r\n            let path = `${this.$apiURL}/procesado/?enterprise_id=${enterprise_id}&colum_name=${this.column}&order=${this.orden}`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                console.info('informes de la empresa:', this.empresaSeleccionadaObj.name)\r\n                console.info(response.data)\r\n                this.historicoAnterior = response.data\r\n            })\r\n            .catch(error =>{\r\n                console.warn(error)\r\n            })\r\n        },\r\n        getInformesAnterioresCoop(coop){\r\n            let path = `${this.$apiURL}/procesado/?enterprise_id=${coop}&colum_name=${this.column}&order=${this.orden}`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                console.info('informes de la Cooperativa:', this.cooperativaSeleccionadaObj.name)\r\n                console.info(response.data)\r\n                this.historicoAnteriorCoop = response.data\r\n            })\r\n            .catch(error =>{\r\n                console.warn(error)\r\n            })\r\n        },\r\n    },\r\n    beforeMount(){\r\n        //this.getHistorico()\r\n    },\r\n    mounted: function () {\r\n        //console.info('User Logged')\r\n    },\r\n    beforeCreate(){\r\n        getProfile()\r\n        .then(response => {\r\n            const user = response.data[0]\r\n            getPermisos(response.data[0].user)\r\n            .then(response => {\r\n                this.is_superuser = response.data.is_superuser\r\n                this.is_staff = response.data.is_staff\r\n                this.is_systemadmin = response.data.is_systemadmin\r\n                this.is_enterpriseadmin = response.data.is_enterpriseadmin\r\n                this.is_coop_user = user.cooperative_user\r\n                /*\r\n                //*Obtenemos la empresa del usuario\r\n                const enterprise_id = user.enterprise_id\r\n                getEnterprise(enterprise_id)\r\n                .then(async response => {\r\n                    this.parcelas = response.data.parcels\r\n                    await this.arrEmpresas.push(response.data)\r\n                    this.flagIndicatingDataHasBeenLoadedInVariables = false\r\n                    this.timestamp()\r\n                })\r\n                */\r\n                \r\n                if(this.is_superuser || this.is_systemadmin){\r\n                    console.info('entra')\r\n                    getAllEnterprises()\r\n                    .then(async response => {\r\n                        this.arrEmpresas = response.data\r\n                        const arrParcels = []\r\n                        response.data.map(enterprise => {\r\n                            enterprise.parcels.features.map(parcel => {\r\n                                arrParcels.push(parcel)\r\n                            })\r\n                        })\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.allParcelsOfEnterprisesFilter = arrParcels\r\n                        this.flagIndicatingDataHasBeenLoadedInVariables = true\r\n                        this.getHistorico()\r\n                    })\r\n                }else if((this.is_enterpriseadmin || this.is_staff) && !this.is_coop_user){ \r\n                    getEnterprise(user.enterprise_id)\r\n                    .then(async response => {\r\n                        this.arrEmpresas = [response.data]\r\n                        const arrParcels = []\r\n                        response.data.parcels.features.map(parcel => {\r\n                            arrParcels.push(parcel)\r\n                        })\r\n                        this.allParcelsOfEnterprises = arrParcels\r\n                        this.allParcelsOfEnterprisesFilter = arrParcels\r\n                        this.flagIndicatingDataHasBeenLoadedInVariables = true\r\n                        this.getHistorico()\r\n                    })\r\n                }else if(this.is_coop_user){\r\n                    getCooperative(user.enterprise_id)\r\n                    .then(response => {\r\n                        this.arrCooperativas = [response.data]\r\n                        //this.arrEmpresas = response.data.enterprises\r\n                        this.flagIndicatingDataHasBeenLoadedInVariables = true\r\n                        this.getHistorico()\r\n                    })\r\n                }\r\n\r\n                if(this.is_superuser || this.is_systemadmin){\r\n                    getAllCooperatives()\r\n                    .then(async response => {\r\n                        this.arrCooperativas = response.data\r\n                    })\r\n                }\r\n                this.isActiveLoading = false\r\n                this.isVisibleLoad = false\r\n            })\r\n        })\r\n    }\r\n};\r\n</script>"]}]}