{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\NewCooperative.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\NewCooperative.vue","mtime":1709553265781},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681731147886},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1681731156386},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681731147886},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1681731148945}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJOZXdDb29wZXJhdGl2ZSIsDQogICAgcHJvcHM6IHt9LA0KICAgIGNvbXBvbmVudHM6IHt9LA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBhdXRvSGlkZU9mZjogdHJ1ZSwNCiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlTm9tYnJlOiBgYCwNCiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlRGlyZWN0aW9uOiBgYCwNCiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlUGhvbmU6IGBgLA0KICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2VDaWY6IGBgLA0KICAgICAgICAgICAgZW50ZXJwcmlzZXM6IEFycmF5KCksDQogICAgICAgICAgICBzdGFydDogMCwNCiAgICAgICAgICAgIGxlbmd0aDogMTAsDQogICAgICAgICAgICBtZW5zYWplQWxlcnRhOiBgYCwNCiAgICAgICAgICAgIHRpcG9BbGVydGE6IGBgLA0KICAgICAgICAgICAgcGFyZW50OiBPYmplY3QNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBjZXJyYXJNb2RhbE51ZXZhQ29vcCgpew0KICAgICAgICAgICAgY29uc3QgdGl0dWxvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2FyaWEtbGFiZWw9Ik51ZXZhIENvb3BlcmF0aXZhIl0nKTsNCiAgICAgICAgICAgIC8vIGNvbnN0IGhlYWRlcl9lbnRlcm8gPSB0aXR1bG8ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50Ow0KICAgICAgICAgICAgLy8gYWxlcnQodGl0dWxvLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3RbMF0pDQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhoZWFkZXJfZW50ZXJvKQ0KICAgICAgICAgICAgdGl0dWxvWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFjYWJvIGRlIGVudHJhciIpOw0KICAgICAgICAgICAgICAgIHRoaXMuYXV0b0hpZGVPZmYgPSBmYWxzZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGl0dWxvWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgLy8gYWxlcnQoIkFjYWJvIGRlIHNhbGlyIik7DQogICAgICAgICAgICAgICAgdGhpcy5hdXRvSGlkZU9mZiA9IHRydWU7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgb3Blbk1vZGFsKCkgew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5uZXdDb29wZXJhdGl2ZUZvcm0uc2hvdygpDQogICAgICAgICAgICB0aGlzLnBhcmVudCA9IHRoaXMuJHJlZnMubmV3Q29vcGVyYXRpdmVGb3JtLiRwYXJlbnQuJHBhcmVudA0KICAgICAgICAgICAgdGhpcy5vYnRlbmVyRW1wcmVzYXMoKQ0KICAgICAgICB9LA0KICAgICAgICBvYnRlbmVyRW1wcmVzYXMoKXsNCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLiRhcGlVUkx9L2VudGVycHJpc2VzL2A7DQogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiK3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpDQogICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgLmdldChwYXRoKQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuZW50ZXJwcmlzZXMgPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PnsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oZXJyb3IpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBhY3Rpb25PblBhZ2luYXRpb24oZXYpew0KICAgICAgICAgICAgdGhpcy5zdGFydCA9IGV2LnN0YXJ0LTENCiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gZXYubGVuZ3RoDQogICAgICAgIH0sDQogICAgICAgIGFjdGlvblByaW1hcnkoKXsNCiAgICAgICAgICAgIGNvbnN0IHJvd1NlbGVjY2lvbmFkb3MgPSB0aGlzLiRyZWZzLnRhYmxlRW1wcmVzYXMuc2VsZWN0ZWRSb3dzDQogICAgICAgICAgICBpZihyb3dTZWxlY2Npb25hZG9zLmxlbmd0aCA9PSAwKXsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxldCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9jb29wZXJhdGl2ZXNzL2A7DQogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiK3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpDQogICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgLnBvc3QocGF0aCwgew0KICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuJHJlZnMuaW5wdXROYW1lQ29vcC4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHRoaXMuJHJlZnMuaW5wdXREaXJlY3Rpb25Db29wLiRyZWZzLmlucHV0LnZhbHVlLA0KICAgICAgICAgICAgICAgIHBob25lX251bWJlcjogdGhpcy4kcmVmcy5pbnB1dFBob25lQ29vcC4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICBjaWY6IHRoaXMuJHJlZnMuaW5wdXRDaWZDb29wLiRyZWZzLmlucHV0LnZhbHVlLA0KICAgICAgICAgICAgICAgIGlkX2VtcHJlc2FzOiByb3dTZWxlY2Npb25hZG9zLA0KICAgICAgICAgICAgICAgIC8vZW50ZXJwcmlzZXM6IHJvd1NlbGVjY2lvbmFkb3MNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ25ld0Nvb3AuY3JlYXRlX2Nvb3Bfc3VjY2VzcycpDQogICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQudGlwb0FsZXJ0YSA9ICdzdWNjZXNzJw0KICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LiRyZWZzLmFsZXJ0YUdlbmVyYWwudmVyQWxlcnRhKCkNCiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5vYnRlbmVyQ29vcGVyYXRpdmFzKCkNCiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLm5ld0Nvb3BlcmF0aXZlRm9ybS5oaWRlKCkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGlmKGVycm9yLnJlc3BvbnNlLmRhdGEubmFtZVswXS5pbmNsdWRlcygnbm90IGJlIGJsYW5rJykpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRNZXNzYWdlTm9tYnJlID0gYCR7dGhpcy4kdCgnbmV3Q29vcC5pbnZhbGlkb19ibGFuaycpfWANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCl7DQogICAgfSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLmNlcnJhck1vZGFsTnVldmFDb29wKCk7DQogICAgfSwNCn0NCg=="},{"version":3,"sources":["NewCooperative.vue"],"names":[],"mappings":";AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewCooperative.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <cv-modal\r\n        @primary-click=\"actionPrimary\"\r\n        ref=\"newCooperativeForm\"\r\n        :auto-hide-off='autoHideOff'\r\n    >\r\n        <template v-if=\"true\" slot=\"label\"><div @mouseenter=\"cerrarModalNuevaCoop\">{{$t(\"newCoop.nueva\")}}</div></template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t(\"newCoop.nueva\")}}</template>\r\n        <template v-if=\"true\" slot=\"content\" class=\"formcontent\" ref=\"content_form\">\r\n            <div class=\"bx--row\">\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newCoop.nombre')\"\r\n                        value=\"\"\r\n                        :disabled=\"false\"\r\n                        :type=\"`text`\"\r\n                        :placeholder=\"$t('newCoop.nombrePlace')\"\r\n                        :invalid-message=\"invalidMessageNombre\"\r\n                        ref=\"inputNameCoop\"\r\n                    ></cv-text-input>\r\n                </div>\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newCoop.direction')\"\r\n                        value=\"\"\r\n                        :disabled=\"false\"\r\n                        :type=\"`text`\"\r\n                        :placeholder=\"$t('newCoop.directionPlace')\"\r\n                        :invalid-message=\"invalidMessageDirection\"\r\n                        ref=\"inputDirectionCoop\"\r\n                    ></cv-text-input>\r\n                </div>\r\n            </div>\r\n            <div class=\"bx--row\">\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newCoop.phone')\"\r\n                        value=\"\"\r\n                        :disabled=\"false\"\r\n                        :type=\"`text`\"\r\n                        :placeholder=\"$t('newCoop.phonePlace')\"\r\n                        :invalid-message=\"invalidMessagePhone\"\r\n                        ref=\"inputPhoneCoop\"\r\n                    ></cv-text-input>\r\n                </div>\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newCoop.cif')\"\r\n                        value=\"\"\r\n                        :disabled=\"false\"\r\n                        :type=\"`text`\"\r\n                        :placeholder=\"$t('newCoop.cifPlace')\"\r\n                        :invalid-message=\"invalidMessageCif\"\r\n                        ref=\"inputCifCoop\"\r\n                    ></cv-text-input>\r\n                </div>\r\n            </div>\r\n            <div class=\"bx--row\">\r\n                <div class=\"bx--col-lg-12 bx--col-md-12 bx--col-sm-12\">\r\n                    <cv-data-table\r\n                        :sortable=\"false\"\r\n                        :columns=\"[\r\n                            {\r\n                                key: 'name',\r\n                                label: this.$t('adminEnterprise.nombre')\r\n                            },\r\n                            {\r\n                                key: 'cif',\r\n                                label: this.$t('adminEnterprise.cif')\r\n                            },\r\n                        ]\"\r\n                        :title=\"$t('adminEnterprise.listado_empresas')\"\r\n                        ref=\"tableEmpresas\"\r\n                        :pagination=\"{ numberOfItems: enterprises.length, pageSizes: [10, 15, 20, 25, enterprises.length] }\" @pagination=\"actionOnPagination\"\r\n                    >\r\n                        <template v-if=\"true\" slot=\"batch-actions\">\r\n                            <cv-button>\r\n                                {{''}}\r\n                            </cv-button>\r\n                        </template>\r\n\r\n                        <template slot=\"data\">\r\n                            <cv-data-table-row\r\n                                v-for=\"enterprise in enterprises.slice(start, start+length)\"\r\n                                :key=\"`${enterprise.id}`\"\r\n                                :value=\"`${enterprise.id}`\"\r\n                            >\r\n                                <cv-data-table-cell>{{enterprise.name}}</cv-data-table-cell>\r\n                                <cv-data-table-cell>{{enterprise.cif}}</cv-data-table-cell>\r\n                            </cv-data-table-row>\r\n                        </template>\r\n                    </cv-data-table>\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t(\"newEnterprise.guardar\")}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"NewCooperative\",\r\n    props: {},\r\n    components: {},\r\n    data() {\r\n        return {\r\n            autoHideOff: true,\r\n            invalidMessageNombre: ``,\r\n            invalidMessageDirection: ``,\r\n            invalidMessagePhone: ``,\r\n            invalidMessageCif: ``,\r\n            enterprises: Array(),\r\n            start: 0,\r\n            length: 10,\r\n            mensajeAlerta: ``,\r\n            tipoAlerta: ``,\r\n            parent: Object\r\n        }\r\n    },\r\n    methods: {\r\n        cerrarModalNuevaCoop(){\r\n            const titulo = document.querySelectorAll('[aria-label=\"Nueva Cooperativa\"]');\r\n            // const header_entero = titulo.parentElement.parentElement;\r\n            // alert(titulo.parentElement.parentElement.classList[0])\r\n            // console.log(header_entero)\r\n            titulo[0].addEventListener('mouseenter', () => {\r\n                console.log(\"Acabo de entrar\");\r\n                this.autoHideOff = false;\r\n            });\r\n            titulo[0].addEventListener('mouseleave', () => {\r\n                // alert(\"Acabo de salir\");\r\n                this.autoHideOff = true;\r\n            });\r\n        },\r\n        openModal() {\r\n            this.$refs.newCooperativeForm.show()\r\n            this.parent = this.$refs.newCooperativeForm.$parent.$parent\r\n            this.obtenerEmpresas()\r\n        },\r\n        obtenerEmpresas(){\r\n            const path = `${this.$apiURL}/enterprises/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.enterprises = response.data\r\n            }).catch(error =>{\r\n                console.info(error)\r\n            })\r\n        },\r\n        actionOnPagination(ev){\r\n            this.start = ev.start-1\r\n            this.length = ev.length\r\n        },\r\n        actionPrimary(){\r\n            const rowSeleccionados = this.$refs.tableEmpresas.selectedRows\r\n            if(rowSeleccionados.length == 0){\r\n                return false\r\n            }\r\n            let path = `${this.$apiURL}/cooperativess/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .post(path, {\r\n                name: this.$refs.inputNameCoop.$refs.input.value,\r\n                direction: this.$refs.inputDirectionCoop.$refs.input.value,\r\n                phone_number: this.$refs.inputPhoneCoop.$refs.input.value,\r\n                cif: this.$refs.inputCifCoop.$refs.input.value,\r\n                id_empresas: rowSeleccionados,\r\n                //enterprises: rowSeleccionados\r\n            })\r\n            .then(() => {\r\n                this.parent.mensajeAlerta = this.$t('newCoop.create_coop_success')\r\n                this.parent.tipoAlerta = 'success'\r\n                this.parent.$refs.alertaGeneral.verAlerta()\r\n                this.parent.obtenerCooperativas()\r\n                this.$refs.newCooperativeForm.hide()\r\n            })\r\n            .catch(error => {\r\n                if(error.response.data.name[0].includes('not be blank')){\r\n                    this.invalidMessageNombre = `${this.$t('newCoop.invalido_blank')}`\r\n                }\r\n            })\r\n        }\r\n    },\r\n    created(){\r\n    },\r\n    mounted() {\r\n        this.cerrarModalNuevaCoop();\r\n    },\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>"]}]}