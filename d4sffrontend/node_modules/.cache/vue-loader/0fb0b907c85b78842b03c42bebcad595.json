{"remainingRequest":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\PruebaFront\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\PruebaFront\\src\\components\\UnificarInforme.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\PruebaFront\\src\\components\\UnificarInforme.vue","mtime":1671529917998},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\PruebaFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\PruebaFront\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\PruebaFront\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\PruebaFront\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJVbmlmaWNhckluZm9ybWUiLA0KICAgIHByb3BzOiB7DQogICAgICAgIGluZm9ybWVzU2VsbDogW10sDQogICAgICAgIGluZm9ybWVzU2VsZWNjaW9uYWRvczogQXJyYXkoKSwNCiAgICAgICAgaGlzdG9yaWNvOiBBcnJheSgpLA0KICAgICAgICB0aXBvOiBTdHJpbmcoKSwNCiAgICAgICAgY2FwYTogU3RyaW5nKCksDQogICAgICAgIGVudGVycHJpc2VJRDogU3RyaW5nKCksDQogICAgICAgIGFsbFBhcmNlbHNPZkVudGVycHJpc2VzOiBBcnJheSgpDQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgdGl0bGVfY2FyZDogdGhpcy4kdCgnZ3JhZmljb3MudW5pZmljYXJfaW5mb3JtZXMnKSwNCiAgICAgICAgICAgIHRleHRfaW5wdXRfbGFiZWw6IHRoaXMuJHQoJ2dyYWZpY29zLm5vbWJyZScpLA0KICAgICAgICAgICAgbGFiZWxfY2hlY2s6IHRoaXMuJHQoJ2dyYWZpY29zLmVsaW1pbmFyX2luZm9ybWVfb3JpZ2luJyksDQogICAgICAgICAgICBjb2x1bW5zSGlzdG9yaWNvOiBbDQogICAgICAgICAgICAgICAgdGhpcy4kdCgnZ3JhZmljb3MucGFyY2VsYXMnKSwNCiAgICAgICAgICAgICAgICB0aGlzLiR0KCdncmFmaWNvcy5yYW5nb19mZWNoYXNfc2VsJyksDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiB0aGlzLiR0KCdncmFmaWNvcy5jcmVhZG8nKSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIG5vbWJyZUluZm9ybWVOZXc6ICcnLA0KICAgICAgICAgICAgY2hlY2tEZWxsSW5mb3JtZTogZmFsc2UsDQogICAgICAgICAgICBhbGlhczogYGANCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBwYXJjZWxhTmFtZShpZCl7DQogICAgICAgICAgICBjb25zdCBwYXJjZWxhU2VsZWN0ID0gdGhpcy5hbGxQYXJjZWxzT2ZFbnRlcnByaXNlcy5maWx0ZXIoKHBhcmNlbGEpPT57DQogICAgICAgICAgICAgICAgcmV0dXJuIHBhcmNlbGEuaWQgPT0gaWQNCiAgICAgICAgICAgIH0pICAgICAgICAgICAgDQogICAgICAgICAgICBpZihwYXJjZWxhU2VsZWN0Lmxlbmd0aCA+IDApew0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJjZWxhU2VsZWN0WzBdLnByb3BlcnRpZXMubmFtZQ0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgcmV0dXJuICdHcsOhZmljbyBHZW5lcmFkbyBkZSBQYXJjZWxhIEVsaW1pbmFkYScNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZGF0ZUZvcm1hdChkYXRlKXsNCiAgICAgICAgICAgIGNvbnN0IGR0cyA9IGRhdGUuc3BsaXQoJ1QnKQ0KICAgICAgICAgICAgcmV0dXJuIGR0c1swXQ0KICAgICAgICB9LA0KICAgICAgICBvcGVuTW9kYWwoKXsNCiAgICAgICAgICAgIGlmKHBhcnNlSW50KHRoaXMudGlwbykgPT0gMSl7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJjZWxhID0gdGhpcy5pbmZvcm1lc1NlbGVjY2lvbmFkb3NbMF0ucGFyY2VsYQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy51bmlmaWNhckluZm9ybWVGb3JtLnNob3coKQ0KICAgICAgICB9LA0KICAgICAgICB1bmlmaWNhSW5mb3JtZXMoKXsNCiAgICAgICAgICAgIGlmKHBhcnNlSW50KHRoaXMudGlwbykgPT0gMil7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJjZWxhID0gdGhpcy5ub21icmVJbmZvcm1lTmV3DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS91bmlmaWNhckluZm9ybWUvYA0KICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5wb3N0KHBhdGgsIHsNCiAgICAgICAgICAgICAgICBwYXJjZWxhOiB0aGlzLnBhcmNlbGEsDQogICAgICAgICAgICAgICAgdXJsU2VudGluZWw6IFsncHJ1ZWJhcyddLCAvL2FyciB1cmwNCiAgICAgICAgICAgICAgICAvL2ZlY2hhczogZmVjaGFzU2VudGluZWwsIC8vQXJyIHBhcmNlbGFzDQogICAgICAgICAgICAgICAgcG9seWdvbjogW3RoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zXSwNCiAgICAgICAgICAgICAgICBlbnRlcnByaXNlX2lkOiB0aGlzLmVudGVycHJpc2VJRCwNCiAgICAgICAgICAgICAgICBjYXBhOiB0aGlzLmNhcGEsDQogICAgICAgICAgICAgICAgdGlwbzogdGhpcy50aXBvLA0KICAgICAgICAgICAgICAgIC8vZmVjaGFFbGVnaWRhOiB0aGlzLmZlY2hhR2VuZXJhcg0KICAgICAgICAgICAgICAgIGNoZWNrRGVsbE90cm9zOiB0aGlzLmNoZWNrRGVsbEluZm9ybWUsDQogICAgICAgICAgICAgICAgYWxpYXM6IHRoaXMubm9tYnJlSW5mb3JtZU5ldw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8ocmVzcG9uc2UpDQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50Lm1lbnNhamVBbGVydGEgPSB0aGlzLiR0KCdncmFmaWNvcy5pbmZvcm1lX2dlbl9vaycpDQogICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LnRpcG9BbGVydGEgPSAnc3VjY2VzcycNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdtZW5zYWplQWxlcnRhJywgdGhpcy4kdCgnZ3JhZmljb3MuaW5mb3JtZV9nZW5fb2snKSkNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd0aXBvQWxlcnRhJywgYHN1Y2Nlc3NgKQ0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3ZlckFsZXJ0YScpDQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ2V0SW5mb3JtZXNBbnQnKQ0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudW5pZmljYXJJbmZvcm1lRm9ybS5oaWRlKCkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PnsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["UnificarInforme.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UnificarInforme.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <cv-modal\r\n        :auto-hide-off=\"false\"\r\n        ref=\"unificarInformeForm\"\r\n        @primary-click=\"unificaInformes\"\r\n        @secondary-click=\"$refs.unificarInformeForm.hide()\"\r\n        :close-aria-label=\"`Close`\"\r\n    >\r\n        <template v-if=\"true\" slot=\"label\"></template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t('graficos.unificar_informes')}}</template>\r\n        <template v-if=\"true\" slot=\"content\" id=\"contenido\">\r\n            <div class=\"bx--grid bx--grid--condensed\">\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Nombre de Informe -->\r\n                        <div class=\"bx--form-item\">\r\n                            <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre')}}</label>\r\n                            <input v-model=\"nombreInformeNew\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\" :placeholder=\"$t('graficos.nombre')\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br>\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Resumen de Informes -->\r\n                        <div class=\"bx--form-item\">\r\n                            <cv-checkbox\r\n                                :label=\"label_check\"\r\n                                :checked=\"false\"\r\n                                value=\"true\"\r\n                                :mixed=\"false\"\r\n                                v-model=\"checkDellInforme\"\r\n                            >\r\n                            </cv-checkbox>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <br>\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <h4>{{$t(\"graficos.resumen_unifica\")}}</h4>\r\n                        <p>{{$t(\"graficos.capa\")}} {{capa}}</p>\r\n                        <p>{{$t(\"graficos.tipo\")}} {{tipo}}</p>\r\n                        <cv-data-table\r\n                        :columns=\"[\r\n                this.$t('graficos.parcelas'),\r\n                this.$t('graficos.rango_fechas_sel'),\r\n                {\r\n                    'label': this.$t('graficos.creado'),\r\n                },\r\n            ]\" >\r\n                            <template slot=\"data\">\r\n                                <cv-data-table-row  v-for=\"informe in informesSeleccionados\" :value=\"String(informe.id)\" :key=\"String(informe.id)\">\r\n                                    <cv-data-table-cell v-if=\"informe.tipo == 1\">\r\n                                        {{parcelaName(informe.parcela)}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell v-else>\r\n                                        {{informe.parcela}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell>\r\n                                        {{informe.finifin}}\r\n                                    </cv-data-table-cell>\r\n                                    <cv-data-table-cell>\r\n                                        {{dateFormat(informe.created)}}\r\n                                    </cv-data-table-cell>\r\n                                </cv-data-table-row>\r\n                            </template>\r\n                        </cv-data-table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template v-if=\"true\" slot=\"secondary-button\">{{$t(\"graficos.cancelar\")}}</template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t(\"graficos.unificar\")}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"UnificarInforme\",\r\n    props: {\r\n        informesSell: [],\r\n        informesSeleccionados: Array(),\r\n        historico: Array(),\r\n        tipo: String(),\r\n        capa: String(),\r\n        enterpriseID: String(),\r\n        allParcelsOfEnterprises: Array()\r\n    },\r\n    data() {\r\n        return {\r\n            title_card: this.$t('graficos.unificar_informes'),\r\n            text_input_label: this.$t('graficos.nombre'),\r\n            label_check: this.$t('graficos.eliminar_informe_origin'),\r\n            columnsHistorico: [\r\n                this.$t('graficos.parcelas'),\r\n                this.$t('graficos.rango_fechas_sel'),\r\n                {\r\n                    'label': this.$t('graficos.creado'),\r\n                },\r\n            ],\r\n            nombreInformeNew: '',\r\n            checkDellInforme: false,\r\n            alias: ``\r\n        }\r\n    },\r\n    methods: {\r\n        parcelaName(id){\r\n            const parcelaSelect = this.allParcelsOfEnterprises.filter((parcela)=>{\r\n                return parcela.id == id\r\n            })            \r\n            if(parcelaSelect.length > 0){\r\n                return parcelaSelect[0].properties.name\r\n            }else{\r\n                return 'GrÃ¡fico Generado de Parcela Eliminada'\r\n            }\r\n        },\r\n        dateFormat(date){\r\n            const dts = date.split('T')\r\n            return dts[0]\r\n        },\r\n        openModal(){\r\n            if(parseInt(this.tipo) == 1){\r\n                this.parcela = this.informesSeleccionados[0].parcela\r\n            }\r\n            this.$refs.unificarInformeForm.show()\r\n        },\r\n        unificaInformes(){\r\n            if(parseInt(this.tipo) == 2){\r\n                this.parcela = this.nombreInformeNew\r\n            }\r\n            const path = `${this.$apiURL}/unificarInforme/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .post(path, {\r\n                parcela: this.parcela,\r\n                urlSentinel: ['pruebas'], //arr url\r\n                //fechas: fechasSentinel, //Arr parcelas\r\n                polygon: [this.informesSeleccionados],\r\n                enterprise_id: this.enterpriseID,\r\n                capa: this.capa,\r\n                tipo: this.tipo,\r\n                //fechaElegida: this.fechaGenerar\r\n                checkDellOtros: this.checkDellInforme,\r\n                alias: this.nombreInformeNew\r\n            })\r\n            .then(response => {\r\n                console.info(response)\r\n                this.$parent.mensajeAlerta = this.$t('graficos.informe_gen_ok')\r\n                this.$parent.tipoAlerta = 'success'\r\n                this.$emit('mensajeAlerta', this.$t('graficos.informe_gen_ok'))\r\n                this.$emit('tipoAlerta', `success`)\r\n                this.$emit('verAlerta')\r\n                this.$emit('getInformesAnt')\r\n                this.$refs.unificarInformeForm.hide()\r\n            })\r\n            .catch((error) =>{\r\n                console.warn(error)\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>"]}]}