{"remainingRequest":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\d4sffrontend\\src\\components\\EditarEmpresaComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\d4sffrontend\\src\\components\\EditarEmpresaComponent.vue","mtime":1675253347241},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IEFsZXJ0YUdlbmVyYWwgZnJvbSAiLi4vY29tcG9uZW50cy9BbGVydGFHZW5lcmFsIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJFZGl0YXJFbXByZXNhQ29tcG9uZW50IiwNCiAgICBwcm9wczogew0KICAgICAgICBpZEVtcHJlc2E6IFN0cmluZw0KICAgIH0sDQogICAgY29tcG9uZW50czoge0FsZXJ0YUdlbmVyYWx9LA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBtZXRyaWNzOiBbJ0hhJywgJ0FjcmUnXSwNCiAgICAgICAgICAgIG1ldHJpY1NlbGVjdDogbnVsbCwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICBub21icmVFbXByZXNhOiAnJywNCiAgICAgICAgICAgIGNpZkVtcHJlc2E6ICcnLA0KICAgICAgICAgICAgZGlyZWNjaW9uRW1wcmVzYTogJycsDQogICAgICAgICAgICB0ZWxFbXByZXNhOiAnJywNCiAgICAgICAgICAgIGhlY3RhcmVhc19kaXNwb25pYmxlczogJycsDQogICAgICAgICAgICB0eXBlX21ldHJpYzogJycsDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2VOb21icmU6ICcnLA0KICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2VDaWY6ICcnLA0KICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2VEaXI6ICcnLA0KICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2VUZWxFbXByZXNhOiAnJywNCiAgICAgICAgICAgIG1lbnNhamVBbGVydGE6ICcnLA0KICAgICAgICAgICAgdGlwb0FsZXJ0YTonJywNCiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlSGVjOiAnJywNCiAgICAgICAgICAgIGlkRW1wcmVzYUVkOiAnJywNCiAgICAgICAgICAgIGlucHV0VHlwZUhlYzogdGhpcy4kdCgnbmV3RW50ZXJwcmlzZS50aXBvX01ldHJpY2EnKSwNCiAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGRpc2FibGVkSGVjKCl7DQogICAgICAgICAgICBpZihzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc19zdXBlcnVzZXInKSA9PSAndHJ1ZScgfHwgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNfc3lzdGVtYWRtaW4nKSA9PSAndHJ1ZScpew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgICAgICAgIH0gIA0KICAgICAgICB9LA0KICAgICAgICBzaG93QWxlcnQoKXsNCiAgICAgICAgICAgIHRoaXMubWVuc2FqZUFsZXJ0YSA9IGAke3RoaXMuJHQoJ25ld0VudGVycHJpc2Uuc2F2ZV9lbnRlcnByaXNlJyl9YA0KICAgICAgICAgICAgdGhpcy50aXBvQWxlcnRhID0gJ3N1Y2Nlc3MnDQogICAgICAgICAgICB0aGlzLiRyZWZzLmFsZXJ0YUdlbmVyYWwudmVyQWxlcnRhKCkNCiAgICAgICAgfSwNCiAgICAgICAgZ2V0RGF0b3NFbXByZXNhKGlkRW1wcmVzYSl7DQogICAgICAgICAgICB0aGlzLmlkRW1wcmVzYUVkID0gaWRFbXByZXNhDQogICAgICAgICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9lbnRlcnByaXNlcy8ke2lkRW1wcmVzYX0vYDsNCiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5ub21icmVFbXByZXNhID0gcmVzcG9uc2UuZGF0YS5uYW1lDQogICAgICAgICAgICAgICAgdGhpcy5jaWZFbXByZXNhID0gcmVzcG9uc2UuZGF0YS5jaWYNCiAgICAgICAgICAgICAgICB0aGlzLmRpcmVjY2lvbkVtcHJlc2EgPSByZXNwb25zZS5kYXRhLmRpcmVjdGlvbg0KICAgICAgICAgICAgICAgIHRoaXMudGVsRW1wcmVzYSA9IHJlc3BvbnNlLmRhdGEucGhvbmVfbnVtYmVyDQogICAgICAgICAgICAgICAgdGhpcy5oZWN0YXJlYXNfZGlzcG9uaWJsZXMgPSByZXNwb25zZS5kYXRhLmhlY3RhcmVzX2F2YWlsYWJsZQ0KICAgICAgICAgICAgICAgIHRoaXMubWV0cmljU2VsZWN0ID0gcmVzcG9uc2UuZGF0YS50eXBlX21ldHJpYw0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgZ3VhcmRhckRhdG9zRW1wcmVzYSgpew0KICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vZW50ZXJwcmlzZXMvJHt0aGlzLiRyb3V0ZS5xdWVyeS5lbnRlcnByaXNlfS9gOw0KICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5wdXQocGF0aCwgew0KICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuJHJlZnMubm9tYnJlRW1wcmVzYS4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHRoaXMuJHJlZnMuZGlyZWNjaW9uRW1wcmVzYS4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICBjaWY6IHRoaXMuJHJlZnMuY2lmRW1wcmVzYS4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICBwaG9uZV9udW1iZXI6IHRoaXMuJHJlZnMudGVsRW1wcmVzYS4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICBoZWN0YXJlc19hdmFpbGFibGU6IHRoaXMuJHJlZnMuaGVjdGFyZWFzRGlzcG9uaWJsZXMuJHJlZnMuaW5wdXQudmFsdWUsDQogICAgICAgICAgICAgICAgdHlwZV9tZXRyaWM6IHRoaXMubWV0cmljU2VsZWN0DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KCkNCiAgICAgICAgICAgICAgICB0aGlzLmdldERhdG9zRW1wcmVzYSh0aGlzLmlkRW1wcmVzYUVkKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PnsNCiAgICAgICAgICAgICAgICBjb25zdCBlcnJvcnMgPSBlcnJvci5yZXNwb25zZS5kYXRhDQogICAgICAgICAgICAgICAgaWYoZXJyb3JzLm5hbWUpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZE1lc3NhZ2VOb21icmUgPSBgJHt0aGlzLiR0KCduZXdFbnRlcnByaXNlLmNhbXBvX3JlcXVlcmlkbycpfWANCiAgICAgICAgICAgICAgICBpZihlcnJvcnMuY2lmKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRNZXNzYWdlQ2lmID0gYCR7dGhpcy4kdCgnbmV3RW50ZXJwcmlzZS5jYW1wb19yZXF1ZXJpZG8nKX1gDQogICAgICAgICAgICAgICAgaWYoZXJyb3JzLmRpcmVjdGlvbikNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkTWVzc2FnZURpciA9IGAke3RoaXMuJHQoJ25ld0VudGVycHJpc2UuY2FtcG9fcmVxdWVyaWRvJyl9YA0KICAgICAgICAgICAgICAgIGlmKGVycm9ycy5waG9uZV9udW1iZXIpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZE1lc3NhZ2VUZWxFbXByZXNhID0gYCR7dGhpcy4kdCgnbmV3RW50ZXJwcmlzZS5jYW1wb19yZXF1ZXJpZG8nKX1gDQogICAgICAgICAgICAgICAgaWYoZXJyb3JzLmhlY3RhcmVzX2F2YWlsYWJsZSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkTWVzc2FnZUhlYyA9IGAke3RoaXMuJHQoJ25ld0VudGVycHJpc2UuY2FtcG9fcmVxdWVyaWRvJyl9YA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbW91bnRlZCgpew0KICAgICAgICANCiAgICB9LA0KICAgIGNyZWF0ZWQoKXsNCiAgICAgICAgDQogICAgfQ0KDQp9Ow0K"},{"version":3,"sources":["EditarEmpresaComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA","file":"EditarEmpresaComponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div>\r\n    <cv-form>\r\n            <div class=\"bx--row\">\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newEnterprise.nombre_enterprise')\"\r\n                        placeholder=\"Example Inc.\"\r\n                        :value=\"nombreEmpresa\"\r\n                        class=\"\"\r\n                        ref=\"nombreEmpresa\"\r\n                        :invalid-message=\"invalidMessageNombre\"\r\n                    ></cv-text-input>\r\n                </div>\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newEnterprise.cif_enterprise')\"\r\n                        placeholder=\"B810...\"\r\n                        :value=\"cifEmpresa\"\r\n                        ref=\"cifEmpresa\"\r\n                        :invalid-message=\"invalidMessageCif\"\r\n                        ></cv-text-input>\r\n                </div>\r\n            </div>\r\n            <br>\r\n            <div class=\"bx--row\">\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newEnterprise.direccion_enterprise')\"\r\n                        placeholder=\"Example Ave., Spain\"\r\n                        :value=\"direccionEmpresa\"\r\n                        ref=\"direccionEmpresa\"\r\n                        :invalid-message=\"invalidMessageDir\"\r\n                        ></cv-text-input>\r\n                </div>\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newEnterprise.tel_enterprise')\"\r\n                        placeholder=\"910000000\"\r\n                        :value=\"telEmpresa\"\r\n                        ref=\"telEmpresa\"\r\n                        :invalid-message=\"invalidMessageTelEmpresa\"\r\n                        ></cv-text-input>\r\n                </div>\r\n            </div>\r\n            <br>\r\n            <div class=\"bx--row\">\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-text-input\r\n                        :label=\"$t('newEnterprise.hectareas_disponible')\"\r\n                        placeholder=\"2.374\"\r\n                        :value=\"hectareas_disponibles\"\r\n                        ref=\"hectareasDisponibles\"\r\n                        :invalid-message=\"invalidMessageHec\"\r\n                        :disabled=\"disabledHec()\"\r\n                        ></cv-text-input>\r\n                </div>\r\n                <div class=\"bx--col-lg-6 bx--col-md-6 bx--col-sm-4\">\r\n                \r\n                     <cv-select v-model=\"metricSelect\" \r\n                    :label=\"inputTypeHec\"\r\n                    :hide-label=\"false\"\r\n                    :inline=\"false\"\r\n                    :value=\"metricSelect\"\r\n                    :disabled=\"false\"\r\n                    :helper-text=\"helperText\"\r\n                    :invalid-message=\"invalidMessage\">\r\n\r\n                        <cv-select-option\r\n                            v-for=\"(metri, i) in metrics\"\r\n                            :key=\"`metri-${i}`\"\r\n                            :value=\"metri\"\r\n                        >\r\n                            {{ metri }}\r\n                        </cv-select-option>\r\n                    </cv-select>\r\n                </div>\r\n            </div>\r\n            <br>\r\n            <div class=\"bx--row\">\r\n                <div class=\"bx--col-lg-6 bx--col-md-4 bx--col-sm-2\">\r\n                    <cv-button\r\n                        icon=\"\"\r\n                        @click=\"guardarDatosEmpresa\" >\r\n                        {{$t(\"newEnterprise.guardar\")}}\r\n                    </cv-button>\r\n                </div>\r\n            </div>\r\n            \r\n    </cv-form>\r\n    <AlertaGeneral ref=\"alertaGeneral\" :tituloAlert=\"mensajeAlerta\" :tipoAlert=\"tipoAlerta\" />\r\n</div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport AlertaGeneral from \"../components/AlertaGeneral\";\r\n\r\nexport default {\r\n    name: \"EditarEmpresaComponent\",\r\n    props: {\r\n        idEmpresa: String\r\n    },\r\n    components: {AlertaGeneral},\r\n    data() {\r\n        return {\r\n            metrics: ['Ha', 'Acre'],\r\n            metricSelect: null,\r\n            \r\n            \r\n            nombreEmpresa: '',\r\n            cifEmpresa: '',\r\n            direccionEmpresa: '',\r\n            telEmpresa: '',\r\n            hectareas_disponibles: '',\r\n            type_metric: '',\r\n            //\r\n            invalidMessageNombre: '',\r\n            invalidMessageCif: '',\r\n            invalidMessageDir: '',\r\n            invalidMessageTelEmpresa: '',\r\n            mensajeAlerta: '',\r\n            tipoAlerta:'',\r\n            invalidMessageHec: '',\r\n            idEmpresaEd: '',\r\n            inputTypeHec: this.$t('newEnterprise.tipo_Metrica'),\r\n            \r\n        }\r\n    },\r\n    methods: {\r\n        disabledHec(){\r\n            if(sessionStorage.getItem('is_superuser') == 'true' || sessionStorage.getItem('is_systemadmin') == 'true'){\r\n                return false\r\n            }else{\r\n                return true\r\n            }  \r\n        },\r\n        showAlert(){\r\n            this.mensajeAlerta = `${this.$t('newEnterprise.save_enterprise')}`\r\n            this.tipoAlerta = 'success'\r\n            this.$refs.alertaGeneral.verAlerta()\r\n        },\r\n        getDatosEmpresa(idEmpresa){\r\n            this.idEmpresaEd = idEmpresa\r\n            const path = `${this.$apiURL}/enterprises/${idEmpresa}/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.nombreEmpresa = response.data.name\r\n                this.cifEmpresa = response.data.cif\r\n                this.direccionEmpresa = response.data.direction\r\n                this.telEmpresa = response.data.phone_number\r\n                this.hectareas_disponibles = response.data.hectares_available\r\n                this.metricSelect = response.data.type_metric\r\n            })\r\n        },\r\n        guardarDatosEmpresa(){\r\n            const path = `${this.$apiURL}/enterprises/${this.$route.query.enterprise}/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .put(path, {\r\n                name: this.$refs.nombreEmpresa.$refs.input.value,\r\n                direction: this.$refs.direccionEmpresa.$refs.input.value,\r\n                cif: this.$refs.cifEmpresa.$refs.input.value,\r\n                phone_number: this.$refs.telEmpresa.$refs.input.value,\r\n                hectares_available: this.$refs.hectareasDisponibles.$refs.input.value,\r\n                type_metric: this.metricSelect\r\n            })\r\n            .then(() => {\r\n                this.showAlert()\r\n                this.getDatosEmpresa(this.idEmpresaEd)\r\n            })\r\n            .catch(error =>{\r\n                const errors = error.response.data\r\n                if(errors.name)\r\n                    this.invalidMessageNombre = `${this.$t('newEnterprise.campo_requerido')}`\r\n                if(errors.cif)\r\n                    this.invalidMessageCif = `${this.$t('newEnterprise.campo_requerido')}`\r\n                if(errors.direction)\r\n                    this.invalidMessageDir = `${this.$t('newEnterprise.campo_requerido')}`\r\n                if(errors.phone_number)\r\n                    this.invalidMessageTelEmpresa = `${this.$t('newEnterprise.campo_requerido')}`\r\n                if(errors.hectares_available)\r\n                    this.invalidMessageHec = `${this.$t('newEnterprise.campo_requerido')}`\r\n                \r\n            })\r\n        }\r\n    },\r\n    mounted(){\r\n        \r\n    },\r\n    created(){\r\n        \r\n    }\r\n\r\n};\r\n</script> \r\n<style scoped>\r\n</style>"]}]}