{"remainingRequest":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\src\\components\\EditarParcel2.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\src\\components\\EditarParcel2.vue","mtime":1623912769972},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icamon.SMB\\Desktop\\Parcelas\\dataforsmartfarming\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHByb2o0IGZyb20gJ3Byb2o0Jw0KaW1wb3J0IHsgZ2V0QXJlYSB9IGZyb20gJ29sL3NwaGVyZSc7DQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkVkaXRhclBhcmNlbDIiLA0KICAgIHByb3BzOiB7DQogICAgICAgIHVzZXJTZWxlY2Npb25hZG86IFN0cmluZw0KICAgIH0sDQogICAgZGF0YSAoKSB7DQogICAgICAgIHJldHVybnsNCiAgICAgICAgICAgIGVyb3JDb21wYUdlb2xvYzogJycsDQogICAgICAgICAgICBtb3N0cmFySWNvbkVyckdlb2xvYzogJycsDQogICAgICAgICAgICBtZXRyaWNOYW1lOiAnSGEnLA0KICAgICAgICAgICAgLy9TSUdQQUMgRElSRUNUTw0KICAgICAgICAgICAgdlByb3Y6ICcnLA0KICAgICAgICAgICAgdk11bjogJycsDQogICAgICAgICAgICB2QWdyZTogJycsDQogICAgICAgICAgICB2Wm9uYTogJycsDQogICAgICAgICAgICB2UG9sOiAnJywNCiAgICAgICAgICAgIHZQYXI6ICcnLA0KICAgICAgICAgICAgdlJlYzogJycsDQogICAgICAgICAgICB2ZXJFcnJvckJ1c3E6IGZhbHNlLA0KICAgICAgICAgICAgLy9TSUdQUEFDIENPTkZJR1VSQVRJT04NCiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ29tdW5pZGFkOiB0aGlzLiR0KCdwYXJjZWxhcy5jb211bmlkYWQnKSwNCiAgICAgICAgICAgIGxhYmVsQ29tdW5pZGFkOiB0aGlzLiR0KCdwYXJjZWxhcy5jb211bmlkYWRfc2VsJyksDQogICAgICAgICAgICBjb211bmlkYWRlczogQXJyYXksDQogICAgICAgICAgICANCiAgICAgICAgICAgIHZpc2libGVQcm92OiBmYWxzZSwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyUHJvdjogdGhpcy4kdCgncGFyY2VsYXMucHJvdmluY2lhJyksDQogICAgICAgICAgICBsYWJlbFByb3Y6IHRoaXMuJHQoJ3BhcmNlbGFzLnByb3ZpbmNpYV9zZWwnKSwNCiAgICAgICAgICAgIHByb3ZpbmNpYXM6IEFycmF5LA0KICAgICAgICAgICAgcHJvdmluY2lhU2VsOiAwLA0KDQogICAgICAgICAgICB2aXNpYmxlTXVuOiBmYWxzZSwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyTXVuOiB0aGlzLiR0KCdwYXJjZWxhcy5tdW5pY2lwaW8nKSwNCiAgICAgICAgICAgIGxhYmVsTXVuOiB0aGlzLiR0KCdwYXJjZWxhcy5tdW5pY2lwaW9fc2VsJyksDQogICAgICAgICAgICBtdW5pY2lwaW9zOiBBcnJheSwNCiAgICAgICAgICAgIG11bmljaXBpb1NlbDogMCwNCg0KICAgICAgICAgICAgdmlzaWJsZUFncmU6IGZhbHNlLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJBZ3JlOiB0aGlzLiR0KCdwYXJjZWxhcy5hZ3JlZ2FkbycpLA0KICAgICAgICAgICAgbGFiZWxBZ3JlOiB0aGlzLiR0KCdwYXJjZWxhcy5hZ3JlZ2Fkb19zZWwnKSwNCiAgICAgICAgICAgIGFncmVnYWRvczogQXJyYXksDQogICAgICAgICAgICBhZ3JlZ2Fkb1NlbDogMCwNCg0KICAgICAgICAgICAgdmlzaWJsZVpvbmE6IGZhbHNlLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJab25hOiB0aGlzLiR0KCdwYXJjZWxhcy56b25hJyksDQogICAgICAgICAgICBsYWJlbFpvbmE6IHRoaXMuJHQoJ3BhcmNlbGFzLnpvbmFfc2VsJyksDQogICAgICAgICAgICB6b25hczogQXJyYXksDQogICAgICAgICAgICB6b25hU2VsOiAwLA0KDQogICAgICAgICAgICB2aXNpYmxlUG9sOiBmYWxzZSwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyUG9sOiB0aGlzLiR0KCdwYXJjZWxhcy5wb2xpZ29ubycpLA0KICAgICAgICAgICAgbGFiZWxQb2w6IHRoaXMuJHQoJ3BhcmNlbGFzLnBvbGlnb25vX3NlbCcpLA0KICAgICAgICAgICAgcG9saWdvbm9zOiBBcnJheSwNCiAgICAgICAgICAgIHBvbGlnb25vU2VsOiAwLA0KDQogICAgICAgICAgICB2aXNpYmxlUGFyOiBmYWxzZSwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyUGFyOiB0aGlzLiR0KCdwYXJjZWxhcy5wYXJjZWxhJyksDQogICAgICAgICAgICBsYWJlbFBhcjogdGhpcy4kdCgncGFyY2VsYXMucGFyY2VsYV9zZWwnKSwNCiAgICAgICAgICAgIHBhcmNlbGFzOiBBcnJheSwNCiAgICAgICAgICAgIHBhcmNlbGFTZWw6IDAsDQoNCiAgICAgICAgICAgIHZpc2libGVSZWM6IGZhbHNlLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJSZWM6IHRoaXMuJHQoJ3BhcmNlbGFzLnJlY2ludG8nKSwNCiAgICAgICAgICAgIGxhYmVsUmVjOiB0aGlzLiR0KCdwYXJjZWxhcy5yZWNpbnRvX3NlbCcpLA0KICAgICAgICAgICAgcmVjaW50b3M6IEFycmF5LA0KICAgICAgICAgICAgcmVjaW50b1NlbDogMCwNCg0KICAgICAgICAgICAgLy8NCiAgICAgICAgICAgIHNlbGVjdGVkUGFyY2VsTGlzdDogMCwNCiAgICAgICAgICAgIGNvbG9yUGFyY2VsYTogJ2dyZWVuJywNCiAgICAgICAgICAgIC8vQlROIEdVQVJEQURPDQogICAgICAgICAgICBraW5kU2F2ZTogInByaW1hcnkiLA0KICAgICAgICAgICAgc2l6ZVNhdmU6ICIiLA0KICAgICAgICAgICAgZGlzYWJsZWRTYXZlOiBmYWxzZSwgICAgDQogICAgICAgICAgICBmZWF0dXJlc3M6IFtdLA0KICAgICAgICAgICAgdGl0bGVfY2FyZDogIiIsDQogICAgICAgICAgICBzdWJ0aXRsZV9jYXJkOiAiIiwNCiAgICAgICAgICAgIGNsb3NlQXJpYUxhYmVsOiAiQ2xvc2UiLA0KICAgICAgICAgICAgdXNlX2xhYmVsOiB0cnVlLA0KICAgICAgICAgICAgdXNlX3RpdGxlOiB0cnVlLA0KICAgICAgICAgICAgdXNlX2NvbnRlbnQ6IHRydWUsDQogICAgICAgICAgICBzaXplOiAnbGcnLA0KICAgICAgICAgICAgdXNlX3ByaW1hcnlCdXR0b246IHRydWUsDQogICAgICAgICAgICBwcmltYXJ5QnV0dG9uRGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgICAgICAgYXV0b0hpZGVPZmY6IGZhbHNlLA0KICAgICAgICAgICAgLy9pbnB1dC1uYW1lDQogICAgICAgICAgICBsYWJlbE5hbWU6IHRoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbF9uYW1lJyksDQogICAgICAgICAgICB2YWx1ZU5hbWU6ICcnLA0KICAgICAgICAgICAgZGlzYWJsZWROYW1lOiBmYWxzZSwNCiAgICAgICAgICAgIGlucHV0VHlwZU5hbWU6ICd0ZXh0JywNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyTmFtZTogdGhpcy4kdCgncGFyY2VsYXMucGxhY2VfbmFtZScpLA0KICAgICAgICAgICAgaW52YWxpZE1lc3NhZ2VOYW1lOiAnJywNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy9pbnB1dC1lbWFpbA0KICAgICAgICAgICAgbGFiZWxEZXNjOiB0aGlzLiR0KCdwYXJjZWxhcy5wYXJjZWxfZGVzY3JpcCcpLA0KICAgICAgICAgICAgdmFsdWVEZXNjOiAnJywNCiAgICAgICAgICAgIGRpc2FibGVkRGVzYzogZmFsc2UsDQogICAgICAgICAgICBpbnB1dFR5cGVEZXNjOiAndGV4dCcsDQogICAgICAgICAgICBwbGFjZWhvbGRlckRlc2M6IHRoaXMuJHQoJ3BhcmNlbGFzLnBsYWNlX2Rlc2NyaXAnKSwNCiAgICAgICAgICAgIGludmFsaWRNZXNzYWdlRGVzYzogJycsDQogICAgICAgICAgICAvL0JpbmdNYXAgQ29uZmlnDQogICAgICAgICAgICBhcGlLZXlCaW5nOiB0aGlzLiRhcGlLZXlCaW5nLA0KICAgICAgICAgICAgaW1hZ2VyeVNldEJpbmc6IGBBZXJpYWxXaXRoTGFiZWxzYCwNCiAgICAgICAgICAgIG1heFpvb21CaW5nOiAyMCwNCiAgICAgICAgICAgIHpvb206IDE1LA0KICAgICAgICAgICAgY2VudGVyOiAgWzAgLCAwXSwNCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbMCAsIDBdLA0KICAgICAgICAgICAgY29vcmRlbmFkYXNQYXJjZWw6IFsgWyBbIDAsIDAgXSwgWyAwLCAwIF0sIFsgMCwgMCBdLCBbIDAsIDAgXSwgWyAwLCAwIF0sIFsgMCwgMCBdIF0gXSwNCiAgICAgICAgICAgIHBhcmNlbDogQXJyYXkoKSwNCiAgICAgICAgICAgIGRpYnVqYVBvbGlnb25vOiBmYWxzZSwNCiAgICAgICAgICAgIC8vR1VBUkRBRE8gREUgREFUT1MNCiAgICAgICAgICAgIGFyZWE6IDAsDQogICAgICAgICAgICBwb2xpZ29uT2JqZWN0bzogJycsDQogICAgICAgICAgICB2ZXJFcnJvckRyYXc6IGZhbHNlLA0KICAgICAgICAgICAgY29vcmRpbmF0ZXNQb2xpZ29ubzogW10sDQogICAgICAgICAgICBhbGxGZWF0dXJlczogQXJyYXkoKSwNCiAgICAgICAgICAgIGFsbFBhcmNlbHM6IEFycmF5KCksDQogICAgICAgICAgICByZWZyZXNoRGlidWpvOiAwLA0KICAgICAgICAgICAgTW9kaWZpY2FQb2xpZ29ubzogdHJ1ZSwNCiAgICAgICAgICAgIEVycm9yRHJhdzogJycsDQogICAgICAgICAgICBjb29yZGVuYWRhc1B1bnRvOiBbMCwgMF0sDQogICAgICAgICAgICANCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBtZXRyaWNhcGFyY2VsYShhcmVhKXsNCiAgICAgICAgICAgIGNvbnN0IG9uZWhlY3R0b0FjcmUgPSAyLjQ3MTA1MzgxNDY3MTcNCiAgICAgICAgICAgIGNvbnN0IGFjcmUgPSBvbmVoZWN0dG9BY3JlICogYXJlYQ0KICAgICAgICAgICAgdGhpcy5tZXRyaWMgPSAiQWNyZSINCiAgICAgICAgICAgIHJldHVybiAgYWNyZS50b0ZpeGVkKDIpDQogICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICBjYXJnYUxvY2FsaXphY2lvbkFjdHVhbCgpew0KICAgICAgICAgICAgaWYoISgiZ2VvbG9jYXRpb24iIGluIG5hdmlnYXRvcikpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVyb3JDb21wYUdlb2xvYyA9ICB0aGlzLiR0KCdtYXAubG9jX25vX2Rpc3BvbmlibGUnKQ0KICAgICAgICAgICAgICAgIHRoaXMubW9zdHJhckljb25FcnJHZW9sb2MgPSB0cnVlDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBnZXQgcG9zaXRpb24NCiAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24ocG9zID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ0xvY2FsaXphY2lvbiBhdXRvcml6YWRhJywgcG9zKQ0KICAgICAgICAgICAgICAgIHRoaXMubW9zdHJhckljb25FcnJHZW9sb2MgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlciA9IFtwb3MuY29vcmRzLmxvbmdpdHVkZSwgcG9zLmNvb3Jkcy5sYXRpdHVkZV0NCiAgICAgICAgICAgIH0sIGVyciA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5tb3N0cmFySWNvbkVyckdlb2xvYyA9IHRydWUNCiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ0xvY2FsaXphY2nDs24gbm8gYXV0b3JpemFkYScsIGVycikNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGdldEVudGVycHJpc2UoKXsNCiAgICAgICAgICAgIGlmKHRoaXMuJHJvdXRlLnF1ZXJ5LmVudGVycHJpc2Upew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9lbnRlcnByaXNlcy8ke3RoaXMuJHJvdXRlLnF1ZXJ5LmVudGVycHJpc2V9Lz9zaXplPTEwMDAwMDAwMDAmcGFnZT0xYDsNCiAgICAgICAgICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgICAgICAgICAgICAgLmdldChwYXRoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW50ZXJwcmlzZSA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVudGVycHJpc2UudHlwZV9tZXRyaWMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0cmljID0gdGhpcy5lbnRlcnByaXNlLnR5cGVfbWV0cmljOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uU2hvd25NYXAoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYnVjYXJkb3JTaWdwYWNEaXJlY3QoKXsNCiAgICAgICAgICAgIGNvbnN0IGFyclNlbCA9IFt0aGlzLnZQcm92LCB0aGlzLnZNdW4sIHRoaXMudkFncmUsIHRoaXMudlpvbmEsIHRoaXMudlBvbCwgdGhpcy52UGFyLCB0aGlzLnZSZWNdDQogICAgICAgICAgICBjb25zdCBhcnJVUkkgPSBbJ3Byb3ZpbmNpYWJveCcsICdtdW5pY2lwaW9ib3gnLCAnYWdyZWdhZG9ib3gnLCAnem9uYWJveCcsICdwb2xpZ29ub2JveCcsICdwYXJjZWxhYm94JywgJ3JlY2ludG9ib3gnXQ0KICAgICAgICAgICAgbGV0IGNvbnQgPSAtMQ0KICAgICAgICAgICAgY29uc29sZS5pbmZvKGFyclNlbCkNCiAgICAgICAgICAgIGxldCB1cmlQYXJhbXMgPSBgYA0KICAgICAgICAgICAgYXJyU2VsLm1hcCh2YWx1ZT0+ew0KICAgICAgICAgICAgICAgIGlmKHZhbHVlKXsNCiAgICAgICAgICAgICAgICAgICAgY29udCArKw0KICAgICAgICAgICAgICAgICAgICB1cmlQYXJhbXMgKz0gYC8ke3ZhbHVlfWANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgaWYodXJpUGFyYW1zID09ICcnKQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgICAgY29uc3QgcGF0aCA9IGBodHRwczovL3NpZ3BhYy5tYXBhLmdvYi5lcy9mZWdhL1NlcnZpY2lvc1Zpc29yU2lncGFjL3F1ZXJ5LyR7YXJyVVJJW2NvbnRdK3VyaVBhcmFtc30uZ2VvanNvbmANCiAgICAgICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdOw0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICBjb25zdCBsYXQgPSAocmVzcG9uc2UuZGF0YS5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLngxICsgcmVzcG9uc2UuZGF0YS5mZWF0dXJlc1swXS5wcm9wZXJ0aWVzLngyKSAvIDINCiAgICAgICAgICAgICAgICBjb25zdCBsb25nID0gKHJlc3BvbnNlLmRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy55MSArIHJlc3BvbnNlLmRhdGEuZmVhdHVyZXNbMF0ucHJvcGVydGllcy55MikgLyAyDQogICAgICAgICAgICAgICAgdGhpcy5jb29yZGVuYWRhc1B1bnRvID0gW2xhdCwgbG9uZ10gDQogICAgICAgICAgICAgICAgdGhpcy5jZW50ZXIgPSBbbGF0LCBsb25nXQ0KICAgICAgICAgICAgICAgIHRoaXMuem9vbSA9IDE4DQogICAgICAgICAgICAgICAgdGhpcy52ZXJFcnJvckJ1c3EgPSBmYWxzZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy52ZXJFcnJvckJ1c3EgPSB0cnVlDQogICAgICAgICAgICB9KQ0KDQogICAgICAgIH0sDQogICAgICAgIGNhcmdhckNvbXVuaWRhZGVzKCl7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgaHR0cHM6Ly9zaWdwYWMubWFwYS5lcy9mZWdhL1NlcnZpY2lvc1Zpc29yU2lncGFjL3F1ZXJ5L2NvbXVuaWRhZGVzLmdlb2pzb25gDQogICAgICAgICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXTsNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5jb211bmlkYWRlcyA9IHJlc3BvbnNlLmRhdGEuZmVhdHVyZXMNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvci5yZXNwb25zZSkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGFjdGlvbkNoYW5nZUNvbXVuaWRhZGVzKGNvbXVuaWRhZCl7DQogICAgICAgICAgICBjb25zdCBwYXRoID0gYGh0dHBzOi8vc2lncGFjLm1hcGEuZXMvZmVnYS9TZXJ2aWNpb3NWaXNvclNpZ3BhYy9xdWVyeS9wcm92aW5jaWFzLyR7Y29tdW5pZGFkfS5nZW9qc29uYA0KICAgICAgICAgICAgZGVsZXRlIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl07DQogICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgLmdldChwYXRoKQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXJDb211bmlkYWQgPSBjb211bmlkYWQNCiAgICAgICAgICAgICAgICBjb25zdCBjb211bmlkYWRTZWxlYyA9IGNvbXVuaWRhZA0KICAgICAgICAgICAgICAgIHRoaXMuY29tdW5pZGFkZXMuZm9yRWFjaChjb211bmlkYWQgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZihjb211bmlkYWQucHJvcGVydGllcy5jb2RpZ28gPT0gY29tdW5pZGFkU2VsZWMpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlckNvbXVuaWRhZCA9IGNvbXVuaWRhZC5wcm9wZXJ0aWVzLm5vbWJyZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICB0aGlzLnByb3ZpbmNpYXMgPSByZXNwb25zZS5kYXRhLmZlYXR1cmVzDQogICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlUHJvdiA9IHRydWUNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvci5yZXNwb25zZSkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGFjdGlvbkNoYW5nZVByb3YocHJvdmluY2lhKXsNCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgaHR0cHM6Ly9zaWdwYWMubWFwYS5lcy9mZWdhL1NlcnZpY2lvc1Zpc29yU2lncGFjL3F1ZXJ5L211bmljaXBpb3MvJHtwcm92aW5jaWF9Lmdlb2pzb25gDQogICAgICAgICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXTsNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5wcm92aW5jaWFTZWwgPSBwcm92aW5jaWENCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyUHJvdiA9IHByb3ZpbmNpYQ0KICAgICAgICAgICAgICAgIHRoaXMucHJvdmluY2lhcy5mb3JFYWNoKHByb3ZpbmNpYSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmKHByb3ZpbmNpYS5wcm9wZXJ0aWVzLmNvZGlnbyA9PSB0aGlzLnByb3ZpbmNpYVNlbCl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyUHJvdiA9IHByb3ZpbmNpYS5wcm9wZXJ0aWVzLm5vbWJyZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB0aGlzLm11bmljaXBpb3MgPSByZXNwb25zZS5kYXRhLmZlYXR1cmVzDQogICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTXVuID0gdHJ1ZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yLnJlc3BvbnNlKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgYWN0aW9uQ2hhbmdlTXVuKG11bmljaXBpbyl7DQogICAgICAgICAgICBjb25zdCBwYXRoID0gYGh0dHBzOi8vc2lncGFjLm1hcGEuZXMvZmVnYS9TZXJ2aWNpb3NWaXNvclNpZ3BhYy9xdWVyeS9hZ3JlZ2Fkb3MvJHt0aGlzLnByb3ZpbmNpYVNlbH0vJHttdW5pY2lwaW99Lmdlb2pzb25gDQogICAgICAgICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXTsNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlck11biA9IG11bmljaXBpbw0KICAgICAgICAgICAgICAgIGxldCB1bmlxdWUgPSBbLi4ubmV3IFNldChyZXNwb25zZS5kYXRhLmZlYXR1cmVzLm1hcCh4ID0+IHgucHJvcGVydGllcy5jb2RpZ28pKV07IA0KICAgICAgICAgICAgICAgIHRoaXMuYWdyZWdhZG9zID0gdW5pcXVlDQogICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlQWdyZSA9IHRydWUNCiAgICAgICAgICAgICAgICB0aGlzLm11bmljaXBpb1NlbCA9IG11bmljaXBpbw0KICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXJNdW4gPSBtdW5pY2lwaW8NCiAgICAgICAgICAgICAgICB0aGlzLm11bmljaXBpb3MuZm9yRWFjaChtdW5pY2lwaW8gPT4gew0KICAgICAgICAgICAgICAgICAgICBpZihtdW5pY2lwaW8ucHJvcGVydGllcy5jb2RpZ28gPT0gdGhpcy5tdW5pY2lwaW9TZWwpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlck11biA9IG11bmljaXBpby5wcm9wZXJ0aWVzLm5vbWJyZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBpZih0aGlzLmFncmVnYWRvcy5sZW5ndGggPT0gMSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uQ2hhbmdlQWdyZSh0aGlzLmFncmVnYWRvc1swXSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlckFncmUgPSB0aGlzLmFncmVnYWRvc1swXQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcikNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGFjdGlvbkNoYW5nZUFncmUoYWdyZWdhZG8pew0KICAgICAgICAgICAgY29uc3QgcGF0aCA9IGBodHRwczovL3NpZ3BhYy5tYXBhLmVzL2ZlZ2EvU2VydmljaW9zVmlzb3JTaWdwYWMvcXVlcnkvem9uYXMvJHt0aGlzLnByb3ZpbmNpYVNlbH0vJHt0aGlzLm11bmljaXBpb1NlbH0vJHthZ3JlZ2Fkb30uZ2VvanNvbmANCiAgICAgICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdOw0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyQWdyZSA9IGFncmVnYWRvDQogICAgICAgICAgICAgICAgbGV0IHVuaXF1ZSA9IFsuLi5uZXcgU2V0KHJlc3BvbnNlLmRhdGEuZmVhdHVyZXMubWFwKHggPT4geC5wcm9wZXJ0aWVzLmNvZGlnbykpXTsgDQogICAgICAgICAgICAgICAgdGhpcy56b25hcyA9IHVuaXF1ZQ0KICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVpvbmEgPSB0cnVlDQogICAgICAgICAgICAgICAgdGhpcy5hZ3JlZ2Fkb1NlbCA9IGFncmVnYWRvIA0KICAgICAgICAgICAgICAgIGlmKHRoaXMuYWdyZWdhZG9zLmxlbmd0aCA9PSAxKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25DaGFuZ2Vab25hKHRoaXMuYWdyZWdhZG9zWzBdKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyQWdyZSA9IHRoaXMuYWdyZWdhZG9zWzBdDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgYWN0aW9uQ2hhbmdlWm9uYSh6b25hKXsNCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgaHR0cHM6Ly9zaWdwYWMubWFwYS5lcy9mZWdhL1NlcnZpY2lvc1Zpc29yU2lncGFjL3F1ZXJ5L3BvbGlnb25vcy8ke3RoaXMucHJvdmluY2lhU2VsfS8ke3RoaXMubXVuaWNpcGlvU2VsfS8ke3RoaXMuYWdyZWdhZG9TZWx9LyR7em9uYX0uZ2VvanNvbmANCiAgICAgICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdOw0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnpvbmFTZWwgPSB6b25hDQogICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlclpvbmEgPSB6b25hDQogICAgICAgICAgICAgICAgdGhpcy5wb2xpZ29ub3MgPSByZXNwb25zZS5kYXRhLmZlYXR1cmVzDQogICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlUG9sID0gdHJ1ZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yLnJlc3BvbnNlKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgYWN0aW9uQ2hhbmdlUG9sKHBvbGlnb25vKXsNCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBgaHR0cHM6Ly9zaWdwYWMubWFwYS5lcy9mZWdhL1NlcnZpY2lvc1Zpc29yU2lncGFjL3F1ZXJ5L3BhcmNlbGFzLyR7dGhpcy5wcm92aW5jaWFTZWx9LyR7dGhpcy5tdW5pY2lwaW9TZWx9LyR7dGhpcy5hZ3JlZ2Fkb1NlbH0vJHt0aGlzLnpvbmFTZWx9LyR7cG9saWdvbm99Lmdlb2pzb25gDQogICAgICAgICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXTsNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5wb2xpZ29ub1NlbCA9IHBvbGlnb25vDQogICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlclBvbCA9IHBvbGlnb25vDQogICAgICAgICAgICAgICAgdGhpcy5wYXJjZWxhcyA9IHJlc3BvbnNlLmRhdGEuZmVhdHVyZXMNCiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVQYXIgPSB0cnVlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IucmVzcG9uc2UpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBhY3Rpb25DaGFuZ2VQYXIocGFyY2VsYSl7DQogICAgICAgICAgICBsZXQgcGFyY2VsYUNPRCA9IDANCiAgICAgICAgICAgIHRoaXMucGFyY2VsYXMuZm9yRWFjaChwYXJjZWxhTWFwID0+ew0KICAgICAgICAgICAgICAgIGlmKHBhcmNlbGFNYXAucHJvcGVydGllcy5kbl9wayA9PSBwYXJjZWxhKXsNCiAgICAgICAgICAgICAgICAgICAgcGFyY2VsYUNPRCA9IHBhcmNlbGFNYXAucHJvcGVydGllcy5jb2RpZ28NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgY29uc3QgcGF0aCA9IGBodHRwczovL3NpZ3BhYy5tYXBhLmVzL2ZlZ2EvU2VydmljaW9zVmlzb3JTaWdwYWMvcXVlcnkvcmVjaW50b3MvJHt0aGlzLnByb3ZpbmNpYVNlbH0vJHt0aGlzLm11bmljaXBpb1NlbH0vJHt0aGlzLmFncmVnYWRvU2VsfS8ke3RoaXMuem9uYVNlbH0vJHt0aGlzLnBvbGlnb25vU2VsfS8ke3BhcmNlbGFDT0R9Lmdlb2pzb25gDQogICAgICAgICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bIkF1dGhvcml6YXRpb24iXTsNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5wYXJjZWxhU2VsID0gcGFyY2VsYQ0KICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXJQYXIgPSBwYXJjZWxhQ09EDQogICAgICAgICAgICAgICAgdGhpcy5yZWNpbnRvcyA9IHJlc3BvbnNlLmRhdGEuZmVhdHVyZXMNCiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVSZWMgPSB0cnVlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IucmVzcG9uc2UpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KDQogICAgICAgIGFjdGlvbkNoYW5nZVJlYyhyZWNpbnRvU2VsbCl7DQogICAgICAgICAgICB0aGlzLnJlY2ludG9zLmZvckVhY2gocmVjaW50byA9PiB7DQogICAgICAgICAgICAgICAgaWYocmVjaW50by5wcm9wZXJ0aWVzLmRuX3BrID09IHJlY2ludG9TZWxsKXsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGF0ID0gKHJlY2ludG8ucHJvcGVydGllcy54MSArIHJlY2ludG8ucHJvcGVydGllcy54MikgLyAyDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvbmcgPSAocmVjaW50by5wcm9wZXJ0aWVzLnkxICsgcmVjaW50by5wcm9wZXJ0aWVzLnkyKSAvIDINCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb29yZGVuYWRhc1B1bnRvID0gW2xhdCwgbG9uZ10gDQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2VudGVyID0gW2xhdCwgbG9uZ10NCiAgICAgICAgICAgICAgICAgICAgdGhpcy56b29tID0gMTgNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KDQogICAgICAgIHNldFBsYWNlKHBsYWNlKXsNCiAgICAgICAgICAgIC8vY29uc3QgbGF0ID0gKHBsYWNlLmdlb21ldHJ5LnZpZXdwb3J0LlphLmkgKyBwbGFjZS5nZW9tZXRyeS52aWV3cG9ydC5aYS5qKSAvIDINCiAgICAgICAgICAgIC8vY29uc3QgbG9uZyA9IChwbGFjZS5nZW9tZXRyeS52aWV3cG9ydC5WYS5pICsgcGxhY2UuZ2VvbWV0cnkudmlld3BvcnQuVmEuaikgLyAyDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vdGhpcy5jZW50ZXIgPSBbbG9uZywgbGF0XQ0KICAgICAgICAgICAgdGhpcy5jZW50ZXIgPSBbcGxhY2UuZ2VvbWV0cnkubG9jYXRpb24ubG5nKCksIHBsYWNlLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpXQ0KICAgICAgICAgICAgdGhpcy56b29tID0gMTUNCiAgICAgICAgfSwNCiAgICAgICAgb3Blbk1vZGFsKHVzZXJTZWxlYykgew0KICAgICAgICAgICAgdGhpcy4kcmVmcy5lZGl0YXJSb2xGb3JtLnNob3coKTsNCiAgICAgICAgICAgIHRoaXMudmVyRXJyb3JEcmF3ID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuaW52YWxpZE1lc3NhZ2VOYW1lID0gIiINCiAgICAgICAgICAgIHRoaXMuc2hvd1Bhc3N3b3JkID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMudGl0bGVfY2FyZCA9IHRoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbF9lZGl0JykNCiAgICAgICAgICAgIHRoaXMuc3VidGl0bGVfY2FyZCA9IHRoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbF9lZGl0JykNCiAgICAgICAgICAgIHRoaXMudXNlclNlbGVjY2lvbmFkbyA9IHVzZXJTZWxlYzsNCiAgICAgICAgICAgIHRoaXMuZ2V0RW50ZXJwcmlzZSgpOw0KICAgICAgICAgICAgdGhpcy5hY3Rpb25TaG93bk1hcCgpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICB0ZXJtaW5hZG8ocCl7DQogICAgICAgICAgICB0aGlzLmRpYnVqYVBvbGlnb25vID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuYXJlYSA9IChNYXRoLnJvdW5kKChnZXRBcmVhKHAuZmVhdHVyZS5nZXRHZW9tZXRyeSgpKS8gMTAwMDApICogMTAwMDApIC8gMTAwMDApDQogICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzQnVlbmFzKHAuZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKCkpDQogICAgICAgICAgICB0aGlzLnZlckVycm9yRHJhdyA9IGZhbHNlDQogICAgICAgIH0sDQogICAgICAgIGVkaXRhZG8ocCl7DQogICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzRWRpdGFkYXMgPSBwLmZlYXR1cmVzLmFycmF5X1swXS5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKCkNCiAgICAgICAgICAgIHRoaXMuYXJlYSA9IChNYXRoLnJvdW5kKChnZXRBcmVhKHAuZmVhdHVyZXMuYXJyYXlfWzBdLmdldEdlb21ldHJ5KCkpIC8gMTAwMDApICogMTAwMDApIC8gMTAwMDApDQogICAgICAgICAgICBpZih0aGlzLnVzZXJTZWxlY2Npb25hZG8pew0KICAgICAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZXNCdWVuYXModGhpcy5jb29yZGluYXRlc0VkaXRhZGFzKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLnZlckVycm9yRHJhdyA9IGZhbHNlDQogICAgICAgIH0sDQogICAgICAgIGNvb3JkaW5hdGVzQnVlbmFzKEFycmF5Q29vcil7DQogICAgICAgICAgICBpZih0aGlzLnVzZXJTZWxlY2Npb25hZG8pew0KICAgICAgICAgICAgICAgIHRoaXMuTW9kaWZpY2FQb2xpZ29ubyA9IHRydWUNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMuTW9kaWZpY2FQb2xpZ29ubyA9IGZhbHNlDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBuZXcgcHJvajQuUHJvaignRVBTRzozNzg1Jyk7IA0KICAgICAgICAgICAgdmFyIGRlc3QgPSBuZXcgcHJvajQuUHJvaignRVBTRzo0MzI2Jyk7IA0KICAgICAgICAgICAgbGV0IG5ld0NlbnRlciA9IEFycmF5Ow0KICAgICAgICAgICAgbGV0IHBvbHlnb25PYmplY3Q9ICdQT0xZR09OKCgnDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IEFycmF5Q29vclswXS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIG5ld0NlbnRlciA9IHByb2o0KHNvdXJjZSwgZGVzdCwgW0FycmF5Q29vclswXVtpXVswXSwgQXJyYXlDb29yWzBdW2ldWzFdXSkNCiAgICAgICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVzUG9saWdvbm8ucHVzaChbbmV3Q2VudGVyWzBdICwgbmV3Q2VudGVyWzFdXSkNCiAgICAgICAgICAgICAgICBwb2x5Z29uT2JqZWN0ICs9IG5ld0NlbnRlclswXSsnICcrbmV3Q2VudGVyWzFdDQogICAgICAgICAgICAgICAgaWYoaSAhPSAoQXJyYXlDb29yWzBdLmxlbmd0aC0xKSl7DQogICAgICAgICAgICAgICAgICAgIHBvbHlnb25PYmplY3QgKz0gJywgJw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHBvbHlnb25PYmplY3QgKz0gJykpJzsNCiAgICAgICAgICAgIHRoaXMucG9saWdvbk9iamVjdG8gPSBwb2x5Z29uT2JqZWN0DQogICAgICAgICAgICANCiAgICAgICAgICAgIGxldCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9wYXJjZWxfZmlsdGVyLz9lbnRlcnByaXNlX2lkPSR7dGhpcy4kcm91dGUucXVlcnkuZW50ZXJwcmlzZX0mcG9seWdvbj0ke3BvbHlnb25PYmplY3R9YDsNCiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5mZWF0dXJlcy5sZW5ndGgpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yRHJhdyA9ICcnDQogICAgICAgICAgICAgICAgICAgIHRoaXMudmVyRXJyb3JEcmF3ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5mZWF0dXJlcy5mb3JFYWNoKHBhcmNlbGEgPT57DQogICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnVzZXJTZWxlY2Npb25hZG8gIT0gcGFyY2VsYS5pZCl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvckRyYXcgKz0gYCIke3BhcmNlbGEucHJvcGVydGllcy5uYW1lfSIgIGANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdGhpcy51c2VyU2VsZWNjaW9uYWRvKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc3MgPSBbXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYnVqYVBvbGlnb25vID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5lcnJvckRyYXcpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJFcnJvckRyYXcgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkU2F2ZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JEcmF3ID0gYCR7dGhpcy4kdCgncGFyY2VsYXMucGFyY2VsYV9zb2xhcGFkYV9jb24nKX0gICAke3RoaXMuZXJyb3JEcmF3fWANCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JQYXJjZWxhID0gJ3JlZCcNCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBydWViYVBhcmNlbGFTaW1wbGUocG9seWdvbk9iamVjdCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBydWViYVBhcmNlbGFTaW1wbGUocG9seWdvbk9iamVjdCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+eyANCiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oZXJyb3IuZGF0YSkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGNvbXBydWViYVBhcmNlbGFTaW1wbGUocG9seWdvbk9iamVjdCl7DQogICAgICAgICAgICBsZXQgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vcGFyY2VsX3ZhbGlkLz9wb2x5Z29uPSR7cG9seWdvbk9iamVjdH1gOw0KICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlPT57DQogICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YSA9PSAiRmFsc2UiKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJFcnJvckRyYXcgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRTYXZlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yRHJhdyA9IGAke3RoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbGFfc29sYXBhZGFfc2knKX1gDQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JQYXJjZWxhID0gJ3JlZCcNCiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMudXNlclNlbGVjY2lvbmFkbyl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVzcyA9IFtdDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYnVqYVBvbGlnb25vID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmVyRXJyb3JEcmF3ID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFNhdmUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yUGFyY2VsYSA9ICdncmVlbicNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFNhdmUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBydWViYUxpbWl0ZXMoKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcikNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGNvbXBydWViYUxpbWl0ZXMoKXsNCiAgICAgICAgICAgIGxldCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9lbnRlcnByaXNlc19leGNlcHQvJHt0aGlzLiRyb3V0ZS5xdWVyeS5lbnRlcnByaXNlfS8/cGFyY2VsPSR7dGhpcy51c2VyU2VsZWNjaW9uYWRvfWA7DQogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiK3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpDQogICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgLmdldChwYXRoKQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT57DQogICAgICAgICAgICAgICAgY29uc3QgcG9yY2VudGFqZV9hbnQgPSAocGFyc2VGbG9hdCh0aGlzLiRwYXJlbnQudG90YWxfaGVjdGFyZXNfZW50ZXJwcmlzZSkgLyBwYXJzZUZsb2F0KHJlc3BvbnNlLmRhdGEuaGVjdGFyZXNfYXZhaWxhYmxlKSAgKiAxMDApDQogICAgICAgICAgICAgICAgY29uc3QgcG9yY2VudGFqZV9ub3cgPSAoKHBhcnNlRmxvYXQocmVzcG9uc2UuZGF0YS5wYXJjZWxzLmFyZWFfX3N1bSkrcGFyc2VGbG9hdCh0aGlzLmFyZWEpKSAvIHBhcnNlRmxvYXQocmVzcG9uc2UuZGF0YS5oZWN0YXJlc19hdmFpbGFibGUpICogMTAwKQ0KICAgICAgICAgICAgICAgIGlmKHBhcnNlRmxvYXQocG9yY2VudGFqZV9hbnQpIDwgcGFyc2VGbG9hdChwb3JjZW50YWplX25vdykpew0KICAgICAgICAgICAgICAgICAgICBpZihwb3JjZW50YWplX25vdyA+IDEwMC4wMCl7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZlckVycm9yRHJhdyA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRTYXZlID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvckRyYXcgPSBgJHt0aGlzLiR0KCdwYXJjZWxhcy5wYXJjZWxhX2xpbWl0ZV9hcmVhJyl9YA0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvclBhcmNlbGEgPSAncmVkJw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMudXNlclNlbGVjY2lvbmFkbyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlc3MgPSBbXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlidWphUG9saWdvbm8gPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJFcnJvckRyYXcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZFNhdmUgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvclBhcmNlbGEgPSAnZ3JlZW4nDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkU2F2ZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZXJFcnJvckRyYXcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkU2F2ZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JQYXJjZWxhID0gJ2dyZWVuJw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkU2F2ZSA9IGZhbHNlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgYWN0aW9uUHJpbWFyeSgpew0KICAgICAgICAgICAgaWYoIXRoaXMudmVyRXJyb3JEcmF3KXsNCiAgICAgICAgICAgICAgICBsZXQgcGF0aCA9ICcnDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYodGhpcy51c2VyU2VsZWNjaW9uYWRvKXsNCiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMucG9saWdvbk9iamVjdG8pew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb29yZGluYXRlc0J1ZW5hcyh0aGlzLiRyZWZzWydwYXJjZWxhJ10uJGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCkpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vcGFyY2Vscy8ke3RoaXMudXNlclNlbGVjY2lvbmFkb30vYDsNCiAgICAgICAgICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgICAgICAgICAgLnB1dChwYXRoLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRyZWZzLmlucHV0TmFtZS4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLiRyZWZzLmlucHV0RGVzYy4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb246IHRoaXMucG9saWdvbk9iamVjdG8sDQogICAgICAgICAgICAgICAgICAgICAgICBhcmVhOiB0aGlzLmFyZWEsDQogICAgICAgICAgICAgICAgICAgICAgICBlbnRlcnByaXNlOiAodGhpcy4kcm91dGUucXVlcnkuZW50ZXJwcmlzZSkgPyB0aGlzLiRyb3V0ZS5xdWVyeS5lbnRlcnByaXNlIDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZW50ZXJwcmlzZScpLA0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl91cGRhdGVkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcnVlYmFQYXJjZWxhcyhyZXNwb25zZS5kYXRhLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhlcnJvcik7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vcGFyY2Vscy9gOw0KICAgICAgICAgICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgICAgICAgICAucG9zdChwYXRoLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLiRyZWZzLmlucHV0TmFtZS4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLiRyZWZzLmlucHV0RGVzYy4kcmVmcy5pbnB1dC52YWx1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb246IHRoaXMucG9saWdvbk9iamVjdG8sDQogICAgICAgICAgICAgICAgICAgICAgICBhcmVhOiB0aGlzLmFyZWEsDQogICAgICAgICAgICAgICAgICAgICAgICBlbnRlcnByaXNlOiAodGhpcy4kcm91dGUucXVlcnkuZW50ZXJwcmlzZSkgPyB0aGlzLiRyb3V0ZS5xdWVyeS5lbnRlcnByaXNlIDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZW50ZXJwcmlzZScpLA0KICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9jcmVhdGVkOiBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcnVlYmFQYXJjZWxhcyhyZXNwb25zZS5kYXRhLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhLm5hbWUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkTWVzc2FnZU5hbWUgPSBlcnJvci5yZXNwb25zZS5kYXRhLm5hbWVbMF07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YS5wb2x5Z29uKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmVyRXJyb3JEcmF3ID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JEcmF3ID0gdGhpcy4kdCgncGFyY2VsYXMucGFyY2VsYV9saW1pdGUnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIH0pOyAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICB9LA0KICAgICAgICBjb21wcnVlYmFQYXJjZWxhcyhwYXJjZWxhaWQpeyAgICANCiAgICAgICAgICAgIGxldCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9lbnRlcnByaXNlcy8ke3RoaXMuJHJvdXRlLnF1ZXJ5LmVudGVycHJpc2V9L2A7DQogICAgICAgICAgICAvKg0KICAgICAgICAgICAgaWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNfc3VwZXJ1c2VyJykgPT0gJ3RydWUnIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lzX3N5c3RlbWFkbWluJykgPT0gJ3RydWUnKXsNCiAgICAgICAgICAgICAgICBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9wYXJjZWxzL2A7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgdmFyIGFsbENvb3JkaW5hdGVzID0gQXJyYXkoKTsNCiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAuZ2V0KHBhdGgpDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5wYXJjZWxzLmZlYXR1cmVzLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgICAgIGFsbENvb3JkaW5hdGVzLnB1c2goZWxlbWVudC5nZW9tZXRyeS5jb29yZGluYXRlcykNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyh0aGlzLmNvb3JkaW5hdGVzUG9saWdvbm8sIHBhcmNlbGFpZCkgICAgICANCiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZUlucyA9IGF4aW9zLmNyZWF0ZSh7DQogICAgICAgICAgICAgICAgICAgIGJhc2VVUkw6IHRoaXMuJHNlbnRpbmVsVVJMDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBjb25zdCBjb25maWdJbnMgPSB7DQogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04JywNCiAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogIkJlYXJlciAiK2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdBcGlBY2Nlc3NUb2tlbicpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3QgYm9keUlucyA9IEpTT04uc3RyaW5naWZ5KHsNCiAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJzogYCR7dGhpcy4kcm91dGUucXVlcnkuZW50ZXJwcmlzZX1gLA0KICAgICAgICAgICAgICAgICAgICAgICAgImFkZGl0aW9uYWxEYXRhIjogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93TG9nbyI6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzaG93V2FybmluZ3MiOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaW1hZ2VRdWFsaXR5IjogOTAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgImRpc2FibGVkIjogZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAnYXJlYU9mSW50ZXJlc3QnOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAiTXVsdGlQb2x5Z29uIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29vcmRpbmF0ZXMnOiBhbGxDb29yZGluYXRlcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwiY3JzIjogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJuYW1lIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInByb3BlcnRpZXMiOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICJ1cm46b2djOmRlZjpjcnM6RVBTRzo6NDMyNiINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBpbnN0YW5jZUlucy5wdXQoIi9jb25maWd1cmF0aW9uL3YxL3dtcy9pbnN0YW5jZXMvIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzSScpLCBib2R5SW5zLCBjb25maWdJbnMpLnRoZW4oKHJlc3ApID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKGByZXNwdWVzdGEgc2VudGluZWxgLCByZXNwKQ0KICAgICAgICAgICAgICAgICAgICBpZihyZXNwLnN0YXR1cyA9PSAyMDAgfHwgcmVzcC5zdGF0dXNUZXh0ID09ICdPSycpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmdldFVzZXJzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmVkaXRhclJvbEZvcm0uaGlkZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmNvbXBvbmVudEtleSArPSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb29yZGVuYWRhc1BhcmNlbCA9ICcnDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbGFfZ3VhcmRhZGEnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LnRpcG9BbGVydGEgPSAnc3VjY2VzcycNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHBhcmVudC4kcmVmcy5hbGVydGFHZW5lcmFsLnZlckFsZXJ0YSgpDQogICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmdldFVzZXJzKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmVkaXRhclJvbEZvcm0uaGlkZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmNvbXBvbmVudEtleSArPSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb29yZGVuYWRhc1BhcmNlbCA9ICcnDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQubWVuc2FqZUFsZXJ0YSA9IHRoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbF9ndWFyZGFkYV9lcnJvcl9zZW50JykNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHBhcmVudC50aXBvQWxlcnRhID0gJ2Vycm9yJw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LiRyZWZzLmFsZXJ0YUdlbmVyYWwudmVyQWxlcnRhKCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhgZXJyb3JgLCBlcnJvcikNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LmdldFVzZXJzKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZWRpdGFyUm9sRm9ybS5oaWRlKCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHBhcmVudC5jb21wb25lbnRLZXkgKz0gMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb29yZGVuYWRhc1BhcmNlbCA9ICcnDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHBhcmVudC5tZW5zYWplQWxlcnRhID0gdGhpcy4kdCgncGFyY2VsYXMucGFyY2VsX2d1YXJkYWRhX2Vycm9yX3NlbnQnKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQudGlwb0FsZXJ0YSA9ICdlcnJvcicNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LiRyZWZzLmFsZXJ0YUdlbmVyYWwudmVyQWxlcnRhKCkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgYWN0aW9uU2hvd24oKXsNCiAgICAgICAgICAgIHRoaXMuY29vcmRlbmFkYXNQYXJjZWwgPSAnJw0KICAgICAgICAgICAgdGhpcy4kcGFyZW50LmNvbXBvbmVudEtleSArPSAxOw0KICAgICAgICB9LA0KICAgICAgICAvKg0KICAgICAgICBtZXRyaWNhcGFyY2VsYShwcm9waWVkYWRlcyl7DQogICAgICAgICAgICBjb25zdCBhcmVhID0gcHJvcGllZGFkZXMuYXJlYQ0KICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vZW50ZXJwcmlzZXMvJHtwcm9waWVkYWRlcy5lbnRlcnByaXNlfS8/c2l6ZT0xMDAwMDAwMDAwJnBhZ2U9MWA7DQogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiK3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpDQogICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEudHlwZV9tZXRyaWMgPT0gIkFjcmUiKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9uZWhlY3R0b0FjcmUgPSAyLjQ3MTA1MzgxNDY3MTcNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjcmUgPSBvbmVoZWN0dG9BY3JlICogYXJlYQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRyaWNOYW1lID0gIkFjcmUiDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY3JlLnRvRml4ZWQoNCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICBhY3JlLnRvRml4ZWQoNCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIGFyZWENCiAgICAgICAgDQogICAgICAgIH0sDQogICAgICAgICovDQogICAgICAgIA0KICAgICAgICBhY3Rpb25TaG93bk1hcCgpew0KICAgICAgICAgICAgDQogICAgICAgICAgICBsZXQgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vcGFyY2Vscy8ke3RoaXMudXNlclNlbGVjY2lvbmFkb30vYDsNCiAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgICAgIGF4aW9zDQogICAgICAgICAgICAgICAgLmdldChwYXRoKQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHRoaXMucGFyY2VsID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlTmFtZSA9IHJlc3BvbnNlLmRhdGEucHJvcGVydGllcy5uYW1lOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlRGVzYyA9IHJlc3BvbnNlLmRhdGEucHJvcGVydGllcy5kZXNjcmlwdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW9tZXRyeSA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXJlYSA9IHJlc3BvbnNlLmRhdGEucHJvcGVydGllcy5hcmVhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvb3JkZW5hZGFzUGFyY2VsID0gdGhpcy5nZW9tZXRyeS5nZW9tZXRyeS5jb29yZGluYXRlcw0KICAgICAgICAgICAgICAgICAgICBsZXQgY29vcmRlbmFkYXNHZW9tZXRyaWNhcyA9ICcnDQogICAgICAgICAgICAgICAgICAgIGNvb3JkZW5hZGFzR2VvbWV0cmljYXMgPSB0aGlzLiRyZWZzWydwYXJjZWxhJ10uJGdlb21ldHJ5LmV4dGVudF8NCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXggPSBjb29yZGVuYWRhc0dlb21ldHJpY2FzWzBdICsgKGNvb3JkZW5hZGFzR2VvbWV0cmljYXNbMl0tY29vcmRlbmFkYXNHZW9tZXRyaWNhc1swXSkvMjsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgeWUgPSBjb29yZGVuYWRhc0dlb21ldHJpY2FzWzFdICsgKGNvb3JkZW5hZGFzR2VvbWV0cmljYXNbM10tY29vcmRlbmFkYXNHZW9tZXRyaWNhc1sxXSkvMjsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBwcm9qNC5Qcm9qKCdFUFNHOjM3ODUnKTsgDQogICAgICAgICAgICAgICAgICAgIHZhciBkZXN0ID0gbmV3IHByb2o0LlByb2ooJ0VQU0c6NDMyNicpOyAgDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NlbnRlciA9IHByb2o0KHNvdXJjZSwgZGVzdCwgW2V4LCB5ZV0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2VudGVyID0gW25ld0NlbnRlclswXSwgbmV3Q2VudGVyWzFdXQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20gPSAxNQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYnVqYVBvbGlnb25vID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlLmRhdGEpDQogICAgICAgICAgICAgICAgICAgIC8vdGhpcy5tZXRyaWM9IHRoaXMubWV0cmljYXBhcmNlbGEocmVzcG9uc2UuZGF0YS5wcm9wZXJ0aWVzKTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaCggZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ2VudHJhJykNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVkU2F2ZSA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmQgPSB0cnVlDQogICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGVfY2FyZCA9IHRoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbF9udWV2YScpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3VidGl0bGVfY2FyZCA9IHRoaXMuJHQoJ3BhcmNlbGFzLnBhcmNlbF9udWV2YScpDQogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVOYW1lID0gJyc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVEZXNjID0gJyc7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29vcmRlbmFkYXNQYXJjZWwgPSBbMCwwXQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbnRlciA9IFswLCAwXQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20gPSA0DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlidWphUG9saWdvbm8gPSB0cnVlDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9wYXJjZWxfZW50ZXJwcmlzZS8ke3RoaXMuJHJvdXRlLnF1ZXJ5LmVudGVycHJpc2V9L2A7DQogICAgICAgICAgICAvKg0KICAgICAgICAgICAgaWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaXNfc3VwZXJ1c2VyJykgPT0gJ3RydWUnIHx8IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2lzX3N5c3RlbWFkbWluJykgPT0gJ3RydWUnKXsNCiAgICAgICAgICAgICAgICBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS9wYXJjZWxzL2A7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAqLw0KICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgIC5nZXQocGF0aCkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmFsbFBhcmNlbHM9cmVzcG9uc2UuZGF0YS5mZWF0dXJlcw0KICAgICAgICAgICAgICAgIGlmKCF0aGlzLnVzZXJTZWxlY2Npb25hZG8pew0KICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0SXRlbSA9IHRoaXMuYWxsUGFyY2Vsc1t0aGlzLmFsbFBhcmNlbHMubGVuZ3RoIC0gMV0NCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFBhcmNlbExpc3QgPSBsYXN0SXRlbS5pZA0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uQ2hhbmdlUGFyY2Vscyh0aGlzLnNlbGVjdGVkUGFyY2VsTGlzdCkNCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUGFyY2VsTGlzdCA9IHRoaXMudXNlclNlbGVjY2lvbmFkbw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgfSwNCiAgICAgICAgYWN0aW9uQ2hhbmdlUGFyY2Vscyh2YWxvcil7DQogICAgICAgICAgICBjb25zdCBjb29yZGVuYWRhc0dlb21ldHJpY2FzID0gdGhpcy4kcmVmc1t2YWxvcisncGFyY2VsYSddWzBdLiRnZW9tZXRyeS5leHRlbnRfDQogICAgICAgICAgICBjb25zdCBleCA9IGNvb3JkZW5hZGFzR2VvbWV0cmljYXNbMF0gKyAoY29vcmRlbmFkYXNHZW9tZXRyaWNhc1syXS1jb29yZGVuYWRhc0dlb21ldHJpY2FzWzBdKS8yOw0KICAgICAgICAgICAgY29uc3QgeWUgPSBjb29yZGVuYWRhc0dlb21ldHJpY2FzWzFdICsgKGNvb3JkZW5hZGFzR2VvbWV0cmljYXNbM10tY29vcmRlbmFkYXNHZW9tZXRyaWNhc1sxXSkvMjsNCiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBuZXcgcHJvajQuUHJvaignRVBTRzozNzg1Jyk7IA0KICAgICAgICAgICAgdmFyIGRlc3QgPSBuZXcgcHJvajQuUHJvaignRVBTRzo0MzI2Jyk7ICANCiAgICAgICAgICAgIGNvbnN0IG5ld0NlbnRlciA9IHByb2o0KHNvdXJjZSwgZGVzdCwgW2V4LCB5ZV0pDQogICAgICAgICAgICB0aGlzLmNlbnRlciA9IFtuZXdDZW50ZXJbMF0sIG5ld0NlbnRlclsxXV0NCiAgICAgICAgICAgIHRoaXMuem9vbSA9IDE2DQogICAgICAgIH0sDQogICAgICAgIA0KICAgICAgICANCiAgICB9LA0KICAgIG1vdW50ZWQoKXsNCiAgICAgICAgY29uc3QgcGF0aF9sYW5nID0gYCR7dGhpcy4kYXBpVVJMfS9wcm9maWxlZGF0YS8ke3RoaXMuJHNlc3Npb24uZ2V0KCd1c2VyJyl9L2A7DQogICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIrc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYXBpQWNjZXNzIikNCiAgICAgICAgYXhpb3MNCiAgICAgICAgLmdldChwYXRoX2xhbmcpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+ew0KICAgICAgICAgICAgdGhpcy4kcm9vdC4kaTE4bi5sb2NhbGUgPSByZXNwb25zZS5kYXRhLmxhbmd1YWdlDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuJHJlZnMuY29tdW5pZGFkZXNTZWxlY3QuJGVsLmZpcnN0Q2hpbGQuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jw0KICAgICAgICB0aGlzLiRyZWZzLnByb3ZpbmNpYXNTZWxlY3QuJGVsLmZpcnN0Q2hpbGQuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jw0KICAgICAgICB0aGlzLiRyZWZzLm11blNlbGVjdC4kZWwuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnDQogICAgICAgIHRoaXMuJHJlZnMuYWdyZVNlbGVjdC4kZWwuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnDQogICAgICAgIHRoaXMuJHJlZnMuem9uYVNlbGVjdC4kZWwuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnDQogICAgICAgIHRoaXMuJHJlZnMucG9sU2VsZWN0LiRlbC5maXJzdENoaWxkLnN0eWxlLmRpc3BsYXkgPSAnZmxleCcNCiAgICAgICAgdGhpcy4kcmVmcy5wYXJTZWxlY3QuJGVsLmZpcnN0Q2hpbGQuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jw0KICAgICAgICB0aGlzLiRyZWZzLnJlY1NlbGVjdC4kZWwuZmlyc3RDaGlsZC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnDQoNCiAgICAgICAgdGhpcy4kcmVmcy5lZGl0YXJSb2xGb3JtLiRlbC5maXJzdENoaWxkLnN0eWxlLndpZHRoID0gJzk4JScNCiAgICAgICAgdGhpcy4kcmVmcy5lZGl0YXJSb2xGb3JtLiRlbC5maXJzdENoaWxkLnN0eWxlLmhlaWdodCA9ICc5NSUnDQogICAgICAgIHRoaXMuJHJlZnMuZWRpdGFyUm9sRm9ybS4kZWwuZmlyc3RDaGlsZC5zdHlsZVsibWF4LXdpdGgiXSA9ICcxMDAlJw0KICAgICAgICB0aGlzLiRyZWZzLmVkaXRhclJvbEZvcm0uJGVsLmZpcnN0Q2hpbGQuc3R5bGVbIm1heC1oZWlnaHQiXSA9ICcxMDAlJw0KICAgICAgICANCiAgICAgICAgdGhpcy4kcmVmcy5lZGl0YXJSb2xGb3JtLiRlbC5maXJzdENoaWxkLmNoaWxkTm9kZXNbMl0uc3R5bGVbInBhZGRpbmctcmlnaHQiXSA9ICcxJScNCiAgICAgICAgdGhpcy4kcmVmcy5lZGl0YXJSb2xGb3JtLiRlbC5maXJzdENoaWxkLmNoaWxkTm9kZXNbMl0uc3R5bGVbIm1hcmdpbi1ib3R0b20iXSA9ICcxJScNCiAgICAgICAgdGhpcy4kcmVmcy5lZGl0YXJSb2xGb3JtLiRlbC5maXJzdENoaWxkLmNoaWxkTm9kZXNbMl0uc3R5bGVbImhlaWdodCJdID0gJzk1JScNCiAgICAgICAgdGhpcy5jYXJnYXJDb211bmlkYWRlcygpDQogICAgfQ0KfQ0K"},{"version":3,"sources":["EditarParcel2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"EditarParcel2.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <cv-modal\r\n        :close-aria-label=\"closeAriaLabel\"\r\n        size=\"lg\"\r\n        :primary-button-disabled=\"primaryButtonDisabled\"\r\n        :auto-hide-off=\"autoHideOff\"\r\n        \r\n        @modal-hidden=\"actionShown\"\r\n        @modal-shown=\"actionShownMap\"\r\n        ref=\"editarRolForm\" id=\"parcelModal\" class=\"parcelModalClass\"\r\n    >\r\n        <template v-if=\"use_label\" slot=\"label\">{{title_card}}</template>\r\n        <template v-if=\"use_title\" slot=\"title\">{{subtitle_card}} {{userSeleccionado}}</template>\r\n        <template v-if=\"use_content\" slot=\"content\" id=\"contenido\">\r\n            <div class=\"bx--row\" id=\"row_box\">\r\n                <div class=\"bx--col-lg-3 bx--col-md-3 bx--col-sm-3\">\r\n                    <cv-text-input\r\n                    :label=\"$t('parcelas.parcel_name')\"\r\n                    :value=\"valueName\"\r\n                    :disabled=\"disabledName\"\r\n                    :type=\"inputTypeName\"\r\n                    :placeholder=\"$t('parcelas.place_name')\"\r\n                    :invalid-message=\"invalidMessageName\"\r\n                    ref=\"inputName\"\r\n                    id=\"input-MIRLwtCq\"\r\n                    v-model=\"valueName\"></cv-text-input>\r\n                    <br/>\r\n                    <cv-text-input\r\n                        :label=\"$t('parcelas.parcel_descrip')\"\r\n                        :value=\"valueDesc\"\r\n                        :disabled=\"disabledDesc\"\r\n                        :type=\"inputTypeDesc\"\r\n                        :placeholder=\"$t('parcelas.place_descrip')\"\r\n                        :invalid-message=\"invalidMessageDesc\"\r\n                        ref=\"inputDesc\"\r\n                        id=\"input-3zcRveTf\"\r\n                        v-model=\"valueDesc\"\r\n                    ></cv-text-input>\r\n                    <br />\r\n                    <div class=\"errorDraw\" v-if=\"verErrorDraw\">{{errorDraw}}</div>\r\n                    <br />\r\n                        <cv-button\r\n                            :kind=\"kindSave\"\r\n                            :size=\"sizeSave\"\r\n                            :disabled=\"disabledSave\"\r\n                            @click=\"actionPrimary\"\r\n                            :icon=\"icon\"\r\n                        >\r\n                        {{$t(\"parcelas.guardar\")}}\r\n                        </cv-button>\r\n                    <br/>\r\n                    <br>\r\n                    <div id=\"geolocIcon\" style=\"\">\r\n                        <div v-if=\"mostrarIconErrGeoloc === ''\" @click=\"cargaLocalizacionActual()\">\r\n                            <p style=\"cursor: pointer; font-size: 14px;\">Mostrar mi ubicacin <img src=\"../assets/airport-location.svg\" style=\"width: 14px; height: 14px;\"></p>\r\n                        </div>\r\n                        <div v-else-if=\"mostrarIconErrGeoloc === false\" @click=\"cargaLocalizacionActual()\">\r\n                            <p style=\"cursor: pointer; font-size: 14px;\">Para volver a localizar mi ubicacin, haz click aqu <Location16 style=\"stroke: #00abff; width: 14px; height: 14px; fill: #00abff;\"/></p>\r\n                        </div>\r\n                        <div v-else-if=\"mostrarIconErrGeoloc === true\" @click=\"cargaLocalizacionActual()\">\r\n                            <p style=\"cursor: pointer; font-size: 14px;\">No temenos acceso a tu ubicacin <img src=\"../assets/location--hazard.svg\" style=\"width: 14px; height: 14px;\"></p>\r\n                        </div>\r\n                    </div>\r\n                    <br>\r\n                    <div id=\"sentinelLayersList\">\r\n                        <cv-tabs\r\n                        :container=\"false\"\r\n                        aria-label=\"navigation tab label\">\r\n                            <cv-tab id=\"tab-1\" :label=\"$t('parcelas.parcel_list')\">\r\n                                <cv-structured-list selectable id=\"parcelList\">\r\n                                    <template slot=\"items\">\r\n                                        <cv-structured-list-item \r\n                                        v-for=\"feature in allParcels\" \r\n                                        name=\"group-1\" \r\n                                        :value=\"feature.id\" \r\n                                        v-bind:key=\"feature.id\" \r\n                                        :checked=\"feature.id == selectedParcelList\"\r\n                                        @change=\"actionChangeParcels\"\r\n                                        ref=\"listaDeParcelas\">\r\n                                            <cv-structured-list-data>{{feature.properties.name}}</cv-structured-list-data>\r\n                                        </cv-structured-list-item>\r\n                                    </template>\r\n                                </cv-structured-list>\r\n                            </cv-tab>\r\n                            <cv-tab id=\"tab-2\" :label=\"$t('parcelas.sigpac_pro')\" :selected=\"selected\">\r\n                                <br>\r\n                                <cv-dropdown \r\n                                    :placeholder.sync=\"placeholderComunidad\" \r\n                                    @change=\"actionChangeComunidades\" :label=\"labelComunidad\" ref=\"comunidadesSelect\">\r\n                                        <cv-dropdown-item v-for=\"comunidad in comunidades\" :value=\"comunidad.properties.codigo\" v-bind:key=\"comunidad.properties.codigo\">{{comunidad.properties.nombre}}</cv-dropdown-item>\r\n                                </cv-dropdown>\r\n                                <br>\r\n                                <cv-dropdown \r\n                                    :placeholder=\"placeholderProv\" \r\n                                    @change=\"actionChangeProv\" :label=\"labelProv\" :disabled=\"!visibleProv\" ref=\"provinciasSelect\">\r\n                                        <cv-dropdown-item v-for=\"provincia in provincias\" :value=\"provincia.properties.codigo\" v-bind:key=\"provincia.properties.codigo\">{{provincia.properties.nombre}}</cv-dropdown-item>\r\n                                </cv-dropdown>\r\n                                <br>\r\n                                <cv-dropdown \r\n                                    :placeholder=\"placeholderMun\" \r\n                                    @change=\"actionChangeMun\" :label=\"labelMun\" :disabled=\"!visibleMun\" ref=\"munSelect\">\r\n                                        <cv-dropdown-item v-for=\"municipio in municipios\" :value=\"municipio.properties.codigo\" v-bind:key=\"municipio.properties.codigo\">{{municipio.properties.nombre}}</cv-dropdown-item>\r\n                                </cv-dropdown>\r\n\r\n                                <br>\r\n                                <cv-dropdown \r\n                                    :placeholder=\"placeholderAgre\" \r\n                                    @change=\"actionChangeAgre\" :label=\"labelAgre\" :disabled=\"!visibleAgre\" ref=\"agreSelect\">\r\n                                        <cv-dropdown-item v-for=\"agregado in agregados\" :value=\"agregado\" v-bind:key=\"agregado\">{{agregado}}</cv-dropdown-item>\r\n                                </cv-dropdown>\r\n                                <br>\r\n                                <cv-dropdown \r\n                                    :placeholder=\"placeholderZona\" \r\n                                    @change=\"actionChangeZona\" :label=\"labelZona\" :disabled=\"!visibleZona\" ref=\"zonaSelect\">\r\n                                        <cv-dropdown-item v-for=\"zona in zonas\" :value=\"zona\" v-bind:key=\"zona\">{{zona}}</cv-dropdown-item>\r\n                                </cv-dropdown>\r\n\r\n                                <br>\r\n                                <cv-dropdown \r\n                                    :placeholder=\"placeholderPol\" \r\n                                    @change=\"actionChangePol\" :label=\"labelPol\" :disabled=\"!visiblePol\" ref=\"polSelect\">\r\n                                        <cv-dropdown-item v-for=\"poligono in poligonos\" :value=\"poligono.properties.codigo\" v-bind:key=\"poligono.properties.codigo\">{{poligono.properties.nombre}}</cv-dropdown-item>\r\n                                </cv-dropdown>\r\n                                <br>\r\n                                <cv-dropdown \r\n                                    :placeholder=\"placeholderPar\" \r\n                                    @change=\"actionChangePar\" :label=\"labelPar\" :disabled=\"!visiblePar\" ref=\"parSelect\">\r\n                                        <cv-dropdown-item v-for=\"parcela in parcelas\" :value=\"parcela.properties.dn_pk\" v-bind:key=\"parcela.properties.dn_pk\">{{parcela.properties.nombre}}</cv-dropdown-item>\r\n                                </cv-dropdown>\r\n                                <br>\r\n                                <cv-dropdown \r\n                                    :placeholder=\"placeholderRec\" \r\n                                    @change=\"actionChangeRec\" :label=\"labelRec\" :disabled=\"!visibleRec\" ref=\"recSelect\">\r\n                                        <cv-dropdown-item v-for=\"recinto in recintos\" :value=\"recinto.properties.dn_pk\" v-bind:key=\"recinto.properties.dn_pk\">{{recinto.properties.nombre}}</cv-dropdown-item>\r\n                                </cv-dropdown>\r\n                            </cv-tab>\r\n                            <cv-tab id=\"tab-3\" :label=\"$t('parcelas.sigpac_direc')\">\r\n                                <div class=\"errorDraw\" v-if=\"verErrorBusq\">{{$t(\"parcelas.sigpac_error\")}}</div>\r\n                                <cv-number-input\r\n                                :label=\"placeholderProv\" v-model=\"vProv\">\r\n                                </cv-number-input>\r\n                                <cv-number-input\r\n                                :label=\"placeholderMun\" v-model=\"vMun\">\r\n                                </cv-number-input>\r\n                                <cv-number-input\r\n                                :label=\"placeholderAgre\" v-model=\"vAgre\">\r\n                                </cv-number-input>\r\n                                <cv-number-input\r\n                                :label=\"placeholderZona\" v-model=\"vZona\">\r\n                                </cv-number-input>\r\n                                <cv-number-input\r\n                                :label=\"placeholderPol\" v-model=\"vPol\">\r\n                                </cv-number-input>\r\n                                <cv-number-input\r\n                                :label=\"placeholderPar\" v-model=\"vPar\">\r\n                                </cv-number-input>\r\n                                <cv-number-input\r\n                                :label=\"placeholderRec\" v-model=\"vRec\">\r\n                                </cv-number-input>\r\n                                <cv-button kind=\"primary\" @click=\"bucardorSigpacDirect\">\r\n                                {{$t(\"parcelas.buscar\")}}\r\n                                </cv-button>\r\n                            </cv-tab>\r\n                        </cv-tabs>\r\n                            \r\n                    </div>\r\n                </div>\r\n                <div class=\"bx--col-lg  bx--col-md bx--col-sm\">\r\n                    \r\n                    <div id=\"div_map\">\r\n                        <vl-map\r\n                            :load-tiles-while-animating=\"true\"\r\n                            :load-tiles-while-interacting=\"true\"\r\n                            data-projection=\"EPSG:4326\"\r\n                            :id=\"parcel.id\"\r\n                            class=\"mapa\"\r\n                            ref=\"map\"\r\n                        >\r\n                            <vl-view :zoom.sync=\"zoom\" :center=\"center\"></vl-view>      \r\n                            <!--Bing MAP -->    \r\n                    <!--Bing MAP -->    \r\n                            <!--Bing MAP -->    \r\n                            <vl-layer-tile id=\"bingmaps\">\r\n                                <vl-source-bingmaps :api-key=\"apiKeyBing\" :imagery-set=\"imagerySetBing\" :maxZoom=\"maxZoomBing\"></vl-source-bingmaps>\r\n                            </vl-layer-tile>\r\n                            <!--todas las parcelas-->\r\n                            <!--\r\n                            <div v-for=\"parcel in allParcels\" :value=\"parcel.id\" v-bind:key=\"parcel.id\">\r\n                                <vl-layer-vector >\r\n                                    <vl-source-vector :ident=\"parcel.id\" >\r\n                                        <vl-feature>\r\n                                            <vl-geom-polygon :coordinates=\"parcel.geometry.coordinates\" :indent=\"parcel.id\" :ref=\"parcel.id+'parcela'\">\r\n                                                \r\n                                            </vl-geom-polygon>\r\n                                            <vl-style-box>\r\n                                                <vl-style-stroke color=\"rgba(0, 0, 255, 1)\" :width=\"2\"></vl-style-stroke>\r\n                                                <vl-style-fill color=\"rgba(255,255,255,0.0)\"></vl-style-fill>\r\n                                                <vl-style-text :text=\"parcel.properties.name+'\\n'+parcel.properties.area\" font=\"14px IBM Plex Sans\">\r\n                                                    <vl-style-fill color=\"white\"></vl-style-fill>\r\n                                                    <vl-style-stroke color=\"black\" :width=\"3\"></vl-style-stroke>\r\n                                                </vl-style-text>\r\n                                            </vl-style-box>\r\n                                        </vl-feature>\r\n                                    </vl-source-vector>\r\n                                </vl-layer-vector>\r\n                            </div>\r\n\r\n                            -->\r\n                            <vl-layer-vector>\r\n                                <vl-source-vector>\r\n                                    <vl-feature v-for=\"parcel in allParcels\" :value=\"parcel.id\" v-bind:key=\"parcel.id\">\r\n                                        <vl-geom-polygon :coordinates=\"parcel.geometry.coordinates\" :indent=\"parcel.id\" :ref=\"parcel.id+'parcela'\"></vl-geom-polygon>\r\n                                        <vl-style-box>\r\n                                            <vl-style-stroke color=\"rgba(0, 0, 255, 1)\" :width=\"2\"></vl-style-stroke>\r\n                                            <vl-style-fill color=\"rgba(255,255,255,0.0)\"></vl-style-fill>\r\n                                            <vl-style-text :text=\"parcel.properties.name+'\\n'+parcel.properties.area.toFixed(2)+'Ha' +'/'+metricaparcela(parcel.properties.area)+'Acre'\" font=\"14px IBM Plex Sans\">\r\n                                                <vl-style-fill color=\"white\"></vl-style-fill>\r\n                                                <vl-style-stroke color=\"black\" :width=\"3\"></vl-style-stroke>\r\n                                            </vl-style-text>\r\n                                        </vl-style-box>\r\n                                    </vl-feature>\r\n                                </vl-source-vector>\r\n                            </vl-layer-vector>\r\n                            <!-- Parcela -->\r\n                            <vl-layer-vector>\r\n                                <vl-source-vector ident=\"drawTarget\" :features.sync=\"featuress\">\r\n                                    <vl-feature>\r\n                                        <vl-geom-polygon :coordinates=\"coordenadasParcel\" indent=\"poligono\" ref=\"parcela\"></vl-geom-polygon>\r\n                                        <vl-style-box>\r\n                                            <vl-style-stroke :color=\"colorParcela\" :width=\"3\"></vl-style-stroke>\r\n                                            <vl-style-fill color=\"rgba(255,255,255,0.5)\"></vl-style-fill>\r\n                                            <vl-style-text :text=\"valueName+'\\n'+metric + metricName\"></vl-style-text>\r\n                                        </vl-style-box>\r\n                                    </vl-feature>\r\n                                </vl-source-vector>\r\n                            </vl-layer-vector>\r\n                            <vl-interaction-draw source=\"drawTarget\" type=\"Polygon\" v-if=\"dibujaPoligono\" @drawend=\"terminado\" :key.sync=\"refreshDibujo\" >\r\n                                \r\n                            </vl-interaction-draw>\r\n                            <vl-interaction-modify source=\"drawTarget\" v-if=\"ModificaPoligono\" @modifyend=\"editado\">\r\n                                \r\n                            </vl-interaction-modify>\r\n                            <!--<vl-interaction-snap source=\"drawTarget\" :priority=\"10\"></vl-interaction-snap>-->\r\n                            <vl-feature>\r\n                                <vl-geom-point :coordinates.sync=\"coordenadasPunto\"></vl-geom-point>\r\n                                <vl-style-box>\r\n                                    <vl-style-icon src=\"https://d4smartfarming.smartbits-es.com/imgMail/icono-mapa.png\"></vl-style-icon>\r\n                                </vl-style-box>\r\n                            </vl-feature>\r\n\r\n                            \r\n                        </vl-map>\r\n                        <div id=\"div_buscador\">\r\n                            <gmap-autocomplete @place_changed=\"setPlace\"  class=\"form-control bx--text-input\" :placeholder=\"$t('parcelas.ubicacion')\" style=\"with: 100%\">\r\n                            </gmap-autocomplete>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div>\r\n            \r\n        </template>\r\n        <template v-if=\"false\" slot=\"primary-button\" v-bind:disabled=\"true\">{{$t(\"parcelas.guardar\")}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport proj4 from 'proj4'\r\nimport { getArea } from 'ol/sphere';\r\nexport default {\r\n    name: \"EditarParcel2\",\r\n    props: {\r\n        userSeleccionado: String\r\n    },\r\n    data () {\r\n        return{\r\n            erorCompaGeoloc: '',\r\n            mostrarIconErrGeoloc: '',\r\n            metricName: 'Ha',\r\n            //SIGPAC DIRECTO\r\n            vProv: '',\r\n            vMun: '',\r\n            vAgre: '',\r\n            vZona: '',\r\n            vPol: '',\r\n            vPar: '',\r\n            vRec: '',\r\n            verErrorBusq: false,\r\n            //SIGPPAC CONFIGURATION\r\n            placeholderComunidad: this.$t('parcelas.comunidad'),\r\n            labelComunidad: this.$t('parcelas.comunidad_sel'),\r\n            comunidades: Array,\r\n            \r\n            visibleProv: false,\r\n            placeholderProv: this.$t('parcelas.provincia'),\r\n            labelProv: this.$t('parcelas.provincia_sel'),\r\n            provincias: Array,\r\n            provinciaSel: 0,\r\n\r\n            visibleMun: false,\r\n            placeholderMun: this.$t('parcelas.municipio'),\r\n            labelMun: this.$t('parcelas.municipio_sel'),\r\n            municipios: Array,\r\n            municipioSel: 0,\r\n\r\n            visibleAgre: false,\r\n            placeholderAgre: this.$t('parcelas.agregado'),\r\n            labelAgre: this.$t('parcelas.agregado_sel'),\r\n            agregados: Array,\r\n            agregadoSel: 0,\r\n\r\n            visibleZona: false,\r\n            placeholderZona: this.$t('parcelas.zona'),\r\n            labelZona: this.$t('parcelas.zona_sel'),\r\n            zonas: Array,\r\n            zonaSel: 0,\r\n\r\n            visiblePol: false,\r\n            placeholderPol: this.$t('parcelas.poligono'),\r\n            labelPol: this.$t('parcelas.poligono_sel'),\r\n            poligonos: Array,\r\n            poligonoSel: 0,\r\n\r\n            visiblePar: false,\r\n            placeholderPar: this.$t('parcelas.parcela'),\r\n            labelPar: this.$t('parcelas.parcela_sel'),\r\n            parcelas: Array,\r\n            parcelaSel: 0,\r\n\r\n            visibleRec: false,\r\n            placeholderRec: this.$t('parcelas.recinto'),\r\n            labelRec: this.$t('parcelas.recinto_sel'),\r\n            recintos: Array,\r\n            recintoSel: 0,\r\n\r\n            //\r\n            selectedParcelList: 0,\r\n            colorParcela: 'green',\r\n            //BTN GUARDADO\r\n            kindSave: \"primary\",\r\n            sizeSave: \"\",\r\n            disabledSave: false,    \r\n            featuress: [],\r\n            title_card: \"\",\r\n            subtitle_card: \"\",\r\n            closeAriaLabel: \"Close\",\r\n            use_label: true,\r\n            use_title: true,\r\n            use_content: true,\r\n            size: 'lg',\r\n            use_primaryButton: true,\r\n            primaryButtonDisabled: false,\r\n            autoHideOff: false,\r\n            //input-name\r\n            labelName: this.$t('parcelas.parcel_name'),\r\n            valueName: '',\r\n            disabledName: false,\r\n            inputTypeName: 'text',\r\n            placeholderName: this.$t('parcelas.place_name'),\r\n            invalidMessageName: '',\r\n            \r\n            //input-email\r\n            labelDesc: this.$t('parcelas.parcel_descrip'),\r\n            valueDesc: '',\r\n            disabledDesc: false,\r\n            inputTypeDesc: 'text',\r\n            placeholderDesc: this.$t('parcelas.place_descrip'),\r\n            invalidMessageDesc: '',\r\n            //BingMap Config\r\n            apiKeyBing: this.$apiKeyBing,\r\n            imagerySetBing: `AerialWithLabels`,\r\n            maxZoomBing: 20,\r\n            zoom: 15,\r\n            center:  [0 , 0],\r\n            coordinates: [0 , 0],\r\n            coordenadasParcel: [ [ [ 0, 0 ], [ 0, 0 ], [ 0, 0 ], [ 0, 0 ], [ 0, 0 ], [ 0, 0 ] ] ],\r\n            parcel: Array(),\r\n            dibujaPoligono: false,\r\n            //GUARDADO DE DATOS\r\n            area: 0,\r\n            poligonObjecto: '',\r\n            verErrorDraw: false,\r\n            coordinatesPoligono: [],\r\n            allFeatures: Array(),\r\n            allParcels: Array(),\r\n            refreshDibujo: 0,\r\n            ModificaPoligono: true,\r\n            ErrorDraw: '',\r\n            coordenadasPunto: [0, 0],\r\n            \r\n        }\r\n    },\r\n    methods: {\r\n        metricaparcela(area){\r\n            const onehecttoAcre = 2.4710538146717\r\n            const acre = onehecttoAcre * area\r\n            this.metric = \"Acre\"\r\n            return  acre.toFixed(2)\r\n        \r\n        },\r\n        cargaLocalizacionActual(){\r\n            if(!(\"geolocation\" in navigator)) {\r\n                this.erorCompaGeoloc =  this.$t('map.loc_no_disponible')\r\n                this.mostrarIconErrGeoloc = true\r\n                return;\r\n            }\r\n            \r\n            // get position\r\n            navigator.geolocation.getCurrentPosition(pos => {\r\n                console.info('Localizacion autorizada', pos)\r\n                this.mostrarIconErrGeoloc = false;\r\n                this.center = [pos.coords.longitude, pos.coords.latitude]\r\n            }, err => {\r\n                this.mostrarIconErrGeoloc = true\r\n                console.info('Localizacin no autorizada', err)\r\n            })\r\n        },\r\n        getEnterprise(){\r\n            if(this.$route.query.enterprise){\r\n                    const path = `${this.$apiURL}/enterprises/${this.$route.query.enterprise}/?size=1000000000&page=1`;\r\n                    axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n                    axios\r\n                        .get(path)\r\n                        .then(response => {\r\n                            this.enterprise = response.data\r\n                            console.log(response.data);\r\n                            console.log(this.enterprise.type_metric);\r\n                            this.metric = this.enterprise.type_metric;\r\n                            this.actionShownMap();\r\n                        })\r\n                        .catch(error => {\r\n                            console.warn(error);\r\n                        });\r\n            }\r\n        },\r\n        bucardorSigpacDirect(){\r\n            const arrSel = [this.vProv, this.vMun, this.vAgre, this.vZona, this.vPol, this.vPar, this.vRec]\r\n            const arrURI = ['provinciabox', 'municipiobox', 'agregadobox', 'zonabox', 'poligonobox', 'parcelabox', 'recintobox']\r\n            let cont = -1\r\n            console.info(arrSel)\r\n            let uriParams = ``\r\n            arrSel.map(value=>{\r\n                if(value){\r\n                    cont ++\r\n                    uriParams += `/${value}`\r\n                }\r\n            })\r\n            if(uriParams == '')\r\n                return false\r\n            const path = `https://sigpac.mapa.gob.es/fega/ServiciosVisorSigpac/query/${arrURI[cont]+uriParams}.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                const lat = (response.data.features[0].properties.x1 + response.data.features[0].properties.x2) / 2\r\n                const long = (response.data.features[0].properties.y1 + response.data.features[0].properties.y2) / 2\r\n                this.coordenadasPunto = [lat, long] \r\n                this.center = [lat, long]\r\n                this.zoom = 18\r\n                this.verErrorBusq = false\r\n            })\r\n            .catch(() => {\r\n                this.verErrorBusq = true\r\n            })\r\n\r\n        },\r\n        cargarComunidades(){\r\n            \r\n            const path = `https://sigpac.mapa.es/fega/ServiciosVisorSigpac/query/comunidades.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.comunidades = response.data.features\r\n            })\r\n            .catch(error => {\r\n                console.warn(error.response)\r\n            })\r\n        },\r\n        actionChangeComunidades(comunidad){\r\n            const path = `https://sigpac.mapa.es/fega/ServiciosVisorSigpac/query/provincias/${comunidad}.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.placeholderComunidad = comunidad\r\n                const comunidadSelec = comunidad\r\n                this.comunidades.forEach(comunidad => {\r\n                    if(comunidad.properties.codigo == comunidadSelec){\r\n                        this.placeholderComunidad = comunidad.properties.nombre\r\n                    }\r\n                })\r\n                this.provincias = response.data.features\r\n                this.visibleProv = true\r\n            })\r\n            .catch(error => {\r\n                console.warn(error.response)\r\n            })\r\n        },\r\n        actionChangeProv(provincia){\r\n            const path = `https://sigpac.mapa.es/fega/ServiciosVisorSigpac/query/municipios/${provincia}.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.provinciaSel = provincia\r\n                \r\n                this.placeholderProv = provincia\r\n                this.provincias.forEach(provincia => {\r\n                    if(provincia.properties.codigo == this.provinciaSel){\r\n                        this.placeholderProv = provincia.properties.nombre\r\n                    }\r\n                })\r\n                \r\n                this.municipios = response.data.features\r\n                this.visibleMun = true\r\n            })\r\n            .catch(error => {\r\n                console.warn(error.response)\r\n            })\r\n        },\r\n        actionChangeMun(municipio){\r\n            const path = `https://sigpac.mapa.es/fega/ServiciosVisorSigpac/query/agregados/${this.provinciaSel}/${municipio}.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.placeholderMun = municipio\r\n                let unique = [...new Set(response.data.features.map(x => x.properties.codigo))]; \r\n                this.agregados = unique\r\n                this.visibleAgre = true\r\n                this.municipioSel = municipio\r\n                this.placeholderMun = municipio\r\n                this.municipios.forEach(municipio => {\r\n                    if(municipio.properties.codigo == this.municipioSel){\r\n                        this.placeholderMun = municipio.properties.nombre\r\n                    }\r\n                })\r\n                if(this.agregados.length == 1){\r\n                    this.actionChangeAgre(this.agregados[0])\r\n                    this.placeholderAgre = this.agregados[0]\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.warn(error)\r\n            })\r\n        },\r\n        actionChangeAgre(agregado){\r\n            const path = `https://sigpac.mapa.es/fega/ServiciosVisorSigpac/query/zonas/${this.provinciaSel}/${this.municipioSel}/${agregado}.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.placeholderAgre = agregado\r\n                let unique = [...new Set(response.data.features.map(x => x.properties.codigo))]; \r\n                this.zonas = unique\r\n                this.visibleZona = true\r\n                this.agregadoSel = agregado \r\n                if(this.agregados.length == 1){\r\n                    this.actionChangeZona(this.agregados[0])\r\n                    this.placeholderAgre = this.agregados[0]\r\n                }\r\n                \r\n            })\r\n            .catch(error => {\r\n                console.warn(error)\r\n            })\r\n        },\r\n        actionChangeZona(zona){\r\n            const path = `https://sigpac.mapa.es/fega/ServiciosVisorSigpac/query/poligonos/${this.provinciaSel}/${this.municipioSel}/${this.agregadoSel}/${zona}.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.zonaSel = zona\r\n                this.placeholderZona = zona\r\n                this.poligonos = response.data.features\r\n                this.visiblePol = true\r\n            })\r\n            .catch(error => {\r\n                console.warn(error.response)\r\n            })\r\n        },\r\n        actionChangePol(poligono){\r\n            const path = `https://sigpac.mapa.es/fega/ServiciosVisorSigpac/query/parcelas/${this.provinciaSel}/${this.municipioSel}/${this.agregadoSel}/${this.zonaSel}/${poligono}.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.poligonoSel = poligono\r\n                this.placeholderPol = poligono\r\n                this.parcelas = response.data.features\r\n                this.visiblePar = true\r\n            })\r\n            .catch(error => {\r\n                console.warn(error.response)\r\n            })\r\n        },\r\n        actionChangePar(parcela){\r\n            let parcelaCOD = 0\r\n            this.parcelas.forEach(parcelaMap =>{\r\n                if(parcelaMap.properties.dn_pk == parcela){\r\n                    parcelaCOD = parcelaMap.properties.codigo\r\n                }\r\n            })\r\n            const path = `https://sigpac.mapa.es/fega/ServiciosVisorSigpac/query/recintos/${this.provinciaSel}/${this.municipioSel}/${this.agregadoSel}/${this.zonaSel}/${this.poligonoSel}/${parcelaCOD}.geojson`\r\n            delete axios.defaults.headers.common[\"Authorization\"];\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.parcelaSel = parcela\r\n                this.placeholderPar = parcelaCOD\r\n                this.recintos = response.data.features\r\n                this.visibleRec = true\r\n            })\r\n            .catch(error => {\r\n                console.warn(error.response)\r\n            })\r\n        },\r\n\r\n        actionChangeRec(recintoSell){\r\n            this.recintos.forEach(recinto => {\r\n                if(recinto.properties.dn_pk == recintoSell){\r\n                    const lat = (recinto.properties.x1 + recinto.properties.x2) / 2\r\n                    const long = (recinto.properties.y1 + recinto.properties.y2) / 2\r\n                    this.coordenadasPunto = [lat, long] \r\n                    this.center = [lat, long]\r\n                    this.zoom = 18\r\n                }\r\n            })\r\n        },\r\n\r\n        setPlace(place){\r\n            //const lat = (place.geometry.viewport.Za.i + place.geometry.viewport.Za.j) / 2\r\n            //const long = (place.geometry.viewport.Va.i + place.geometry.viewport.Va.j) / 2\r\n            \r\n            //this.center = [long, lat]\r\n            this.center = [place.geometry.location.lng(), place.geometry.location.lat()]\r\n            this.zoom = 15\r\n        },\r\n        openModal(userSelec) {\r\n            this.$refs.editarRolForm.show();\r\n            this.verErrorDraw = false\r\n            this.invalidMessageName = \"\"\r\n            this.showPassword = false\r\n            this.title_card = this.$t('parcelas.parcel_edit')\r\n            this.subtitle_card = this.$t('parcelas.parcel_edit')\r\n            this.userSeleccionado = userSelec;\r\n            this.getEnterprise();\r\n            this.actionShownMap();\r\n                \r\n        },\r\n        terminado(p){\r\n            this.dibujaPoligono = false\r\n            this.area = (Math.round((getArea(p.feature.getGeometry())/ 10000) * 10000) / 10000)\r\n            this.coordinatesBuenas(p.feature.getGeometry().getCoordinates())\r\n            this.verErrorDraw = false\r\n        },\r\n        editado(p){\r\n            this.coordinatesEditadas = p.features.array_[0].getGeometry().getCoordinates()\r\n            this.area = (Math.round((getArea(p.features.array_[0].getGeometry()) / 10000) * 10000) / 10000)\r\n            if(this.userSeleccionado){\r\n                this.coordinatesBuenas(this.coordinatesEditadas)\r\n            }\r\n            \r\n            this.verErrorDraw = false\r\n        },\r\n        coordinatesBuenas(ArrayCoor){\r\n            if(this.userSeleccionado){\r\n                this.ModificaPoligono = true\r\n            }else{\r\n                this.ModificaPoligono = false\r\n            }\r\n            \r\n            var source = new proj4.Proj('EPSG:3785'); \r\n            var dest = new proj4.Proj('EPSG:4326'); \r\n            let newCenter = Array;\r\n            let polygonObject= 'POLYGON(('\r\n            for (var i = 0; i < ArrayCoor[0].length; i++) {\r\n                newCenter = proj4(source, dest, [ArrayCoor[0][i][0], ArrayCoor[0][i][1]])\r\n                this.coordinatesPoligono.push([newCenter[0] , newCenter[1]])\r\n                polygonObject += newCenter[0]+' '+newCenter[1]\r\n                if(i != (ArrayCoor[0].length-1)){\r\n                    polygonObject += ', '\r\n                }\r\n            }\r\n            polygonObject += '))';\r\n            this.poligonObjecto = polygonObject\r\n            \r\n            let path = `${this.$apiURL}/parcel_filter/?enterprise_id=${this.$route.query.enterprise}&polygon=${polygonObject}`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                if(response.data.features.length){\r\n                    this.errorDraw = ''\r\n                    this.verErrorDraw = false\r\n                    response.data.features.forEach(parcela =>{\r\n                        if(this.userSeleccionado != parcela.id){\r\n                            this.errorDraw += `\"${parcela.properties.name}\"  `\r\n                            if(!this.userSeleccionado){\r\n                                this.featuress = []\r\n                                this.dibujaPoligono = true\r\n                            }\r\n                        }\r\n                    })\r\n                    if(this.errorDraw){\r\n                        this.verErrorDraw = true\r\n                        this.disabledSave = true\r\n                        this.errorDraw = `${this.$t('parcelas.parcela_solapada_con')}   ${this.errorDraw}`\r\n                        this.colorParcela = 'red'\r\n                    }else{\r\n                        this.compruebaParcelaSimple(polygonObject)\r\n                    }\r\n                }else{\r\n                    this.compruebaParcelaSimple(polygonObject)\r\n                }\r\n            })\r\n            .catch(error =>{ \r\n                console.info(error.data)\r\n            })\r\n        },\r\n        compruebaParcelaSimple(polygonObject){\r\n            let path = `${this.$apiURL}/parcel_valid/?polygon=${polygonObject}`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response=>{\r\n                if(response.data == \"False\"){\r\n                    this.verErrorDraw = true\r\n                    this.disabledSave = true\r\n                    this.errorDraw = `${this.$t('parcelas.parcela_solapada_si')}`\r\n                    this.colorParcela = 'red'\r\n                    if(!this.userSeleccionado){\r\n                        this.featuress = []\r\n                        this.dibujaPoligono = true\r\n                    }\r\n                }else{\r\n                    this.verErrorDraw = false\r\n                    this.disabledSave = false\r\n                    this.colorParcela = 'green'\r\n                    this.disabledSave = false\r\n                    this.compruebaLimites()\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.warn(error)\r\n            })\r\n        },\r\n        compruebaLimites(){\r\n            let path = `${this.$apiURL}/enterprises_except/${this.$route.query.enterprise}/?parcel=${this.userSeleccionado}`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response =>{\r\n                const porcentaje_ant = (parseFloat(this.$parent.total_hectares_enterprise) / parseFloat(response.data.hectares_available)  * 100)\r\n                const porcentaje_now = ((parseFloat(response.data.parcels.area__sum)+parseFloat(this.area)) / parseFloat(response.data.hectares_available) * 100)\r\n                if(parseFloat(porcentaje_ant) < parseFloat(porcentaje_now)){\r\n                    if(porcentaje_now > 100.00){\r\n                        this.verErrorDraw = true\r\n                        this.disabledSave = true\r\n                        this.errorDraw = `${this.$t('parcelas.parcela_limite_area')}`\r\n                        this.colorParcela = 'red'\r\n                        if(!this.userSeleccionado){\r\n                            this.featuress = []\r\n                            this.dibujaPoligono = true\r\n                        }\r\n                    }else{\r\n                        this.verErrorDraw = false\r\n                        this.disabledSave = false\r\n                        this.colorParcela = 'green'\r\n                        this.disabledSave = false\r\n                    }\r\n                }else{\r\n                    this.verErrorDraw = false\r\n                    this.disabledSave = false\r\n                    this.colorParcela = 'green'\r\n                    this.disabledSave = false\r\n                }\r\n            })\r\n        },\r\n        actionPrimary(){\r\n            if(!this.verErrorDraw){\r\n                let path = ''\r\n                \r\n                if(this.userSeleccionado){\r\n                    if(!this.poligonObjecto){\r\n                        this.coordinatesBuenas(this.$refs['parcela'].$geometry.getCoordinates())\r\n                    }\r\n                    path = `${this.$apiURL}/parcels/${this.userSeleccionado}/`;\r\n                    axios\r\n                    .put(path, {\r\n                        name: this.$refs.inputName.$refs.input.value,\r\n                        description: this.$refs.inputDesc.$refs.input.value,\r\n                        polygon: this.poligonObjecto,\r\n                        area: this.area,\r\n                        enterprise: (this.$route.query.enterprise) ? this.$route.query.enterprise : sessionStorage.getItem('enterprise'),\r\n                        user_updated: sessionStorage.getItem('user')\r\n                    })\r\n                    .then(response => {\r\n                        this.compruebaParcelas(response.data.id);\r\n                    })\r\n                    .catch(error => {\r\n                        console.info(error);\r\n                    \r\n                    });\r\n                }else{\r\n                    path = `${this.$apiURL}/parcels/`;\r\n                    axios\r\n                    .post(path, {\r\n                        name: this.$refs.inputName.$refs.input.value,\r\n                        description: this.$refs.inputDesc.$refs.input.value,\r\n                        polygon: this.poligonObjecto,\r\n                        area: this.area,\r\n                        enterprise: (this.$route.query.enterprise) ? this.$route.query.enterprise : sessionStorage.getItem('enterprise'),\r\n                        user_created: sessionStorage.getItem('user')\r\n                    })\r\n                    .then(response => {\r\n                        this.compruebaParcelas(response.data.id);\r\n                    })\r\n                    .catch(error => {\r\n                        if (error.response.data.name)\r\n                            this.invalidMessageName = error.response.data.name[0];\r\n                        if (error.response.data.polygon)\r\n                            this.verErrorDraw = true\r\n                            this.errorDraw = this.$t('parcelas.parcela_limite')\r\n                        \r\n                    });   \r\n                }\r\n            }\r\n            \r\n        },\r\n        compruebaParcelas(parcelaid){    \r\n            let path = `${this.$apiURL}/enterprises/${this.$route.query.enterprise}/`;\r\n            /*\r\n            if(sessionStorage.getItem('is_superuser') == 'true' || sessionStorage.getItem('is_systemadmin') == 'true'){\r\n                path = `${this.$apiURL}/parcels/`;\r\n            }\r\n            */\r\n            var allCoordinates = Array();\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                \r\n                response.data.parcels.features.forEach(element => {\r\n                    allCoordinates.push(element.geometry.coordinates)\r\n                });\r\n            \r\n                console.info(this.coordinatesPoligono, parcelaid)      \r\n                const instanceIns = axios.create({\r\n                    baseURL: this.$sentinelURL\r\n                })\r\n                const configIns = {\r\n                    headers: {\r\n                        'Content-Type': 'application/json;charset=utf-8',\r\n                        'Authorization': \"Bearer \"+localStorage.getItem('ApiAccessToken')\r\n                    }\r\n                }\r\n                const bodyIns = JSON.stringify({\r\n                        'name': `${this.$route.query.enterprise}`,\r\n                        \"additionalData\": {\r\n                            \"showLogo\": false,\r\n                            \"showWarnings\": false,\r\n                            \"imageQuality\": 90,\r\n                            \"disabled\": false\r\n                        },\r\n                        'areaOfInterest': {\r\n                            'type': \"MultiPolygon\",\r\n                            'coordinates': allCoordinates\r\n                            ,\"crs\": {\r\n                                \"type\": \"name\",\r\n                                \"properties\": {\r\n                                    \"name\": \"urn:ogc:def:crs:EPSG::4326\"\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                instanceIns.put(\"/configuration/v1/wms/instances/\"+sessionStorage.getItem('sI'), bodyIns, configIns).then((resp) => {\r\n                    console.info(`respuesta sentinel`, resp)\r\n                    if(resp.status == 200 || resp.statusText == 'OK'){\r\n                        this.$parent.getUsers();\r\n                        this.$refs.editarRolForm.hide();\r\n                        this.$parent.componentKey += 1;\r\n                        this.coordenadasParcel = ''\r\n                        this.$parent.mensajeAlerta = this.$t('parcelas.parcela_guardada')\r\n                        this.$parent.tipoAlerta = 'success'\r\n                        this.$parent.$refs.alertaGeneral.verAlerta()\r\n                    }else{\r\n                        this.$parent.getUsers();\r\n                        this.$refs.editarRolForm.hide();\r\n                        this.$parent.componentKey += 1;\r\n                        this.coordenadasParcel = ''\r\n                        this.$parent.mensajeAlerta = this.$t('parcelas.parcel_guardada_error_sent')\r\n                        this.$parent.tipoAlerta = 'error'\r\n                        this.$parent.$refs.alertaGeneral.verAlerta()\r\n                    }\r\n                    \r\n                }).catch(error => {\r\n                    console.info(`error`, error)\r\n                    this.$parent.getUsers();\r\n                    this.$refs.editarRolForm.hide();\r\n                    this.$parent.componentKey += 1;\r\n                    this.coordenadasParcel = ''\r\n                    this.$parent.mensajeAlerta = this.$t('parcelas.parcel_guardada_error_sent')\r\n                    this.$parent.tipoAlerta = 'error'\r\n                    this.$parent.$refs.alertaGeneral.verAlerta()\r\n                })\r\n                \r\n                \r\n            })\r\n        },\r\n        actionShown(){\r\n            this.coordenadasParcel = ''\r\n            this.$parent.componentKey += 1;\r\n        },\r\n        /*\r\n        metricaparcela(propiedades){\r\n            const area = propiedades.area\r\n            const path = `${this.$apiURL}/enterprises/${propiedades.enterprise}/?size=1000000000&page=1`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n                .get(path)\r\n                .then(response => {\r\n                    if(response.data.type_metric == \"Acre\"){\r\n                        const onehecttoAcre = 2.4710538146717\r\n                        const acre = onehecttoAcre * area\r\n                        this.metricName = \"Acre\"\r\n                        console.log(acre.toFixed(4));\r\n                        return  acre.toFixed(4)\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.warn(error);\r\n                });\r\n            \r\n            return area\r\n        \r\n        },\r\n        */\r\n        \r\n        actionShownMap(){\r\n            \r\n            let path = `${this.$apiURL}/parcels/${this.userSeleccionado}/`;\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n                .get(path)\r\n                .then(response => {\r\n                    \r\n                    this.parcel = response.data\r\n                    this.valueName = response.data.properties.name;\r\n                    this.valueDesc = response.data.properties.description;\r\n                    this.geometry = response.data;\r\n                    this.area = response.data.properties.area;\r\n                    this.coordenadasParcel = this.geometry.geometry.coordinates\r\n                    let coordenadasGeometricas = ''\r\n                    coordenadasGeometricas = this.$refs['parcela'].$geometry.extent_\r\n                    const ex = coordenadasGeometricas[0] + (coordenadasGeometricas[2]-coordenadasGeometricas[0])/2;\r\n                    const ye = coordenadasGeometricas[1] + (coordenadasGeometricas[3]-coordenadasGeometricas[1])/2;\r\n                    var source = new proj4.Proj('EPSG:3785'); \r\n                    var dest = new proj4.Proj('EPSG:4326');  \r\n                    const newCenter = proj4(source, dest, [ex, ye])\r\n                    this.center = [newCenter[0], newCenter[1]]\r\n                    this.zoom = 15\r\n                    this.dibujaPoligono = false\r\n                    console.info(response.data)\r\n                    //this.metric= this.metricaparcela(response.data.properties);\r\n                })\r\n                .catch( error => {\r\n                    console.info('entra')\r\n                    console.warn(error)\r\n                    this.disabledSave = true\r\n                    this.showPassword = true\r\n                    this.title_card = this.$t('parcelas.parcel_nueva')\r\n                    this.subtitle_card = this.$t('parcelas.parcel_nueva')\r\n                    this.valueName = '';\r\n                    this.valueDesc = '';\r\n                    this.coordenadasParcel = [0,0]\r\n                    this.center = [0, 0]\r\n                    this.zoom = 4\r\n                    this.dibujaPoligono = true\r\n                });\r\n            path = `${this.$apiURL}/parcel_enterprise/${this.$route.query.enterprise}/`;\r\n            /*\r\n            if(sessionStorage.getItem('is_superuser') == 'true' || sessionStorage.getItem('is_systemadmin') == 'true'){\r\n                path = `${this.$apiURL}/parcels/`;\r\n            }\r\n            */\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                this.allParcels=response.data.features\r\n                if(!this.userSeleccionado){\r\n                    const lastItem = this.allParcels[this.allParcels.length - 1]\r\n                    this.selectedParcelList = lastItem.id\r\n                    setTimeout(() => {\r\n                        this.actionChangeParcels(this.selectedParcelList)\r\n                    }, 1000);\r\n                    \r\n                }else{\r\n                    this.selectedParcelList = this.userSeleccionado\r\n                }\r\n            })\r\n        \r\n        \r\n        },\r\n        actionChangeParcels(valor){\r\n            const coordenadasGeometricas = this.$refs[valor+'parcela'][0].$geometry.extent_\r\n            const ex = coordenadasGeometricas[0] + (coordenadasGeometricas[2]-coordenadasGeometricas[0])/2;\r\n            const ye = coordenadasGeometricas[1] + (coordenadasGeometricas[3]-coordenadasGeometricas[1])/2;\r\n            var source = new proj4.Proj('EPSG:3785'); \r\n            var dest = new proj4.Proj('EPSG:4326');  \r\n            const newCenter = proj4(source, dest, [ex, ye])\r\n            this.center = [newCenter[0], newCenter[1]]\r\n            this.zoom = 16\r\n        },\r\n        \r\n        \r\n    },\r\n    mounted(){\r\n        const path_lang = `${this.$apiURL}/profiledata/${this.$session.get('user')}/`;\r\n        axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n        axios\r\n        .get(path_lang)\r\n        .then(response =>{\r\n            this.$root.$i18n.locale = response.data.language\r\n        })\r\n        this.$refs.comunidadesSelect.$el.firstChild.style.display = 'flex'\r\n        this.$refs.provinciasSelect.$el.firstChild.style.display = 'flex'\r\n        this.$refs.munSelect.$el.firstChild.style.display = 'flex'\r\n        this.$refs.agreSelect.$el.firstChild.style.display = 'flex'\r\n        this.$refs.zonaSelect.$el.firstChild.style.display = 'flex'\r\n        this.$refs.polSelect.$el.firstChild.style.display = 'flex'\r\n        this.$refs.parSelect.$el.firstChild.style.display = 'flex'\r\n        this.$refs.recSelect.$el.firstChild.style.display = 'flex'\r\n\r\n        this.$refs.editarRolForm.$el.firstChild.style.width = '98%'\r\n        this.$refs.editarRolForm.$el.firstChild.style.height = '95%'\r\n        this.$refs.editarRolForm.$el.firstChild.style[\"max-with\"] = '100%'\r\n        this.$refs.editarRolForm.$el.firstChild.style[\"max-height\"] = '100%'\r\n        \r\n        this.$refs.editarRolForm.$el.firstChild.childNodes[2].style[\"padding-right\"] = '1%'\r\n        this.$refs.editarRolForm.$el.firstChild.childNodes[2].style[\"margin-bottom\"] = '1%'\r\n        this.$refs.editarRolForm.$el.firstChild.childNodes[2].style[\"height\"] = '95%'\r\n        this.cargarComunidades()\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    #div_buscador{\r\n        width: 50vw;\r\n        position: fixed;\r\n        padding: 10px;\r\n        margin-top: 4px;\r\n        margin-left: 40px;\r\n        top: 79px;\r\n\r\n    }\r\n    .errorDraw{\r\n        color: #da1e28;\r\n        font-weight: 400;\r\n        font-size: 12px;\r\n    }\r\n    #row_box, #row_box >div{\r\n        height: 100%;\r\n    }\r\n    #div_map{\r\n        height: 100%;\r\n        \r\n    }\r\n    .mapa{\r\n        height: 100% !important;\r\n        color: white;\r\n    }\r\n    #sentinelLayersList{\r\n        overflow: scroll;\r\n        height: 540px;\r\n    }\r\n    .pac-container{\r\n        z-index: 10000!important;\r\n    }\r\n</style>\r\n"]}]}