{"remainingRequest":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\EditarInforme.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\src\\components\\EditarInforme.vue","mtime":1681217492538},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681731147886},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1681731156386},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681731147886},{"path":"C:\\Users\\respana\\source\\D4SF\\d4sffrontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1681731148945}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJVbmlmaWNhckluZm9ybWUiLA0KICAgIHByb3BzOiB7DQogICAgICAgIGluZm9ybWVzU2VsZWNjaW9uYWRvczogQXJyYXkoKSwNCiAgICAgICAgaGlzdG9yaWNvOiBBcnJheSgpLA0KICAgICAgICBhbGxQYXJjZWxzT2ZFbnRlcnByaXNlczogQXJyYXkoKQ0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIHRpdGxlX2NhcmQ6IGBNb2RpZmljYXIgSW5mb3JtZWAsDQogICAgICAgICAgICB0ZXh0X2lucHV0X2xhYmVsOiBgTm9tYnJlIGRlbCBJbmZvcm1lYCwNCiAgICAgICAgICAgIG5vbWJyZUluZm9ybWVOZXc6ICcnLA0KICAgICAgICAgICAgYWxpYXM6IGBgLA0KICAgICAgICAgICAgcGFyY2VsYTogT2JqZWN0KCksDQogICAgICAgICAgICBtZW5zYWplQWxlcnRhOiBgYCwNCiAgICAgICAgICAgIHRpcG9BbGVydGE6IGBlcnJvcmANCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBvcGVuTW9kYWwoKXsNCiAgICAgICAgICAgIGxldCBwYXRoID0gYCR7dGhpcy4kYXBpVVJMfS92ZXJfaGlzdC8ke3RoaXMuaW5mb3JtZXNTZWxlY2Npb25hZG9zWzBdfS9gDQogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gIkJlYXJlciAiK3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFwaUFjY2VzcyIpDQogICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgLmdldChwYXRoKQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGlmKCFyZXNwb25zZS5kYXRhLmFsaWFzKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJjZWxhID0gdGhpcy5oaXN0b3JpY28uZmlsdGVyKGluZm9ybWUgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW5mb3JtZS5pZCA9PSB0aGlzLmluZm9ybWVzU2VsZWNjaW9uYWRvc1swXSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub21icmVJbmZvcm1lTmV3ID0gKGluZm9ybWUudGlwbyA9PSAxKSA/IHRoaXMucGFyY2VsYU5hbWUoaW5mb3JtZS5wYXJjZWxhKSA6IGluZm9ybWUucGFyY2VsYQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5vbWJyZUluZm9ybWVOZXcgPSByZXNwb25zZS5kYXRhLmFsaWFzDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PnsNCiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy5FZGl0YXJJbmZvcm1lRm9ybS5zaG93KCkNCiAgICAgICAgfSwNCiAgICAgICAgcGFyY2VsYU5hbWUoaWQpew0KICAgICAgICAgICAgY29uc3QgcGFyY2VsYVNlbGVjdCA9IHRoaXMuYWxsUGFyY2Vsc09mRW50ZXJwcmlzZXMuZmlsdGVyKChwYXJjZWxhKT0+ew0KICAgICAgICAgICAgICAgIHJldHVybiBwYXJjZWxhLmlkID09IGlkDQogICAgICAgICAgICB9KSAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYocGFyY2VsYVNlbGVjdC5sZW5ndGggPiAwKXsNCiAgICAgICAgICAgICAgICByZXR1cm4gcGFyY2VsYVNlbGVjdFswXS5wcm9wZXJ0aWVzLm5hbWUNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMucGFyY2VsYSA9IHt0aXBvOiAxfQ0KICAgICAgICAgICAgICAgIHJldHVybiAnR3LDoWZpY28gR2VuZXJhZG8gZGUgUGFyY2VsYSBFbGltaW5hZGEnDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHVuaWZpY2FJbmZvcm1lcygpew0KICAgICAgICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuJGFwaVVSTH0vdmVyX2hpc3QvJHt0aGlzLmluZm9ybWVzU2VsZWNjaW9uYWRvc1swXX0vYA0KICAgICAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIitzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhcGlBY2Nlc3MiKQ0KICAgICAgICAgICAgaWYodGhpcy5wYXJjZWxhLnRpcG8gPT0gMSl7DQogICAgICAgICAgICAgICAgYXhpb3MNCiAgICAgICAgICAgICAgICAucHV0KHBhdGgsIHsNCiAgICAgICAgICAgICAgICAgICAgYWxpYXM6IHRoaXMubm9tYnJlSW5mb3JtZU5ldw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8ocmVzcG9uc2UpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHBhcmVudC5tZW5zYWplQWxlcnRhID0gYEluZm9ybWUgR3VhcmRhZG8gY29ycmVjdGFtZW50ZWANCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcGFyZW50LnRpcG9BbGVydGEgPSAnc3VjY2VzcycNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnbWVuc2FqZUFsZXJ0YScsIGBJbmZvcm1lIEd1YXJkYWRvIGNvcnJlY3RhbWVudGVgKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd0aXBvQWxlcnRhJywgYHN1Y2Nlc3NgKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCd2ZXJBbGVydGEnKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdnZXRJbmZvcm1lc0FudCcpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuRWRpdGFySW5mb3JtZUZvcm0uaGlkZSgpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PnsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgICAgIC5wdXQocGF0aCwgew0KICAgICAgICAgICAgICAgICAgICBwYXJjZWxhOiB0aGlzLm5vbWJyZUluZm9ybWVOZXcNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKHJlc3BvbnNlKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRwYXJlbnQubWVuc2FqZUFsZXJ0YSA9IGBJbmZvcm1lIEd1YXJkYWRvIGNvcnJlY3RhbWVudGVgDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHBhcmVudC50aXBvQWxlcnRhID0gJ3N1Y2Nlc3MnDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ21lbnNhamVBbGVydGEnLCBgSW5mb3JtZSBHdWFyZGFkbyBjb3JyZWN0YW1lbnRlYCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgndGlwb0FsZXJ0YScsIGBzdWNjZXNzYCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgndmVyQWxlcnRhJykNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ2V0SW5mb3JtZXNBbnQnKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLkVkaXRhckluZm9ybWVGb3JtLmhpZGUoKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT57DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcikNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7DQogICAgICAgIGNvbnNvbGUuaW5mbygnUHJ1ZWJhcycpDQogICAgfSwNCn0NCg=="},{"version":3,"sources":["EditarInforme.vue"],"names":[],"mappings":";AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditarInforme.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <cv-modal\r\n        :auto-hide-off=\"false\"\r\n        ref=\"EditarInformeForm\"\r\n        @primary-click=\"unificaInformes\"\r\n        @secondary-click=\"$refs.unificarInformeForm.hide()\"\r\n        :close-aria-label=\"`Close`\"\r\n    >\r\n        <template v-if=\"true\" slot=\"label\"></template>\r\n        <template v-if=\"true\" slot=\"title\">{{$t('graficos.modifica_infor')}}</template>\r\n        <template v-if=\"true\" slot=\"content\" id=\"contenido\">\r\n            <div class=\"bx--grid bx--grid--condensed\">\r\n                <div class=\"bx--row\">\r\n                    <div class=\"bx--col\">\r\n                        <!-- Nombre de Informe -->\r\n                        <div class=\"bx--form-item\">\r\n                            <label for=\"text-input-Nombre\" class=\"bx--label\">{{$t('graficos.nombre_informe')}}</label>\r\n                            <input v-model=\"nombreInformeNew\" id=\"text-input-Nombre\" type=\"text\" class=\"bx--text-input\" :placeholder=\"text_input_label\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {{allParcelsOfEnterprises}}\r\n        </template>\r\n        <template v-if=\"true\" slot=\"secondary-button\">{{$t('graficos.cancelar')}}</template>\r\n        <template v-if=\"true\" slot=\"primary-button\">{{$t('graficos.guardar')}}</template>\r\n    </cv-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n    name: \"UnificarInforme\",\r\n    props: {\r\n        informesSeleccionados: Array(),\r\n        historico: Array(),\r\n        allParcelsOfEnterprises: Array()\r\n    },\r\n    data() {\r\n        return {\r\n            title_card: `Modificar Informe`,\r\n            text_input_label: `Nombre del Informe`,\r\n            nombreInformeNew: '',\r\n            alias: ``,\r\n            parcela: Object(),\r\n            mensajeAlerta: ``,\r\n            tipoAlerta: `error`\r\n        }\r\n    },\r\n    methods: {\r\n        openModal(){\r\n            let path = `${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            axios\r\n            .get(path)\r\n            .then(response => {\r\n                if(!response.data.alias){\r\n                    this.parcela = this.historico.filter(informe => {\r\n                        if(informe.id == this.informesSeleccionados[0]){\r\n                            this.nombreInformeNew = (informe.tipo == 1) ? this.parcelaName(informe.parcela) : informe.parcela\r\n                        }\r\n                    })\r\n                }else{\r\n                    this.nombreInformeNew = response.data.alias\r\n                }\r\n            })\r\n            .catch(error =>{\r\n                console.warn(error)\r\n            })\r\n            this.$refs.EditarInformeForm.show()\r\n        },\r\n        parcelaName(id){\r\n            const parcelaSelect = this.allParcelsOfEnterprises.filter((parcela)=>{\r\n                return parcela.id == id\r\n            })            \r\n            if(parcelaSelect.length > 0){\r\n                return parcelaSelect[0].properties.name\r\n            }else{\r\n                this.parcela = {tipo: 1}\r\n                return 'Gráfico Generado de Parcela Eliminada'\r\n            }\r\n        },\r\n        unificaInformes(){\r\n            const path = `${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`\r\n            axios.defaults.headers.common['Authorization'] = \"Bearer \"+sessionStorage.getItem(\"apiAccess\")\r\n            if(this.parcela.tipo == 1){\r\n                axios\r\n                .put(path, {\r\n                    alias: this.nombreInformeNew\r\n                })\r\n                .then(response => {\r\n                    console.info(response)\r\n                    this.$parent.mensajeAlerta = `Informe Guardado correctamente`\r\n                    this.$parent.tipoAlerta = 'success'\r\n                    this.$emit('mensajeAlerta', `Informe Guardado correctamente`)\r\n                    this.$emit('tipoAlerta', `success`)\r\n                    this.$emit('verAlerta')\r\n                    this.$emit('getInformesAnt')\r\n                    this.$refs.EditarInformeForm.hide()\r\n                })\r\n                .catch((error) =>{\r\n                    console.warn(error)\r\n                })\r\n            }else{\r\n                axios\r\n                .put(path, {\r\n                    parcela: this.nombreInformeNew\r\n                })\r\n                .then(response => {\r\n                    console.info(response)\r\n                    this.$parent.mensajeAlerta = `Informe Guardado correctamente`\r\n                    this.$parent.tipoAlerta = 'success'\r\n                    this.$emit('mensajeAlerta', `Informe Guardado correctamente`)\r\n                    this.$emit('tipoAlerta', `success`)\r\n                    this.$emit('verAlerta')\r\n                    this.$emit('getInformesAnt')\r\n                    this.$refs.EditarInformeForm.hide()\r\n                })\r\n                .catch((error) =>{\r\n                    console.warn(error)\r\n                })\r\n            }\r\n        }\r\n    },\r\n    mounted: function () {\r\n        console.info('Pruebas')\r\n    },\r\n}\r\n</script>"]}]}