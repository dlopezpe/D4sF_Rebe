(function(e){function a(a){for(var s,o,l=a[0],n=a[1],c=a[2],d=0,h=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);p&&p(a);while(h.length)h.shift()();return i.push.apply(i,c||[]),t()}function t(){for(var e,a=0;a<i.length;a++){for(var t=i[a],s=!0,o=1;o<t.length;o++){var n=t[o];0!==r[n]&&(s=!1)}s&&(i.splice(a--,1),e=l(l.s=t[0]))}return e}var s={},r={app:0},i=[];function o(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"b254fce1"}[e]+".js"}function l(a){if(s[a])return s[a].exports;var t=s[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.e=function(e){var a=[],t=r[e];if(0!==t)if(t)a.push(t[2]);else{var s=new Promise((function(a,s){t=r[e]=[a,s]}));a.push(t[2]=s);var i,n=document.createElement("script");n.charset="utf-8",n.timeout=120,l.nc&&n.setAttribute("nonce",l.nc),n.src=o(e);var c=new Error;i=function(a){n.onerror=n.onload=null,clearTimeout(d);var t=r[e];if(0!==t){if(t){var s=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+i+")",c.name="ChunkLoadError",c.type=s,c.request=i,t[1](c)}r[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:n})}),12e4);n.onerror=n.onload=i,document.head.appendChild(n)}return Promise.all(a)},l.m=e,l.c=s,l.d=function(e,a,t){l.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,a){if(1&a&&(e=l(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var s in e)l.d(t,s,function(a){return e[a]}.bind(null,s));return t},l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,"a",a),a},l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},l.p="/",l.oe=function(e){throw console.error(e),e};var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=a,n=n.slice();for(var d=0;d<n.length;d++)a(n[d]);var p=c;i.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"025d":function(e,a,t){"use strict";t.d(a,"a",(function(){return s})),t.d(a,"b",(function(){return r}));var s=function(){var e=this,a=e._self._c;e._self._setupProxy;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[]},"08ef":function(e,a,t){var s={"./cv-accordion/cv-accordion-item.vue":"71e2","./cv-accordion/cv-accordion-skeleton.vue":"5244","./cv-accordion/cv-accordion.vue":"7b73","./cv-aspect-ratio/cv-aspect-ratio.vue":"3288","./cv-breadcrumb/cv-breadcrumb-item.vue":"55dc","./cv-breadcrumb/cv-breadcrumb-skeleton.vue":"5cb9","./cv-breadcrumb/cv-breadcrumb.vue":"6f06","./cv-button/cv-button-set.vue":"d897","./cv-button/cv-button-skeleton.vue":"0b06","./cv-button/cv-button.vue":"b281","./cv-button/cv-icon-button.vue":"4204","./cv-checkbox/cv-checkbox-skeleton.vue":"250c","./cv-checkbox/cv-checkbox.vue":"8c9d","./cv-code-snippet/cv-code-snippet-skeleton.vue":"fe2e","./cv-code-snippet/cv-code-snippet.vue":"f090","./cv-combo-box/cv-combo-box.vue":"5785","./cv-content-switcher/cv-content-switcher-button.vue":"15b9","./cv-content-switcher/cv-content-switcher-content.vue":"fc85","./cv-content-switcher/cv-content-switcher.vue":"7938","./cv-data-table/cv-data-table-action.vue":"baa6","./cv-data-table/cv-data-table-cell.vue":"7dc9","./cv-data-table/cv-data-table-heading.vue":"63a5","./cv-data-table/cv-data-table-row.vue":"411e","./cv-data-table/cv-data-table-skeleton.vue":"6ec6","./cv-data-table/cv-data-table.vue":"5617","./cv-date-picker/cv-date-picker.vue":"c924","./cv-dropdown/cv-dropdown-item.vue":"3ace","./cv-dropdown/cv-dropdown-skeleton.vue":"60c8","./cv-dropdown/cv-dropdown.vue":"1b7e","./cv-file-uploader/cv-file-uploader-skeleton.vue":"6c41","./cv-file-uploader/cv-file-uploader.vue":"7608","./cv-form/cv-form-group.vue":"3b05","./cv-form/cv-form-item.vue":"4813","./cv-form/cv-form.vue":"b155","./cv-grid/cv-column.vue":"5fb2","./cv-grid/cv-grid.vue":"afc7","./cv-grid/cv-row.vue":"156b","./cv-inline-loading/cv-inline-loading.vue":"b55f","./cv-inline-notification/cv-inline-notification.vue":"9041","./cv-link/cv-link.vue":"e7e8","./cv-list/cv-list-item.vue":"a1d7","./cv-list/cv-list.vue":"21cd","./cv-loading/cv-loading.vue":"dbb8","./cv-modal/cv-modal.vue":"7346","./cv-multi-select/cv-multi-select.vue":"998c","./cv-number-input/cv-number-input-skeleton.vue":"e7c1","./cv-number-input/cv-number-input.vue":"0ffa","./cv-overflow-menu/cv-overflow-menu-item.vue":"5ed7","./cv-overflow-menu/cv-overflow-menu.vue":"b3a0","./cv-pagination/cv-pagination.vue":"8913","./cv-progress/cv-progress-step.vue":"4a7f","./cv-progress/cv-progress.vue":"01f6","./cv-radio-button/cv-radio-button.vue":"f243","./cv-radio-button/cv-radio-group.vue":"d923","./cv-search/cv-search.vue":"c005","./cv-select/cv-select-optgroup.vue":"6d31","./cv-select/cv-select-option.vue":"47d6","./cv-select/cv-select.vue":"c429","./cv-skeleton-text/cv-skeleton-text.vue":"85b3","./cv-slider/cv-slider-skeleton.vue":"30e3","./cv-slider/cv-slider.vue":"bf03","./cv-structured-list/cv-structured-list-data.vue":"6e05","./cv-structured-list/cv-structured-list-heading.vue":"e4ed","./cv-structured-list/cv-structured-list-item.vue":"43ca","./cv-structured-list/cv-structured-list.vue":"5bbf","./cv-tabs/cv-tab.vue":"e417","./cv-tabs/cv-tabs-skeleton.vue":"0e4a","./cv-tabs/cv-tabs.vue":"e464","./cv-tag/cv-tag-skeleton.vue":"21ca","./cv-tag/cv-tag.vue":"022c","./cv-text-area/cv-text-area.vue":"0019","./cv-text-input/cv-text-input.vue":"50e5","./cv-tile/cv-tile.vue":"4143","./cv-time-picker/cv-time-picker.vue":"1b53","./cv-toast-notification/cv-toast-notification.vue":"d64c","./cv-toggle/cv-toggle-skeleton.vue":"a32c","./cv-toggle/cv-toggle.vue":"761e","./cv-toolbar/cv-toolbar-divider.vue":"3ad3","./cv-toolbar/cv-toolbar-option.vue":"fbb6","./cv-toolbar/cv-toolbar-search.vue":"5907","./cv-toolbar/cv-toolbar-title.vue":"142c","./cv-toolbar/cv-toolbar.vue":"9783","./cv-tooltip/cv-definition-tooltip.vue":"9963","./cv-tooltip/cv-interactive-tooltip.vue":"d69a","./cv-tooltip/cv-tooltip.vue":"c332","./cv-ui-shell/cv-content.vue":"5326","./cv-ui-shell/cv-header-global-action.vue":"0df1","./cv-ui-shell/cv-header-menu-button.vue":"6bef","./cv-ui-shell/cv-header-menu-item.vue":"246e","./cv-ui-shell/cv-header-menu.vue":"a418","./cv-ui-shell/cv-header-name.vue":"49aa","./cv-ui-shell/cv-header-nav.vue":"ac7f","./cv-ui-shell/cv-header-panel.vue":"9af7","./cv-ui-shell/cv-header-side-nav-items.vue":"3e68","./cv-ui-shell/cv-header.vue":"21d9","./cv-ui-shell/cv-side-nav-divider.vue":"5891","./cv-ui-shell/cv-side-nav-icon.vue":"50a2","./cv-ui-shell/cv-side-nav-items.vue":"340a","./cv-ui-shell/cv-side-nav-link.vue":"4a05","./cv-ui-shell/cv-side-nav-menu-item.vue":"e2eb","./cv-ui-shell/cv-side-nav-menu.vue":"6f68","./cv-ui-shell/cv-side-nav.vue":"342a","./cv-ui-shell/cv-skip-to-content.vue":"cb8f","./cv-ui-shell/cv-switcher-item-link.vue":"cf28","./cv-ui-shell/cv-switcher-item.vue":"a4cd","./cv-ui-shell/cv-switcher.vue":"c3d0"};function r(e){var a=i(e);return t(a)}function i(e){if(!t.o(s,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id="08ef"},"199c":function(e,a){const t="font-weight: bold; font-size: 40px;color: red; text-shadow: 3px 3px 0 rgb(217,31,38) , 6px 6px 0 rgb(226,91,14) , 9px 9px 0 rgb(245,221,8) , 12px 12px 0 rgb(5,148,68) , 15px 15px 0 rgb(2,135,206) , 18px 18px 0 rgb(4,77,145) , 21px 21px 0 rgb(42,21,113)";console.log("%c D4SmartFarming by Smartbits",t)},"1a42":function(e,a,t){},"1b79":function(e,a,t){"use strict";t("63bd")},"1e28":function(e,a,t){"use strict";t("7819")},"23be":function(e,a,t){"use strict";var s=t("199c"),r=t.n(s);a["default"]=r.a},"24eb":function(e,a,t){e.exports=t.p+"img/satellite.3e2ec6c5.svg"},"273f":function(e,a,t){},"2ba7":function(e,a,t){"use strict";t("f64a")},"2c52":function(e,a,t){},"31aa":function(e,a,t){"use strict";t("9d81")},"3b38":function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAAAgCAYAAADE60CWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjE4OUI4QTBEQjc4NzExRUE5MDAwQzQxRUUwMDlFNUUyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjE4OUI4QTBFQjc4NzExRUE5MDAwQzQxRUUwMDlFNUUyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTg5QjhBMEJCNzg3MTFFQTkwMDBDNDFFRTAwOUU1RTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTg5QjhBMENCNzg3MTFFQTkwMDBDNDFFRTAwOUU1RTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6bcscbAAAMIklEQVR42uxbeXSVxRW/byGQAKKQICCC7GsQpMpiEKm4oBXZQ0VRCtIKR8ACKooKiggVECtHy1YpclCWtlA3lALHglYsRSAIQihBCBAgLGFLIHl5vfd7v5dMhvm+92WFP3LP+Z33vZn5Zu6buXO3meeh3wepnIpMLzPG4/kM43nGR8RTujw6kfpHLSfKteo2Mm5Fu32MnozUYow7jTECz5cZUxmz8H0E6oXOMiYwPizpH+4tX/ti0Q2MqsDNjKWMX4jgLMkepLa7SWnXjrGsmONWV/qrwZjJaI+6akqdjLvY4qlccK4pumgouytUEaOWndHatCnm3PsNZffgM9OOp5Ikf/nal4IweYi2B9pQWqAW1fKlhc2VSmJCPMUYI4Xxs1Z2sJACXq5xrjFKFZE4EahJoy+9Y9emuI7l64xbNHzsyFMpa5xoRj9Gd0YDRhVF1YqUr2P8jZHlsv/7Gb9iNGPEUmjvnWDsZ3zFWK207cx4mNGSURu8ybh7GWsYnzACLsa8kzEI5qAmIwrjZjAOMf4DH2NvIeaoNaM5oxGjAmMOI92mfX9rXN6Sy7MHfP5qzuS0lr5duqhUVH5LIqMP5tuPfr9l/ImRZjNGV8ZteE6zHHJn6o+5EPqScVirr88YwOjIqKPwd5yRzPgHY736gkeJqh5lzMCiOdFRxiuMBQ5tHmNMhMA40XbGdCz0QxHaiip+gzHPoc0S9OWGZigRkYlkIUdh0m/S6sTB3caYwnjJtodc6rEsJnHNgKjlW/m5nVIjwpsAfvs7mBeJkP5iqFuuvbcHDvB5xhjG2xGEaKUWoY13YX22MH7L2KpqnEH4EW5IBGs+BjItopQ95bKvWxGJuKF6jLmMTowhhvo10HBuaRx21ihDnczHIgcfMLLGDVrbckcTT7LJMInW+ho73I5iwMMlgxnSNUYzhPhu5nJrETeaCOZ/Ga0Yu7xQYXZCc9hBXc6F6lYp0UFoLhXSjNq1f9KwS5+wEZoA7Pspm76eYTTVygZjPooaOJy0tFGQBsT7ko608/9gEpy2EYRGpY8Q6kei6yPyFBKS/Sh70EZoMmHSM2z6Wh12jhMNlX+FTa+Pnd4FZkWn0dr31wxtfmL0Rj9Nod6d6BUIpLTvy9htaDNR+z7G0OYNOI3h33A37LtOPZTnOBvToFMlh7oXYcpWzIwa6yZ2mo/NMAT+o4neccFTlguelmoaV99kL2G+wnP2uMGvbMx4wK8kjnQ1fkDpcBOjA4O3D7VQ2vVUVH1Dw+5NA8PhHyXOlmRbjzHetTER6o+TifwUWiNOKY9H4uskvg/VIhXJpv6ofL8A07DDoH2ilOdJDvZ9s+IQO0UpmeKKx/uT6N4Ka02huErdEXCEaRHmUxeU3kg2ni6iFjTldlpo3+W3TdVSBksQ9q+DeQ1TX7/N7vmA8QImSzUdEvH0gm8QXpAwtbTRXKadMAeap5qmTk02+jLU9agCTn0oqlhrsNtOPsObhvJsfPpg8kyaa2IhFina8qy9KZHava0JTZj+iMi2i1be06U2tOXJ4GepFIuxZ2g5oY0wlV2V3FOKHyZIN1ei1r/DrpWd+i+EZbJAq2yYu9FQdsHhx5zRBOdMhEhOp+oO7eNgauvB7LWHUx3n8I7UV9bKdhdSaPJ/eLBypCbvOdTNMQjOncUQHBPth9YmZeOIzzcS6YD1iP7E1diHSK5AjmKRpqJUagWMUMK+VdBIe1wkE6Ns+vUZnE8nZ7Siy+SlqP6n4bdEF3IiTamDDaWUJDxLV2Z+VfrB5cYsDk3R8mjqvCYAqtZZCcHNCDeS3XwfcgBuJvd5SOH7VND1C1DpkceYJSlIH8J09XEQmgyHaC3GJpdSGnRaMZFkY551qlLCPEhSb7LLtl3gd6WEA6Lwrl0L1T7fIQzT6XcY/Fqg95B0NNFeOHniYHaLkHkxacbSEPwK5BxvldVR0CSHaNNE4qDPZgz3ajmb4ajsDyHaFsFPkeOEzldZaKrDPKmUgxC0IbTk4zCxRw1mz+sgOEU+iPQVVMB6PzUM/pS+QCbzVhokPuwDjFrwb1bAn3WimTJpVRXEYAJXQojaIabv45BjSLjKgnOboWwCIqgUg9NcNuQpIC5ZBp+tocPbpmsQaSXIXUVt3aOQIhHNPQBpFQkq5IghyWTWvXByD1N+lnitIev4dyTjphXCAS4rMgnDCpu2vW2iu5KkSyIw32Z3pm05bcP6LM1GuO1ohI1mKCrpgvuosuaHkcN50RB1yfFRG0RZBXw/+Vm1NemTyOSXNgyYHOBjV1lwTA6s6cD0dgplpXXaVML8eEVwzger0COZqykY9IjmMUVnA7GjdVrIaGIo/7QYPOk5m0xtzavC6b3OZX9VJAT+nnGHVrEOUZNI+SnY5AfhK5Ch7dWkXYay2YhCdiDC6oYchU7byP31CrdpgpctLeilCwdz6q2edmlC6oToqR/wlpttaCtXJwZDeKMxx40M7Ra7jHrt0hqvUijBdx7a+DNDm5qwPmKutiP6lDyYZOU7aG2T/YiOTJnXpw1Op07vU/6hWWlSjENdMhJ1LbQdNt1Fv0OKydc5Q1mDvLE9dGhO9sjUCRWnimP7BJkTeJ0jBBiSdhhTCJ5MofzNipshft/niKgmae3EQX7NxRijvUg2jStiHmBEBEl38n+iI3xX6UiEUHlQEfgfCI1TVP7JIWAIG62sI4E6tCb7fuFWtMZYRHyFoe505RlVlIOmWR+hv7C7MZnsTwGcSMz9F+FQdCYYXOPixX/DNj/iInT1FkKlOuVM5hucdrVvEf62hjY6SdJtKSKxZS54jZRP2YnNk+6Uv3n28uxwsD8LEcvsCL5hAPzJYe4GiwtPRL48iOR2Yn2Ou4j4eoP/HREd/lCAJL7v66EurvxfVX140nJ8Xk2JPFJgEux8ghqwiSrJNdFUG9ZbaU6bfqJtotbKOwfIfFosF47kxn9djHMRfIj93mKjvcLRWV2X/OtUGfNWGZrTh8lOsswZG5uF0UPpN9F/DhmeoAVp1wlOex3rHY+Vq5G7PLI5D4UXOCknnhp791G0LzP0bq7FZ5wmSge57mRmMJqiPZnh/hsoPHmtjeOxhORcem4sxfrSQ/yExDCe32lhpQmCeQffx7DeP1qRYVjggmbBKaeSJkzx+Ki3aHjUPEsITPr5YiCGYjwXQwvJ75zjyGxs1iyaf/kpauDbTz38X9CwCgvJuhymbUMJ/5/JfJfSgrVoc+UOVNefemVKk9sFcz2UcGETbQu0pVUxvayrH5uzO7D8eKmJN5livel54xfgn989FqhJCy8Po025CeWCU6bCgwVo6ttL/fwr2dnxU0PPfutzZ24rWpY9kOp6U6me9yAdCt5Mabm16HhOzXzDBO3wZqUJlB2sQAdyG1B73xY6GqxNUy5NzFvsG3ynaGbFcfRTbnNKz42ju/0b6GzwOtqa2562BNrTjpw2eYLUzLeH9gRC57uVPFnU3LuHevpXUxXPORbw/9HXOV2Zt9YU5z1BX+bcR6dzqlvvlQtO2dBQ+I+H83ay+YDjMatdED6Tx+A5Bm3fbcyQu1KbuX6jsU0QZsljnQp8wt+Poqyu5Z4ELdN/kj/3RvCN2K52mlS+rKVPi+GExvLEZ2GRjzK6MGozHmZUYHRk1GEMYzRiJCEHI+G63InqymV9GacZtRiJDPGN5L9cd8DpfpKflzAyGPei7+OMG1lApvPnzxDkwfy8juFHWuUFfq7GyGQMZdzO2Mh4jjGQ8Q1D/FI5x8wp/ydn2dBxJCrlQvk3SMJJ4lVO7eWvN3JR6i3K/+eIJOHk8r1cYZHbeJLdHwAnegdC+rFw/Oci0o1B5vd7JPokevuKQrc4pS4B40xDsHMXgqALiK7mQSfNRkTXHI5xMpLASUh4ykHxxXLBKRuSBeoFoRlJ+XeCKiEXdIJCVzPjUS5tfk2hTPICCp119cf7ASz6PyFoXbDYAURzu7HQImSrsdDPYoyHkLLoh3HOKwnDnYjAamD8FhD25yj0t5gU8CIR2j3lglM2JLt8CjTEH6B5FsDv2Yed3oRCB463UCj9L0KxlfL/WbkM2kmOUuRY4jO0Cd/1zoJwtKHQybucR2VAoyQhHfExkp7Sb0fke0TYJKPdDR6M8LScQlnx76DtrodgpeG53f8FGACbMh4gw6BP/AAAAABJRU5ErkJggg=="},"3d2e":function(e,a,t){},"3dfd":function(e,a,t){"use strict";var s=t("025d"),r=t("23be"),i=(t("1e28"),t("2877")),o=Object(i["a"])(r["default"],s["a"],s["b"],!1,null,null,null);a["default"]=o.exports},"3f3e":function(e,a,t){"use strict";t("df88")},4198:function(e,a,t){},"464e":function(e,a,t){"use strict";t("f70a")},4678:function(e,a,t){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a6","./fil.js":"d69a6","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var a=i(e);return t(a)}function i(e){if(!t.o(s,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=i,e.exports=r,r.id="4678"},"4a4c":function(e,a,t){},"4a9c":function(e,a,t){},"4c65":function(e,a,t){"use strict";t("2c52")},"4cd8":function(e,a,t){},"4ecd":function(e,a,t){"use strict";t("f4ef")},"50e3":function(e,a,t){"use strict";t("9b88")},"5229e":function(e,a,t){"use strict";t("3d2e")},"54f5":function(e,a,t){"use strict";t("7a11")},5524:function(e,a,t){},5593:function(e,a,t){e.exports=t.p+"img/outlook-severe.39907bd6.svg"},"56d7":function(e,a,t){"use strict";t.r(a);var s=t("2b0e"),r=t("3dfd"),i=t("8c4f"),o=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid",on:{mousedown:e.keepPositionScroll,mouseup:e.putPositionScroll}},[a("div",{staticClass:"employee-list"},[a("cv-data-table",{ref:"table",attrs:{sortable:e.sortable,columns:e.columns3,title:e.$t("empleados.empleados_lista")},on:{sort:e.onSort}},[a("template",{slot:"actions"},[a("cv-button",{attrs:{small:""},on:{click:e.actionNew}},[e._v(e._s(e.$t("empleados.add")))])],1),e.use_batchActions?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.onBatchAction1}},[e._v(" "+e._s(e.$t("empleados.eliminar"))+" "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.onBatchAction2}},[e._v(" "+e._s(e.$t("empleados.editar"))+" "),a("Edit32",{staticClass:"bx--btn__icon"})],1),e._e()],1):e._e(),a("template",{slot:"data"},e._l(e.usuarios,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.id))]),a("cv-data-table-cell",[e._v(e._s(t.name))]),a("cv-data-table-cell",[e._v(e._s(t.email))]),a("cv-data-table-cell",[e._v(e._s(t.phone))])],1)})),1)],2),a("EditarUser",{ref:"modal",attrs:{userSeleccionado:e.userSeleccionado}}),a("Alertas",{ref:"alerta",attrs:{tituloAlert:e.mensajeAlerta}}),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger",visible:e.visibleAlertaEliminar},on:{"primary-click":e.actionPrimary}},[a("template",{slot:"label"},[e._v(e._s(e.$t("empleados.seguro")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("empleados.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("empleados.seguro_user_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("empleados.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("empleados.eliminar")))])],2)],1)])},l=[],n=t("bc3a"),c=t.n(n),d=function(){var e=this,a=e._self._c;return e.visibleAlerta?a("cv-toast-notification",{ref:"alerta",staticStyle:{"transition-timing-function":"cubic-bezier(0.2, 0, 1, 0.9)","transition-duration":"2000ms"},attrs:{kind:"error",title:e.tituloAlert,"low-contrast":e.lowContrast},on:{close:e.doClose}}):e._e()},p=[],h={name:"Alerta",props:{tituloAlert:String},data(){return{lowContrast:!1,visibleAlerta:!1}},methods:{verAlerta(){this.visibleAlerta=!0},doClose(){this.visibleAlerta=!1,console.log(this.$refs)}}},m=h,u=(t("88b3"),t("2877")),f=Object(u["a"])(m,d,p,!1,null,"4e3457b2",null),v=f.exports,b=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"editarUserForm",attrs:{"close-aria-label":e.closeAriaLabel,size:e.size,"primary-button-disabled":e.primaryButtonDisabled,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.actionPrimary}},[e.use_label?a("template",{slot:"label"},[a("div",{attrs:{id:"targetClose"},on:{mouseenter:e.cerrarModalNuevoEmpleado}},[e._v(e._s(e.title_card))])]):e._e(),e.use_title?a("template",{slot:"title"},[e._v(e._s(e.subtitle_card)+" "+e._s(e.userSeleccionado))]):e._e(),e.use_content?a("template",{ref:"content_form",staticClass:"formcontent",slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputName",attrs:{label:e.$t("empleados.user_name"),value:e.value,disabled:e.disabled,type:e.inputType,placeholder:e.placeholder,"invalid-message":e.invalidMessage,id:"input-MIRLwtCq"}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNameLast",attrs:{label:e.$t("empleados.user_lastname"),value:e.valueLast,disabled:e.disabled,type:e.inputType,placeholder:e.$t("empleados.user_lastname"),"invalid-message":e.invalidMessageLast,id:"input-MIRLwtCq"}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputMail",attrs:{label:e.$t("empleados.user_email"),value:e.valueMail,disabled:e.disabledMail,type:e.inputTypeMail,placeholder:e.placeholderMail,"invalid-message":e.invalidMessageMail,id:"input-3zcRveTf"}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNumberPhone",attrs:{label:e.$t("empleados.user_phone"),"invalid-message":e.invalidMessagePhone,disabled:e.disabledPhone,value:e.valuePhone}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[e._e(),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-dropdown",{ref:"inputRol",attrs:{value:e.valueRol,label:e.$t("empleados.rol"),disabled:e.disabledRol}},[a("cv-dropdown-item",{attrs:{value:"is_enterpriseadmin"}},[e._v(e._s(e.$t("empleados.admin_enterprise")))]),a("cv-dropdown-item",{attrs:{value:"is_staff"}},[e._v(e._s(e.$t("empleados.empleado_enterprise")))])],1)],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-dropdown",{ref:"inputLang",attrs:{label:e.$t("empleados.label_lang"),value:e.valueLang}},[a("cv-dropdown-item",{attrs:{value:"es"}},[e._v(e._s(e.$t("empleados.esp")))]),a("cv-dropdown-item",{attrs:{value:"en"}},[e._v(e._s(e.$t("empleados.eng")))])],1)],1)])]):e._e(),e.use_primaryButton?a("template",{slot:"primary-button"},[e._v(e._s(e.$t("empleados.guardar")))]):e._e()],2)},_=[],g={name:"EditarUser",props:{userSeleccionado:String},components:{},data(){return{labelLang:this.$t("empleados.label_lang"),valueLang:"",valueRol:"is_staff",invalidMessageRol:this.$t("empleados.select_row"),labelRol:this.$t("empleados.rol"),disabledRol:!1,title_card:"",subtitle_card:"",closeAriaLabel:"Close",use_label:!0,use_title:!0,use_content:!0,size:"",use_primaryButton:!0,primaryButtonDisabled:!1,autoHideOff:!0,labelPassword:this.$t("empleados.password"),disabledPassword:!1,inputTypePassword:"password",placeholderPassword:this.$t("empleados.password"),invalidMessagePassword:"",valuePassword:"",showPassword:!1,label:this.$t("empleados.user_name"),disabled:!1,inputType:"text",placeholder:this.$t("empleados.user_name"),invalidMessage:"",value:"",labelLast:this.$t("empleados.user_lastname"),placeholderLast:this.$t("empleados.user_lastname"),invalidMessageLast:"",valueLast:"",labelMail:this.$t("empleados.user_email"),disabledMail:!1,inputTypeMail:"email",placeholderMail:"example@example.com",invalidMessageMail:"",valueMail:"",labelPhone:this.$t("empleados.user_phone"),invalidMessagePhone:"",disabledPhone:!1,valuePhone:"",user:"",is_enterpriseadmin:!1,is_staff:!1,password:""}},methods:{cerrarModalNuevoEmpleado(){const e=document.querySelectorAll('[aria-label="Editar usuario "]');e[0].addEventListener("mouseenter",()=>{console.log("Acabo de entrar"),this.autoHideOff=!1}),e[0].addEventListener("mouseleave",()=>{this.autoHideOff=!0})},openModal(e){this.$refs.editarUserForm.show(),this.showPassword=!0,this.title_card=this.$t("empleados.user_edit"),this.subtitle_card=this.$t("empleados.user_edit"),this.userSeleccionado=e;const a=`${this.$apiURL}/profiles/${this.userSeleccionado}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.value=e.data.first_name,this.valueMail=e.data.email,this.valuePhone=e.data.phone_number,this.valueLast=e.data.last_name,this.user=e.data.user,this.userLoginData(e.data.user)}).catch(()=>{this.showPassword=!0,this.title_card=this.$t("empleados.user_new"),this.subtitle_card=this.$t("empleados.user_new"),this.value="",this.valueMail="",this.valueDesc="",this.valuePhone="",this.valueLast=""})},userLoginData(e){const a=`${this.$apiURL}/profiledata/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{console.info(e.data),this.valueMail=e.data.email,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_staff=e.data.is_staff,e.data.is_enterpriseadmin&&(this.valueRol="is_enterpriseadmin"),e.data.is_staff&&(this.valueRol="is_staff"),this.password=e.data.password,this.valueLang=e.data.language})},actionPrimary(){let e="";if(this.userSeleccionado)e=`${this.$apiURL}/profiles/${this.userSeleccionado}/`,c.a.put(e,{first_name:this.$refs.inputName.$refs.input.value,last_name:this.$refs.inputNameLast.$refs.input.value,phone_number:this.$refs.inputNumberPhone.$refs.input.value}).then(e=>{console.info(e.data),this.value=e.data.first_name,this.valueMail=e.data.email,this.invalidMessageMail="",this.invalidMessage="",this.putUserData()}).catch(e=>{console.info(e);const a=e.response.data;a.first_name&&(this.invalidMessage=this.$t("empleados.campo_requerido")),a.last_name&&(this.invalidMessageLast=this.$t("empleados.campo_requerido")),a.phone_number&&(this.invalidMessagePhone=this.$t("empleados.campo_requerido"))});else{e=this.$apiURL+"/signup";const a=this.$route.query.enterprise?this.$route.query.enterprise:this.$route.query.cooperative?this.$route.query.cooperative:"",t=!this.$route.query.enterprise&&!!this.$route.query.cooperative;c.a.post(e,{name:this.$refs.inputName.$refs.input.value,phone:this.$refs.inputNumberPhone.$refs.input.value,email:this.$refs.inputMail.$refs.input.value,password:"",is_staff:"is_staff"==this.$refs.inputRol.dataValue,is_enterpriseadmin:"is_enterpriseadmin"==this.$refs.inputRol.dataValue,language:this.$refs.inputLang.dataValue,profile:{first_name:this.$refs.inputName.$refs.input.value,last_name:this.$refs.inputNameLast.$refs.input.value,phone_number:this.$refs.inputNumberPhone.$refs.input.value,enterprise_id:a,cooperative_user:t}}).then(t=>{console.info(t.data),e=this.$apiURL+"/password_reset/",c.a.post(e,{email:this.$refs.inputMail.$refs.input.value,type:"new"}).then(e=>{200==e.status&&(this.$parent.getUsuariosEmpresa(a),this.$refs.editarUserForm.hide(),this.$parent.mensajeAlerta=this.$t("empleados.user_generado"),this.$parent.tipoAlerta="success",this.$parent.$refs.alertaGeneral.verAlerta())})}).catch(e=>{const a=e.response.data;a.email&&(this.invalidMessageMail=this.$t("empleados.campo_requerido")),a.password&&(this.invalidMessagePassword=this.$t("empleados.campo_requerido")),a.profile.first_name&&(this.invalidMessage=this.$t("empleados.campo_requerido")),a.profile.last_name&&(this.invalidMessageLast=this.$t("empleados.campo_requerido")),a.profile.phone_number&&(this.invalidMessagePhone=this.$t("empleados.campo_requerido"))})}},putUserData(){const e=`${this.$apiURL}/profiledata/${this.user}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.put(e,{email:this.$refs.inputMail.$refs.input.value,is_staff:"is_staff"==this.$refs.inputRol.dataValue,is_enterpriseadmin:"is_enterpriseadmin"==this.$refs.inputRol.dataValue,language:this.$refs.inputLang.dataValue}).then(()=>{const e=this.$route.query.enterprise?this.$route.query.enterprise:this.$route.query.cooperative?this.$route.query.cooperative:"";this.$parent.getUsuariosEmpresa(e),this.$refs.editarUserForm.hide(),this.$parent.mensajeAlerta=this.$t("empleados.user_guardado"),this.$parent.tipoAlerta="success",this.$parent.$refs.alertaGeneral.verAlerta()}).catch(e=>{const a=e.response.data;a.email&&(this.invalidMessageMail=this.$t("empleados.campo_requerido"))})}},mounted(){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language}),this.$refs.editarUserForm.$el.firstChild.style.width="95%",this.$refs.editarUserForm.$el.firstChild.style.height="65%",this.$refs.editarUserForm.$el.firstChild.style["max-with"]="100%",this.$refs.editarUserForm.$el.firstChild.style["max-height"]="100%",this.$refs.editarUserForm.$el.firstChild.childNodes[2].style["padding-right"]="2%",this.$refs.editarUserForm.$el.firstChild.childNodes[2].style["margin-bottom"]="2%",this.$refs.editarUserForm.$el.firstChild.childNodes[2].style["height"]="95%",this.cerrarModalNuevoEmpleado()},created(){this.cerrarModalNuevoEmpleado()},beforeCreate(){this.cerrarModalNuevoEmpleado()}},A=g,y=(t("f1c3"),Object(u["a"])(A,b,_,!1,null,"29ec3822",null)),$=y.exports,C={name:"EmployeesList",props:{},components:{Alertas:v,EditarUser:$},data(){return{sortable:!1,columns3:[{key:"id",label:"ID"},{key:"name",label:"Nombre"},{key:"email",label:"Correo"},{key:"phone",label:"Teléfono"}],usuarios:[],basicPagination:!1,use_batchActions:!0,hasExpandingRows:!1,use_slottedData:!0,mensajeAlerta:"",userSeleccionado:"",visibleAlertaEliminar:!1,scrollPosition:0}},methods:{keepPositionScroll(){this.scrollPosition=window.scrollY},putPositionScroll(){setTimeout(()=>{window.scrollTo(0,this.scrollPosition)},0)},getUsers(){const e="${this.$apiURL}/employees/";c.a.get(e).then(e=>{this.usuarios=e.data}).catch(e=>{console.error(e)})},onSort(e){console.log(e.order)},onBatchAction2(){const e=this.$refs.table.selectedRows;e.length>1?(this.mensajeAlerta="Solo tienes que seleccionar un usuario para esta acción",this.$refs.alerta.verAlerta()):(this.userSeleccionado=e[0],this.$refs.modal.openModal(this.userSeleccionado))},onBatchAction1(){this.$refs.alerta_eliminar.dataVisible=!0,console.warn(this.$refs.alerta_eliminar.dataVisible)},actionPrimary(){const e=this.$refs.table.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const t=`${this.$apiURL}/employees/${e}/`;c.a.delete(t).then(()=>{this.getUsers()}).catch(e=>{a=!0,console.log(e.error)})}),a?(console.error("error"),this.mensajeAlerta="Ha ocurrido un error con la eliminación de los usuarios",this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},doClose(){this.visibleAlerta=!1},actionNew(){this.$refs.modal.openModal()}},created(){this.getUsers()},mounted(){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language})}},E=C,x=Object(u["a"])(E,o,l,!1,null,"5d7567e3",null),w=x.exports,S=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("div",{staticClass:"group-list"},[a("cv-data-table",{ref:"table",attrs:{sortable:e.sortable,columns:e.columns3,title:"Lista de Grupos"},on:{sort:e.onSort}},[a("template",{slot:"actions"},[a("cv-button",{attrs:{small:""},on:{click:e.actionNew}},[e._v("Añadir nuevo")])],1),e.use_batchActions?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.onBatchAction1}},[e._v(" Eliminar "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.onBatchAction2}},[e._v(" Editar "),a("Edit32",{staticClass:"bx--btn__icon"})],1),e._e()],1):e._e(),a("template",{slot:"data"},e._l(e.usuarios,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.id))]),a("cv-data-table-cell",[e._v(e._s(t.name))]),a("cv-data-table-cell",[e._v(e._s(t.description))])],1)})),1)],2),a("EditarGroup",{ref:"modal",attrs:{userSeleccionado:e.userSeleccionado}}),a("Alertas",{ref:"alerta",attrs:{tituloAlert:e.mensajeAlerta}}),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger",visible:e.visibleAlertaEliminar},on:{"primary-click":e.actionPrimary}},[a("template",{slot:"label"},[e._v("¿Estás seguro?")]),a("template",{slot:"title"},[e._v("Eliminar")]),a("template",{slot:"content"},[a("p",[e._v("Seguro que quieres eliminar el/los grupo/s?")])]),a("template",{slot:"secondary-button"},[e._v("Cancelar")]),a("template",{slot:"primary-button"},[e._v("Eliminar")])],2)],1)])},P=[],k=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"editarGroupForm",attrs:{"close-aria-label":e.closeAriaLabel,size:e.size,"primary-button-disabled":e.primaryButtonDisabled,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.actionPrimary}},[e.use_label?a("template",{slot:"label"},[e._v(e._s(e.title_card))]):e._e(),e.use_title?a("template",{slot:"title"},[e._v(e._s(e.subtitle_card)+" "+e._s(e.userSeleccionado))]):e._e(),e.use_content?a("template",{slot:"content"},[a("cv-text-input",{ref:"inputName",attrs:{label:e.labelName,value:e.valueName,disabled:e.disabledName,type:e.inputTypeName,placeholder:e.placeholderName,"invalid-message":e.invalidMessageName,id:"input-MIRLwtCq"}}),a("br"),a("cv-text-input",{ref:"inputDesc",attrs:{label:e.labelDesc,value:e.valueDesc,disabled:e.disabledDesc,type:e.inputTypeDesc,placeholder:e.placeholderDesc,"invalid-message":e.invalidMessageDesc,id:"input-3zcRveTf"}})],1):e._e(),e.use_primaryButton?a("template",{slot:"primary-button"},[e._v("Guardar")]):e._e()],2)},I=[],j={name:"EditarGroup",props:{userSeleccionado:String},components:{},data(){return{title_card:"",subtitle_card:"",closeAriaLabel:"Close",use_label:!0,use_title:!0,use_content:!0,size:"",use_primaryButton:!0,primaryButtonDisabled:!1,autoHideOff:!1,labelName:"Nombre del Grupo",valueName:"",disabledName:!1,inputTypeName:"text",placeholderName:"Nombre...",invalidMessageName:"",labelDesc:"Descripción del Grupo",valueDesc:"",disabledDesc:!1,inputTypeDesc:"text",placeholderDesc:"Nombre...",invalidMessageDesc:""}},methods:{openModal(e){this.$refs.editarGroupForm.show(),this.showPassword=!1,this.title_card="Editar Grupo",this.subtitle_card="Editar Grupo:",this.userSeleccionado=e;const a=`${this.$apiURL}/groups/${this.userSeleccionado}/`;c.a.get(a).then(e=>{this.valueName=e.data.name,this.valueDesc=e.data.description}).catch(()=>{this.showPassword=!0,this.title_card="Nuevo Grupo",this.subtitle_card="Crear nuevo Grupo",this.valueName="",this.valueDesc=""})},actionPrimary(){let e="";this.userSeleccionado?(e=`${this.$apiURL}/groups/${this.userSeleccionado}/`,c.a.put(e,{name:this.$refs.inputName.$refs.input.value,description:this.$refs.inputDesc.$refs.input.value}).then(e=>{this.valueName=e.data.name,this.valueDesc=e.data.description,this.$parent.getUsers(),this.$refs.editarGroupForm.hide(),this.invalidMessageName="",this.invalidMessageDesc=""}).catch(e=>{console.info(e),e.response.data.name&&(this.invalidMessageName=e.response.data.name[0]),e.response.data.description&&(this.invalidMessageDesc=e.response.data.description[0])})):(e=this.$apiURL+"/groups/",c.a.post(e,{name:this.$refs.inputName.$refs.input.value,description:this.$refs.inputDesc.$refs.input.value}).then(e=>{this.valueName=e.data.name,this.valueDesc=e.data.description,this.$parent.getUsers(),this.$refs.editarGroupForm.hide(),this.invalidMessageName="",this.invalidMessageDesc=""}).catch(e=>{console.info(e),e.response.data.name&&(this.invalidMessageName=e.response.data.name[0]),e.response.data.description&&(this.invalidMessageDesc=e.response.data.description[0])}))}}},L=j,M=Object(u["a"])(L,k,I,!1,null,"3633a8da",null),O=M.exports,N={name:"GroupList",props:{},components:{Alertas:v,EditarGroup:O},data(){return{sortable:!1,columns3:[{key:"id",label:"ID"},{key:"name",label:"Nombre"},{key:"description",label:"Descripción"}],usuarios:[],basicPagination:!1,use_batchActions:!0,hasExpandingRows:!1,use_slottedData:!0,mensajeAlerta:"",userSeleccionado:"",visibleAlertaEliminar:!1}},methods:{getUsers(){const e="${this.$apiURL}/groups/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.usuarios=e.data}).catch(e=>{console.error(e)})},onSort(e){console.log(e.order)},onBatchAction2(){const e=this.$refs.table.selectedRows;e.length>1?(this.mensajeAlerta="Solo tienes que seleccionar un usuario para esta acción",this.$refs.alerta.verAlerta()):(this.userSeleccionado=e[0],this.$refs.modal.openModal(this.userSeleccionado))},onBatchAction1(){this.$refs.alerta_eliminar.dataVisible=!0,console.warn(this.$refs.alerta_eliminar.dataVisible)},actionPrimary(){const e=this.$refs.table.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const t=`${this.$apiURL}/groups/${e}/`;c.a.delete(t).then(()=>{this.getUsers()}).catch(e=>{a=!0,console.log(e.error)})}),a?(console.error("error"),this.mensajeAlerta="Ha ocurrido un error con la eliminación de los grupos",this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},doClose(){this.visibleAlerta=!1},actionNew(){this.$refs.modal.openModal()}},created(){this.getUsers()}},D=N,z=Object(u["a"])(D,S,P,!1,null,"2d01cc4c",null),R=z.exports,G=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("div",{staticClass:"group-list"},[a("cv-data-table",{ref:"table",attrs:{sortable:e.sortable,columns:e.columns3,title:"Lista de Roles"},on:{sort:e.onSort}},[a("template",{slot:"actions"},[a("cv-button",{attrs:{small:""},on:{click:e.actionNew}},[e._v("Añadir nuevo")])],1),e.use_batchActions?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.onBatchAction1}},[e._v(" Eliminar "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.onBatchAction2}},[e._v(" Editar "),a("Edit32",{staticClass:"bx--btn__icon"})],1),e._e()],1):e._e(),a("template",{slot:"data"},e._l(e.usuarios,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.id))]),a("cv-data-table-cell",[e._v(e._s(t.name))]),a("cv-data-table-cell",[e._v(e._s(t.description))])],1)})),1)],2),a("EditarRol",{ref:"modal",attrs:{userSeleccionado:e.userSeleccionado}}),a("Alertas",{ref:"alerta",attrs:{tituloAlert:e.mensajeAlerta}}),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger",visible:e.visibleAlertaEliminar},on:{"primary-click":e.actionPrimary}},[a("template",{slot:"label"},[e._v("¿Estás seguro?")]),a("template",{slot:"title"},[e._v("Eliminar")]),a("template",{slot:"content"},[a("p",[e._v("Seguro que quieres eliminar el/los rol/es?")])]),a("template",{slot:"secondary-button"},[e._v("Cancelar")]),a("template",{slot:"primary-button"},[e._v("Eliminar")])],2)],1)])},F=[],B=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"editarRolForm",attrs:{"close-aria-label":e.closeAriaLabel,size:e.size,"primary-button-disabled":e.primaryButtonDisabled,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.actionPrimary}},[e.use_label?a("template",{slot:"label"},[e._v(e._s(e.title_card))]):e._e(),e.use_title?a("template",{slot:"title"},[e._v(e._s(e.subtitle_card)+" "+e._s(e.userSeleccionado))]):e._e(),e.use_content?a("template",{slot:"content"},[a("cv-text-input",{ref:"inputName",attrs:{label:e.labelName,value:e.valueName,disabled:e.disabledName,type:e.inputTypeName,placeholder:e.placeholderName,"invalid-message":e.invalidMessageName,id:"input-MIRLwtCq"}}),a("br"),a("cv-text-input",{ref:"inputDesc",attrs:{label:e.labelDesc,value:e.valueDesc,disabled:e.disabledDesc,type:e.inputTypeDesc,placeholder:e.placeholderDesc,"invalid-message":e.invalidMessageDesc,id:"input-3zcRveTf"}})],1):e._e(),e.use_primaryButton?a("template",{slot:"primary-button"},[e._v("Guardar")]):e._e()],2)},U=[],V={name:"EditarGroup",props:{userSeleccionado:String},components:{},data(){return{title_card:"",subtitle_card:"",closeAriaLabel:"Close",use_label:!0,use_title:!0,use_content:!0,size:"",use_primaryButton:!0,primaryButtonDisabled:!1,autoHideOff:!1,labelName:"Nombre del Rol",valueName:"",disabledName:!1,inputTypeName:"text",placeholderName:"Nombre...",invalidMessageName:"",labelDesc:"Descripción del Rol",valueDesc:"",disabledDesc:!1,inputTypeDesc:"text",placeholderDesc:"Nombre...",invalidMessageDesc:""}},methods:{openModal(e){this.$refs.editarRolForm.show(),this.showPassword=!1,this.title_card="Editar Rol",this.subtitle_card="Editar Rol:",this.userSeleccionado=e;const a=`${this.$apiURL}/roles/${this.userSeleccionado}/`;c.a.get(a).then(e=>{this.valueName=e.data.name,this.valueDesc=e.data.description}).catch(()=>{this.showPassword=!0,this.title_card="Nuevo Rol",this.subtitle_card="Crear nuevo Rol",this.valueName="",this.valueDesc=""})},actionPrimary(){let e="";this.userSeleccionado?(e=`${this.$apiURL}/roles/${this.userSeleccionado}/`,c.a.put(e,{name:this.$refs.inputName.$refs.input.value,description:this.$refs.inputDesc.$refs.input.value}).then(e=>{this.valueName=e.data.name,this.valueDesc=e.data.description,this.$parent.getUsers(),this.$refs.editarRolForm.hide(),this.invalidMessageName="",this.invalidMessageDesc=""}).catch(e=>{console.info(e),e.response.data.name&&(this.invalidMessageName=e.response.data.name[0]),e.response.data.description&&(this.invalidMessageDesc=e.response.data.description[0])})):(e=this.$apiURL+"/roles/",c.a.post(e,{name:this.$refs.inputName.$refs.input.value,description:this.$refs.inputDesc.$refs.input.value}).then(e=>{this.valueName=e.data.name,this.valueDesc=e.data.description,this.$parent.getUsers(),this.$refs.editarRolForm.hide(),this.invalidMessageName="",this.invalidMessageDesc=""}).catch(e=>{console.info(e),e.response.data.name&&(this.invalidMessageName=e.response.data.name[0]),e.response.data.description&&(this.invalidMessageDesc=e.response.data.description[0])}))}}},T=V,H=Object(u["a"])(T,B,U,!1,null,"60607fd5",null),q=H.exports,Y={name:"RolList",props:{},components:{Alertas:v,EditarRol:q},data(){return{sortable:!1,columns3:[{key:"id",label:"ID"},{key:"name",label:"Nombre"},{key:"description",label:"Descripción"}],usuarios:[],basicPagination:!1,use_batchActions:!0,hasExpandingRows:!1,use_slottedData:!0,mensajeAlerta:"",userSeleccionado:"",visibleAlertaEliminar:!1}},methods:{getUsers(){const e="${this.$apiURL}/roles/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.usuarios=e.data}).catch(e=>{console.error(e)})},onSort(e){console.log(e.order)},onBatchAction2(){const e=this.$refs.table.selectedRows;e.length>1?(this.mensajeAlerta="Solo tienes que seleccionar un usuario para esta acción",this.$refs.alerta.verAlerta()):(this.userSeleccionado=e[0],this.$refs.modal.openModal(this.userSeleccionado))},onBatchAction1(){this.$refs.alerta_eliminar.dataVisible=!0,console.warn(this.$refs.alerta_eliminar.dataVisible)},actionPrimary(){const e=this.$refs.table.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const t=`${this.$apiURL}/roles/${e}/`;c.a.delete(t).then(()=>{this.getUsers()}).catch(e=>{a=!0,console.log(e.error)})}),a?(console.error("error"),this.mensajeAlerta="Ha ocurrido un error con la eliminación de los roles",this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},doClose(){this.visibleAlerta=!1},actionNew(){this.$refs.modal.openModal()}},created(){this.getUsers()}},Z=Y,Q=Object(u["a"])(Z,G,F,!1,null,"06d1101b",null),J=Q.exports,X=function(){var e=this,a=e._self._c;return a("div",{staticClass:"Administracion"},[a("EmployeeList"),a("br"),a("GroupList"),a("br"),a("RolList")],1)},W=[],K={name:"Home",components:{EmployeeList:w,GroupList:R,RolList:J}},ee=K,ae=Object(u["a"])(ee,X,W,!1,null,null,null),te=ae.exports,se=function(){var e=this,a=e._self._c;return a("div",{staticClass:"group-list",on:{mousedown:e.keepPositionScroll,mouseup:e.putPositionScroll}},[a("cv-data-table",{ref:"table",attrs:{sortable:e.sortable,columns:[{key:"name",label:this.$t("parcelas.nombre"),sortable:!0},{key:"description",label:this.$t("parcelas.descrip")},{key:"heactareas",label:this.$t("parcelas.hectareas"),sortable:!0},{key:"",label:""}],title:e.$t("parcelas.parcel_list"),pagination:{numberOfItems:e.usuarios.length,pageSizes:[10,15,20,25,e.usuarios.length]},searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{sort:e.onSort,pagination:e.actionOnPagination,search:e.onFilter}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("parcelas.place_buscar")},on:{input:e.onBuscar}}),a("cv-button",{attrs:{small:"",disabled:e.disabledAddNewParcel,title:e.titleDisabledAddNewParcel},on:{click:e.actionNew}},[e._v(e._s(e.$t("parcelas.place_nuevo")))])],1),e.use_batchActions?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.onBatchAction1}},[e._v(" "+e._s(e.$t("parcelas.eliminar"))+" "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.onBatchAction2}},[e._v(" "+e._s(e.$t("parcelas.editar"))+" "),a("Edit32",{staticClass:"bx--btn__icon"})],1),e._e()],1):e._e(),a("template",{slot:"data"},e._l(e.usuarios.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(e.formateaHectareas(t.properties.area)))]),a("cv-data-table-cell",[a("cv-overflow-menu",{staticStyle:{margin:"0 auto"},attrs:{"flip-menu":""}},[a("cv-overflow-menu-item",{on:{click:function(a){return e.editarRow(t.id)}}},[e._v(e._s(e.$t("parcelas.editar")))]),a("cv-overflow-menu-item",{on:{click:function(a){return e.eliminaRow(t.id)}}},[e._v(e._s(e.$t("parcelas.eliminar")))])],1)],1)],1)})),1)],2),a("EditarParcel2",{key:e.componentKey,ref:"modal",attrs:{userSeleccionado:e.userSeleccionado}}),a("Alertas",{ref:"alerta",attrs:{tituloAlert:e.mensajeAlerta}}),a("AlertaGeneral",{ref:"alertaGeneral",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger",visible:e.visibleAlertaEliminar},on:{"primary-click":e.actionPrimary}},[a("template",{slot:"label"},[e._v(e._s(e.$t("parcelas.seguro")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("parcelas.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("parcelas.seguro_parcel_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("parcelas.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("parcelas.eliminar")))])],2)],1)},re=[],ie=(t("14d9"),function(){var e=this,a=e._self._c;return a("div",[a("cv-modal",{ref:"editarRolForm",staticClass:"parcelModalClass",attrs:{"close-aria-label":e.closeAriaLabel,size:"large","primary-button-disabled":e.primaryButtonDisabled,"auto-hide-off":e.autoHideOff,id:"parcelModal"},on:{"modal-shown":e.actionShownMap}},[e.use_label?a("template",{slot:"label"},[a("div",{attrs:{id:"targetClose"},on:{mouseenter:e.cerrarModal}},[e._v(e._s(e.title_card))])]):e._e(),e.use_title?a("template",{slot:"title"},[e._v(e._s(e.subtitle_card)+" "+e._s(e.userSeleccionado))]):e._e(),e.use_content?a("template",{directives:[{name:"modal",rawName:"v-modal"}],attrs:{id:"contenido"},slot:"content"},[a("div",{staticClass:"bx--row",attrs:{id:"row_box"}},[a("div",{staticClass:"bx--col-lg-3 bx--col-md-3 bx--col-sm-3"},[a("cv-text-input",{ref:"inputName",attrs:{label:e.$t("parcelas.parcel_name"),value:e.valueName,disabled:e.disabledName,type:e.inputTypeName,placeholder:e.$t("parcelas.place_name"),"invalid-message":e.invalidMessageName,id:"input-MIRLwtCq"},model:{value:e.valueName,callback:function(a){e.valueName=a},expression:"valueName"}}),a("br"),a("cv-text-input",{ref:"inputDesc",attrs:{label:e.$t("parcelas.parcel_descrip"),value:e.valueDesc,disabled:e.disabledDesc,type:e.inputTypeDesc,placeholder:e.$t("parcelas.place_descrip"),"invalid-message":e.invalidMessageDesc,id:"input-3zcRveTf"},model:{value:e.valueDesc,callback:function(a){e.valueDesc=a},expression:"valueDesc"}}),a("br"),e.verErrorDraw?a("div",{staticClass:"errorDraw"},[e._v(e._s(e.errorDraw))]):e._e(),a("br"),a("cv-button",{attrs:{kind:e.kindSave,size:e.sizeSave,disabled:e.disabledSave,icon:e.icon},on:{click:e.actionPrimary}},[e._v(" "+e._s(e.$t("parcelas.guardar"))+" ")]),a("br"),a("br"),a("div",{attrs:{id:"geolocIcon"}},[""===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("Mostrar mi ubicación "),a("img",{staticStyle:{width:"14px",height:"14px"},attrs:{src:t("cd0d")}})])]):!1===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("Para volver a localizar mi ubicación, haz click aquí "),a("Location16",{staticStyle:{stroke:"#00abff",width:"14px",height:"14px",fill:"#00abff"}})],1)]):!0===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("No temenos acceso a tu ubicación "),a("img",{staticStyle:{width:"14px",height:"14px"},attrs:{src:t("a145")}})])]):e._e()]),a("br"),a("div",{attrs:{id:"sentinelLayersList"}},[a("cv-tabs",{attrs:{container:!1,"aria-label":"navigation tab label"}},[a("cv-tab",{attrs:{id:"tab-1",label:e.$t("parcelas.parcel_list")}},[a("cv-structured-list",{attrs:{selectable:"",id:"parcelList"}},[a("template",{slot:"items"},e._l(e.allParcels,(function(t){return a("cv-structured-list-item",{key:t.id,ref:"listaDeParcelas",refInFor:!0,attrs:{name:"group-1",value:t.id,checked:t.id==e.selectedParcelList},on:{change:e.actionChangeParcels}},[a("cv-structured-list-data",[e._v(e._s(t.properties.name))])],1)})),1)],2)],1),a("cv-tab",{attrs:{id:"tab-2",label:e.$t("parcelas.sigpac_pro"),selected:e.selected}},[a("br"),a("cv-dropdown",{ref:"comunidadesSelect",attrs:{placeholder:e.placeholderComunidad,label:e.labelComunidad},on:{"update:placeholder":function(a){e.placeholderComunidad=a},change:e.actionChangeComunidades}},e._l(e.comunidades,(function(t){return a("cv-dropdown-item",{key:t.properties.codigo,attrs:{value:t.properties.codigo}},[e._v(e._s(t.properties.nombre))])})),1),a("br"),a("cv-dropdown",{ref:"provinciasSelect",attrs:{placeholder:e.placeholderProv,label:e.labelProv,disabled:!e.visibleProv},on:{change:e.actionChangeProv}},e._l(e.provincias,(function(t){return a("cv-dropdown-item",{key:t.properties.codigo,attrs:{value:t.properties.codigo}},[e._v(e._s(t.properties.nombre))])})),1),a("br"),a("cv-dropdown",{ref:"munSelect",attrs:{placeholder:e.placeholderMun,label:e.labelMun,disabled:!e.visibleMun},on:{change:e.actionChangeMun}},e._l(e.municipios,(function(t){return a("cv-dropdown-item",{key:t.properties.codigo,attrs:{value:t.properties.codigo}},[e._v(e._s(t.properties.nombre))])})),1),a("br"),a("cv-dropdown",{ref:"agreSelect",attrs:{placeholder:e.placeholderAgre,label:e.labelAgre,disabled:!e.visibleAgre},on:{change:e.actionChangeAgre}},e._l(e.agregados,(function(t){return a("cv-dropdown-item",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1),a("br"),a("cv-dropdown",{ref:"zonaSelect",attrs:{placeholder:e.placeholderZona,label:e.labelZona,disabled:!e.visibleZona},on:{change:e.actionChangeZona}},e._l(e.zonas,(function(t){return a("cv-dropdown-item",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1),a("br"),a("cv-dropdown",{ref:"polSelect",attrs:{placeholder:e.placeholderPol,label:e.labelPol,disabled:!e.visiblePol},on:{change:e.actionChangePol}},e._l(e.poligonos,(function(t){return a("cv-dropdown-item",{key:t.properties.codigo,attrs:{value:t.properties.codigo}},[e._v(e._s(t.properties.nombre))])})),1),a("br"),a("cv-dropdown",{ref:"parSelect",attrs:{placeholder:e.placeholderPar,label:e.labelPar,disabled:!e.visiblePar},on:{change:e.actionChangePar}},e._l(e.parcelas,(function(t){return a("cv-dropdown-item",{key:t.properties.dn_pk,attrs:{value:t.properties.dn_pk}},[e._v(e._s(t.properties.nombre))])})),1),a("br"),a("cv-dropdown",{ref:"recSelect",attrs:{placeholder:e.placeholderRec,label:e.labelRec,disabled:!e.visibleRec},on:{change:e.actionChangeRec}},e._l(e.recintos,(function(t){return a("cv-dropdown-item",{key:t.properties.dn_pk,attrs:{value:t.properties.dn_pk}},[e._v(e._s(t.properties.nombre))])})),1)],1),a("cv-tab",{attrs:{id:"tab-3",label:e.$t("parcelas.sigpac_direc")}},[e.verErrorBusq?a("div",{staticClass:"errorDraw"},[e._v(e._s(e.$t("parcelas.sigpac_error")))]):e._e(),a("cv-number-input",{attrs:{label:e.placeholderProv},model:{value:e.vProv,callback:function(a){e.vProv=a},expression:"vProv"}}),a("cv-number-input",{attrs:{label:e.placeholderMun},model:{value:e.vMun,callback:function(a){e.vMun=a},expression:"vMun"}}),a("cv-number-input",{attrs:{label:e.placeholderAgre},model:{value:e.vAgre,callback:function(a){e.vAgre=a},expression:"vAgre"}}),a("cv-number-input",{attrs:{label:e.placeholderZona},model:{value:e.vZona,callback:function(a){e.vZona=a},expression:"vZona"}}),a("cv-number-input",{attrs:{label:e.placeholderPol},model:{value:e.vPol,callback:function(a){e.vPol=a},expression:"vPol"}}),a("cv-number-input",{attrs:{label:e.placeholderPar},model:{value:e.vPar,callback:function(a){e.vPar=a},expression:"vPar"}}),a("cv-number-input",{attrs:{label:e.placeholderRec},model:{value:e.vRec,callback:function(a){e.vRec=a},expression:"vRec"}}),a("cv-button",{attrs:{kind:"primary"},on:{click:e.bucardorSigpacDirect}},[e._v(" "+e._s(e.$t("parcelas.buscar"))+" ")])],1)],1)],1)],1),a("div",{staticClass:"bx--col-lg bx--col-md bx--col-sm"},[a("div",{attrs:{id:"div_map"}},[a("vl-map",{ref:"map",staticClass:"mapa",attrs:{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"data-projection":"EPSG:4326",id:e.parcel.id}},[a("vl-view",{attrs:{zoom:e.zoom,center:e.center},on:{"update:zoom":function(a){e.zoom=a}}}),a("vl-layer-tile",{attrs:{id:"bingmaps"}},[a("vl-source-bingmaps",{attrs:{"api-key":e.apiKeyBing,"imagery-set":e.imagerySetBing,maxZoom:e.maxZoomBing}})],1),a("vl-layer-vector",[a("vl-source-vector",e._l(e.allParcels,(function(t){return a("vl-feature",{key:t.id,attrs:{value:t.id}},[a("vl-geom-polygon",{ref:t.id+"parcela",refInFor:!0,attrs:{coordinates:t.geometry.coordinates,indent:t.id}}),a("vl-style-box",[a("vl-style-stroke",{attrs:{color:"rgba(0, 0, 255, 1)",width:2}}),a("vl-style-fill",{attrs:{color:"rgba(255,255,255,0.0)"}}),a("vl-style-text",{attrs:{text:t.properties.name+"\n"+t.properties.area.toFixed(2)+"Ha/"+e.metricaparcela(t.properties.area)+"Acre",font:"14px IBM Plex Sans"}},[a("vl-style-fill",{attrs:{color:"white"}}),a("vl-style-stroke",{attrs:{color:"black",width:3}})],1)],1)],1)})),1)],1),a("vl-layer-vector",[a("vl-source-vector",{attrs:{ident:"drawTarget",features:e.featuress},on:{"update:features":function(a){e.featuress=a}}},[a("vl-feature",[a("vl-geom-polygon",{ref:"parcela",attrs:{coordinates:e.coordenadasParcel,indent:"poligono"}}),a("vl-style-box",[a("vl-style-stroke",{attrs:{color:e.colorParcela,width:3}}),a("vl-style-fill",{attrs:{color:"rgba(255,255,255,0.5)"}}),a("vl-style-text",{attrs:{text:e.valueName+"\n"+e.metric+e.metricName}})],1)],1)],1)],1),e.dibujaPoligono?a("vl-interaction-draw",{attrs:{source:"drawTarget",type:"Polygon",key:e.refreshDibujo},on:{drawend:e.terminado,"update:key":function(a){e.refreshDibujo=a}}}):e._e(),e.ModificaPoligono?a("vl-interaction-modify",{attrs:{source:"drawTarget"},on:{modifyend:e.editado}}):e._e(),a("vl-feature",[a("vl-geom-point",{attrs:{coordinates:e.coordenadasPunto},on:{"update:coordinates":function(a){e.coordenadasPunto=a}}}),a("vl-style-box",[a("vl-style-icon",{attrs:{src:"https://d4smartfarming.smartbits-es.com/imgMail/icono-mapa.png"}})],1)],1)],1),a("div",{attrs:{id:"div_buscador"}},[a("gmap-autocomplete",{staticClass:"form-control bx--text-input",staticStyle:{width:"100%"},attrs:{placeholder:e.$t("parcelas.ubicacion")},on:{place_changed:e.setPlace}})],1)],1)])])]):e._e(),e._e()],2)],1)}),oe=[],le=t("a79f"),ne=t("790a");const ce="https://api-d4sf.smartbits-es.com/api/v1.0";function de(){return c.a.get(ce+"/sigpac/get_comunidades/")}function pe(e){return c.a.get(`${ce}/sigpac/get_provincias/?comunidad=${e}`)}function he(e){return c.a.get(`${ce}/sigpac/get_municipios/?provincia=${e}`)}function me(e,a){return c.a.get(`${ce}/sigpac/get_agregados/?provincia=${e}&municipio=${a}`)}function ue(e,a,t){return c.a.get(`${ce}/sigpac/get_zonas/?provincia=${e}&municipio=${a}&agregado=${t}`)}function fe(e,a,t,s){return c.a.get(`${ce}/sigpac/get_poligonos/?provincia=${e}&municipio=${a}&agregado=${t}&zona=${s}`)}function ve(e,a,t,s,r){return c.a.get(`${ce}/sigpac/get_parcelas/?provincia=${e}&municipio=${a}&agregado=${t}&zona=${s}&poligono=${r}`)}function be(e,a,t,s,r,i){return c.a.get(`${ce}/sigpac/get_recintos/?provincia=${e}&municipio=${a}&agregado=${t}&zona=${s}&poligono=${r}&parcela=${i}`)}function _e(e){return c.a.get(`${ce}/sigpac/get_direct/?dato=${e}`)}var ge={name:"EditarParcel2",props:{userSeleccionado:String},data(){return{erorCompaGeoloc:"",mostrarIconErrGeoloc:"",metricName:"Ha",vProv:"",vMun:"",vAgre:"",vZona:"",vPol:"",vPar:"",vRec:"",verErrorBusq:!1,placeholderComunidad:this.$t("parcelas.comunidad"),labelComunidad:this.$t("parcelas.comunidad_sel"),comunidades:Array,visibleProv:!1,placeholderProv:this.$t("parcelas.provincia"),labelProv:this.$t("parcelas.provincia_sel"),provincias:Array,provinciaSel:0,visibleMun:!1,placeholderMun:this.$t("parcelas.municipio"),labelMun:this.$t("parcelas.municipio_sel"),municipios:Array,municipioSel:0,visibleAgre:!1,placeholderAgre:this.$t("parcelas.agregado"),labelAgre:this.$t("parcelas.agregado_sel"),agregados:Array,agregadoSel:0,visibleZona:!1,placeholderZona:this.$t("parcelas.zona"),labelZona:this.$t("parcelas.zona_sel"),zonas:Array,zonaSel:0,visiblePol:!1,placeholderPol:this.$t("parcelas.poligono"),labelPol:this.$t("parcelas.poligono_sel"),poligonos:Array,poligonoSel:0,visiblePar:!1,placeholderPar:this.$t("parcelas.parcela"),labelPar:this.$t("parcelas.parcela_sel"),parcelas:Array,parcelaSel:0,visibleRec:!1,placeholderRec:this.$t("parcelas.recinto"),labelRec:this.$t("parcelas.recinto_sel"),recintos:Array,recintoSel:0,selectedParcelList:0,colorParcela:"green",kindSave:"primary",sizeSave:"",disabledSave:!1,featuress:[],title_card:"",subtitle_card:"",closeAriaLabel:"Close",use_label:!0,use_title:!0,use_content:!0,size:"lg",use_primaryButton:!0,primaryButtonDisabled:!1,autoHideOff:!0,labelName:this.$t("parcelas.parcel_name"),valueName:"",disabledName:!1,inputTypeName:"text",placeholderName:this.$t("parcelas.place_name"),invalidMessageName:"",labelDesc:this.$t("parcelas.parcel_descrip"),valueDesc:"",disabledDesc:!1,inputTypeDesc:"text",placeholderDesc:this.$t("parcelas.place_descrip"),invalidMessageDesc:"",apiKeyBing:this.$apiKeyBing,imagerySetBing:"AerialWithLabels",maxZoomBing:20,zoom:15,center:[0,0],coordinates:[0,0],coordenadasParcel:[[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]],parcel:Array(),dibujaPoligono:!1,area:0,poligonObjecto:"",verErrorDraw:!1,coordinatesPoligono:[],allFeatures:Array(),allParcels:Array(),refreshDibujo:0,ModificaPoligono:!0,ErrorDraw:"",coordenadasPunto:[0,0]}},methods:{cerrarModal(){const e=document.querySelectorAll('[aria-label="Editar Parcela "]');e[0].addEventListener("mouseenter",()=>{console.log("Acabo de entrar"),this.autoHideOff=!1}),e[0].addEventListener("mouseleave",()=>{console.log("Acabo de salir"),this.autoHideOff=!0})},metricaparcela(e){const a=2.4710538146717,t=a*e;return this.metric="Acre",t.toFixed(2)},cargaLocalizacionActual(){if(!("geolocation"in navigator))return this.erorCompaGeoloc=this.$t("map.loc_no_disponible"),void(this.mostrarIconErrGeoloc=!0);navigator.geolocation.getCurrentPosition(e=>{console.info("Localizacion autorizada",e),this.mostrarIconErrGeoloc=!1,this.center=[e.coords.longitude,e.coords.latitude]},e=>{this.mostrarIconErrGeoloc=!0,console.info("Localización no autorizada",e)})},getEnterprise(){if(this.$route.query.enterprise){const e=`${this.$apiURL}/enterprises/${this.$route.query.enterprise}/?size=1000000000&page=1`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.enterprise=e.data,this.metric=this.enterprise.type_metric,this.actionShownMap()}).catch(e=>{console.warn(e)})}},bucardorSigpacDirect(){const e=[this.vProv,this.vMun,this.vAgre,this.vZona,this.vPol,this.vPar,this.vRec],a=["provinciabox","municipiobox","agregadobox","zonabox","poligonobox","parcelabox","recintobox"];let t=-1;console.info(e);let s="";if(e.map(e=>{e&&(t++,s+="/"+e)}),""==s)return!1;let r=a[t]+s;_e(r).then(e=>{const a=(e.data.data.features[0].properties.x1+e.data.data.features[0].properties.x2)/2,t=(e.data.data.features[0].properties.y1+e.data.data.features[0].properties.y2)/2;this.coordenadasPunto=[a,t],this.center=[a,t],this.zoom=18,this.verErrorBusq=!1}).catch(()=>{this.verErrorBusq=!0})},cargarComunidades(){console.log("Cargando comunidades"),de().then(e=>{this.comunidades=e.data.data.features}).catch(e=>{console.warn(e.response)})},actionChangeComunidades(e){pe(e).then(a=>{this.placeholderComunidad=e;const t=e;this.comunidades.forEach(e=>{e.properties.codigo==t&&(this.placeholderComunidad=e.properties.nombre)}),this.provincias=a.data.data.features,this.visibleProv=!0}).catch(e=>{console.warn(e.response)})},actionChangeProv(e){he(e).then(a=>{this.provinciaSel=e,this.placeholderProv=e,this.provincias.forEach(e=>{e.properties.codigo==this.provinciaSel&&(this.placeholderProv=e.properties.nombre)}),this.municipios=a.data.data.features,this.visibleMun=!0}).catch(e=>{console.warn(e.response)})},actionChangeMun(e){me(this.provinciaSel,e).then(a=>{this.placeholderMun=e;let t=[...new Set(a.data.data.features.map(e=>e.properties.codigo))];this.agregados=t,this.visibleAgre=!0,this.municipioSel=e,this.placeholderMun=e,this.municipios.forEach(e=>{e.properties.codigo==this.municipioSel&&(this.placeholderMun=e.properties.nombre)}),1==this.agregados.length&&(this.actionChangeAgre(this.agregados[0]),this.placeholderAgre=this.agregados[0])}).catch(e=>{console.warn(e)})},actionChangeAgre(e){ue(this.provinciaSel,this.municipioSel,e).then(a=>{this.placeholderAgre=e;let t=[...new Set(a.data.data.features.map(e=>e.properties.codigo))];this.zonas=t,this.visibleZona=!0,this.agregadoSel=e,1==this.agregados.length&&(this.actionChangeZona(this.agregados[0]),this.placeholderAgre=this.agregados[0])}).catch(e=>{console.warn(e)})},actionChangeZona(e){fe(this.provinciaSel,this.municipioSel,this.agregadoSel,e).then(a=>{this.zonaSel=e,this.placeholderZona=e,this.poligonos=a.data.data.features,this.visiblePol=!0}).catch(e=>{console.warn(e.response)})},actionChangePol(e){ve(this.provinciaSel,this.municipioSel,this.agregadoSel,this.zonaSel,e).then(a=>{this.poligonoSel=e,this.placeholderPol=e,this.parcelas=a.data.data.features,this.visiblePar=!0}).catch(e=>{console.warn(e.response)})},actionChangePar(e){let a=0;this.parcelas.forEach(t=>{t.properties.dn_pk==e&&(a=t.properties.codigo)}),be(this.provinciaSel,this.municipioSel,this.agregadoSel,this.zonaSel,this.poligonoSel,a).then(t=>{this.parcelaSel=e,this.placeholderPar=a,this.recintos=t.data.data.features,this.visibleRec=!0}).catch(e=>{console.warn(e.response)})},actionChangeRec(e){this.recintos.forEach(a=>{if(a.properties.dn_pk==e){const e=(a.properties.x1+a.properties.x2)/2,t=(a.properties.y1+a.properties.y2)/2;this.coordenadasPunto=[e,t],this.center=[e,t],this.zoom=18}})},setPlace(e){this.center=[e.geometry.location.lng(),e.geometry.location.lat()],this.zoom=15},openModal(e){this.$refs.editarRolForm.show(),this.verErrorDraw=!1,this.invalidMessageName="",this.showPassword=!1,this.title_card=this.$t("parcelas.parcel_edit"),this.subtitle_card=this.$t("parcelas.parcel_edit"),this.userSeleccionado=e,this.getEnterprise(),this.actionShownMap()},terminado(e){this.dibujaPoligono=!1,this.area=Math.round(Object(ne["a"])(e.feature.getGeometry())/1e4*1e4)/1e4,this.coordinatesBuenas(e.feature.getGeometry().getCoordinates()),this.verErrorDraw=!1},editado(e){this.coordinatesEditadas=e.features.array_[0].getGeometry().getCoordinates(),this.area=Math.round(Object(ne["a"])(e.features.array_[0].getGeometry())/1e4*1e4)/1e4,this.userSeleccionado&&this.coordinatesBuenas(this.coordinatesEditadas),this.verErrorDraw=!1},coordinatesBuenas(e){this.userSeleccionado?this.ModificaPoligono=!0:this.ModificaPoligono=!1;var a=new le["a"].Proj("EPSG:3785"),t=new le["a"].Proj("EPSG:4326");let s=Array,r="POLYGON((";for(var i=0;i<e[0].length;i++)s=Object(le["a"])(a,t,[e[0][i][0],e[0][i][1]]),this.coordinatesPoligono.push([s[0],s[1]]),r+=s[0]+" "+s[1],i!=e[0].length-1&&(r+=", ");r+="))",this.poligonObjecto=r;let o=`${this.$apiURL}/parcel_filter/?enterprise_id=${this.$route.query.enterprise}&polygon=${r}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(o).then(e=>{e.data.features.length?(this.errorDraw="",this.verErrorDraw=!1,e.data.features.forEach(e=>{this.userSeleccionado!=e.id&&(this.errorDraw+=`"${e.properties.name}"  `,this.userSeleccionado||(this.featuress=[],this.dibujaPoligono=!0))}),this.errorDraw?(this.verErrorDraw=!0,this.disabledSave=!0,this.errorDraw=`${this.$t("parcelas.parcela_solapada_con")}   ${this.errorDraw}`,this.colorParcela="red"):this.compruebaParcelaSimple(r)):this.compruebaParcelaSimple(r)}).catch(e=>{console.info(e.data)})},compruebaParcelaSimple(e){let a=`${this.$apiURL}/parcel_valid/?polygon=${e}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{"False"==e.data?(this.verErrorDraw=!0,this.disabledSave=!0,this.errorDraw=""+this.$t("parcelas.parcela_solapada_si"),this.colorParcela="red",this.userSeleccionado||(this.featuress=[],this.dibujaPoligono=!0)):(this.verErrorDraw=!1,this.disabledSave=!1,this.colorParcela="green",this.disabledSave=!1,this.compruebaLimites())}).catch(e=>{console.warn(e)})},compruebaLimites(){let e=`${this.$apiURL}/enterprises_except/${this.$route.query.enterprise}/?parcel=${this.userSeleccionado}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{const a=parseFloat(this.$parent.total_hectares_enterprise)/parseFloat(e.data.hectares_available)*100,t=(parseFloat(e.data.parcels.area__sum)+parseFloat(this.area))/parseFloat(e.data.hectares_available)*100;parseFloat(a)<parseFloat(t)&&t>100?(this.verErrorDraw=!0,this.disabledSave=!0,this.errorDraw=""+this.$t("parcelas.parcela_limite_area"),this.colorParcela="red",this.userSeleccionado||(this.featuress=[],this.dibujaPoligono=!0)):(this.verErrorDraw=!1,this.disabledSave=!1,this.colorParcela="green",this.disabledSave=!1)})},actionPrimary(){if(!this.verErrorDraw){let e="";this.userSeleccionado?(this.poligonObjecto||this.coordinatesBuenas(this.$refs["parcela"].$geometry.getCoordinates()),e=`${this.$apiURL}/parcels/${this.userSeleccionado}/`,c.a.put(e,{name:this.$refs.inputName.$refs.input.value,description:this.$refs.inputDesc.$refs.input.value,polygon:this.poligonObjecto,area:this.area,enterprise:this.$route.query.enterprise?this.$route.query.enterprise:sessionStorage.getItem("enterprise"),user_updated:sessionStorage.getItem("user")}).then(e=>{this.compruebaParcelas(e.data.id)}).catch(e=>{console.info(e)})):(e=this.$apiURL+"/parcels/",c.a.post(e,{name:this.$refs.inputName.$refs.input.value,description:this.$refs.inputDesc.$refs.input.value,polygon:this.poligonObjecto,area:this.area,enterprise:this.$route.query.enterprise?this.$route.query.enterprise:sessionStorage.getItem("enterprise"),user_created:sessionStorage.getItem("user")}).then(e=>{this.compruebaParcelas(e.data.id)}).catch(e=>{e.response.data.name&&(this.invalidMessageName=e.response.data.name[0]),e.response.data.polygon&&(this.verErrorDraw=!0),this.errorDraw=this.$t("parcelas.parcela_limite")}))}},compruebaParcelas(e){let a=`${this.$apiURL}/enterprises/${this.$route.query.enterprise}/`;var t=Array();c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(a=>{a.data.parcels.features.forEach(e=>{t.push(e.geometry.coordinates)}),console.info(this.coordinatesPoligono,e);const s=c.a.create({baseURL:this.$sentinelURL}),r={headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+localStorage.getItem("ApiAccessToken")}},i=JSON.stringify({name:""+this.$route.query.enterprise,userId:"6b9e0c32-9a47-4c08-bb44-8a5b7c178c41",additionalData:{showLogo:!1,showWarnings:!1,imageQuality:90,disabled:!1},areaOfInterest:{type:"MultiPolygon",coordinates:t,crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}}}});s.put("/configuration/v1/wms/instances/"+sessionStorage.getItem("sI"),i,r).then(e=>{console.info("respuesta sentinel",e),200==e.status||"OK"==e.statusText?(this.$parent.getUsers(),this.$refs.editarRolForm.hide(),this.$parent.componentKey+=1,this.coordenadasParcel="",this.$parent.mensajeAlerta=this.$t("parcelas.parcela_guardada"),this.$parent.tipoAlerta="success",this.$parent.$refs.alertaGeneral.verAlerta()):(this.$parent.getUsers(),this.$refs.editarRolForm.hide(),this.$parent.componentKey+=1,this.coordenadasParcel="",this.$parent.mensajeAlerta=this.$t("parcelas.parcel_guardada_error_sent"),this.$parent.tipoAlerta="error",this.$parent.$refs.alertaGeneral.verAlerta())}).catch(e=>{console.info("error",e),this.$parent.getUsers(),this.$refs.editarRolForm.hide(),this.$parent.componentKey+=1,this.coordenadasParcel="",this.$parent.mensajeAlerta=this.$t("parcelas.parcel_guardada_error_sent"),this.$parent.tipoAlerta="error",this.$parent.$refs.alertaGeneral.verAlerta()})})},actionShown(){this.coordenadasParcel="",this.$parent.componentKey+=1},actionShownMap(){let e=`${this.$apiURL}/parcels/${this.userSeleccionado}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.parcel=e.data,this.valueName=e.data.properties.name,this.valueDesc=e.data.properties.description,this.geometry=e.data,this.area=e.data.properties.area,this.coordenadasParcel=this.geometry.geometry.coordinates;let a="";a=this.$refs["parcela"].$geometry.extent_;const t=a[0]+(a[2]-a[0])/2,s=a[1]+(a[3]-a[1])/2;var r=new le["a"].Proj("EPSG:3785"),i=new le["a"].Proj("EPSG:4326");const o=Object(le["a"])(r,i,[t,s]);this.center=[o[0],o[1]],this.zoom=15,this.dibujaPoligono=!1,console.info(e.data)}).catch(e=>{console.info("entra"),this.cargarComunidades(),console.warn(e),this.disabledSave=!0,this.showPassword=!0,this.title_card=this.$t("parcelas.parcel_nueva"),this.subtitle_card=this.$t("parcelas.parcel_nueva"),this.valueName="",this.valueDesc="",this.coordenadasParcel=[0,0],this.center=[0,0],this.zoom=4,this.dibujaPoligono=!0}),e=`${this.$apiURL}/parcel_enterprise/${this.$route.query.enterprise}/`,c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{if(this.allParcels=e.data.features,this.userSeleccionado)this.selectedParcelList=this.userSeleccionado;else{const e=this.allParcels[this.allParcels.length-1];this.selectedParcelList=e.id,setTimeout(()=>{this.actionChangeParcels(this.selectedParcelList)},1e3)}})},actionChangeParcels(e){const a=this.$refs[e+"parcela"][0].$geometry.extent_,t=a[0]+(a[2]-a[0])/2,s=a[1]+(a[3]-a[1])/2;var r=new le["a"].Proj("EPSG:3785"),i=new le["a"].Proj("EPSG:4326");const o=Object(le["a"])(r,i,[t,s]);this.center=[o[0],o[1]],this.zoom=16}},mounted(){console.log("MOUNTED");const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language}),this.$refs.comunidadesSelect.$el.firstChild.style.display="flex",this.$refs.provinciasSelect.$el.firstChild.style.display="flex",this.$refs.munSelect.$el.firstChild.style.display="flex",this.$refs.agreSelect.$el.firstChild.style.display="flex",this.$refs.zonaSelect.$el.firstChild.style.display="flex",this.$refs.polSelect.$el.firstChild.style.display="flex",this.$refs.parSelect.$el.firstChild.style.display="flex",this.$refs.recSelect.$el.firstChild.style.display="flex",this.$refs.editarRolForm.$el.firstChild.style.width="98%",this.$refs.editarRolForm.$el.firstChild.style.height="95%",this.$refs.editarRolForm.$el.firstChild.style["max-width"]="100%",this.$refs.editarRolForm.$el.firstChild.style["max-height"]="100%",this.$refs.editarRolForm.$el.firstChild.childNodes[2].style["padding-right"]="1%",this.$refs.editarRolForm.$el.firstChild.childNodes[2].style["margin-bottom"]="1%",this.$refs.editarRolForm.$el.firstChild.childNodes[2].style["height"]="95%",this.cargarComunidades()},created(){var e=document.createElement("style");document.head.appendChild(e);var a=e.sheet;a.insertRule(".bx--modal-container--lg { width: 96% !important; height:95% !important; max-height: 100%; max-width: 100% }",0)},beforeCreate(){this.cerrarModal()}},Ae=ge,ye=(t("5229e"),Object(u["a"])(Ae,ie,oe,!1,null,"6444ff4b",null)),$e=ye.exports,Ce=function(){var e=this,a=e._self._c;return e.visibleAlerta?a("cv-toast-notification",{ref:"alerta",staticStyle:{"transition-timing-function":"cubic-bezier(0.2, 0, 1, 0.9)","transition-duration":"2000ms"},attrs:{kind:e.tipoAlert,title:e.tituloAlert,"low-contrast":e.lowContrast},on:{close:e.doClose}}):e._e()},Ee=[],xe={name:"AlertaGeneral",props:{tituloAlert:String,tipoAlert:String,ishidden:{type:Boolean,default:!0}},data(){return{lowContrast:!1,visibleAlerta:!1}},methods:{verAlerta(){this.visibleAlerta=!0,this.ishidden&&setTimeout(()=>{this.doClose()},3e3)},doClose(){this.visibleAlerta=!1}}},we=xe,Se=(t("e908"),Object(u["a"])(we,Ce,Ee,!1,null,"5379fa87",null)),Pe=Se.exports,ke={name:"ParcelsList",props:{},components:{Alertas:v,EditarParcel2:$e,AlertaGeneral:Pe},data(){return{sortable:!1,start:0,length:10,columns3:[{key:"name",label:this.$t("parcelas.nombre"),sortable:!0},{key:"description",label:this.$t("parcelas.descrip")},{key:"heactareas",label:this.$t("parcelas.hectareas"),sortable:!0},{key:"",label:""}],usuarios:[],basicPagination:!1,use_batchActions:!0,hasExpandingRows:!1,use_slottedData:!0,mensajeAlerta:"",userSeleccionado:"",visibleAlertaEliminar:!1,componentKey:0,busqueda:"",columa:"",ordena:"",total_hectares_enterprise:0,disabledAddNewParcel:!1,titleDisabledAddNewParcel:"",scrollPosition:0}},methods:{keepPositionScroll(){this.scrollPosition=window.scrollY},putPositionScroll(){setTimeout(()=>{window.scrollTo(0,this.scrollPosition)},0)},formateaHectareas(e){return"Acre"==this.enterprise.type_metric?e:Math.round(100*(e+Number.EPSILON))/100},metricaparcela(e){if("Acre"==this.enterprise.type_metric){const a=2.4710538146717,t=a*e;return this.metric="Acre",console.log(t.toFixed(4)),t.toFixed(4)}return e},editarRow(e){this.$refs.table.selectedRows.forEach(()=>{this.$refs.table.selectedRows.pop()}),this.$refs.table.selectedRows.push(e),this.onBatchAction2()},eliminaRow(e){this.$refs.table.selectedRows.forEach(()=>{this.$refs.table.selectedRows.pop()}),this.$refs.table.selectedRows.push(e),this.onBatchAction1()},showAlert(){this.mensajeAlerta=this.$t("parcelas.desarrollo"),this.tipoAlerta="info",this.$refs.alertaGeneral.verAlerta()},actionOnPagination(e){this.start=e.start-1,this.length=e.length},getUsers(){if("undefined"==typeof this.idEmpresaEd&&(this.idEmpresaEd=localStorage.getItem("enterprise")||sessionStorage.getItem("enterprise")),this.idEmpresaEd){this.$route.query.enterprise?(this.idEmpresaEd=this.$route.query.enterprise,localStorage.setItem("enterprise",this.idEmpresaEd),sessionStorage.setItem("enterprise",localStorage.getItem("enterprise"))):this.idEmpresaEd=this.idEmpresaEd||localStorage.getItem("enterprise")||sessionStorage.getItem("enterprise"),console.log("Id Empresa desde dentro",this.idEmpresaEd);const e=`${this.$apiURL}/enterprises/${this.idEmpresaEd}/?size=1000000000&page=1`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.enterprise=e.data,console.log(e.data),console.log(this.enterprise.type_metric),this.metric=this.enterprise.type_metric,this.usuarios=e.data.parcels.features,this.usuarios.forEach(e=>{this.total_hectares_enterprise+=e.properties.area,e.properties.area=this.metricaparcela(e.properties.area)});const a=parseFloat(this.total_hectares_enterprise)/parseFloat(e.data.hectares_available)*100;a>=100&&(this.disabledAddNewParcel=!0,this.titleDisabledAddNewParcel=this.$t("parcelas.parcel_limit"))}).catch(e=>{console.warn(e)})}else{const e=this.$apiURL+"/parcels/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.usuarios=e.data.features}).catch(e=>{console.error(e)})}this.total_hectares_enterprise},onBatchAction2(){const e=this.$refs.table.selectedRows;e.length>1?(this.mensajeAlerta=this.$t("parcelas.parcel_sel_alert"),this.$refs.alerta.verAlerta()):(this.userSeleccionado=e[0],this.$refs.modal.openModal(this.userSeleccionado))},onBatchAction1(){this.$refs.alerta_eliminar.dataVisible=!0,console.warn(this.$refs.alerta_eliminar.dataVisible)},actionPrimary(){const e=this.$refs.table.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const t=`${this.$apiURL}/parcels/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.delete(t).then(()=>{this.getUsers()}).catch(e=>{a=!0,console.log(e.error)})}),a?(console.error("error"),this.mensajeAlerta=this.$t("parcelas.parcel_del_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},doClose(){this.visibleAlerta=!1},actionNew(){this.$refs.modal.openModal()},onBuscar(e){"undefined"==typeof this.idEmpresaEd&&(this.idEmpresaEd=localStorage.getItem("enterprise")||sessionStorage.getItem("enterprise")),this.$route.query.enterprise?(this.idEmpresaEd=this.$route.query.enterprise,localStorage.setItem("enterprise",this.idEmpresaEd),sessionStorage.setItem("enterprise",localStorage.getItem("enterprise"))):this.idEmpresaEd=this.idEmpresaEd||localStorage.getItem("enterprise")||sessionStorage.getItem("enterprise"),this.busqueda=e;const a=`${this.$apiURL}/enterprises/${this.idEmpresaEd}/?size=1000000000&page=1&parcel_mame=${e}&colum_name=${this.columa}&order=${this.ordena}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.usuarios=e.data.parcels.features}).catch(e=>{console.warn(e)})},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"2":t="area";break;default:t="name"}this.columa=t,this.ordena=s;const r=`${this.$apiURL}/enterprises/${localStorage.getItem("enterprise")}/?size=1000000000&page=1&parcel_mame=${this.busqueda}&colum_name=${t}&order=${s}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(r).then(e=>{this.usuarios=e.data.parcels.features}).catch(e=>{console.warn(e)})}},created(){this.getUsers()}},Ie=ke,je=Object(u["a"])(Ie,se,re,!1,null,"1709fb4a",null),Le=je.exports,Me=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("MapComponent4")],1)],1)},Oe=[],Ne=function(){var e=this,a=e._self._c;return a("div",[a("cv-header",{attrs:{"aria-label":"Carbon header",id:"top-menu"}},[a("cv-header-menu-button",{attrs:{"aria-label":"Header menu","aria-controls":"side-nav"}}),a("cv-skip-to-content",{attrs:{href:"#main-content"}}),a("cv-header-name",{attrs:{prefix:"",to:"/"}},[a("img",{attrs:{alt:"Vue logo",src:t("9a4a")}})]),a("cv-header-nav",{attrs:{"aria-label":"Carbon nav"}},[a("cv-header-menu-item",{attrs:{to:"/map"}},[e._v(e._s(e.$t("app.dashboard")))]),e.is_superuser||e.is_systemadmin||e.is_enterpriseadmin?a("cv-header-menu",{attrs:{"aria-label":e.$t("app.administracion"),title:e.$t("app.administracion")}},[e.is_superuser||e.is_systemadmin?a("cv-header-menu-item",{attrs:{to:"/admin-enterprises"}},[e._v(e._s(e.$t("app.administracion_empresas")))]):e._e(),e.is_superuser||e.is_systemadmin?a("cv-header-menu-item",{attrs:{to:"/admin-users"}},[e._v(e._s(e.$t("app.administracion_usuarios")))]):e.is_enterpriseadmin&&!e.is_coop_user?a("cv-header-menu-item",{attrs:{to:e.customLinkEnterprise}},[e._v(e._s(e.$t("app.administracion_empresas")))]):e.is_enterpriseadmin&&e.is_coop_user?a("cv-header-menu-item",{attrs:{to:e.customLinkCoop}},[e._v(e._s(e.$t("app.administracion_cooperativas")))]):e._e(),e.is_superuser||e.is_systemadmin?a("cv-header-menu-item",{attrs:{to:"/admin-cooperatives"}},[e._v(e._s(e.$t("app.administracion_cooperativas")))]):e._e()],1):e._e(),e.is_superuser?a("cv-header-menu",{attrs:{"aria-label":"SuperAdm Acciones",title:"SuperAdm Acciones"}},[e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/importparcelsfromfile"}},[e._v("Importar Parcelas desde Archivo")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/importparcelsfromfileKML"}},[e._v("Importar Parcelas desde Archivo KML/KMZ")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/importparcelsHitfromfileKML"}},[e._v("Importar Parcelas desde Archivo KML/KMZ (empresa Hit)")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/importparcelsfromGeoJSON"}},[e._v("Importar Parcelas desde Archivo GeoJSON")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/parcelstosent"}},[e._v("Parcelas 2 Sentinel")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/sentinelinstancesrefresh"}},[e._v("Refresh Instances Parcels")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/gengraficosnew"}},[e._v("Nuevo Generador de Gráficos")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/gengraficosanterioresnew"}},[e._v("Nuevo Gráficos Anteriores")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/parcelstocheckhas"}},[e._v("Comprobar Has Parcelas")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/parcelstocheckhas"}},[e._v("Importar Parcelas desde Archivo")]):e._e(),e.is_superuser?a("cv-header-menu-item",{attrs:{to:"/importcampanafromfile"}},[e._v("Importar Campaña desde Archivo")]):e._e()],1):e._e(),a("cv-header-menu",{attrs:{"aria-label":"Monitor",title:"Monitor"}},[a("cv-header-menu-item",{attrs:{to:"/monitor"}},[e._v("Evolución de cultivo (Monitor)")]),a("cv-header-menu-item",{attrs:{to:"/actualizarMonitor"}},[e._v("Actualizar Monitor")])],1),e.is_superuser||e.is_systemadmin||e.is_enterpriseadmin?a("cv-header-menu",{attrs:{"aria-label":"Informes",title:"Informes"}},[e.is_superuser||e.is_systemadmin||e.is_enterpriseadmin?a("cv-header-menu-item",{attrs:{to:"/gengraficosnew"}},[e._v("Generar Informe")]):e._e(),e.is_superuser||e.is_systemadmin||e.is_enterpriseadmin?a("cv-header-menu-item",{attrs:{to:"/gengraficosanterioresnew"}},[e._v("Informes Anteriores")]):e._e()],1):e._e()],1),a("template",{slot:"header-global"},[a("cv-header-global-action",{attrs:{"aria-label":"User avatar",title:e.$t("app.perfil"),"aria-controls":"user-panel"},on:{click:e.editarPerfil}},[a("UserAvatarFilledAlt20")],1),a("cv-header-global-action",{attrs:{"aria-label":"Logout",title:e.$t("app.desconect"),"aria-controls":"user-panel"},on:{click:e.logOut}},[a("Logout20")],1)],1)],2),a("EditarPerfil",{ref:"editarPerfil"})],1)},De=[],ze=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"editarPerfilForm",attrs:{"close-aria-label":e.closeAriaLabel,size:e.size,"primary-button-disabled":e.primaryButtonDisabled,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.actionPrimary}},[e.use_label?a("template",{slot:"label"},[e._v(e._s(e.title_card))]):e._e(),e.use_title?a("template",{slot:"title"},[e._v(e._s(e.subtitle_card)+" "+e._s(e.userSeleccionado))]):e._e(),e.use_content?a("template",{ref:"content_form",staticClass:"formcontent",slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputName",attrs:{label:e.$t("empleados.user_name"),value:e.value,disabled:e.disabled,type:e.inputType,placeholder:e.$t("empleados.user_name"),"invalid-message":e.invalidMessage,id:"input-MIRLwtCq"}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNameLast",attrs:{label:e.$t("empleados.user_lastname"),value:e.valueLast,disabled:e.disabled,type:e.inputType,placeholder:e.$t("empleados.user_lastname"),"invalid-message":e.invalidMessageLast,id:"input-MIRLwtCq"}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputMail",attrs:{label:e.$t("empleados.user_email"),value:e.valueMail,disabled:e.disabledMail,type:e.inputTypeMail,placeholder:e.placeholderMail,"invalid-message":e.invalidMessageMail,id:"input-3zcRveTf"}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNumberPhone",attrs:{label:e.$t("empleados.user_phone"),"invalid-message":e.invalidMessagePhone,disabled:e.disabledPhone,value:e.valuePhone}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[e.showPassword?a("cv-text-input",{ref:"inputPassword",attrs:{label:e.$t("empleados.password"),value:e.valuePassword,disabled:e.disabledPassword,type:e.inputTypePassword,placeholder:e.$t("empleados.password"),"invalid-message":e.invalidMessagePassword}}):e._e()],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-dropdown",{ref:"inputLang",attrs:{label:e.$t("empleados.label_lang"),value:e.valueLang}},[a("cv-dropdown-item",{attrs:{value:"es"}},[e._v(e._s(e.$t("empleados.esp")))]),a("cv-dropdown-item",{attrs:{value:"en"}},[e._v(e._s(e.$t("empleados.eng")))])],1)],1)])]):e._e(),e.use_primaryButton?a("template",{slot:"primary-button"},[e._v(e._s(e.$t("empleados.guardar")))]):e._e()],2)},Re=[],Ge={name:"EditarPerfil",props:{userSeleccionado:String},components:{},data(){return{labelLang:this.$t("empleados.label_lang"),valueLang:"",valueRol:"is_staff",invalidMessageRol:this.$t("empleados.select_row"),labelRol:this.$t("empleados.rol"),disabledRol:!1,title_card:"",subtitle_card:"",closeAriaLabel:"Close",use_label:!0,use_title:!0,use_content:!0,size:"",use_primaryButton:!0,primaryButtonDisabled:!1,autoHideOff:!1,labelPassword:this.$t("empleados.password"),disabledPassword:!1,inputTypePassword:"password",placeholderPassword:this.$t("empleados.password"),invalidMessagePassword:"",valuePassword:"",showPassword:!1,label:this.$t("empleados.user_name"),disabled:!1,inputType:"text",placeholder:this.$t("empleados.user_name"),invalidMessage:"",value:"",labelLast:this.$t("empleados.user_lastname"),placeholderLast:this.$t("empleados.user_lastname"),invalidMessageLast:"",valueLast:"",labelMail:this.$t("empleados.user_email"),disabledMail:!1,inputTypeMail:"email",placeholderMail:"example@example.com",invalidMessageMail:"",valueMail:"",labelPhone:this.$t("empleados.user_phone"),invalidMessagePhone:"",disabledPhone:!1,valuePhone:"",user:"",is_enterpriseadmin:!1,is_staff:!1,password:"",id:""}},methods:{openModal(){this.$refs.editarPerfilForm.show(),this.showPassword=!0,this.title_card=this.$t("empleados.edit_perfil"),this.subtitle_card=this.$t("empleados.edit_perfil");const e=this.$apiURL+"/profile/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.value=e.data[0].first_name,this.valueMail=e.data[0].email,this.valuePhone=e.data[0].phone_number,this.valueLast=e.data[0].last_name,this.user=e.data[0].user,this.id=e.data[0].id,this.valueLang=e.data[0].language,this.userLoginData(e.data[0].user)}).catch(()=>{this.$refs.editarPerfilForm.hide()})},userLoginData(e){const a=`${this.$apiURL}/profiledata/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.valueMail=e.data.email,this.password=e.data.password,this.valueLang=e.data.language})},actionPrimary(){let e="";e=`${this.$apiURL}/profiles/${this.id}/`,c.a.put(e,{first_name:this.$refs.inputName.$refs.input.value,last_name:this.$refs.inputNameLast.$refs.input.value,phone_number:this.$refs.inputNumberPhone.$refs.input.value}).then(e=>{this.value=e.data.first_name,this.valueMail=e.data.email,this.invalidMessageMail="",this.invalidMessage="",this.putUserData()}).catch(e=>{const a=e.response.data;a.first_name&&(this.invalidMessage=this.$t("empleados.campo_requerido")),a.last_name&&(this.invalidMessageLast=this.$t("empleados.campo_requerido")),a.phone_number&&(this.invalidMessagePhone=this.$t("empleados.campo_requerido"))})},putUserData(){const e=this.$refs.inputPassword.$refs.input.value,a=`${this.$apiURL}/profiledata/${this.user}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),e?c.a.put(a,{email:this.$refs.inputMail.$refs.input.value,language:this.$refs.inputLang.dataValue,password:e||""}).then(()=>{this.$refs.editarPerfilForm.hide(),this.$parent.mensajeAlerta=this.$t("empleados.perfil_guardado"),this.$parent.tipoAlerta="success",this.$parent.$refs.alertaGeneral.verAlerta()}).catch(e=>{const a=e.response.data;a.email&&(this.invalidMessageMail=this.$t("empleados.campo_requerido")),a.password&&(this.invalidMessagePassword=this.$t("empleados.campo_requerido"))}):c.a.put(a,{email:this.$refs.inputMail.$refs.input.value,language:this.$refs.inputLang.dataValue}).then(()=>{this.$root.$i18n.locale=this.$refs.inputLang.dataValue,this.$refs.editarPerfilForm.hide(),this.$parent.mensajeAlerta=this.$t("empleados.perfil_guardado"),this.$parent.tipoAlerta="success",this.$parent.$refs.alertaGeneral.verAlerta()}).catch(e=>{const a=e.response.data;a.email&&(this.invalidMessageMail=this.$t("empleados.campo_requerido")),a.password&&(this.invalidMessagePassword=this.$t("empleados.campo_requerido"))})}},mounted(){if(this.$session.get("user")){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language})}this.$refs.editarPerfilForm.$el.firstChild.style.width="95%",this.$refs.editarPerfilForm.$el.firstChild.style.height="65%",this.$refs.editarPerfilForm.$el.firstChild.style["max-with"]="100%",this.$refs.editarPerfilForm.$el.firstChild.style["max-height"]="100%",this.$refs.editarPerfilForm.$el.firstChild.childNodes[2].style["padding-right"]="2%",this.$refs.editarPerfilForm.$el.firstChild.childNodes[2].style["margin-bottom"]="2%",this.$refs.editarPerfilForm.$el.firstChild.childNodes[2].style["height"]="95%"}},Fe=Ge,Be=(t("793b"),Object(u["a"])(Fe,ze,Re,!1,null,"19767a8b",null)),Ue=Be.exports;const Ve="https://api-d4sf.smartbits-es.com/api/v1.0";function Te(){return c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(Ve+"/profile/")}function He(e){return c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(`${Ve}/permisos/${e}/`)}var qe={name:"Board",data(){return{is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,customLinkEnterprise:"",customLinkCoop:""}},components:{EditarPerfil:Ue},methods:{editarPerfil(){this.$refs.editarPerfil.openModal()},logOut(){sessionStorage.removeItem("apiAccess"),sessionStorage.removeItem("email"),this.$session.destroy(),this.$router.push("/login")}},mounted:function(){},beforeCreate(){Te().then(e=>{const a=e.data[0];this.customLinkEnterprise="edit-enterprise?enterprise="+a.enterprise_id,a.cooperative_user&&(this.customLinkCoop="edit-cooperative?cooperative="+a.enterprise_id),He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user})})}},Ye=qe,Ze=(t("74a7"),Object(u["a"])(Ye,Ne,De,!1,null,null,null)),Qe=Ze.exports,Je=function(){var e=this,a=e._self._c;return a("div",[a("cv-loading",{attrs:{small:!0,active:!0,overlay:!1,id:"cargando"}}),a("vl-map",{ref:"map",staticClass:"mapa",staticStyle:{height:"400px"},attrs:{"load-tiles-while-animating":!1,"load-tiles-while-interacting":!1,"data-projection":"EPSG:4326",id:"map"}},[a("vl-view",{attrs:{zoom:e.zoom,center:e.center},on:{"update:zoom":function(a){e.zoom=a}}}),e._l(e.arrEmpresas,(function(t){return a("vl-layer-tile",{key:`${t.id}_layers_${e.timestampSentinel}`,attrs:{id:"wmts_"+t.id,opacity:e.opacitylayer,"z-index":2}},[t.parcels.features.length?a("vl-source-wms",{key:`${t.id}_${e.timestampSentinel}`,attrs:{url:`${e.urlSentinel}${t.sentinel_instance}/?MAXCC=100&v=${e.timestampSentinel}&`,urlProcessingApi:`${e.urlSentinel}${t.sentinel_instance}/?MAXCC=100&&v=${e.timestampSentinel}&`,maxcc:"100",minZoom:e.minZoom,maxZoom:e.maxZoom,preset:e.preset,layers:e.SentinelLayer,time:e.time,serverType:e.serverType,opacity:e.opacitylayer,transition:e.transition,tiled:!1},on:{"update:time":function(a){e.time=a}}}):e._e()],1)})),e._l(e.arrEmpresas,(function(t){return a("vl-layer-vector",{key:`${t.id}_1_${e.timestamp}`,attrs:{"z-index":3}},[t.parcels?a("vl-source-vector",{ref:"drawTarget",refInFor:!0,attrs:{features:t.parcels.features}}):e._e(),a("vl-style-func",{attrs:{factory:e.pointsStyleFunc}})],1)})),e.verCrearParcel?a("vl-interaction-select",{key:e.timestampSentinel,ref:"selectInteraction",attrs:{id:"modify_target_"+e.timestamp,ident:"modify-target"},on:{select:e.selecionaPolygon}}):e._e(),e.verCrearParcel?a("vl-interaction-modify",{attrs:{source:"modify-target"},on:{modifyend:e.editado}}):e._e(),a("vl-layer-vector",{key:"the_source_indent_"+e.timestampDrawPolygon,attrs:{"z-index":4}},[a("vl-source-vector",{attrs:{ident:"the-source",features:e.featuresNewPolygon},on:{"update:features":function(a){e.featuresNewPolygon=a}}}),a("vl-style-box",[a("vl-style-stroke",{attrs:{color:"green"}}),a("vl-style-fill",{attrs:{color:"rgba(255,255,255,0.5)"}})],1)],1),e.verCrearParcel||e.verCrearParcelDraw?e._e():a("vl-interaction-draw",{key:"the_source_"+e.timestampDrawPolygon,attrs:{type:"Polygon",source:"the-source"},on:{drawend:e.terminadoNewPolygon}}),e.olcultarInconoUbi?e._e():a("vl-feature",[a("vl-geom-point",{attrs:{coordinates:e.coordenadasPunto},on:{"update:coordinates":function(a){e.coordenadasPunto=a}}}),a("vl-style-box",[a("vl-style-icon",{attrs:{src:"https://d4smartfarming.smartbits-es.com/imgMail/icono-mapa.png"}})],1)],1),a("vl-layer-tile",{attrs:{id:"bingmaps"}},[a("vl-source-bingmaps",{attrs:{"api-key":e.apiKeyBing,"imagery-set":e.imagerySetBing,maxZoom:e.maxZoomBing}})],1)],2),e.flagIndicatingDataHasBeenLoadedInVariables?[e.isMobile()?e._e():a("ControllerPanel",{attrs:{username:e.name,"arr-enterprises":e.arrEmpresas4List,"arr-cooperativas":e.arrCooperativas,is_superuser:e.is_superuser,is_systemadmin:e.is_systemadmin,is_staff:e.is_staff,is_enterpriseadmin:e.is_enterpriseadmin,is_coop_user:e.is_coop_user,"checked-toggle-mostar-texto":e.checkedToggleMostarTexto,"layers-selector":e.layersSelector,"map-component":e.$refs.map.$map,"all-parcels-of-enterprises":e.allParcelsOfEnterprises,"all-parcels-of-enterprises-filter":e.allParcelsOfEnterprisesFilter,"sentinel-layer":e.SentinelLayer},on:{setToggleAlertSolpamiento:function(a){e.showSolapamientoAlert=a},setCenter:function(a){e.center=a},setflagparcela:function(a){e.zoom=a},setCenterLocation:function(a){e.coordenadasPunto=a},setToggleMostrarTexto:function(a){e.checkedToggleMostarTexto=a,e.getNow()},setEnterprise:function(a){e.arrEmpresas=a,e.getNow(),e.arrEmpresas4List=a},setSentinelLayer:function(a){e.getNowSentinel(),e.SentinelLayer=a},setSentinelClearCache:function(a){return e.getNowSentinel()},setSentinelOpacity:function(a){e.opacitylayer=a},setFechaSentinel:function(a){e.time=a},setAllParcelsOfEnterprises:function(a){e.allParcelsOfEnterprises=a,e.allParcelsOfEnterprisesFilter=a},setAllParcelsOfEnterprisesFilter:function(a){e.allParcelsOfEnterprisesFilter=a},setOcultarInconoUbi:function(a){e.olcultarInconoUbi=a}}}),e.isMobile()?a("ControllerPanel4Mobile",{attrs:{username:e.name,"arr-enterprises":e.arrEmpresas4List,"arr-cooperativas":e.arrCooperativas,is_superuser:e.is_superuser,is_systemadmin:e.is_systemadmin,"checked-toggle-mostar-texto":e.checkedToggleMostarTexto,"layers-selector":e.layersSelector,"map-component":e.$refs.map.$map,"all-parcels-of-enterprises":e.allParcelsOfEnterprises,"all-parcels-of-enterprises-filter":e.allParcelsOfEnterprisesFilter,"sentinel-layer":e.SentinelLayer},on:{setflagparcela:function(a){e.zoom=a},setCenter:function(a){e.center=a},setToggleMostrarTexto:function(a){e.checkedToggleMostarTexto=a,e.getNow()},setToggleAlertSolpamiento:function(a){e.showSolapamientoAlert=a},setEnterprise:function(a){e.arrEmpresas=a,e.getNow(),e.arrEmpresas4List=a},setSentinelLayer:function(a){e.getNowSentinel(),e.SentinelLayer=a},setSentinelClearCache:function(a){return e.getNowSentinel()},setSentinelOpacity:function(a){e.opacitylayer=a},setFechaSentinel:function(a){e.time=a},setAllParcelsOfEnterprises:function(a){e.allParcelsOfEnterprises=a,e.allParcelsOfEnterprisesFilter=a},setAllParcelsOfEnterprisesFilter:function(a){e.allParcelsOfEnterprisesFilter=a}}}):e._e(),!e.ifQuickEdit||e.is_coop_user||e.is_staff?e._e():a("ControllerQuickEdit",{attrs:{"parcel-selected":e.parcelSelected,"error-draw-msg":e.errorDrawMsg,"ver-error-draw":e.verErrorDraw,"coordinates-poly":e.coordinatesPoly,"value-name":e.valueName,"value-desc":e.valueDesc,"arr-enterprises":e.arrEmpresas,"arr-cooperativas":e.arrCooperativas,"area-for-new-polygon":e.areaForNewPolygon},on:{setClearFeatures:function(a){e.featuresNewPolygon=[]},setVerCrearParcel:function(a){e.verCrearParcel=a},setVerCrearParcelDraw:function(a){e.verCrearParcelDraw=a},setcoordinatesPoly:function(a){e.coordinatesPoly=a,e.featuresNewPolygon=[]},setifQuickEdit:function(a){e.ifQuickEdit=a},setverErrorDraw:function(a){e.verErrorDraw=a},setSentinelClearCache:function(a){return e.getNowSentinel()},setClearParcels:function(a){return e.getNow()},setEnterprise:function(a){e.arrEmpresas=a,e.getNow(),e.arrEmpresas4List=a},setAllParcelsOfEnterprises:function(a){e.allParcelsOfEnterprises=a,e.allParcelsOfEnterprisesFilter=a}}}),a("ControllerGoogleSearch",{on:{setCenter:function(a){e.center=a,e.coordenadasPunto=a}}}),e.ifQuickEdit||e.is_coop_user||e.is_staff?e._e():a("ControllerQuickCreate",{attrs:{"ver-crear-parcel":e.verCrearParcel,"error-draw-msg":e.errorDrawMsg,"ver-error-draw":e.verErrorDraw,"coordinates-poly":e.coordinatesPoly,"arr-enterprises":e.arrEmpresas4List,"arr-enterprises-selected":e.empresaSelForCreateParcel?e.empresaSelForCreateParcel:e.arrEmpresas,"arr-cooperativas":e.arrCooperativas,is_superuser:e.is_superuser,is_systemadmin:e.is_systemadmin,"area-for-new-polygon":e.areaForNewPolygon,user:e.user},on:{setVerCrearParcel:function(a){e.verCrearParcel=a},setverErrorDraw:function(a){e.verErrorDraw=a},setEnterpriseSelect:function(a){e.empresaSelForCreateParcel=a},setClearFeatures:function(a){e.featuresNewPolygon=[]},setVerCrearParcelDraw:function(a){e.verCrearParcelDraw=a},clearCacheDraw:function(a){return e.getNowRefreshDrawPolygon()},setSentinelClearCache:function(a){return e.getNowSentinel()},setcoordinatesPoly:function(a){e.coordinatesPoly=a,e.featuresNewPolygon=[]},setEnterprise:function(a){e.arrEmpresas=a,e.getNow(),e.arrEmpresas4List=a},setAllParcelsOfEnterprises:function(a){e.allParcelsOfEnterprises=a,e.allParcelsOfEnterprisesFilter=a}}})]:e._e()],2)},Xe=[];const We="https://api-d4sf.smartbits-es.com/api/v1.0",Ke="https://services.sentinel-hub.com",ea="https://api-d4sf.smartbits-es.com/media";function aa(e){return c.a.get(`${We}/enterprises/${e}/?size=99999999&page=1`)}function ta(e=!0){return e?c.a.get(We+"/enterprises_active/?&size=99999999&page=1"):c.a.get(We+"/enterprises_active/?size=99999999&page=1")}function sa(){return c.a.get(We+"/enterprises_active/?size=99999999&page=1")}function ra(){return c.a.get(We+"/enterprises_active_and_monitor/?&size=99999999&page=1")}function ia(){const e=c.a.create({baseURL:Ke}),a={headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+localStorage.getItem("ApiAccessToken")}};return e.get("/configuration/v1/wms/instances/2440dd85-0720-4c4c-bea2-7982fa8aa9b1/layers",a)}function oa(e,a,t){console.info("setParcelsForInstance ....................",e,a,t);const s=c.a.create({baseURL:Ke}),r={headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+localStorage.getItem("ApiAccessToken")}},i=JSON.stringify({name:""+e,userId:"6b9e0c32-9a47-4c08-bb44-8a5b7c178c41",additionalData:{showLogo:!1,showWarnings:!1,imageQuality:100,disabled:!1},areaOfInterest:{type:"MultiPolygon",coordinates:a,crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}}}});return s.put("/configuration/v1/wms/instances/"+t,i,r)}function la(e){console.warn("getFechasSentinel ....................");const a=c.a.create({baseURL:Ke});var t,s=new Date;return s.setDate(s.getDate()),t=("0"+s.getDate()).slice(-2)+"/"+("0"+(s.getMonth()+1)).slice(-2),t=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2),a.get(`/ogc/wfs/2440dd85-0720-4c4c-bea2-7982fa8aa9b1?REQUEST=GetFeature&TYPENAMES=S2.TILE&OUTPUTFORMAT=application/json&TIME=2020-01-01/${t}&BBOX=${e}&SRSNAME=EPSG:3857`)}function na(e,a){return c.a.get(`${We}/parcel_filter/?enterprise_id=${a}&polygon=${e}`)}function ca(e,a,t,s,r){return c.a.put(`${We}/parcel/${a}/`,{polygon:e,name:t,description:s,area:r})}function da(e){return c.a.delete(`${We}/parcel/${e}/`)}function pa(e,a,t,s,r,i){return console.info(We+"/parcels/",e,a,t,s,r,i),c.a.post(We+"/parcels/",{name:e,description:a,polygon:t,area:s,enterprise:r,user_created:i})}function ha(e,a,t,s,r,i,o){return c.a.post(We+"/procesadonew/",{nombre:e,capa:a,fechaInicio:t[0],fechaFin:t[1],id_parcelas:s,enterprise_id:i,esCooperative:r,includeClouds:o})}function ma(e="all",a="created",t="descending"){return c.a.get(`${We}/procesadonew/?enterprise_id=${e}&order=${t}&colum_name=${a}`)}function ua(e){return c.a.delete(We+"/procesadonew/",{data:{id_parcelas:e}})}function fa(e,a){return c.a.put(`${We}/procesadonew/${e}/`,{id:e,nombre:a})}function va(e,a,t,s,r){return c.a.put(We+"/unificarInformes/",{nombre:e,enterprise_id:a,informes_sel:t,check_dell:s,capa:r})}function ba(e,a){return c.a.post(We+"/procesadonewfechas/",{id_parcelas:e,fechaInicio:a[0],fechaFin:a[1]})}function _a(e,a){return c.a.post(We+"/getbbox/",{id_parcelas:e,fechaInicio:a[0],fechaFin:a[1]})}function ga(e){return c.a.get(`${ea}/${e}`)}function Aa(){return c.a.get(We+"/profiles/")}function ya(){return c.a.get(We+"/profiledata/")}function $a(e,a,t){const s=new FormData;return s.append("file",e),s.append("enterprise_id",a),s.append("confirm_import",t),c.a.post(We+"/parcelasImportFromFile/",s)}function Ca(e,a,t,s=!1){const r=new FormData;return r.append("file",e),r.append("enterprise_id",a),r.append("confirm_import",t),s&&r.append("client",s),c.a.post(We+"/parcelasImportFromFileKML/",r)}function Ea(e,a,t,s){const r=new FormData;return r.append("file",e),r.append("enterprise_id",a),r.append("confirm_import",t),r.append("borrado",s),c.a.post(We+"/parcelasImportFromGeoJSON/",r)}function xa(e,a,t){const s=new FormData;return s.append("file",e),s.append("enterprise_id",a),s.append("confirm_import",t),c.a.post(We+"/campanaImportFromFile/",s)}function wa(e,a,t){return c.a.post(We+"/campana/data/",{finicio:e,ffin:a,parcels:t})}function Sa(e,a,t){return c.a.post(We+"/produccion/data/",{finicio:e,ffin:a,parcels:t})}function Pa(e,a){return c.a.put(We+"/campana/recogida/",{fecha:a,parcelas:e})}function ka(e){return c.a.post(We+"/generarinforme/generar/",{id:e})}const Ia="https://api-d4sf.smartbits-es.com/api/v1.0";async function ja(){return c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),await c.a.get(Ia+"/cooperativesonenrlt/")}async function La(e){return c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),await c.a.get(`${Ia}/cooperativesonenrlt/${e}/`)}var Ma=function(){var e=this,a=e._self._c;return a("div",{ref:"layersController",staticClass:"layersControler",attrs:{id:"layersControler"}},[a("div",[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("span",[e.expand2?a("ChevronSortDown20",{on:{click:e.onclickTile2}}):e._e()],1),a("span",[e.expand2?e._e():a("ChevronSortUp20",{staticStyle:{transform:"translate(0px, 10px)"},on:{click:e.onclickTile2}})],1)]),a("div",{staticClass:"bx--col"},[a("div",{staticStyle:{"text-align":"right"},attrs:{id:"geolocIcon"}},[""===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[e._m(0)]):!1===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("Para volver a localizar mi ubicación, haz click aquí "),a("Location16",{staticStyle:{stroke:"#00abff",width:"14px",height:"14px",fill:"#00abff"}})],1)]):!0===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[e._m(1)]):e._e()])])])]),e.is_superuser||e.is_systemadmin||e.is_coop_user?a("div",[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1,id:"selectEmp"},on:{change:e.seleccionaEmpresa}},[a("cv-select-option",{attrs:{disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.sortedListadoEmpresas,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(e.getSortedCooperativa(t).enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2),e._m(2)],1):e._e(),a("div",{ref:"sentinelLayersListCollapse"},[a("cv-search",{attrs:{placeholder:"Buscar"},on:{input:e.onBuscar}}),a("cv-structured-list-heading",[e._v("Listado de Parcelas ")]),a("div",{attrs:{id:"sentinelLayersList"}},[a("cv-structured-list",{attrs:{selectable:""}},[e._l(e.allParcelsOfEnterprisesFilter,(function(t){return a("template",{slot:"items"},[[a("cv-structured-list-item",{key:t.id,ref:"listaDeParcelas",refInFor:!0,attrs:{name:"group-1",value:String(t.id)},on:{change:e.actionChangeParcels}},[a("cv-structured-list-data",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name)+" - "+e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)]],2)}))],2)],1),a("br"),this.is_superuser?a("div",[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-toggle",{attrs:{checked:!0,label:"Desbordamiento de Alerta  de Parcelas",value:"check-2",small:!0,"hide-label":!0},on:{change:e.actionChangedAlertSolpamientoToggle}},[a("template",{slot:"text-left"},[e._v("Desactivado alerta de solapamiento de Parcelas")]),a("template",{slot:"text-right"},[e._v("Activado alerta de solapamiento de Parcelas")])],2)],1)])]):e._e(),a("br"),a("div",[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-toggle",{attrs:{checked:e.checkedToggleMostarTexto,label:"Desbordamiento de nombres de Parcelas",value:"check-1",small:!0,"hide-label":!0},on:{change:e.actionChangedToggle}},[a("template",{slot:"text-left"},[e._v("Desactivado desbordamiento de nombres de Parcelas")]),a("template",{slot:"text-right"},[e._v("Activado desbordamiento de nombres de Parcelas")])],2)],1)])]),a("br"),a("div",[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-toggle",{attrs:{checked:!1,label:"Ocultar icono de mi ubicación",value:"check-1",small:!0,"hide-label":!1},on:{change:e.actionChangedToggleIconoUbi}},[a("template",{slot:"text-left"},[e._v("No")]),a("template",{slot:"text-right"},[e._v("Sí")])],2)],1)])])],1),a("br"),a("div",{attrs:{id:"sentinelLayers"}},[a("cv-dropdown",{attrs:{label:e.$t("map.sent_layers")},on:{change:e.actionChangeLayers}},e._l(e.layersSelector,(function(t){return a("cv-dropdown-item",{key:t.id,attrs:{value:t.id,selected:"AGRICULTURE"==t.id}},[e._v(e._s(t.title))])})),1)],1),"NDVI"==e.SentinelLayer?a("div",[a("label",{staticClass:"bx--label",attrs:{for:"text-input-3h9mddk235a"}},[e._v(e._s(e.$t("map.colors")))]),a("br"),a("img",{staticStyle:{width:"100%"},attrs:{alt:"D4SF",id:"logo",src:t("9e413")}})]):e._e(),"MOISTURE_INDEX"==e.SentinelLayer?a("div",[a("label",{staticClass:"bx--label",attrs:{for:"text-input-3h9mddk235a"}},[e._v(e._s(e.$t("map.colors")))]),a("br"),a("img",{staticStyle:{width:"100%"},attrs:{alt:"D4SF",id:"logo",src:t("a338")}})]):e._e(),a("br"),a("div",{attrs:{id:"sentinelLayers"}},[a("cv-button",{staticStyle:{"margin-top":"20px"},attrs:{disabled:!1,size:"small"},on:{click:e.actionClearCacheSentinel}},[e._v(" Recargar sistema ")])],1),a("br"),a("div",{attrs:{id:"sentinelOpacity"}},[a("cv-slider",{attrs:{label:e.$t("map.opacidad")},on:{change:e.actionChangeOpacity}})],1),a("br"),a("div",{attrs:{id:"sentinelDate"}},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-date-picker",{ref:"cambiosFechas",staticStyle:{width:"100%!important"},attrs:{kind:"single","cal-options":e.calOptions,dateLabel:e.$t("map.fecha"),value:e.valueDates,placeholder:"mm/dd/yyyy"},on:{change:e.actionChangeDate}})],1),a("div",{staticClass:"bx--col"},[a("cv-button",{staticStyle:{"margin-top":"20px"},attrs:{disabled:!1,size:"small"},on:{click:e.actionClickDateCargaFechasSent}},[e._v(" "+e._s(e.$t("map.fechas_disponibles"))+" "),e.isVisibleLoadFechasSent?a("cv-loading",{attrs:{small:!0,active:e.isActiveLoadingFechasSent,overlay:!1}}):e._e()],1)],1)])]),a("br"),a("br")])},Oa=[function(){var e=this,a=e._self._c;return a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("Mostrar mi ubicación "),a("img",{staticStyle:{width:"14px",height:"14px"},attrs:{src:t("cd0d")}})])},function(){var e=this,a=e._self._c;return a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("No temenos acceso a tu ubicación "),a("img",{staticStyle:{width:"14px",height:"14px"},attrs:{src:t("a145")}})])},function(){var e=this,a=e._self._c;return a("p",[e._v("Actualmente mostrando las parcelas de: "),a("strong",[a("u",[a("span",{attrs:{id:"empresa"}})])])])}],Na={name:"ControllerPanel",props:{username:String,arrEnterprises:Array,arrCooperativas:Array,centro:[],layersSelector:Array,checkedToggleMostarTexto:Boolean,is_superuser:Boolean,is_systemadmin:Boolean,is_staff:Boolean,is_enterpriseadmin:Boolean,is_coop_user:Boolean,mapComponent:Object,allParcelsOfEnterprises:Array,allParcelsOfEnterprisesFilter:Array,SentinelLayer:String},data(){return{listadoEmpresas:this.arrEnterprises,calOptions:{dateFormat:"Y-m-d"},valueDates:[],isActiveLoadingFechasSent:!1,isVisibleLoadFechasSent:!1,expand:!0,expand2:!0,erorCompaGeoloc:"",mostrarIconErrGeoloc:"",empresa_selec:Object()}},components:{},methods:{getSortedCooperativa(e){return{...e,enterprises:e.enterprises.slice().sort((e,a)=>e.name.localeCompare(a.name))}},cargaLocalizacionActual(){if(!("geolocation"in navigator))return this.erorCompaGeoloc=this.$t("map.loc_no_disponible"),void(this.mostrarIconErrGeoloc=!0);navigator.geolocation.getCurrentPosition(e=>{console.info("Localizacion autorizada",e),this.mostrarIconErrGeoloc=!1,this.$emit("setCenter",[e.coords.longitude,e.coords.latitude]),this.$emit("setCenterLocation",[e.coords.longitude,e.coords.latitude])},e=>{this.mostrarIconErrGeoloc=!0,console.info("Localización no autorizada",e)})},onclickTile(){this.expand?(this.expand=!1,this.$refs.layersControlersResponsive.style["max-height"]="",this.$refs.layersControlersResponsive.style["overflow-y"]="",this.componentDrop+=1):(this.expand=!0,this.$refs.layersControlersResponsive.style["max-height"]="90%",this.$refs.layersControlersResponsive.style["overflow-y"]="auto")},onclickTile2(){this.expand2?(this.expand2=!1,this.$refs.sentinelLayersListCollapse.style.display="none",this.$refs.sentinelLayersListCollapseP.$el.style.display="none",this.classfechaR="",this.classfechab1="",this.classfechab2=""):(this.expand2=!0,this.$refs.sentinelLayersListCollapse.style.display="block",this.$refs.sentinelLayersListCollapseP.$el.style.display="",this.classfechaR="bx--row",this.classfechab1="bx--col-lg-7 bx--col-md-10 bx--col-sm-8",this.classfechab2="bx--col-lg-1 bx--col-md-1 bx--col-sm-1")},seleccionaEmpresa(e){this.empresa_selec=e;const a=document.getElementById("selectEmp");document.getElementById("empresa").innerHTML=a.options[a.selectedIndex].text;const t=[];if(console.log("Empresa selecccionada ",e),"all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{t.push(e)})}),this.$emit("setEnterprise",e.data),this.$emit("setAllParcelsOfEnterprises",t)}).catch(e=>{console.error("Error al obtener empresas activas:",e)});else{const a=e.split("_");"coop"==a[0]?La(a[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{t.push(e)})}),this.$emit("setEnterprise",e.data.enterprises),this.$emit("setAllParcelsOfEnterprises",t)}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{t.push(e)}),console.log("parada"),this.$emit("setEnterprise",[e.data]),this.$emit("setAllParcelsOfEnterprises",t);const a=Array();t.map(e=>{a.push(e.geometry.coordinates)}),await oa(e.data.name,a,e.data.sentinel_instance).then(a=>{console.info("OK refrescado parcelas de "+e.data.name,a.data),console.log(e.data)}).catch(a=>console.info("ERROR refrescado parcelas de "+e.data.name,a))})}},actionChangeParcels(e){let a=[];this.arrEnterprises.map(t=>{t.parcels.features.map(t=>{t.id==e&&a.push(t)})});const t=a[0].geometry.coordinates[0],s=this.getCenter(t),r=this.allParcelsOfEnterprisesFilter;this.$emit("setCenter",[s[0],s[1]]),this.$emit("setflagparcela",16.5),this.$emit("setAllParcelsOfEnterprisesFilter",r)},actionChangeDate(e){const a=e.split(", ");1==a.length&&(this.time="2019-01-01/"+e,this.$emit("setFechaSentinel",e))},actionClickDateCargaFechasSent(){this.isActiveLoadingFechasSent=!0,this.isActiveLoadingFechasSent=!0,la(this.mapComponent.previousExtent_).then(e=>{const a=e.data.features,t=Array();a.forEach(e=>{t.push(e.properties.date)}),this.valueDates=t.reverse(),this.isActiveLoadingFechasSent=!1,this.isActiveLoadingFechasSent=!1})},getCenter(e){for(var a,t,s,r,i=0;i<e.length;i++)a=e[i][0]<a||null==a?e[i][0]:a,t=e[i][0]>t||null==t?e[i][0]:t,s=e[i][1]<s||null==s?e[i][1]:s,r=e[i][1]>r||null==r?e[i][1]:r;return[(a+t)/2,(s+r)/2]},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},getNameEnterprise(e){const a=this.arrEnterprises.filter(a=>a.id==e);return a[0].name},actionChangedToggle(e){this.$emit("setToggleMostrarTexto",e)},actionChangedAlertSolpamientoToggle(e){console.warn("actionChangedAlertSolpamientoToggle",e),this.$emit("setToggleAlertSolpamiento",e)},actionChangedToggleIconoUbi(e){this.$emit("setOcultarInconoUbi",e)},actionChangeLayers(e){this.$emit("setSentinelLayer",e)},actionClearCacheSentinel(){this.$emit("setSentinelClearCache")},actionChangeOpacity(e){this.$emit("setSentinelOpacity",e/100)}},mounted:function(){this.$nextTick((function(){this.seleccionaEmpresa("all")}))},beforeCreate(){},computed:{sortedListadoEmpresas(){return this.listadoEmpresas.slice().sort((e,a)=>e.name.localeCompare(a.name))}}},Da=Na,za=(t("2ba7"),Object(u["a"])(Da,Ma,Oa,!1,null,"7e622dc6",null)),Ra=za.exports,Ga=function(){var e=this,a=e._self._c;return a("div",{ref:"layersControlersResponsive",staticClass:"layersControler",attrs:{id:"layersControlerResponsive"}},[a("div",{staticClass:"bx--row",attrs:{id:"row_box"}},[a("div",{staticClass:"bx--col-sm-3"},[a("div",{attrs:{id:"sentinelLayers"}},[e.expand?a("cv-dropdown",{attrs:{label:e.$t("map.sent_layers")},on:{change:e.actionChangeLayers}},e._l(e.layersSelector,(function(t){return a("cv-dropdown-item",{key:t.id,attrs:{value:t.id,selected:"AGRICULTURE"==t.id}},[e._v(e._s(t.title))])})),1):a("cv-dropdown",{attrs:{label:e.$t("map.sent_layers"),up:""},on:{change:e.actionChangeLayers}},e._l(e.layersSelector,(function(t){return a("cv-dropdown-item",{key:t.id,attrs:{value:t.id,selected:"AGRICULTURE"==t.id}},[e._v(e._s(t.title))])})),1)],1)]),a("div",{staticClass:"bx--col-sm-1"},[e.expand?e._e():a("ChevronSortUp20",{staticStyle:{transform:"translate(35px, 0px)"},on:{click:e.onclickTile}}),e.expand?a("ChevronSortDown20",{staticStyle:{transform:"translate(35px, 0px)"},on:{click:e.onclickTile}}):e._e()],1)]),a("div",[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{attrs:{id:"geolocIcon"}},[""===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[e._m(0)]):!1===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("Para volver a localizar mi ubicación, haz click aquí "),a("Location16",{staticStyle:{stroke:"#00abff",width:"14px",height:"14px",fill:"#00abff"}})],1)]):!0===e.mostrarIconErrGeoloc?a("div",{on:{click:function(a){return e.cargaLocalizacionActual()}}},[e._m(1)]):e._e()])])])]),e.expand?a("div",[a("div",[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa}},[a("cv-select-option",{attrs:{disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.listadoEmpresas,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),a("div",{ref:"sentinelLayersListCollapse"},[a("cv-search",{attrs:{placeholder:"Buscar"},on:{input:e.onBuscar}}),a("cv-structured-list-heading",[e._v("Listado de Parcelas ")]),a("div",{attrs:{id:"sentinelLayersList"}},[a("cv-structured-list",{attrs:{selectable:""}},[e._l(e.allParcelsOfEnterprisesFilter,(function(t){return a("template",{slot:"items"},[[a("cv-structured-list-item",{key:t.id,ref:"listaDeParcelas",refInFor:!0,attrs:{name:"group-1",value:String(t.id)},on:{change:e.actionChangeParcels}},[a("cv-structured-list-data",[e._v(e._s(t.properties.name)+" - "+e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)]],2)}))],2)],1),a("br"),a("div",[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-toggle",{attrs:{checked:e.checkedToggleMostarTexto,label:"Desbordamiento de nombres de Parcelas",value:"check-1",small:!0,"hide-label":!0},on:{change:e.actionChangedToggle}},[a("template",{slot:"text-left"},[e._v("Desactivado desbordamiento de nombres de Parcelas")]),a("template",{slot:"text-right"},[e._v("Activado desbordamiento de nombres de Parcelas")])],2)],1)])])],1),a("div",{attrs:{id:"sentinelLayers"}},[a("cv-button",{staticStyle:{"margin-top":"20px"},attrs:{disabled:!1,size:"small"},on:{click:e.actionClearCacheSentinel}},[e._v(" Recargar sistema ")])],1),a("br"),a("div",{attrs:{id:"sentinelOpacity"}},[a("cv-slider",{attrs:{label:e.$t("map.opacidad")},on:{change:e.actionChangeOpacity}})],1),a("br"),a("div",{attrs:{id:"sentinelDate"}},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-date-picker",{ref:"cambiosFechas",staticStyle:{width:"100%!important"},attrs:{kind:"single","cal-options":e.calOptions,dateLabel:e.$t("map.fecha"),value:e.valueDates,placeholder:"mm/dd/yyyy"},on:{change:e.actionChangeDate}})],1),a("div",{staticClass:"bx--col"},[a("cv-button",{staticStyle:{"margin-top":"20px"},attrs:{disabled:!1,size:"small"},on:{click:e.actionClickDateCargaFechasSent}},[e._v(" "+e._s(e.$t("map.fechas_disponibles"))+" "),e.isVisibleLoadFechasSent?a("cv-loading",{attrs:{small:!0,active:e.isActiveLoadingFechasSent,overlay:!1}}):e._e()],1)],1)])]),a("br"),a("br")]):e._e()])},Fa=[function(){var e=this,a=e._self._c;return a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("Mostrar mi ubicación "),a("img",{staticStyle:{width:"14px",height:"14px"},attrs:{src:t("cd0d")}})])},function(){var e=this,a=e._self._c;return a("p",{staticStyle:{cursor:"pointer","font-size":"14px"}},[e._v("No temenos acceso a tu ubicación "),a("img",{staticStyle:{width:"14px",height:"14px"},attrs:{src:t("a145")}})])}],Ba={name:"ControllerPanel4Mobile",props:{username:String,arrEnterprises:Array,arrCooperativas:Array,centro:[],layersSelector:Array,checkedToggleMostarTexto:Boolean,is_superuser:Boolean,is_systemadmin:Boolean,mapComponent:Object,allParcelsOfEnterprises:Array,allParcelsOfEnterprisesFilter:Array,SentinelLayer:String},data(){return{listadoEmpresas:this.arrEnterprises,calOptions:{dateFormat:"Y-m-d"},valueDates:[],isActiveLoadingFechasSent:!1,isVisibleLoadFechasSent:!1,expand:!1,expand2:!0,erorCompaGeoloc:"",mostrarIconErrGeoloc:""}},components:{},methods:{cargaLocalizacionActual(){if(!("geolocation"in navigator))return this.erorCompaGeoloc=this.$t("map.loc_no_disponible"),void(this.mostrarIconErrGeoloc=!0);navigator.geolocation.getCurrentPosition(e=>{console.info("Localizacion autorizada",e),this.mostrarIconErrGeoloc=!1,this.$emit("setCenter",[e.coords.longitude,e.coords.latitude])},e=>{this.mostrarIconErrGeoloc=!0,console.info("Localización no autorizada",e)})},onclickTile(){this.expand?(this.expand=!1,this.$refs.layersControlersResponsive.style["max-height"]="",this.$refs.layersControlersResponsive.style["overflow-y"]="",this.componentDrop+=1):(this.expand=!0,this.$refs.layersControlersResponsive.style["max-height"]="90%",this.$refs.layersControlersResponsive.style["overflow-y"]="auto")},onclickTile2(){this.expand2?(this.expand2=!1,this.$refs.sentinelLayersListCollapse.style.display="none",this.$refs.sentinelLayersListCollapseP.$el.style.display="none",this.classfechaR="",this.classfechab1="",this.classfechab2=""):(this.expand2=!0,this.$refs.sentinelLayersListCollapse.style.display="block",this.$refs.sentinelLayersListCollapseP.$el.style.display="",this.classfechaR="bx--row",this.classfechab1="bx--col-lg-7 bx--col-md-10 bx--col-sm-8",this.classfechab2="bx--col-lg-1 bx--col-md-1 bx--col-sm-1")},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.$emit("setEnterprise",e.data),this.$emit("setAllParcelsOfEnterprises",a)});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.$emit("setEnterprise",e.data.enterprises),this.$emit("setAllParcelsOfEnterprises",a)}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.$emit("setEnterprise",[e.data]),this.$emit("setAllParcelsOfEnterprises",a)})}},actionChangeParcels(e){let a=[];this.arrEnterprises.map(t=>{t.parcels.features.map(t=>{t.id==e&&a.push(t)})});const t=a[0].geometry.coordinates[0],s=this.getCenter(t);this.$emit("setCenter",[s[0],s[1]])},actionChangeDate(e){const a=e.split(", ");1==a.length&&(this.time="2019-01-01/"+e,this.$emit("setFechaSentinel",e))},actionClickDateCargaFechasSent(){this.isActiveLoadingFechasSent=!0,this.isActiveLoadingFechasSent=!0,la(this.mapComponent.previousExtent_).then(e=>{const a=e.data.features,t=Array();a.forEach(e=>{t.push(e.properties.date)}),this.valueDates=t.reverse(),this.isActiveLoadingFechasSent=!1,this.isActiveLoadingFechasSent=!1})},getCenter(e){for(var a,t,s,r,i=0;i<e.length;i++)a=e[i][0]<a||null==a?e[i][0]:a,t=e[i][0]>t||null==t?e[i][0]:t,s=e[i][1]<s||null==s?e[i][1]:s,r=e[i][1]>r||null==r?e[i][1]:r;return[(a+t)/2,(s+r)/2]},onBuscar(e){if(console.info(e),e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},getNameEnterprise(e){const a=this.arrEnterprises.filter(a=>a.id==e);return a[0].name},actionChangedToggle(e){this.$emit("setToggleMostrarTexto",e)},actionChangeLayers(e){this.$emit("setSentinelLayer",e)},actionClearCacheSentinel(){this.$emit("setSentinelClearCache")},actionChangeOpacity(e){this.$emit("setSentinelOpacity",e/100)}},mounted:function(){},beforeCreate(){}},Ua=Ba,Va=(t("f87b"),Object(u["a"])(Ua,Ga,Fa,!1,null,"0c79307c",null)),Ta=Va.exports,Ha=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"control_der"}},[a("div",{attrs:{id:"edicionParcela"}},[a("p",[e._v(e._s(e.$t("map.edit_rapido"))+" - "+e._s(e.parcelSelected.properties.name))]),e.verErrorDraw?a("div",{staticClass:"errorDraw"},[a("br"),e._v(e._s(""+e.errorDrawMsg))]):e._e(),a("br"),a("cv-text-input",{ref:"inputName",attrs:{label:"Nombre de la parcela",value:e.valueName,disabled:!1,type:"text","invalid-message":e.invalidMessageName,id:"input-MIRLwtCq"},model:{value:e.valueName,callback:function(a){e.valueName=a},expression:"valueName"}}),a("br"),a("cv-text-input",{ref:"inputDesc",attrs:{label:"Descripción",value:e.valueDesc,disabled:!1,type:"text","invalid-message":e.invalidMessageDesc,id:"input-3zcRveTf"},model:{value:e.valueDesc,callback:function(a){e.valueDesc=a},expression:"valueDesc"}}),a("br"),e._v(" Area "+e._s(e.parcelSelected.properties.area?e.parcelSelected.properties.area:e.areaForNewPolygon)+" "),a("br"),a("br"),a("cv-button",{attrs:{kind:"primary",size:"small",disabled:e.verErrorDraw},on:{click:e.guardadoPoligono}},[e._v(" "+e._s(e.$t("map.guardar"))+" ")]),a("cv-button",{attrs:{kind:"danger",size:"small",disabled:!1},on:{click:e.cancelarEdicion}},[e._v(" "+e._s(e.$t("map.cancelar"))+" ")]),a("br"),a("br"),a("hr"),a("br"),a("p",[e._v(e._s(e.$t("map.elimina_parcela")))]),a("br"),a("cv-button",{staticStyle:{width:"100%"},attrs:{kind:"danger",size:"small",disabled:!1},on:{click:e.eliminarPoligono}},[e._v(" "+e._s(e.$t("map.eliminar"))+" ")]),a("br"),a("br"),a("cv-button",{staticStyle:{width:"100%"},attrs:{kind:"primary",size:"small",disabled:!1},on:{click:e.limpiarDibujo}},[e._v(" Volver a dibujar ")])],1),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger",visible:e.visibleAlertaEliminar},on:{"primary-click":e.confirmaElimar}},[a("template",{slot:"label"},[e._v(e._s(e.$t("map.seguro")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("map.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("map.seguro_parcel_del"))+" "+e._s(e.valueName)+"?")])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("map.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("map.eliminar")))])],2)],1)},qa=[],Ya={name:"ControllerQuickEdit",props:{parcelSelected:Object,verErrorDraw:Boolean,errorDrawMsg:String,coordinatesPoly:String,valueDesc:String,valueName:String,arrEnterprises:Array,arrCooperativas:Array,areaForNewPolygon:Number},data(){return{invalidMessageDesc:"",invalidMessageName:"",visibleAlertaEliminar:!1}},components:{},methods:{guardadoPoligono(){let e=!1;if(""==this.valueName&&(this.invalidMessageName=this.$t("newEnterprise.campo_requerido"),e=!0),e)return!1;0===this.areaForNewPolygon&&(this.areaForNewPolygon=this.parcelSelected.properties.area),ca(this.coordinatesPoly,this.parcelSelected.id,this.valueName,this.valueDesc,this.areaForNewPolygon).then(e=>{aa(e.data.enterprise).then(e=>{const a=Array(),t=[],s=this.arrEnterprises.filter(a=>a.id==e.data.id);if(1==s.length&&this.arrEnterprises.length>1){const r=this.arrEnterprises.indexOf(s[0]);this.arrEnterprises[r]=e.data,this.arrEnterprises.map(e=>{e.parcels.features.map(e=>{t.push(e)})}),e.data.parcels.features.map(e=>{a.push(e.geometry.coordinates)})}else this.arrEnterprises[0]=e.data,e.data.parcels.features.map(e=>{a.push(e.geometry.coordinates),t.push(e)});oa(e.data.name,a,e.data.sentinel_instance).then(()=>{this.$emit("setSentinelClearCache"),this.$emit("setcoordinatesPoly",""),this.$emit("setifQuickEdit",!1),this.$emit("setverErrorDraw",!1),this.$emit("setEnterprise",this.arrEnterprises),this.$emit("setAllParcelsOfEnterprises",t)}).catch(e=>console.info(e))})})},cancelarEdicion(){this.$emit("setSentinelClearCache"),this.$emit("setcoordinatesPoly",""),this.$emit("setifQuickEdit",!1),this.$emit("setverErrorDraw",!1),this.$emit("setClearParcels"),this.$emit("setVerCrearParcel",!0),this.$emit("setVerCrearParcelDraw",!0),this.$emit("setverguardadoOK",!1),this.$emit("setClearFeatures"),this.$emit("clearCacheDraw")},eliminarPoligono(){this.$refs.alerta_eliminar.dataVisible=!0},limpiarDibujo(){this.$emit("setClearFeatures"),this.$emit("setVerCrearParcel",!1),this.$emit("setVerCrearParcelDraw",!1),this.$emit("setverErrorDraw",!0)},confirmaElimar(){da(this.parcelSelected.id).then(e=>{console.info(e.data),aa(this.parcelSelected.properties.enterprise_id).then(e=>{const a=Array(),t=[],s=this.arrEnterprises.filter(a=>a.id==e.data.id);if(1==s.length&&this.arrEnterprises.length>1){const r=this.arrEnterprises.indexOf(s[0]);this.arrEnterprises[r]=e.data,this.arrEnterprises.map(e=>{e.parcels.features.map(e=>{t.push(e)})}),e.data.parcels.features.map(e=>{a.push(e.geometry.coordinates)})}else this.arrEnterprises[0]=e.data,e.data.parcels.features.map(e=>{a.push(e.geometry.coordinates),t.push(e)});this.parcelaSeleccionada=0,this.$refs.alerta_eliminar.dataVisible=!1,this.montarMapa(),this.cancelarEdicion()})}).catch(e=>console.info(e))}},mounted:function(){},beforeCreate(){}},Za=Ya,Qa=(t("464e"),Object(u["a"])(Za,Ha,qa,!1,null,"91aa47b4",null)),Ja=Qa.exports,Xa=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"div_buscador"}},[a("gmap-autocomplete",{staticClass:"form-control bx--text-input",staticStyle:{with:"100%"},attrs:{placeholder:e.$t("map.intro_ubica")},on:{place_changed:e.setPlace}})],1)},Wa=[],Ka={name:"ControllerQuickEdit",props:{parcelSelected:Object,verErrorDraw:Boolean,errorDrawMsg:String,coordinatesPoly:String},data(){return{}},components:{},methods:{setPlace(e){this.$emit("setCenter",[e.geometry.location.lng(),e.geometry.location.lat()])}},mounted:function(){},beforeCreate(){}},et=Ka,at=(t("6b2ca"),Object(u["a"])(et,Xa,Wa,!1,null,"47582886",null)),tt=at.exports,st=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"control_der"}},[e.verCrearParcel?a("div",{attrs:{id:"btnCrearParcela"}},[a("cv-button",{attrs:{kind:"primary",size:"small",disabled:e.verErrorDraw},on:{click:e.crearParcela}},[e._v(" "+e._s(e.$t("map.crear_parcela"))+" ")])],1):e._e(),e.verCrearParcel?e._e():a("div",{attrs:{id:"edicionParcela"}},[a("p",[e._v(e._s(e.$t("map.parcela_nueva")))]),a("div",[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa}},[a("cv-select-option",{attrs:{disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.listadoEmpresas,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),e.verErrorDraw?a("div",{staticClass:"errorDraw"},[a("br"),e._v(e._s(""+e.errorDrawMsg))]):e._e(),a("p",[e._v("Creando parcela para "+e._s(e.arrEnterprisesSelectedObj.name))]),a("p",[e._v("Area "+e._s(e.areaForNewPolygon))]),a("cv-text-input",{ref:"inputName",attrs:{label:"Nombre de la parcela",value:e.valueName,disabled:!1,type:"text","invalid-message":e.invalidMessageName,id:"input-MIRLwtCq"},model:{value:e.valueName,callback:function(a){e.valueName=a},expression:"valueName"}}),a("br"),a("cv-text-input",{ref:"inputDesc",attrs:{label:"Descripción",value:e.valueDesc,disabled:!1,type:"text","invalid-message":e.invalidMessageDesc,id:"input-3zcRveTf"},model:{value:e.valueDesc,callback:function(a){e.valueDesc=a},expression:"valueDesc"}}),a("br"),a("br"),a("br"),a("cv-button",{attrs:{kind:"primary",size:"small",disabled:e.verErrorDraw},on:{click:e.guardadoPoligono}},[e._v(" "+e._s(e.$t("map.guardar"))+" ")]),a("cv-button",{attrs:{kind:"danger",size:"small",disabled:!1},on:{click:e.cancelarEdicion}},[e._v(" "+e._s(e.$t("map.cancelar"))+" ")]),a("br"),e.verguardadoOK?a("div",{staticClass:"guardadoOK"},[a("br"),e._v(e._s(""+e.guardadoOKMsg))]):e._e(),a("br"),a("cv-button",{attrs:{kind:"primary",size:"small",disabled:!1},on:{click:e.limpiarDibujo}},[e._v(" Volver a dibujar ")])],1)])},rt=[],it={name:"ControllerQuickCreate",props:{verCrearParcel:Boolean,verErrorDraw:Boolean,errorDrawMsg:String,verguardadoOK:Boolean,guardadoOKMsg:String,coordinatesPoly:String,arrEnterprises:Array,arrEnterprisesSelected:Array,arrCooperativas:Array,is_superuser:Boolean,is_systemadmin:Boolean,areaForNewPolygon:Number,user:Object},data(){return{listadoEmpresas:this.arrEnterprises,arrEnterprisesSelectedObj:this.arrEnterprisesSelected[0],valueName:"",invalidMessageName:"",valueDesc:"",invalidMessageDesc:"",enterpriseForCreateParcel:""}},components:{},methods:{seleccionaEmpresa(e){const a=this.listadoEmpresas.filter(a=>a.id==e);console.info(a),this.arrEnterprisesSelectedObj=a[0],this.$emit("setEnterpriseSelect",a),this.guardadoOKMsg=""},crearParcela(){this.$emit("setVerCrearParcel",!1),this.$emit("setverErrorDraw",!0),this.$emit("setverguardadoOK",!0),this.$emit("setVerCrearParcelDraw",!1)},guardadoPoligono(){this.guardadoOKMsg=this.$t("parcelas.parcela_guardada_2"),this.verguardadoOK=!0,pa(this.valueName,this.valueDesc,this.coordinatesPoly,this.areaForNewPolygon,this.arrEnterprisesSelectedObj.id,this.user.id).then(()=>{aa(this.arrEnterprisesSelectedObj.id).then(e=>{const a=Array(),t=[],s=this.arrEnterprises.filter(a=>a.id==e.data.id);if(1==s.length&&this.arrEnterprises.length>1){const r=this.arrEnterprises.indexOf(s[0]);this.arrEnterprises[r]=e.data,this.arrEnterprises.map(e=>{e.parcels.features.map(e=>{t.push(e)})}),e.data.parcels.features.map(e=>{a.push(e.geometry.coordinates)})}else this.arrEnterprises[0]=e.data,e.data.parcels.features.map(e=>{a.push(e.geometry.coordinates),t.push(e)});this.guardadoOKMsg=this.$t("parcelas.parcela_guardada_2"),this.setverguardadoOK=!0,oa(e.data.name,a,e.data.sentinel_instance).then(()=>{this.$emit("setSentinelClearCache"),this.$emit("setEnterprise",this.arrEnterprises),this.$emit("setAllParcelsOfEnterprises",t),this.cancelarEdicion()}).catch(e=>console.info(e))})})},cancelarEdicion(){this.$emit("setVerCrearParcel",!0),this.$emit("setVerCrearParcelDraw",!0),this.$emit("setverErrorDraw",!1),this.$emit("setSentinelClearCache"),this.$emit("setcoordinatesPoly",""),this.$emit("setifQuickEdit",!1),this.$emit("setverErrorDraw",!1),this.$emit("setverguardadoOK",!1),this.$emit("setClearParcels"),this.$emit("setClearFeatures"),this.$emit("clearCacheDraw")},limpiarDibujo(){this.$emit("setClearFeatures"),this.$emit("setVerCrearParcel",!1),this.$emit("setVerCrearParcelDraw",!1)}},mounted:function(){},beforeCreate(){console.info(this.arrEnterprises)}},ot=it,lt=(t("50e3"),Object(u["a"])(ot,st,rt,!1,null,"396c6e1f",null)),nt=lt.exports,ct=t("6c77"),dt=t("8295"),pt=t("83a6"),ht=t("8682"),mt=t("e11e"),ut=t.n(mt),ft={name:"MapComponent4",components:{ControllerPanel:Ra,ControllerQuickEdit:Ja,ControllerGoogleSearch:tt,ControllerPanel4Mobile:Ta,ControllerQuickCreate:nt},data(){return{flagparcela:!1,zoomParcela:16.5,flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,apiKeyBing:this.$apiKeyBing,imagerySetBing:"AerialWithLabels",zoom:15,center:[-3.8225970954841486,40.28385074244977],maxZoomBing:20,isActiveLoading:!1,isVisibleLoad:!1,name:"pruebas",parcelas:{},arrEmpresas:[],arrCooperativas:[],arrEmpresas4List:[],urlSentinel:this.$sentinelURL+"/ogc/wms/",minZoom:6,maxZoom:16,preset:"AGRICULTURE",layers:"AGRICULTURE",time:"2019-01-01/"+this.getNow(),serverType:"geoserver",opacitylayer:.5,transition:0,SentinelLayer:"AGRICULTURE",timestamp:0,timestampSentinel:0,timestampDrawPolygon:0,checkedToggleMostarTexto:!1,layersSelector:[],keyModificar:0,allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],ifQuickEdit:!1,showSolapamientoAlert:!0,parcelSelected:Object,verErrorDraw:!1,errorDrawMsg:"",guardadoOKMsg:"",coordinatesPoly:"",featuresNewPolygon:[],verCrearParcel:!0,verCrearParcelDraw:!1,empresaSelForCreateParcel:"",refreshDibujo:0,valueDesc:"",valueName:"",areaForNewPolygon:0,user:"",coordenadasPunto:[0,0],olcultarInconoUbi:!1}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},getNowSentinel(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),s=a+" "+t;this.timestampSentinel=s},getNowRefreshDrawPolygon(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),s=a+" "+t;this.timestampDrawPolygon=s},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),s=a+" "+t;this.timestamp=s},pointsStyleFunc(){return e=>{let a=new ct["c"]({fill:new pt["a"]({color:"rgba(255,255,255,0.0)"}),stroke:new ht["a"]({color:"rgba(0, 0, 255, 1)",with:5}),text:new dt["a"]({overflow:this.checkedToggleMostarTexto,text:`${e.get("name")} \n ${e.get("description")?e.get("description"):""} \n ${e.get("area")?e.get("area").toFixed(2)+"Ha":""} / ${e.get("area")?this.metricaparcela(e.get("area"))+"Acre":""}`,font:"14px IBM Plex Sans",fill:new pt["a"]({color:"#FFFFFF"}),stroke:new ht["a"]({color:"#161616",width:4.5})})});return[a]}},metricaparcela(e){const a=2.4710538146717,t=a*e;return this.metric="Acre",t.toFixed(2)},selecionaPolygon(e){this.ifQuickEdit=!0,this.coordinatesPoly="",this.verErrorDraw=!0,this.verErrorDraw=!0;const a=this.allParcelsOfEnterprises.filter(a=>a.id==e.id_);this.parcelSelected=a[0];const t=e.getGeometry().getExtent(),s=t[0]+(t[2]-t[0])/2,r=t[1]+(t[3]-t[1])/2;var i=new le["a"].Proj("EPSG:3785"),o=new le["a"].Proj("EPSG:4326");const l=Object(le["a"])(i,o,[s,r]);this.center=[l[0],l[1]];const n=e.values_.enterprise_id;this.valueName=e.values_.name,this.valueDesc=e.values_.description,this.comprobarCoordenadas(e.getGeometry().getCoordinates(),n,e.id_)},terminadoNewPolygon(e){console.info(e),this.verCrearParcelDraw=!0,this.areaForNewPolygon=Math.round(Object(ne["a"])(e.feature.getGeometry())/1e4*1e4)/1e4;const a=e.feature.getGeometry().getCoordinates();this.comprobarCoordenadas(a,this.empresaSelForCreateParcel?this.empresaSelForCreateParcel[0].id:this.arrEmpresas[0].id,0)},editado(e){console.warn("editado..");const a=e.features.array_[0].values_.enterprise_id,t=e.features.array_[0].getGeometry().getCoordinates();console.warn(t),this.areaForNewPolygon=Math.round(Object(ne["a"])(e.features.array_[0].getGeometry())/1e4*1e4)/1e4,this.comprobarCoordenadas(t,a,e.features.array_[0].id_)},getBBOX(e){const a=ut.a.polygon(e.geometry.coordinates),t=`${a.getBounds()._northEast.lng},${a.getBounds()._northEast.lat},${a.getBounds()._southWest.lng},${a.getBounds()._southWest.lat}`;return t},getBBOX2(e){const a=ut.a.polygon(e.geometry.coordinates),t=[a.getBounds()._northEast.lng,a.getBounds()._northEast.lat,a.getBounds()._southWest.lng,a.getBounds()._southWest.lat];return t},comprobarCoordenadas(e,a,t){var s=new le["a"].Proj("EPSG:3785"),r=new le["a"].Proj("EPSG:4326");let i=Array,o="POLYGON((";for(var l=0;l<e[0].length;l++)i=Object(le["a"])(s,r,[e[0][l][0],e[0][l][1]]),o+=i[0]+" "+i[1],l!=e[0].length-1&&(o+=", ");o+="))",na(o,a).then(e=>{if(e.data.features.length){const a=e.data.features.filter(e=>{if(console.info(e.id,t),e.id!=t)return e});if(console.warn("result.length",a.length),console.warn("result.ifQuickEdit",this.ifQuickEdit),console.warn("result.showSolapamientoAlert",this.showSolapamientoAlert),a.length&&this.showSolapamientoAlert){if(this.ifQuickEdit){let e="";a.map(a=>{e+=a.properties.name+" "}),this.errorDrawMsg=this.$t("map.parcela_solapada_con")+" "+e,this.verErrorDraw=!0,this.coordinatesPoly=""}}else this.verErrorDraw=!1,this.errorDrawMsg="",this.coordinatesPoly=o,this.compruebaParcelaSimple(o)}else this.verErrorDraw=!1,this.errorDrawMsg="",this.coordinatesPoly=o,this.compruebaParcelaSimple(o)})},compruebaParcelaSimple(e){let a=`${this.$apiURL}/parcel_valid/?polygon=${e}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{"False"==e.data?(this.errorDrawMsg=this.$t("map.parcela_solapada_misma"),this.verErrorDraw=!0):(this.verErrorDraw=!1,this.errorDrawMsg="")}).catch(e=>{console.warn(e)})}},mounted:function(){},beforeCreate(){this.isActiveLoading=!1,this.isVisibleLoad=!1,Te().then(e=>{const a=e.data[0];this.user=a,He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?ta().then(async e=>{this.arrEmpresas=[e.data[0]],this.arrEmpresas4List=e.data;const a=[],t=[e.data[0]];t.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresas4List=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})}),ia().then(e=>{this.layersSelector=e.data})}},vt=ft,bt=(t("75c7"),Object(u["a"])(vt,Je,Xe,!1,null,"6b1fd4eb",null)),_t=bt.exports,gt={name:"Home",components:{MapComponent4:_t,Board:Qe},mounted:function(){}},At=gt,yt=Object(u["a"])(At,Me,Oe,!1,null,null,null),$t=yt.exports,Ct=function(){var e=this,a=e._self._c;return a("div",{staticClass:"LoginView"},[a("LoginComponent")],1)},Et=[],xt=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid-fluid",attrs:{id:"gridContainer"}},[a("div",{staticClass:"bx--row-fixed",attrs:{id:"rowLogin"}},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3",attrs:{id:"bxFormLogin"}},[a("div",[a("img",{attrs:{alt:"D4SF",id:"logo",src:t("be13")}}),a("h2",{attrs:{id:"loginTitle"}},[e._v(" Login ")]),a("cv-text-input",{ref:"emailInput",attrs:{label:e.$t("login.email"),placeholder:"example@example.com","invalid-message":e.errorEmail,type:"email",id:"emailInput"},on:{input:e.quitarErrorEmail},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}}),a("br"),a("cv-text-input",{ref:"passInput",attrs:{label:e.$t("login.password"),placeholder:e.$t("login.password"),"invalid-message":e.errorPass,type:"password",id:"passInput"},on:{input:e.quitarErrorPass},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),a("br"),e.visibleAlert?a("cv-toast-notification",{staticClass:"errorlogin",attrs:{kind:"error","sub-title":"Usuario o contraseña inválidos","low-contrast":"false"},on:{close:e.doClose}}):e._e(),a("br"),a("cv-button",{attrs:{id:"loginButt"},on:{click:e.login}},[e._v(" Login "),e.isVisibleLoad?a("cv-loading",{attrs:{small:!0,active:e.isActiveLoading,overlay:!1}}):e._e()],1),a("br"),a("br"),a("p",[a("cv-link",{attrs:{href:e.href,disabled:e.disabledLinkRecordar,inline:e.inline},on:{click:e.recordarPass}},[e._v(" "+e._s(e.$t("login.olvidar_pass"))+" ")])],1)],1),a("img",{attrs:{alt:"D4SF",id:"logoSMB",src:t("3b38")}})])]),a("RecordarPassComponent",{ref:"recordarPassComponent"})],1)},wt=[],St=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"recordarPass",attrs:{"close-aria-label":e.closeAriaLabel,size:e.size,title:e.modalTitle,"primary-button-disabled":e.primaryButtonDisabled,visible:e.visible,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.actionPrimary}},[a("template",{slot:"title"},[e._v(e._s(e.modalTitle))]),e.use_contentWithInput?a("template",{slot:"content"},[a("div",{staticClass:"bx--form-item"},[a("label",{staticClass:"bx--label",attrs:{for:"text-input-3h9mddk235a"}},[e._v(e._s(e.$t("login.introduce_correo")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.emailPass,expression:"emailPass"}],staticClass:"bx--text-input",attrs:{id:"text-input-3h9mddk235a",type:"email","data-modal-primary-focus":""},domProps:{value:e.emailPass},on:{input:function(a){a.target.composing||(e.emailPass=a.target.value)}}})]),a("div",{staticClass:"bx--form-item"},[e.visibleAlert?a("cv-toast-notification",{staticClass:"errorlogin",attrs:{kind:e.kindNot,"sub-title":e.mensageNot,"low-contrast":"false"},on:{close:e.doCloseRecordar}}):e._e()],1)]):e._e(),e.use_primaryButton?a("template",{slot:"primary-button"},[e._v(e._s(e.$t("login.recordar")))]):e._e()],2)},Pt=[],kt={name:"RecordarPassComponent",props:{},components:{},data(){return{closeAriaLabel:"Close",size:"xs",use_contentWithInput:!0,use_secondaryButton:!0,use_primaryButton:!0,primaryButtonDisabled:!1,visible:!1,autoHideOff:!1,modalTitle:this.$t("login.recordar_contrasena"),placeholderRecordar:"example@example.es",emailPass:"",emailPassInvalid:this.$t("login.recordar_contrasena_error"),mensage:"",visibleAlert:!1,kindNot:"error",mensageNot:""}},methods:{actionPrimary(){this.emailPassInvalid=this.$t("login.recordar_contrasena_error");const e=this.$apiURL+"/password_reset/";c.a.post(e,{email:this.emailPass,type:"reset"}).then(e=>{200==e.status&&(this.kindNot="success",this.mensageNot=this.$t("login.envio_mail"),this.visibleAlert=!0)}).catch(e=>{console.warn(e.response),this.kindNot="error",this.visibleAlert=!0,"This field may not be blank."==e.response.data.email[0]&&(this.mensageNot=this.$t("login.recordar_contrasena_error")),"There is no active user associated with this e-mail address or the password can not be changed"==e.response.data.email[0]&&(this.mensageNot=this.$t("login.recordar_error"))})},actionHidden(){this.visible=!1,this.visibleAlert=!1},doCloseRecordar(){this.visibleAlert=!1}}},It=kt,jt=Object(u["a"])(It,St,Pt,!1,null,"e3d044ac",null),Lt=jt.exports,Mt={name:"LoginComponent",props:{},components:{RecordarPassComponent:Lt},data(){return{isActiveLoading:!1,isVisibleLoad:!1,disabledLinkRecordar:!1,href:"javascript:void(0)",inline:!1,email:"",password:"",errorEmail:"",errorPass:"",visibleAlert:!1}},methods:{recordarPass(){this.$refs.recordarPassComponent.visible=!0},login(){this.isActiveLoading=!0,this.isVisibleLoad=!0;const e=this.$apiURL+"/signin/";c.a.post(e,{email:this.$refs.emailInput.$refs.input.value,password:this.$refs.passInput.$refs.input.value}).then(e=>{sessionStorage.setItem("apiAccess",e.data.token),sessionStorage.setItem("email",this.$refs.emailInput.$refs.input.value),setTimeout(()=>{this.isActiveLoading=!1,this.isVisibleLoad=!1,sessionStorage.getItem("apiAccess")&&this.$router.push("/map")},1e3)}).catch(e=>{this.isActiveLoading=!1,this.isVisibleLoad=!1,console.info(e),e.response.status||this.login,e.response.data.email&&(this.errorEmail=e.response.data.email[0]),e.response.data.password&&(this.errorPass=e.response.data.password[0]),e.response.data.non_field_errors&&(this.visibleAlert=!0,this.password="")})},doClose(){this.visibleAlert=!1},quitarErrorPass(){this.errorPass=""},quitarErrorEmail(){this.errorEmail=""}},created(){var e=navigator.language||navigator.userLanguage;this.$root.$i18n.locale="es-ES"==e?"es":"en"}},Ot=Mt,Nt=(t("583f"),Object(u["a"])(Ot,xt,wt,!1,null,"04fa7b84",null)),Dt=Nt.exports,zt={name:"Login",components:{LoginComponent:Dt}},Rt=zt,Gt=Object(u["a"])(Rt,Ct,Et,!1,null,null,null),Ft=Gt.exports,Bt=function(){var e=this,a=e._self._c;return a("div",{on:{mousedown:e.keepPositionScroll,mouseup:e.putPositionScroll}},[a("Board"),a("div",{staticClass:"bx--grid",attrs:{id:"grid-admin"}},[a("div",{staticClass:"group-list"},[a("cv-data-table",{ref:"table",attrs:{sortable:!1,columns:[{key:"name",label:this.$t("adminEnterprise.nombre")},{key:"cif",label:this.$t("adminEnterprise.cif")},{key:"status",label:this.$t("adminEnterprise.estado")},{key:"hectares",label:this.$t("adminEnterprise.hectareas_disponibles")},{key:"hectaresUsed",label:this.$t("adminEnterprise.hectareas_usadas")}],title:e.$t("adminEnterprise.listado_empresas"),helperText:e.$t("adminEnterprise.info_nav"),pagination:{numberOfItems:e.enterprises.length,pageSizes:[10,15,20,25,e.enterprises.length]}},on:{pagination:e.actionOnPagination}},[a("template",{slot:"actions"},[a("p"),a("cv-button",{attrs:{small:""},on:{click:e.nuevaEmpresa}},[e._v(e._s(e.$t("adminEnterprise.add_empresa")))])],1),e.use_batchActions?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.eliminarEmpresaModal}},[e._v(" "+e._s(e.$t("adminEnterprise.eliminar"))+" "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.editarEmpresa}},[e._v(" "+e._s(e.$t("adminEnterprise.editar"))+" "),a("Edit32",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:function(a){return e.cambiarEstadoModal(e.idEmpresa)}}},[e._v(" "+e._s(e.$t("adminEnterprise.editar_estado"))+" "),a("Account",{staticClass:"bx--btn__icon"})],1)],1):e._e(),a("template",{slot:"data"},e._l(e.enterprises.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.name))]),a("cv-data-table-cell",[e._v(e._s(t.cif))]),a("cv-data-table-cell",{style:t.is_active?"color: #32a852":"color: #cc3939"},[e._v(" "+e._s(t.is_active?"Activa":"Inactiva")+" ")]),a("cv-data-table-cell",[e._v(e._s(t.hectares_available))]),a("cv-data-table-cell",[e._v(e._s(e.countParcels(t.parcels)))])],1)})),1)],2)],1),a("newEnterprise",{ref:"modal"}),a("AlertaGeneral",{ref:"alertaGeneral",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger",visible:e.visibleAlertaEliminar,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.eliminarUsuario}},[a("template",{slot:"label"},[a("div",{attrs:{id:"targetClose"},on:{mouseenter:e.cerrarModalEliminar}},[e._v(e._s(e.$t("adminEnterprise.seguro")))])]),a("template",{slot:"title"},[e._v(e._s(e.$t("adminEnterprise.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("adminEnterprise.seguro_enterprise_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("adminEnterprise.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("adminEnterprise.eliminar")))])],2),a("cv-modal",{ref:"alerta_estado",attrs:{visible:e.visibleAlertaCambiarEstado,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.cambiarEstado}},[a("template",{slot:"label"},[a("div",{attrs:{id:"targetClose"},on:{mouseenter:e.cerrarModalEditar}},[e._v(e._s(e.$t("adminEnterprise.seguro")))])]),a("template",{slot:"title"},[e._v(e._s(e.$t("adminEnterprise.editar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("adminEnterprise.txt_seguro_enterprise_status")))]),a("cv-select",{attrs:{label:"Selecciona un Estado"},model:{value:e.estadoSeleccionado,callback:function(a){e.estadoSeleccionado=a},expression:"estadoSeleccionado"}},[a("cv-select-option",{attrs:{disabled:"",selected:"",hidden:"",value:"placeholder-item"}},[e._v(e._s(e.estadoActual?"Activa":"Inactiva"))]),a("cv-select-option",{attrs:{value:"1"}},[e._v(e._s(e.$t("adminEnterprise.activo")))]),a("cv-select-option",{attrs:{value:"0"}},[e._v(e._s(e.$t("adminEnterprise.inactivo")))])],1)],1),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("adminEnterprise.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("adminEnterprise.guardar")))])],2)],1),a("Footer")],1)},Ut=[],Vt=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"editarUserForm",attrs:{"auto-hide-off":e.autoHideOff},on:{"primary-click":e.actionPrimary}},[e.use_label?a("template",{slot:"label"},[a("div",{attrs:{id:"targetClose"},on:{mouseenter:e.cerrarModal}},[e._v(e._s(e.$t("newEnterprise.nueva")))])]):e._e(),a("template",{slot:"title"},[e._v(e._s(e.$t("newEnterprise.nueva")))]),e.use_content?a("template",{ref:"content_form",staticClass:"formcontent",slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNameEnterprise",attrs:{label:e.labelNombre,value:"",disabled:e.disabledNombre,type:e.inputTypeNombre,placeholder:e.placeholderNombre,"invalid-message":e.invalidMessageNombre,id:"input-MIRLwtCq"}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputCif",attrs:{label:e.labelCif,value:"",disabled:e.disabledCif,type:e.inputTypeCif,placeholder:e.placeholderCif,"invalid-message":e.invalidMessageCif,id:"input-MIRLwtCq"}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputDir",attrs:{label:e.labelDir,value:"",disabled:e.disabledDir,type:e.inputTypeDir,placeholder:e.placeholderDir,"invalid-message":e.invalidMessageDir,id:"input-MIRLwtCq"}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputHec",attrs:{label:e.labelHec,value:"",disabled:e.disabledHec,type:e.inputTypeHec,placeholder:e.placeholderHec,"invalid-message":e.invalidMessageHec,id:"input-MIRLwtCq"}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"telEmpresa",attrs:{label:e.$t("newEnterprise.tel_enterprise"),placeholder:"910000000",value:e.telEmpresa,"invalid-message":e.invalidMessageTelEmpresa}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-6 bx--col-sm-4"},[a("cv-select",{attrs:{label:e.inputTypeHec,disabled:e.disabled,"invalid-message":e.invalidMessage},on:{change:function(a){return e.changemetri()}},model:{value:e.metricSelect,callback:function(a){e.metricSelect=a},expression:"metricSelect"}},[a("cv-select-option",{attrs:{disabled:"",selected:"",hidden:""}},[e._v("Choose an option")]),e._l(e.metrics,(function(t,s){return a("cv-select-option",{key:"metri-"+s,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])}))],2)],1)]),a("br"),e.verUserRegis?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("h4",[e._v(e._s(e.$t("newEnterprise.usuarioAdministrador")))])])]):e._e(),a("br"),e.verUserRegis?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputName",attrs:{label:e.label,value:e.value,disabled:e.disabled,type:e.inputType,placeholder:e.placeholder,"invalid-message":e.invalidMessage,id:"input-MIRLwtCq"}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNameLast",attrs:{label:e.labelLast,value:e.valueLast,disabled:e.disabled,type:e.inputType,placeholder:e.placeholderLast,"invalid-message":e.invalidMessageLast,id:"input-MIRLwtCq"}})],1)]):e._e(),a("br"),e.verUserRegis?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputMail",attrs:{label:e.labelMail,value:e.valueMail,disabled:e.disabledMail,type:e.inputTypeMail,placeholder:e.placeholderMail,"invalid-message":e.invalidMessageMail,id:"input-3zcRveTf"}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNumberPhone",attrs:{label:e.labelPhone,"invalid-message":e.invalidMessagePhone,disabled:e.disabledPhone,placeholder:"910000000",value:e.valuePhone}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-6 bx--col-sm-4"},[a("cv-select",{attrs:{label:e.inputTypeHec,"hide-label":!1,inline:!1,value:e.metricSelect,disabled:!1,"helper-text":e.helperText,"invalid-message":e.invalidMessage},model:{value:e.metricSelect,callback:function(a){e.metricSelect=a},expression:"metricSelect"}},e._l(e.metrics,(function(t,s){return a("cv-select-option",{key:"metri-"+s,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)]):e._e(),a("br"),e.verUserRegis?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[e.showPassword?a("cv-text-input",{ref:"inputPassword",attrs:{label:e.labelPassword,value:e.valuePassword,disabled:e.disabledPassword,type:e.inputTypePassword,placeholder:e.placeholderPassword,"invalid-message":e.invalidMessagePassword}}):e._e()],1)]):e._e()]):e._e(),e.use_primaryButton?a("template",{slot:"primary-button"},[e._v(e._s(e.$t("newEnterprise.guardar")))]):e._e()],2)},Tt=[],Ht={name:"NewEnterprise",props:{},components:{},data(){return{autoHideOff:!0,metrics:["Ha","Acre"],metricSelect:"Ha",verUserRegis:!1,use_label:!0,use_content:!0,use_primaryButton:!0,labelNombre:this.$t("newEnterprise.nombre_enterprise"),inputTypeNombre:"text",placeholderNombre:"Example Inc.",invalidMessageNombre:"",disabledNombre:!1,labelCif:this.$t("newEnterprise.cif_enterprise"),inputTypeCif:"text",placeholderCif:"B810...",invalidMessageCif:"",disabledCif:!1,labelDir:this.$t("newEnterprise.direccion_enterprise"),inputTypeDir:"text",placeholderDir:"Example Ave., Spain",invalidMessageDir:"",disabledDir:!1,labelHec:this.$t("newEnterprise.hectareas_disponible"),inputTypeHec:this.$t("newEnterprise.tipo_Metrica"),placeholderHec:"100",invalidMessageHec:"",invalidMessageMetric:"",disabledHec:!1,label:"Nombre de Usuario",disabled:!1,inputType:"text",placeholder:"Nombre de Usuario",invalidMessage:"",value:"",labelLast:"Apellido/s de Usuario",placeholderLast:"Apellido/s de Usuario",invalidMessageLast:"",valueLast:"",labelMail:"Correo electrónico",disabledMail:!1,inputTypeMail:"email",placeholderMail:"example@example.com",invalidMessageMail:"",valueMail:"",labelPhone:"Número de Teléfono",invalidMessagePhone:"",disabledPhone:!1,valuePhone:"",labelPassword:"Contraseña",disabledPassword:!1,inputTypePassword:"password",placeholderPassword:"Contraseña",invalidMessagePassword:"",valuePassword:"",showPassword:!0,layers:[],invalidMessageTelEmpresa:""}},methods:{cerrarModal(){const e=document.getElementById("targetClose"),a=e.parentElement.parentElement;a.addEventListener("mouseenter",()=>{this.autoHideOff=!1}),a.addEventListener("mouseleave",()=>{this.autoHideOff=!0})},openModal(){this.$refs.editarUserForm.show(),this.layers=[{id:"AGRICULTURE",title:"Agriculture",description:"Based on bands 11, 8A and 2",styles:[{name:"default",dataProduct:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/dataproducts/991"}}],orderHint:0,dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C"},datasetSource:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/sources/1"},defaultStyleName:"default",datasourceDefaults:{upsampling:"BICUBIC",mosaickingOrder:"mostRecent",temporal:!1,maxCloudCoverage:20,previewMode:"PREVIEW",type:"S2L1C"}},{id:"FALSE_COLOR",title:"False color (vegetation)",description:"",styles:[{name:"default",description:"Default layer style",dataProduct:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/dataproducts/6"}}],orderHint:0,dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C"},datasetSource:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/sources/1"},defaultStyleName:"default",datasourceDefaults:{upsampling:"BICUBIC",mosaickingOrder:"mostRecent",temporal:!1,maxCloudCoverage:20,previewMode:"PREVIEW",type:"S2L1C"}},{id:"NDVI",title:"NDVI (Normalized Difference Vegetation Index)",description:"Value = colorMap((B08 - B04) / (B08 + B04))",styles:[{name:"default",description:"Default layer style",dataProduct:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/dataproducts/923"}}],orderHint:34,dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C"},datasetSource:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/sources/1"},defaultStyleName:"default",datasourceDefaults:{upsampling:"BICUBIC",mosaickingOrder:"mostRecent",temporal:!1,maxCloudCoverage:20,previewMode:"PREVIEW",type:"S2L1C"}},{id:"MOISTURE_INDEX",title:"Moisture Index",description:"Based on combination of bands (B8A - B11)/(B8A + B11)",styles:[{name:"default",dataProduct:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/dataproducts/1242"}}],orderHint:6,dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C"},datasetSource:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/sources/1"},defaultStyleName:"default",datasourceDefaults:{upsampling:"BICUBIC",mosaickingOrder:"mostRecent",temporal:!1,maxCloudCoverage:20,previewMode:"PREVIEW",type:"S2L1C"}},{id:"TRUE_COLOR",title:"Natural color (true color)",description:"Based on bands 4,3,2",styles:[{name:"default",dataProduct:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/dataproducts/84"}}],orderHint:8,dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C"},datasetSource:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/sources/1"},defaultStyleName:"default",datasourceDefaults:{upsampling:"BICUBIC",mosaickingOrder:"mostRecent",temporal:!1,maxCloudCoverage:20,previewMode:"PREVIEW",type:"S2L1C"}},{id:"ESAS-SCENE",title:"Interpretación Multifactor",description:"",styles:[{name:"default",description:"Default layer style",dataProduct:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L2A/dataproducts/1259"}}],orderHint:0,dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L2A"},datasetSource:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L2A/sources/2"},defaultStyleName:"default",datasourceDefaults:{mosaickingOrder:"mostRecent",temporal:!1,maxCloudCoverage:50,type:"S2L2A"}},{id:"NDWI",title:"NDWI",description:"",styles:[{name:"default",description:"Default layer style",dataProduct:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/dataproducts/811",id:811,name:"NDWI.INDEX",description:"NDWI (Normalized Difference Water Index) - INDEX",evalScript:'//VERSION=3\n\nfunction evaluatePixel(samples) {\n    let val = index(samples.B03, samples.B08);\n    return [val, samples.dataMask];\n}\n\nfunction setup() {\n  return {\n    input: [{\n      bands: [\n        "B03",\n        "B08",\n        "dataMask"\n      ]\n    }],\n    output: {\n      bands: 2\n    }\n  }\n}\n\n',dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C"},baseProduct:"NDWI",visualization:"INDEX",scriptVersion:3,listed:!0,additionalData:{preV3EquivalentId:144}}}],orderHint:0,dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C"},datasetSource:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C/sources/1",id:1,description:"Sentinel S2 - L1C",settings:{indexServiceUrl:"https://services.sentinel-hub.com/index"},dataset:{"@id":"https://services.sentinel-hub.com/configuration/v1/datasets/S2L1C"}},defaultStyleName:"default",datasourceDefaults:{mosaickingOrder:"mostRecent",temporal:!1,maxCloudCoverage:50,type:"S2L1C"}}]},actionPrimary(){let e=!1;if(this.$refs.inputNameEnterprise.$refs.input.value||(this.invalidMessageNombre=""+this.$t("newEnterprise.campo_requerido"),e=!0),this.$refs.inputCif.$refs.input.value||(this.invalidMessageCif=""+this.$t("newEnterprise.campo_requerido"),e=!0),this.$refs.inputDir.$refs.input.value||(this.invalidMessageDir=""+this.$t("newEnterprise.campo_requerido"),e=!0),this.$refs.telEmpresa.$refs.input.value||(this.invalidMessageTelEmpresa=""+this.$t("newEnterprise.campo_requerido"),e=!0),!e){let e=this.$apiURL+"/enterprises/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.post(e,{name:this.$refs.inputNameEnterprise.$refs.input.value,direction:this.$refs.inputDir.$refs.input.value,cif:this.$refs.inputCif.$refs.input.value,hectares_available:this.$refs.inputHec.$refs.input.value,phone_number:this.$refs.telEmpresa.$refs.input.value,type_metric:this.metricSelect}).then(a=>{const t=a.data.id,s=c.a.create({baseURL:this.$sentinelURL}),r={headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+localStorage.getItem("ApiAccessToken")}},i=JSON.stringify({name:t,description:t,additionalData:{showWarnings:!1,showLogo:!1,forceFormat:"string",imageQuality:0,disabled:!1}});s.post("/configuration/v1/wms/instances",i,r).then(a=>{if(201==a.status){console.warn(a.data.id);const i=a.data.id;this.layers.forEach(e=>{s.post("/configuration/v1/wms/instances/"+i+"/layers",e,r).then(()=>{})}),e=`${this.$apiURL}/enterprises/${t}/`,c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.put(e,{name:this.$refs.inputNameEnterprise.$refs.input.value,direction:this.$refs.inputDir.$refs.input.value,cif:this.$refs.inputCif.$refs.input.value,hectares_avariable:this.$refs.inputHec.$refs.input.value,phone_number:this.$refs.telEmpresa.$refs.input.value,sentinel_instance:i}).then(()=>{this.$parent.obtenerListaEmpresas(),this.$refs.editarUserForm.hide(),this.$parent.mensajeAlerta=""+this.$t("newEnterprise.save_enterprise"),this.$parent.tipoAlerta="success",this.$parent.$refs.alertaGeneral.verAlerta()})}})}).catch(e=>{const a=e.response.data;a.name&&(this.invalidMessageNombre=""+this.$t("newEnterprise.campo_requerido")),a.cif&&(this.invalidMessageCif=""+this.$t("newEnterprise.campo_requerido")),a.direction&&(this.invalidMessageDir=""+this.$t("newEnterprise.campo_requerido")),a.phone_number&&(this.invalidMessageTelEmpresa=""+this.$t("newEnterprise.campo_requerido"))})}},getDatosUser(){if(sessionStorage.getItem("apiAccess")){const e=this.$apiURL+"/profile/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$session.start(),this.$session.set("is_coop_user",e.data[0].cooperative_user),this.$session.set("enterprise",e.data[0].enterprise_id),this.$session.set("user",e.data[0].user),sessionStorage.setItem("enterprise",e.data[0].enterprise_id),sessionStorage.setItem("user",e.data[0].user);let a=`${this.$apiURL}/enterprises/${e.data[0].enterprise_id}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{sessionStorage.setItem("sI",e.data.sentinel_instance)}),this.getPermisosUser(e.data[0].user)}).catch(e=>{console.warn(e)})}},getPermisosUser(e){const a=`${this.$apiURL}/permisos/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.$session.set("is_enterpriseadmin",e.data.is_enterpriseadmin),this.$session.set("is_staff",e.data.is_staff),this.$session.set("is_superuser",e.data.is_superuser),this.$session.set("is_systemadmin",e.data.is_systemadmin),sessionStorage.setItem("is_enterpriseadmin",e.data.is_enterpriseadmin),sessionStorage.setItem("is_staff",e.data.is_staff),sessionStorage.setItem("is_superuser",e.data.is_superuser),sessionStorage.setItem("is_systemadmin",e.data.is_systemadmin),this.$parent.$parent.is_superuser=e.data.is_superuser,this.$parent.$parent.is_staff=e.data.is_staff,this.$parent.$parent.is_systemadmin=e.data.is_systemadmin,this.$parent.$parent.is_enterpriseadmin=e.data.is_enterpriseadmin,this.$parent.$parent.customLinkEnterprise="edit-enterprise?enterprise="+this.$session.get("enterprise"),this.$parent.$parent.is_coop_user=this.$session.get("is_coop_user"),this.$parent.$parent.customLinkCoop="edit-cooperative?cooperative="+this.$session.get("enterprise")})}},created(){this.getDatosUser()}},qt=Ht,Yt=Object(u["a"])(qt,Vt,Tt,!1,null,"5c540d26",null),Zt=Yt.exports,Qt=function(){var e=this;e._self._c;return e._m(0)},Jt=[function(){var e=this,a=e._self._c;return a("footer",[a("img",{attrs:{alt:"D4SF",id:"logoSMB",src:t("3b38")}})])}],Xt={name:"Footer",mounted:function(){}},Wt=Xt,Kt=(t("4c65"),Object(u["a"])(Wt,Qt,Jt,!1,null,"087c363e",null)),es=Kt.exports,as={name:"AdminEnterprises",props:{},components:{newEnterprise:Zt,Footer:es,AlertaGeneral:Pe,Board:Qe},data(){return{autoHideOff:!0,basicPagination:!1,use_batchActions:!0,hasExpandingRows:!1,use_slottedData:!0,visibleAlertaEliminar:!1,visibleAlertaCambiarEstado:!1,visibleAlertaConfirmacion:!1,start:0,length:10,idEmpresaSeleccionada:null,nuevoEstadoSeleccionado:null,estadoActual:null,filaSeleccionada:null,columns3:[{key:"name",label:this.$t("adminEnterprise.nombre")},{key:"cif",label:this.$t("adminEnterprise.cif")},{key:"status",label:this.$t("adminEnterprise.estado")},{key:"hectares",label:this.$t("adminEnterprise.hectareas_disponibles")},{key:"hectaresUsed",label:this.$t("adminEnterprise.hectareas_usadas")}],enterprises:[],userId:null,userMail:null,enterpriseId:null,scrollPosition:0}},methods:{keepPositionScroll(){this.scrollPosition=window.scrollY,setTimeout(()=>{document.body.style.overflow="hidden",document.body.style.overflow="auto"},0)},putPositionScroll(){setTimeout(()=>{window.scrollTo(0,this.scrollPosition),document.body.style.overflow="hidden",document.body.style.overflow="auto"},0)},cerrarModal(){const e=document.getElementById("targetClose"),a=e.parentElement.parentElement;a.addEventListener("mouseenter",()=>{this.autoHideOff=!1}),a.addEventListener("mouseleave",()=>{this.autoHideOff=!0})},cerrarModalEliminar(){const e=document.querySelectorAll('[aria-label="Eliminar"]');e[0].addEventListener("mouseenter",()=>{console.log("Acabo de entrar"),this.autoHideOff=!1}),e[0].addEventListener("mouseleave",()=>{this.autoHideOff=!0})},cerrarModalEditar(){const e=document.querySelectorAll('[aria-label="Editar"]');e[0].addEventListener("mouseenter",()=>{console.log("Acabo de entrar"),this.autoHideOff=!1}),e[0].addEventListener("mouseleave",()=>{this.autoHideOff=!0})},countParcels(e){let a=0;e.features.forEach(e=>{a+=e.properties.area});const t=Math.round(100*(a+Number.EPSILON))/100;return t.toString().replace(".",",")},showAlertSuccess(){this.mensajeAlerta=""+this.$t("newEnterprise.save_status"),this.tipoAlerta="success",this.$refs.alertaGeneral.verAlerta()},actionOnPagination(e){this.start=e.start-1,this.length=e.length},obtenerListaEmpresas(){const e=this.$apiURL+"/enterprises/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.enterprises=e.data.slice().sort((e,a)=>e.name.localeCompare(a.name))}).catch(e=>{console.log(e)})},editarEmpresa(){const e=this.$refs.table.selectedRows;this.$router.push("/edit-enterprise?enterprise="+e)},nuevaEmpresa(){const e=this.$refs.table.selectedRows;e.length>1?(this.mensajeAlerta=""+this.$t("adminEnterprise.solo_una_empresa"),this.$refs.alerta.verAlerta()):(this.userSeleccionado=e[0],this.$refs.modal.openModal())},cambiarEstado(){const e=this.$refs.table.selectedRows;let a=!1;const t=this.estadoSeleccionado;this.showAlertSuccess(),this.showAlertSuccess(),e.forEach(e=>{console.log(e),this.enterpriseId=e;const s=`${this.$apiURL}/enterprises/${e}/`;c.a.patch(s,{is_active:t}).then(()=>{this.showAlertSuccess(),this.showAlertSuccess(),this.obtenerListaEmpresas(),this.$refs.alerta_estado.dataVisible=!1,this.userId=sessionStorage.getItem("user"),console.log("Estado: ",this.estadoSeleccionado),"undefined"!=typeof this.estadoSeleccionado&&this.insertTraza()}).catch(e=>{a=!0,console.error("Error:",e.error)})}),a?this.$refs.alerta.verAlerta():this.$refs.alerta_eliminar.hide()},insertTraza(){c.a.post(this.$apiURL+"/insert_trazas/",{id_user:this.userId,enterprise_code:this.enterpriseId,old_status:this.estadoActual,status:this.estadoSeleccionado,crud:"Nuevo estado: "+this.estadoSeleccionado+" de la empresa: "+this.enterpriseId+" por el usuario: "+this.userId}).catch(e=>{console.error("Error al insertar en la base de datos:",e)})},cambiarEstadoModal(){this.filaSeleccionada=this.$refs.table.selectedRows,console.log(this.filaSeleccionada[0]);const e=`${this.$apiURL}/enterprises/${this.filaSeleccionada[0]}/`;c.a.get(e).then(e=>{this.estadoActual=e.data.is_active,console.log("Estado activo:",this.estadoActual)}).catch(e=>{console.error("Error al obtener el estado de la empresa:",e)}),this.$refs.alerta_estado.dataVisible=!0},eliminarEmpresaModal(){this.$refs.alerta_eliminar.dataVisible=!0},eliminarUsuario(){const e=this.$refs.table.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const t=`${this.$apiURL}/enterprises/${e}/`;c.a.delete(t).then(()=>{this.obtenerListaEmpresas()}).catch(e=>{a=!0,console.log(e.error)})}),a?(console.error("error"),this.mensajeAlerta=""+this.$t("adminEnterprise.del_empresa_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()}},created(){this.obtenerListaEmpresas()},mounted(){this.cerrarModal(),this.cerrarModalEliminar(),this.cerrarModalEditar()}},ts=as,ss=(t("c8ae"),Object(u["a"])(ts,Bt,Ut,!1,null,"7c070252",null)),rs=ss.exports,is=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"bx--grid",attrs:{id:"grid-admin"}},[a("div",{staticClass:"group-list"},[a("cv-data-table",{ref:"table",attrs:{sortable:!1,columns:[{key:"name",label:this.$t("adminEnterprise.nombre")},{key:"apellido",label:this.$t("empleados.apellido")},{key:"Empresa",label:this.$t("app.emprise")},{key:"Login",label:this.$t("login.login")}],title:e.enterpriseSel.length>0?e.$t("map.listado_usuarios")+" - "+e.enterpriseSel[0].name:e.$t("map.listado_usuarios"),helperText:e.$t("adminEnterprise.info_nav"),pagination:{numberOfItems:e.usersSel.length,pageSizes:[10,15,20,25,e.usersSel.length]}},on:{pagination:e.actionOnPagination}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("parcelas.place_buscar")},on:{input:e.onBuscar}}),a("div",{attrs:{id:"sentinelLayers"}},[a("cv-select",{attrs:{theme:"","hide-label":!1,inline:!1,disabled:!1,label:""},on:{change:e.seleccionaEmpresa}},[a("cv-select-option",{attrs:{disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),a("cv-select-option",{attrs:{value:"all"}},[e._v("Todas")]),e._l(e.allEnterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1)],1),a("template",{slot:"data"},e._l(e.usersSel.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.first_name))]),a("cv-data-table-cell",[e._v(e._s(t.last_name))]),a("cv-data-table-cell",[e._v(e._s(e.getEmprise(t.enterprise_id)))]),a("cv-data-table-cell",[e._v(e._s(e._f("formatDate")(e.getUltAcc(t.user))))])],1)})),1)],2)],1)]),a("Footer")],1)},os=[],ls={name:"AdminUsers",props:{},components:{Footer:es,Board:Qe},data(){return{basicPagination:!1,use_batchActions:!0,hasExpandingRows:!1,use_content:!0,use_slottedData:!0,visibleAlertaEliminar:!1,start:0,length:10,columns3:[{key:"user",label:this.$t("adminEnterprise.nombre")},{key:"lastlogin",label:this.$t("adminEnterprise.cif")}],users:[],userList:[],usersName:[],enterprises:[],userSeleccionado:"",allEnterprises:Array(),allUsers:Array(),enterpriseSel:Array(),usersSel:Array(),ultimosAcc:Array()}},methods:{getUltAcc(e){const a=this.ultimosAcc.filter(a=>a.id===e);return a.length>0?a[0].last_login:"No login"},onBuscar(e){let a=Array();this.enterpriseSel.length>0?(a=this.allUsers.filter(a=>{if(a.first_name.includes(e)&&this.enterpriseSel[0].id===a.enterprise_id)return a}),this.usersSel=a):(a=this.allUsers.filter(a=>{if(a.first_name.includes(e))return a}),this.usersSel=a)},actionOnPagination(e){this.start=e.start-1,this.length=e.length},seleccionaEmpresa(e){"all"===e?(this.usersSel=this.allUsers,this.enterpriseSel=Array()):(this.usersSel=this.allUsers.filter(a=>a.enterprise_id==e),this.enterpriseSel=this.allEnterprises.filter(a=>a.id===e))},obtenerListaEmpresas(){const e=this.$apiURL+"/profiledata/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{const a=e.data;this.users=a.filter(e=>null!=e.last_login)});const a=this.$apiURL+"/profiles/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.usersName=e.data}),this.getEnterprise()},getEnterprise(){},getName(e){let a="no encontrado";return this.usersName.forEach(t=>{t.user==e&&(a=t.first_name)}),a},getlastame(e){let a="no encontrado";return this.usersName.forEach(t=>{t.user==e&&(a=t.last_name)}),a},getEmprise(e){let a="no encontrado";const t=this.allEnterprises.filter(a=>a.id===e);return t.length>0?t[0].name:a},obtenerListadoEmpresas(){const e=this.$apiURL+"/enterprises/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.allEnterprises=e.data;const a="178e5240-1a64-4631-a95d-a9a8f70f3305";this.$session.get("enterprise")!=a&&(this.allEnterprises=this.allEnterprises.filter(e=>"Smartbits"!=e.name)),this.getAllUsers()}).catch(e=>{console.info(e)})},getAllUsers(){const e=Array();let a="";this.allEnterprises.forEach(t=>{a=`${this.$apiURL}/profiles_enterprises/${t.id}/`,c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(a=>{a.data.forEach(a=>{e.push(a)})})}),this.allUsers=e,this.usersSel=e},getUltimosAccesos(){const e=this.$apiURL+"/profiledata/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.ultimosAcc=e.data})},getDatosUser(){if(sessionStorage.getItem("apiAccess")){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language});const a=this.$apiURL+"/profile/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.$session.start(),this.$session.set("enterprise",e.data[0].enterprise_id),this.$session.set("user",e.data[0].user),sessionStorage.setItem("enterprise",e.data[0].enterprise_id),sessionStorage.setItem("user",e.data[0].user);let a=`${this.$apiURL}/enterprises/${e.data[0].enterprise_id}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{sessionStorage.setItem("sI",e.data.sentinel_instance)}),this.getPermisosUser(e.data[0].user)}).catch(e=>{console.warn(e)})}},getPermisosUser(e){const a=`${this.$apiURL}/permisos/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.$session.set("is_enterpriseadmin",e.data.is_enterpriseadmin),this.$session.set("is_staff",e.data.is_staff),this.$session.set("is_superuser",e.data.is_superuser),this.$session.set("is_systemadmin",e.data.is_systemadmin),sessionStorage.setItem("is_enterpriseadmin",e.data.is_enterpriseadmin),sessionStorage.setItem("is_staff",e.data.is_staff),sessionStorage.setItem("is_superuser",e.data.is_superuser),sessionStorage.setItem("is_systemadmin",e.data.is_systemadmin),this.$parent.is_superuser=e.data.is_superuser,this.$parent.is_staff=e.data.is_staff,this.$parent.is_systemadmin=e.data.is_systemadmin,this.$parent.is_enterpriseadmin=e.data.is_enterpriseadmin,this.$parent.customLinkEnterprise="edit-enterprise?enterprise="+this.$session.get("enterprise"),this.obtenerListadoEmpresas(),this.getUltimosAccesos()})}},created(){this.getDatosUser()},mounted(){this.getDatosUser()}},ns=ls,cs=(t("54f5"),Object(u["a"])(ns,is,os,!1,null,"2c7dde54",null)),ds=cs.exports,ps=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"bx--grid",attrs:{id:"grid-admin"}},[a("br"),a("h2",[e._v(e._s(e.$t("newEnterprise.editar_enterprise")))]),a("br"),a("br"),a("EditarEmpresaComponent",{ref:"datosempresa",attrs:{idEmpresa:e.enterprise}}),a("br"),a("br"),a("ListaUsuarios",{ref:"listausuarios"}),a("br"),a("br"),a("ParcelsList"),a("br"),a("br")],1),a("Footer")],1)},hs=[],ms=function(){var e=this,a=e._self._c;return a("div",[a("cv-form",[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"nombreEmpresa",attrs:{label:e.$t("newEnterprise.nombre_enterprise"),placeholder:"Example Inc.",value:e.nombreEmpresa,"invalid-message":e.invalidMessageNombre}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"cifEmpresa",attrs:{label:e.$t("newEnterprise.cif_enterprise"),placeholder:"B810...",value:e.cifEmpresa,"invalid-message":e.invalidMessageCif}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"direccionEmpresa",attrs:{label:e.$t("newEnterprise.direccion_enterprise"),placeholder:"Example Ave., Spain",value:e.direccionEmpresa,"invalid-message":e.invalidMessageDir}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"telEmpresa",attrs:{label:e.$t("newEnterprise.tel_enterprise"),placeholder:"910000000",value:e.telEmpresa,"invalid-message":e.invalidMessageTelEmpresa}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"hectareasDisponibles",attrs:{label:e.$t("newEnterprise.hectareas_disponible"),placeholder:"2.374",value:e.hectareas_disponibles,"invalid-message":e.invalidMessageHec,disabled:e.disabledHec()}})],1),a("div",{staticClass:"bx--col-lg-2 bx--col-md-4 bx--col-sm-4"},[a("cv-select",{attrs:{label:e.inputTypeHec,"hide-label":!1,inline:!1,value:e.metricSelect,disabled:!1,"invalid-message":e.invalidMessageMetric},model:{value:e.metricSelect,callback:function(a){e.metricSelect=a},expression:"metricSelect"}},e._l(e.metrics,(function(t,s){return a("cv-select-option",{key:"metri-"+s,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("div",{staticClass:"bx--col-lg-2 bx--col-md-4 bx--col-sm-4"},[a("cv-select",{attrs:{label:"Continente","hide-label":!1,inline:!1,value:e.continentSelect,disabled:!1,"helper-text":""},model:{value:e.continentSelect,callback:function(a){e.continentSelect=a},expression:"continentSelect"}},e._l(e.continents,(function(t,s){return a("cv-select-option",{key:"conti-"+s,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("div",{staticClass:"bx--col-lg-2 bx--col-md-2 bx--col-sm-4"},[a("cv-select",{attrs:{id:"isMonitorSelect",label:"Añadir a monitorización","hide-label":!1,inline:!1,value:e.isMonitorSelect,disabled:!1},model:{value:e.isMonitorSelect,callback:function(a){e.isMonitorSelect=a},expression:"isMonitorSelect"}},e._l(e.monitorOptions.options,(function(t){return a("cv-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),1)],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2",staticStyle:{"margin-top":"17px"}},[a("cv-select",{attrs:{size:e.md,inline:e.inline,label:"Selecciona un estado"},model:{value:e.estadoSeleccionado,callback:function(a){e.estadoSeleccionado=a},expression:"estadoSeleccionado"}},[a("cv-select-option",{attrs:{disabled:"",selected:"",hidden:"",value:"placeholder-item"}},[e._v(e._s(e.estadoActual?"Activa":"Inactiva"))]),a("cv-select-option",{attrs:{value:"1"}},[e._v(e._s(e.$t("adminEnterprise.activo")))]),a("cv-select-option",{attrs:{value:"0"}},[e._v(e._s(e.$t("adminEnterprise.inactivo")))])],1),a("p",[e._v(" "+e._s(e.$t("adminEnterprise.txt_seguro_enterprise_status"))+" ")])],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-button",{attrs:{icon:""},on:{click:e.guardarDatosEmpresa}},[e._v(" "+e._s(e.$t("newEnterprise.guardar"))+" ")])],1)])]),a("AlertaGeneral",{ref:"alertaGeneral",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},us=[],fs={name:"EditarEmpresaComponent",props:{idEmpresa:String},components:{AlertaGeneral:Pe},data(){return{metrics:["Ha","Acre"],continents:["América","Europa"],continentSelect:null,idEnterprise:null,isMonitorSelect:null,monitorOptions:{options:[{value:!0,text:"Si"},{value:!1,text:"No"}]},estadoActual:null,metricSelect:null,nombreEmpresa:"",cifEmpresa:"",direccionEmpresa:"",telEmpresa:"",hectareas_disponibles:"",type_metric:"",invalidMessageNombre:"",invalidMessageCif:"",invalidMessageDir:"",invalidMessageTelEmpresa:"",mensajeAlerta:"",tipoAlerta:"",invalidMessageHec:"",invalidMessageMetric:"",idEmpresaEd:"",idUsuario:"",flag:!1,inputTypeHec:this.$t("newEnterprise.tipo_Metrica")}},methods:{disabledHec(){return"true"!=sessionStorage.getItem("is_superuser")&&"true"!=sessionStorage.getItem("is_systemadmin")},getEnterpriseStatus(){const e=`${this.$apiURL}/enterprises/${this.$route.query.enterprise}/`;console.log("URL:",e),c.a.get(e).then(e=>{this.estadoActual=e.data.is_active,console.log("Estado activo:",this.estadoActual)}).catch(e=>{console.error("Error al obtener el estado de la empresa:",e),this.visibleAlertaConfirmacion=!1})},showAlert(){this.mensajeAlerta=""+this.$t("newEnterprise.save_enterprise"),this.tipoAlerta="success",this.$refs.alertaGeneral.verAlerta()},getDatosEmpresa(e){this.idEmpresaEd=e,e?(this.idEmpresaEd=e,localStorage.setItem("enterprise",e),sessionStorage.setItem("enterprise",localStorage.getItem("enterprise"))):this.idEmpresaEd=this.idEmpresaEd||localStorage.getItem("enterprise")||sessionStorage.getItem("enterprise");const a=`${this.$apiURL}/enterprises/${this.idEmpresaEd}/`;console.log("Path getDatosEmpresa:",a),c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.nombreEmpresa=e.data.name,this.cifEmpresa=e.data.cif,this.direccionEmpresa=e.data.direction,this.telEmpresa=e.data.phone_number,this.hectareas_disponibles=e.data.hectares_available,this.metricSelect=e.data.type_metric,this.estadoActual=e.data.is_active,this.continentSelect=e.data.continent,this.isMonitorSelect=e.data.is_monitor,0==this.isMonitorSelect&&(this.isMonitorSelect="No")})},async guardarDatosEmpresa(){this.flag=!1,this.idUsuario=sessionStorage.getItem("user"),this.idEnterprise=localStorage.getItem("enterprise");const e=`${this.$apiURL}/enterprises/${this.idEnterprise}/`;"No"===this.isMonitorSelect&&(this.isMonitorSelect=!1),c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.put(e,{name:this.$refs.nombreEmpresa.$refs.input.value,direction:this.$refs.direccionEmpresa.$refs.input.value,cif:this.$refs.cifEmpresa.$refs.input.value,phone_number:this.$refs.telEmpresa.$refs.input.value,hectares_available:this.$refs.hectareasDisponibles.$refs.input.value,type_metric:this.metricSelect,continent:this.continentSelect,is_monitor:this.isMonitorSelect,is_active:this.estadoSeleccionado}).then(()=>{this.showAlert()}).catch(e=>{this.flag=!0;const a=e.response.data;a.name&&(this.invalidMessageNombre=""+this.$t("newEnterprise.campo_requerido")),a.cif&&(this.invalidMessageCif=""+this.$t("newEnterprise.campo_requerido")),a.direction&&(this.invalidMessageDir=""+this.$t("newEnterprise.campo_requerido")),a.phone_number&&(this.invalidMessageTelEmpresa=""+this.$t("newEnterprise.campo_requerido")),a.hectares_available&&(this.invalidMessageHec=""+this.$t("newEnterprise.campo_requerido"))}),this.flag||("undefined"!=typeof this.estadoSeleccionado&&this.insertTraza(),this.showAlert())},insertTraza(){const e=this.$apiURL+"/insert_trazas/";c.a.post(e,{id_user:this.idUsuario,enterprise_code:this.idEmpresaEd,old_status:this.estadoActual,status:this.estadoSeleccionado,crud:"Nuevo estado: "+this.estadoSeleccionado+" de la empresa: "+this.idEmpresaEd+" por el usuario: "+this.idUsuario})}}},vs=fs,bs=Object(u["a"])(vs,ms,us,!1,null,"02493d6b",null),_s=bs.exports,gs=function(){var e=this,a=e._self._c;return a("div",{staticClass:"employee-list",on:{mousedown:e.keepPositionScroll,mouseup:e.putPositionScroll}},[a("cv-data-table",{ref:"table",attrs:{sortable:e.sortable,columns:[{key:"first_name",label:this.$t("empleados.nombre")},{key:"last_name",label:this.$t("empleados.apellido")},{key:"phone_number",label:this.$t("empleados.telefono")}],title:e.$t("empleados.empleados_lista"),pagination:{numberOfItems:e.usuarios.length,pageSizes:[10,15,20,25,e.usuarios.length]}},on:{sort:e.onSort,pagination:e.actionOnPagination}},[a("template",{slot:"actions"},[a("cv-button",{attrs:{small:""},on:{click:e.nuevoUsuario}},[e._v(e._s(e.$t("empleados.add")))])],1),e.use_batchActions?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.onBatchAction1}},[e._v(" "+e._s(e.$t("empleados.eliminar"))+" "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.editarUsuario}},[e._v(" "+e._s(e.$t("empleados.editar"))+" "),a("Edit32",{staticClass:"bx--btn__icon"})],1),e._e()],1):e._e(),a("template",{slot:"data"},e._l(e.usuarios.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.first_name))]),a("cv-data-table-cell",[e._v(e._s(t.last_name))]),a("cv-data-table-cell",[e._v(e._s(t.phone_number))])],1)})),1)],2),a("EditarUser",{ref:"modal",attrs:{userSeleccionado:e.userSeleccionado}}),a("Alertas",{ref:"alerta",attrs:{tituloAlert:e.mensajeAlerta}}),a("AlertaGeneral",{ref:"alertaGeneral",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger",visible:e.visibleAlertaEliminar,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.eliminarUsuario}},[a("template",{slot:"label"},[a("div",{attrs:{id:"targetClose"},on:{mouseenter:e.cerrarModal}},[e._v(e._s(e.$t("empleados.seguro")))])]),a("template",{slot:"title"},[e._v(e._s(e.$t("empleados.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("empleados.seguro_user_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("empleados.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("empleados.eliminar")))])],2)],1)},As=[],ys={name:"ListaUsuarios",props:{},components:{Alertas:v,EditarUser:$,AlertaGeneral:Pe},data(){return{sortable:!1,start:0,length:10,columns3:[{key:"first_name",label:this.$t("empleados.nombre")},{key:"last_name",label:this.$t("empleados.apellido")},{key:"phone_number",label:this.$t("empleados.telefono")}],usuarios:[],basicPagination:!1,use_batchActions:!0,hasExpandingRows:!1,use_slottedData:!0,visibleAlertaEliminar:!1,autoHideOff:!0}},methods:{keepPositionScroll(){this.scrollPosition=window.scrollY},putPositionScroll(){setTimeout(()=>{window.scrollTo(0,this.scrollPosition),console.log(this.scrollPosition)},0)},cerrarModal(){const e=document.getElementById("targetClose"),a=e.parentElement.parentElement;a.addEventListener("mouseenter",()=>{this.autoHideOff=!1}),a.addEventListener("mouseleave",()=>{this.autoHideOff=!0})},showAlert(){this.mensajeAlerta=this.$t("empleados.desarrollo"),this.tipoAlerta="info",this.$refs.alertaGeneral.verAlerta()},actionOnPagination(e){this.start=e.start-1,this.length=e.length},getUsuariosEmpresa(e){this.idEmpresaEd=e,e?(this.idEmpresaEd=e,localStorage.setItem("enterprise",e),sessionStorage.setItem("enterprise",localStorage.getItem("enterprise"))):this.idEmpresaEd=this.idEmpresaEd||localStorage.getItem("enterprise")||sessionStorage.getItem("enterprise");const a=`${this.$apiURL}/profiles_enterprises/${this.idEmpresaEd}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.usuarios=e.data})},editarUsuario(){const e=this.$refs.table.selectedRows;e.length>1?(this.mensajeAlerta=""+this.$t("empleados.un_user_selec"),this.$refs.alerta.verAlerta()):(this.userSeleccionado=e[0],this.$refs.modal.openModal(this.userSeleccionado))},nuevoUsuario(){this.$refs.modal.openModal()},onBatchAction1(){this.$refs.alerta_eliminar.dataVisible=!0,console.warn(this.$refs.alerta_eliminar.dataVisible)},eliminarUsuario(){const e=this.$refs.table.selectedRows;let a=!1;e.forEach(e=>{const t=`${this.$apiURL}/profiles/${e}/`;c.a.get(t).then(a=>{const t=a.data.user;c.a.delete(`${this.$apiURL}/profiles/${e}/`).then(()=>{c.a.delete(`${this.$apiURL}/permisos/${t}/`).then(()=>{const e=this.$route.query.enterprise?this.$route.query.enterprise:this.$route.query.cooperative?this.$route.query.cooperative:"";this.getUsuariosEmpresa(e)})})}).catch(e=>{a=!0,console.log(e.error)})}),a?(console.error("error"),this.mensajeAlerta=""+this.$t("empleados.user_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()}},mounted(){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language})},created(){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language})}},$s=ys,Cs=(t("96bc"),Object(u["a"])($s,gs,As,!1,null,"5e07922d",null)),Es=Cs.exports,xs={name:"EditarEmpresa",props:{},components:{EditarEmpresaComponent:_s,ListaUsuarios:Es,ParcelsList:Le,Footer:es,Board:Qe},data(){return{enterprise:""}},methods:{getDatosUser(){if(sessionStorage.getItem("apiAccess")){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language});const a=this.$apiURL+"/profile/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.$session.start(),this.$session.set("is_coop_user",e.data[0].cooperative_user),this.$session.set("enterprise",e.data[0].enterprise_id),this.$session.set("user",e.data[0].user),sessionStorage.setItem("enterprise",e.data[0].enterprise_id),sessionStorage.setItem("user",e.data[0].user);let a=`${this.$apiURL}/enterprises/${e.data[0].enterprise_id}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{sessionStorage.setItem("sI",e.data.sentinel_instance)}),this.getPermisosUser(e.data[0].user)}).catch(e=>{console.warn(e)})}},getPermisosUser(e){const a=`${this.$apiURL}/permisos/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.$session.set("is_enterpriseadmin",e.data.is_enterpriseadmin),this.$session.set("is_staff",e.data.is_staff),this.$session.set("is_superuser",e.data.is_superuser),this.$session.set("is_systemadmin",e.data.is_systemadmin),sessionStorage.setItem("is_enterpriseadmin",e.data.is_enterpriseadmin),sessionStorage.setItem("is_staff",e.data.is_staff),sessionStorage.setItem("is_superuser",e.data.is_superuser),sessionStorage.setItem("is_systemadmin",e.data.is_systemadmin),this.$parent.is_superuser=e.data.is_superuser,this.$parent.is_staff=e.data.is_staff,this.$parent.is_systemadmin=e.data.is_systemadmin,this.$parent.is_enterpriseadmin=e.data.is_enterpriseadmin,this.$parent.customLinkEnterprise="edit-enterprise?enterprise="+this.$session.get("enterprise"),this.$parent.$parent.is_coop_user=this.$session.get("is_coop_user"),this.$parent.$parent.customLinkCoop="edit-cooperative?cooperative="+this.$session.get("enterprise"),this.montarMapa()})}},mounted(){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language}),this.enterprise=this.$route.query.enterprise,this.$refs.datosempresa.getDatosEmpresa(this.enterprise),this.$refs.listausuarios.getUsuariosEmpresa(this.enterprise)},created(){const e=`${this.$apiURL}/profiledata/${this.$session.get("user")}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$root.$i18n.locale=e.data.language}),this.getDatosUser()}},ws=xs,Ss=(t("63b4"),Object(u["a"])(ws,ps,hs,!1,null,"7ccb164c",null)),Ps=Ss.exports,ks=function(){var e=this,a=e._self._c;return a("div",{staticClass:"ResetPassView"},[a("ResetPasswordComponent")],1)},Is=[],js=function(){var e=this,a=e._self._c;return a("div",{attrs:{id:"container"}},[a("div",{staticClass:"bx--grid",attrs:{id:"gridContainer"}},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg"}),a("div",{staticClass:"bx--col-lg",attrs:{id:"modal"}},[a("h4",[e._v(e._s(e.$t("login.reestablecer_pass")))]),a("br"),a("br"),a("cv-text-input",{ref:"passInput",attrs:{label:e.$t("login.nueva_pass"),placeholder:e.$t("login.nueva_pass"),"invalid-message":e.errorPass,type:"password",id:"passInput"},on:{input:e.quitarErrorPass},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}}),a("br"),a("br"),a("cv-text-input",{ref:"passInput",attrs:{label:e.$t("login.confirma_pass"),placeholder:e.$t("login.confirma_pass"),"invalid-message":e.newErrorPass,type:"password",id:"passInput"},on:{input:e.quitarErrorPass},model:{value:e.newPassword,callback:function(a){e.newPassword=a},expression:"newPassword"}}),a("br"),a("br"),e.visibleAlert?a("cv-inline-notification",{staticClass:"errorlogin",attrs:{kind:e.kindNot,"sub-title":e.mensageNot,"action-label":e.actionlabel,"low-contrast":"false"},on:{"update:kind":function(a){e.kindNot=a},action:e.doAction,close:e.doCloseRecordar}}):e._e(),a("br"),a("br"),a("cv-button",{on:{click:e.establecerPass}},[e._v(e._s(e.$t("login.reestablecer")))])],1),a("div",{staticClass:"bx--col-lg"})])])])},Ls=[],Ms={name:"ResetPasswordComponent",props:{},components:{},data(){return{password:"",newPassword:"",errorPass:"",newErrorPass:"",visibleAlert:!1,kindNot:"error",mensageNot:"",actionlabel:this.$t("login.ir_login")}},methods:{establecerPass(){if(this.password!=this.newPassword)return this.errorPass=this.$t("login.pass_no_iguales"),this.newErrorPass=this.$t("login.pass_no_iguales"),!1;const e=this.$route.query.token;let a=this.$apiURL+"/password_reset/verify-token";c.a.post(a,{token:e}).then(()=>{let a=this.$apiURL+"/password_reset/confirm/";c.a.post(a,{token:e,password:this.password}).then(()=>{this.visibleAlert=!0,this.kindNot="success",this.mensageNot=this.$t("login.pass_reestablece")}).catch(e=>{this.visibleAlert=!0,this.kindNot="error",this.mensageNot="",this.mensageNot=e.response.data.password[0]})}).catch(()=>{this.visibleAlert=!0,this.kindNot="error",this.mensageNot=this.$t("login.pass_tiempo_exp")})},quitarErrorPass(){this.errorPass="",this.newErrorPass="",this.visibleAlert=!1},doCloseRecordar(){this.visibleAlert=!1},doAction(){this.$router.push("/login")}},created(){var e=navigator.language||navigator.userLanguage;this.$root.$i18n.locale="es-ES"==e?"es":"en"}},Os=Ms,Ns=(t("31aa"),Object(u["a"])(Os,js,Ls,!1,null,"c26f5824",null)),Ds=Ns.exports,zs={name:"ResetPasswordView",components:{ResetPasswordComponent:Ds}},Rs=zs,Gs=Object(u["a"])(Rs,ks,Is,!1,null,null,null),Fs=Gs.exports,Bs=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"bx--grid",attrs:{id:"grid-admin"}},[a("div",{staticClass:"group-list"},[a("cv-data-table",{ref:"table",attrs:{sortable:!1,columns:[{key:"name",label:this.$t("adminCoop.nombre")},{key:"cif",label:this.$t("adminCoop.cif")},{key:"direction",label:this.$t("adminCoop.direction")}],title:e.$t("adminCoop.listado_coop"),helperText:e.$t("adminEnterprise.info_nav")},on:{"row-select-changes":e.checkCoops}},[a("template",{slot:"actions"},[a("cv-button",{attrs:{small:""},on:{click:e.nuevaCoop}},[e._v(e._s(e.$t("adminCoop.add_coop")))])],1),a("template",{slot:"batch-actions"},[e.verEditarCoop?a("cv-button",{on:{click:e.editarCoop}},[e._v(" "+e._s(e.$t("adminCoop.editar_coop"))+" "),a("Edit32",{staticClass:"bx--btn__icon"})],1):e._e(),a("cv-button",{on:{click:e.eliminarCoopModal}},[e._v(" "+e._s(e.$t("adminCoop.delete_coop"))+" "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1)],1),a("template",{slot:"data"},e._l(e.cooperatives,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id}},[a("cv-data-table-cell",[e._v(e._s(t.name))]),a("cv-data-table-cell",[e._v(e._s(t.cif))]),a("cv-data-table-cell",[e._v(e._s(t.direction))])],1)})),1)],2)],1),a("newCooperative",{ref:"modal"}),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger",visible:!1,"auto-hide-off":e.autoHideOff},on:{"primary-click":e.eliminarCoop}},[a("template",{slot:"label"},[a("div",{attrs:{id:"targetClose"},on:{mouseenter:e.cerrarModalEliminar}},[e._v(e._s(e.$t("adminCoop.seguro")))])]),a("template",{slot:"title"},[e._v(e._s(e.$t("adminCoop.delete_coop")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("adminCoop.seguro_coop_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("adminCoop.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("adminCoop.eliminar")))])],2),a("AlertaGeneral",{ref:"alertaGeneral",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1),a("Footer")],1)},Us=[],Vs=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"newCooperativeForm",attrs:{"auto-hide-off":e.autoHideOff},on:{"primary-click":e.actionPrimary}},[a("template",{slot:"label"},[a("div",{on:{mouseenter:e.cerrarModalNuevaCoop}},[e._v(e._s(e.$t("newCoop.nueva")))])]),a("template",{slot:"title"},[e._v(e._s(e.$t("newCoop.nueva")))]),a("template",{ref:"content_form",staticClass:"formcontent",slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNameCoop",attrs:{label:e.$t("newCoop.nombre"),value:"",disabled:!1,type:"text",placeholder:e.$t("newCoop.nombrePlace"),"invalid-message":e.invalidMessageNombre}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputDirectionCoop",attrs:{label:e.$t("newCoop.direction"),value:"",disabled:!1,type:"text",placeholder:e.$t("newCoop.directionPlace"),"invalid-message":e.invalidMessageDirection}})],1)]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputPhoneCoop",attrs:{label:e.$t("newCoop.phone"),value:"",disabled:!1,type:"text",placeholder:e.$t("newCoop.phonePlace"),"invalid-message":e.invalidMessagePhone}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputCifCoop",attrs:{label:e.$t("newCoop.cif"),value:"",disabled:!1,type:"text",placeholder:e.$t("newCoop.cifPlace"),"invalid-message":e.invalidMessageCif}})],1)]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-12 bx--col-md-12 bx--col-sm-12"},[a("cv-data-table",{ref:"tableEmpresas",attrs:{sortable:!1,columns:[{key:"name",label:this.$t("adminEnterprise.nombre")},{key:"cif",label:this.$t("adminEnterprise.cif")}],title:e.$t("adminEnterprise.listado_empresas"),pagination:{numberOfItems:e.enterprises.length,pageSizes:[10,15,20,25,e.enterprises.length]}},on:{pagination:e.actionOnPagination}},[a("template",{slot:"batch-actions"},[a("cv-button",[e._v(" "+e._s("")+" ")])],1),a("template",{slot:"data"},e._l(e.enterprises.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id}},[a("cv-data-table-cell",[e._v(e._s(t.name))]),a("cv-data-table-cell",[e._v(e._s(t.cif))])],1)})),1)],2)],1)])]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("newEnterprise.guardar")))])],2)},Ts=[],Hs={name:"NewCooperative",props:{},components:{},data(){return{autoHideOff:!0,invalidMessageNombre:"",invalidMessageDirection:"",invalidMessagePhone:"",invalidMessageCif:"",enterprises:Array(),start:0,length:10,mensajeAlerta:"",tipoAlerta:"",parent:Object}},methods:{cerrarModalNuevaCoop(){const e=document.querySelectorAll('[aria-label="Nueva Cooperativa"]');e[0].addEventListener("mouseenter",()=>{console.log("Acabo de entrar"),this.autoHideOff=!1}),e[0].addEventListener("mouseleave",()=>{this.autoHideOff=!0})},openModal(){this.$refs.newCooperativeForm.show(),this.parent=this.$refs.newCooperativeForm.$parent.$parent,this.obtenerEmpresas()},obtenerEmpresas(){const e=this.$apiURL+"/enterprises/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.enterprises=e.data}).catch(e=>{console.info(e)})},actionOnPagination(e){this.start=e.start-1,this.length=e.length},actionPrimary(){const e=this.$refs.tableEmpresas.selectedRows;if(0==e.length)return!1;let a=this.$apiURL+"/cooperativess/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.post(a,{name:this.$refs.inputNameCoop.$refs.input.value,direction:this.$refs.inputDirectionCoop.$refs.input.value,phone_number:this.$refs.inputPhoneCoop.$refs.input.value,cif:this.$refs.inputCifCoop.$refs.input.value,id_empresas:e}).then(()=>{this.parent.mensajeAlerta=this.$t("newCoop.create_coop_success"),this.parent.tipoAlerta="success",this.parent.$refs.alertaGeneral.verAlerta(),this.parent.obtenerCooperativas(),this.$refs.newCooperativeForm.hide()}).catch(e=>{e.response.data.name[0].includes("not be blank")&&(this.invalidMessageNombre=""+this.$t("newCoop.invalido_blank"))})}},created(){},mounted(){this.cerrarModalNuevaCoop()}},qs=Hs,Ys=Object(u["a"])(qs,Vs,Ts,!1,null,"1aa15b05",null),Zs=Ys.exports,Qs={name:"AdminCooperatives",props:{},components:{Footer:es,newCooperative:Zs,AlertaGeneral:Pe,Board:Qe},data(){return{cooperatives:Array(),mensajeAlerta:"",tipoAlerta:"",verEditarCoop:!0,autoHideOff:!0}},methods:{cerrarModalEliminar(){const e=document.querySelectorAll('[aria-label="Eliminar Cooperativa"]');e[0].addEventListener("mouseenter",()=>{console.log("Acabo de entrar"),this.autoHideOff=!1}),e[0].addEventListener("mouseleave",()=>{this.autoHideOff=!0})},obtenerCooperativas(){const e=this.$apiURL+"/cooperatives/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.cooperatives=e.data}).catch(e=>{console.warn(e)})},checkCoops(e){1===e.length?this.verEditarCoop=!0:this.verEditarCoop=!1},nuevaCoop(){this.$refs.modal.openModal()},editarCoop(){const e=this.$refs.table.selectedRows;1===e.length&&this.$router.push("/edit-cooperative?cooperative="+e)},eliminarCoopModal(){this.$refs.alerta_eliminar.dataVisible=!0},eliminarCoop(){let e="";const a=this.$refs.table.selectedRows;for(const t in a)e=`${this.$apiURL}/cooperatives/${a[t]}/`,c.a.delete(e).then(()=>{this.obtenerCooperativas(),this.mensajeAlerta=this.$t("adminCoop.del_coop_ok"),this.tipoAlerta="success",this.$refs.alertaGeneral.verAlerta()}).catch(()=>{this.obtenerCooperativas(),this.mensajeAlerta=this.$t("adminCoop.del_coop_ko"),this.tipoAlerta="error",this.$refs.alertaGeneral.verAlerta()}),this.$refs.table.selectedRows="",this.$refs.alerta_eliminar.hide()},getDatosUser(){if(sessionStorage.getItem("apiAccess")){const e=this.$apiURL+"/profile/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$session.start(),this.$session.set("is_coop_user",e.data[0].cooperative_user),this.$session.set("enterprise",e.data[0].enterprise_id),this.$session.set("user",e.data[0].user),sessionStorage.setItem("enterprise",e.data[0].enterprise_id),sessionStorage.setItem("user",e.data[0].user);let a=`${this.$apiURL}/enterprises/${e.data[0].enterprise_id}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{sessionStorage.setItem("sI",e.data.sentinel_instance)}),this.getPermisosUser(e.data[0].user)}).catch(e=>{console.warn(e)})}},getPermisosUser(e){const a=`${this.$apiURL}/permisos/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.$session.set("is_enterpriseadmin",e.data.is_enterpriseadmin),this.$session.set("is_staff",e.data.is_staff),this.$session.set("is_superuser",e.data.is_superuser),this.$session.set("is_systemadmin",e.data.is_systemadmin),sessionStorage.setItem("is_enterpriseadmin",e.data.is_enterpriseadmin),sessionStorage.setItem("is_staff",e.data.is_staff),sessionStorage.setItem("is_superuser",e.data.is_superuser),sessionStorage.setItem("is_systemadmin",e.data.is_systemadmin),this.$parent.is_superuser=e.data.is_superuser,this.$parent.is_staff=e.data.is_staff,this.$parent.is_systemadmin=e.data.is_systemadmin,this.$parent.is_enterpriseadmin=e.data.is_enterpriseadmin,this.$parent.customLinkEnterprise="edit-enterprise?enterprise="+this.$session.get("enterprise"),this.$parent.$parent.is_coop_user=this.$session.get("is_coop_user"),this.$parent.$parent.customLinkCoop="edit-cooperative?cooperative="+this.$session.get("enterprise")})}},created(){this.getDatosUser(),this.obtenerCooperativas(),this.cerrarModalEliminar()},mounted(){this.cerrarModalEliminar()}},Js=Qs,Xs=Object(u["a"])(Js,Bs,Us,!1,null,"040fdd75",null),Ws=Xs.exports,Ks=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"bx--grid",attrs:{id:"grid-admin"}},[a("br"),a("h2",[e._v(e._s(e.$t("editCoop.title")))]),a("br"),a("br"),a("EditarCooperativeComponent",{ref:"datoscooperative",attrs:{cooperativeId:e.cooperative}}),a("br"),a("br"),a("EditCooperativeComponentEnterpriseList",{ref:"cooperativeEnterprise",attrs:{cooperativeId:e.cooperative}}),a("br"),a("br"),a("ListaUsuarios",{ref:"listausuarios"})],1)],1)},er=[],ar=function(){var e=this,a=e._self._c;return a("div",[a("div",{ref:"editarEmpresaDatos",staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputNameCoop",attrs:{label:e.$t("newCoop.nombre"),value:e.coopName,disabled:!1,type:"text",placeholder:e.$t("newCoop.nombrePlace"),"invalid-message":e.invalidMessageNombre}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputDirectionCoop",attrs:{label:e.$t("newCoop.direction"),value:e.coopDirection,disabled:!1,type:"text",placeholder:e.$t("newCoop.directionPlace"),"invalid-message":e.invalidMessageDirection}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputPhoneCoop",attrs:{label:e.$t("newCoop.phone"),value:e.coopPhone,disabled:!1,type:"text",placeholder:e.$t("newCoop.phonePlace"),"invalid-message":e.invalidMessagePhone}})],1),a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-text-input",{ref:"inputCifCoop",attrs:{label:e.$t("newCoop.cif"),value:e.coopCif,disabled:!1,type:"text",placeholder:e.$t("newCoop.cifPlace"),"invalid-message":e.invalidMessageCif}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-6 bx--col-md-4 bx--col-sm-2"},[a("cv-button",{attrs:{icon:""},on:{click:e.guardarDatosCoop}},[e._v(" "+e._s(e.$t("newEnterprise.guardar"))+" ")])],1)]),a("AlertaGeneral",{ref:"alertaGeneral",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},tr=[],sr={name:"EditarCooperativeComponent",props:{cooperativeId:String},components:{AlertaGeneral:Pe},data(){return{invalidMessageNombre:"",invalidMessageDirection:"",invalidMessagePhone:"",invalidMessageCif:"",mensajeAlerta:"",tipoAlerta:"",coopName:"",coopDirection:"",coopPhone:"",coopCif:""}},methods:{getDatosCoop(){const e=`${this.$apiURL}/cooperatives/${this.$route.query.cooperative}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.coopName=e.data.name,this.coopDirection=e.data.direction,this.coopPhone=e.data.phone_number,this.coopCif=e.data.cif}).catch(e=>{console.warn(e)})},guardarDatosCoop(){let e=`${this.$apiURL}/cooperatives/${this.$route.query.cooperative}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.put(e,{name:this.$refs.inputNameCoop.$refs.input.value,direction:this.$refs.inputDirectionCoop.$refs.input.value,phone_number:this.$refs.inputPhoneCoop.$refs.input.value,cif:this.$refs.inputCifCoop.$refs.input.value}).then(()=>{this.mensajeAlerta=this.$t("editCoop.edit_coop_success"),this.tipoAlerta="success",this.$refs.alertaGeneral.verAlerta(),this.invalidMessageNombre="",this.invalidMessageDirection="",this.invalidMessagePhone="",this.invalidMessageCif=""}).catch(e=>{e.response.data.name[0].includes("not be blank")&&(this.invalidMessageNombre=""+this.$t("newCoop.invalido_blank"))})}},mounted(){this.getDatosCoop()},created(){}},rr=sr,ir=Object(u["a"])(rr,ar,tr,!1,null,"3f2c6500",null),or=ir.exports,lr=function(){var e=this,a=e._self._c;return a("div",[a("div",{ref:"editarEmpresaDatos",staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-12 bx--col-md-12 bx--col-sm-12"},[a("h4",[e._v(e._s(e.$t("editCoop.edit_coop_enterprises")))])]),a("div",{staticClass:"bx--col-lg-12 bx--col-md-12 bx--col-sm-12"},[a("cv-structured-list",[a("template",{slot:"headings"},[a("cv-structured-list-heading",[e._v(e._s(e.$t("adminCoop.nombre")))]),a("cv-structured-list-heading",[e._v(e._s(e.$t("adminCoop.cif")))])],1),a("template",{slot:"items"},e._l(e.cooperative.enterprises,(function(t){return a("cv-structured-list-item",{key:t.id,attrs:{value:String(t.id)}},[a("cv-structured-list-data",[e._v(e._s(t.name))]),a("cv-structured-list-data",[e._v(e._s(t.cif))])],1)})),1)],2)],1),a("div",{staticClass:"bx--col-lg-12 bx--col-md-12 bx--col-sm-12"},[a("cv-button",{attrs:{icon:""},on:{click:e.editarEmpresasCoop}},[e._v(" "+e._s(e.$t("editCoop.add_enterprise_coop"))+" ")])],1)]),a("AlertaGeneral",{ref:"alertaGeneral",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("EditCooperativeEnterprise",{ref:"modal",attrs:{cooperative_id:e.$route.query.cooperative}})],1)},nr=[],cr=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"newCooperativeForm",attrs:{"auto-hide-off":e.autoHideOff},on:{"primary-click":e.actionPrimary}},[a("template",{slot:"label"},[e._v(e._s(e.$t("editCoop.title")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("editCoop.title")))]),a("template",{ref:"content_form",staticClass:"formcontent",slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-lg-12 bx--col-md-12 bx--col-sm-12"},[a("cv-data-table",{key:e.componentKey,ref:"tableEmpresas",attrs:{sortable:!1,columns:[{key:"name",label:this.$t("adminEnterprise.nombre")},{key:"cif",label:this.$t("adminEnterprise.cif")}],title:e.$t("adminEnterprise.listado_empresas"),"rows-selected":e.enterprisesInCoop}},[a("template",{slot:"batch-actions"},[a("cv-button",[e._v(" "+e._s("")+" ")])],1),a("template",{slot:"data"},e._l(e.enterprises,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id}},[a("cv-data-table-cell",[e._v(e._s(t.name))]),a("cv-data-table-cell",[e._v(e._s(t.cif))])],1)})),1)],2)],1)])]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("newEnterprise.guardar")))])],2)},dr=[],pr={name:"NewCooperative",props:{cooperative_id:String},components:{},data(){return{invalidMessageNombre:"",invalidMessageDirection:"",invalidMessagePhone:"",invalidMessageCif:"",enterprises:Array(),start:0,length:10,mensajeAlerta:"",tipoAlerta:"",parent:Object,cooperative:"",enterprisesInCoop:[],componentKey:0,autoHideOff:!0}},methods:{cerrarModalEditarCooperativa(){const e=document.querySelectorAll('[aria-label="Editar Cooperativa"]');e[0].addEventListener("mouseenter",()=>{console.log("Acabo de entrar"),this.autoHideOff=!1}),e[0].addEventListener("mouseleave",()=>{this.autoHideOff=!0})},cerrarModalEditarUser(){const e=document.querySelectorAll('[aria-label="Editar usuario"]');e[0].addEventListener("mouseenter",()=>{console.log("Acabo de entrar"),this.autoHideOff=!1}),e[0].addEventListener("mouseleave",()=>{this.autoHideOff=!0})},openModal(){this.cooperative=this.cooperative_id,this.$refs.newCooperativeForm.show(),this.parent=this.$refs.newCooperativeForm.$parent.$parent,this.obtenerEmpresas()},obtenerEmpresas(){const e=this.$apiURL+"/enterprises/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.enterprises=e.data,this.getListaSeleccionados()}).catch(e=>{console.info(e)})},getListaSeleccionados(){const e=`${this.$apiURL}/cooperatives/${this.cooperative}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{e.data.enterprises.forEach(e=>{this.enterprisesInCoop.push(e.id)})}).catch(e=>{console.info(e)}),console.info(this.enterprisesInCoop)},actionPrimary(){const e=this.$refs.tableEmpresas.selectedRows;if(0==e.length)return!1;let a=`${this.$apiURL}/cooperativesr/${this.cooperative}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.put(a,{id_empresas:e,enterprises:e}).then(()=>{this.parent.mensajeAlerta=this.$t("newCoop.create_coop_success"),this.parent.tipoAlerta="success",this.parent.$refs.alertaGeneral.verAlerta(),this.parent.getDatosCoop(),this.$refs.newCooperativeForm.hide()}).catch(e=>{e.response.data.name[0].includes("not be blank")&&(this.invalidMessageNombre=""+this.$t("newCoop.invalido_blank"))})}},created(){},mounted(){this.cerrarModalEditarCooperativa(),this.cerrarModalEditarUser()}},hr=pr,mr=Object(u["a"])(hr,cr,dr,!1,null,"3e11745a",null),ur=mr.exports,fr={name:"EditarCooperativeComponent",props:{cooperativeId:String},components:{AlertaGeneral:Pe,EditCooperativeEnterprise:ur},data(){return{cooperative:Object,empresasArr:Array(),mensajeAlerta:"",tipoAlerta:""}},methods:{getDatosCoop(){const e=`${this.$apiURL}/cooperativesonenrlt/${this.$route.query.cooperative}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{console.info(e.data),this.cooperative=e.data,this.cooperative.enterprises=e.data.enterprises}).catch(e=>{console.warn(e)})},getDatosEmpresas(){this.empresasArr=Array();let e="";this.cooperative.enterprises.forEach(a=>{e=`${this.$apiURL}/enterprises/${a}/`,c.a.get(e).then(e=>{this.empresasArr.push(e.data)})}),this.cooperative.enterprises=this.empresasArr},guardarDatosCoop(){let e=`${this.$apiURL}/cooperatives/${this.$route.query.cooperative}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.put(e,{name:this.$refs.inputNameCoop.$refs.input.value,direction:this.$refs.inputDirectionCoop.$refs.input.value,phone_number:this.$refs.inputPhoneCoop.$refs.input.value,cif:this.$refs.inputCifCoop.$refs.input.value}).then(()=>{this.mensajeAlerta=this.$t("editCoop.edit_coop_success"),this.tipoAlerta="success",this.$refs.alertaGeneral.verAlerta(),this.invalidMessageNombre="",this.invalidMessageDirection="",this.invalidMessagePhone="",this.invalidMessageCif=""}).catch(e=>{e.response.data.name[0].includes("not be blank")&&(this.invalidMessageNombre=""+this.$t("newCoop.invalido_blank"))})},editarEmpresasCoop(){this.$refs.modal.openModal()}},mounted(){this.getDatosCoop()},created(){}},vr=fr,br=Object(u["a"])(vr,lr,nr,!1,null,"5ea9ea35",null),_r=br.exports,gr={name:"EditarCooperative",props:{},components:{EditarCooperativeComponent:or,EditCooperativeComponentEnterpriseList:_r,ListaUsuarios:Es,Board:Qe},data(){return{cooperative:"",mensajeAlerta:"",tipoAlerta:""}},methods:{getDatosUser(){if(sessionStorage.getItem("apiAccess")){const e=this.$apiURL+"/profile/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{this.$session.start(),this.$session.set("is_coop_user",e.data[0].cooperative_user),this.$session.set("enterprise",e.data[0].enterprise_id),this.$session.set("user",e.data[0].user),sessionStorage.setItem("enterprise",e.data[0].enterprise_id),sessionStorage.setItem("user",e.data[0].user);let a=`${this.$apiURL}/enterprises/${e.data[0].enterprise_id}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{sessionStorage.setItem("sI",e.data.sentinel_instance)}),this.getPermisosUser(e.data[0].user)}).catch(e=>{console.warn(e)})}},getPermisosUser(e){const a=`${this.$apiURL}/permisos/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{this.$session.set("is_enterpriseadmin",e.data.is_enterpriseadmin),this.$session.set("is_staff",e.data.is_staff),this.$session.set("is_superuser",e.data.is_superuser),this.$session.set("is_systemadmin",e.data.is_systemadmin),sessionStorage.setItem("is_enterpriseadmin",e.data.is_enterpriseadmin),sessionStorage.setItem("is_staff",e.data.is_staff),sessionStorage.setItem("is_superuser",e.data.is_superuser),sessionStorage.setItem("is_systemadmin",e.data.is_systemadmin),this.$parent.is_superuser=e.data.is_superuser,this.$parent.is_staff=e.data.is_staff,this.$parent.is_systemadmin=e.data.is_systemadmin,this.$parent.is_enterpriseadmin=e.data.is_enterpriseadmin,this.$parent.customLinkEnterprise="edit-enterprise?enterprise="+this.$session.get("enterprise"),this.$parent.$parent.is_coop_user=this.$session.get("is_coop_user"),this.$parent.$parent.customLinkCoop="edit-cooperative?cooperative="+this.$session.get("enterprise")})}},mounted(){this.cooperative=this.$route.query.cooperative,this.$refs.listausuarios.getUsuariosEmpresa(this.$route.query.cooperative),this.getDatosUser()},created(){}},Ar=gr,yr=Object(u["a"])(Ar,Ks,er,!1,null,"3e9e849a",null),$r=yr.exports,Cr=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("ParcelsToSentinelComponent")],1)],1)},Er=[],xr=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[[e._m(0)],[a("cv-data-table",{attrs:{"row-size":e.rowSize,"auto-width":e.autoWidth,sortable:e.sortable,title:e.title,"action-bar-aria-label":e.actionBarAriaLabel,"batch-cancel-label":e.batchCancelLabel,zebra:e.zebra,columns:e.columns,searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{search:e.onFilter},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.generarInstanciaSent}},[e._v(" Generar Instancia "),a("Analytics20",{staticClass:"bx--btn__icon"})],1)],1),e.listadoParcelas?a("template",{slot:"data"},e._l(e.listadoParcelasFilter,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id}},[a("cv-data-table-cell",[e._v(e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(t.properties.enterprise))])],1)})),1):e._e()],2)]],2)},wr=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--col"},[a("p",[e._v("Procesado de las parcelas que no tienen una instancia en Sentinel por separado")]),a("p",[e._v("En el siguente listado se muestran las parcelas que no tienen una instancia por separado establecida")]),a("p",[e._v('Para establecerlas, selecciona las que quieras y pulsa en "Generar Instancia"')])])}];const Sr="https://api-d4sf.smartbits-es.com/api/v1.0";function Pr(){return c.a.get(Sr+"/parcelsnosentinstance/")}function kr(e){return c.a.post(Sr+"/parcelsnosentinstance/",{parcelas:e})}var Ir,jr,Lr,Mr,Or,Nr,Dr,zr,Rr,Gr,Fr,Br,Ur,Vr,Tr,Hr,qr={name:"ParcelsToSentinelComponent",components:{},data(){return{rowSelects:[],listadoParcelas:Array,listadoParcelasFilter:Array,rowSize:"",autoWidth:!1,sortable:!1,title:"Listado de parcelas sin Instancia en Sentinel",actionBarAriaLabel:"Custom action bar aria label",batchCancelLabel:"Cancel",zebra:!0,columns:[{key:"name",label:this.$t("graficos.nombre")},{key:"description",label:this.$t("graficos.descrip")},{key:"heactareas",label:this.$t("graficos.hectareas")},{key:"enterprise",label:"Empresa"}]}},methods:{onFilter(e){if(e){const a=this.listadoParcelas.filter(a=>a.properties.enterprise==e);this.listadoParcelasFilter=a}else this.listadoParcelasFilter=this.listadoParcelas},generarInstanciaSent(){console.info(this.rowSelects),kr(this.rowSelects)}},mounted:function(){},beforeCreate(){Pr().then(e=>{this.listadoParcelas=e.data.features,this.listadoParcelasFilter=e.data.features})}},Yr=qr,Zr=Object(u["a"])(Yr,xr,wr,!1,null,null,null),Qr=Zr.exports,Jr={name:"Home",components:{Board:Qe,ParcelsToSentinelComponent:Qr},mounted:function(){}},Xr=Jr,Wr=Object(u["a"])(Xr,Cr,Er,!1,null,null,null),Kr=Wr.exports,ei=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("SentinelInstancesRefreshParcels")],1)],1)},ai=[],ti=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[[e._m(0)],[a("cv-data-table",{attrs:{"row-size":e.rowSize,"auto-width":e.autoWidth,sortable:e.sortable,title:e.title,"action-bar-aria-label":e.actionBarAriaLabel,"batch-cancel-label":e.batchCancelLabel,zebra:e.zebra,columns:e.columns},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.refrescarInsancia}},[e._v(" Refrescar Instancia "),a("Analytics20",{staticClass:"bx--btn__icon"})],1)],1),e.listadoParcelas?a("template",{slot:"data"},e._l(e.arrEmpresas,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id}},[a("cv-data-table-cell",[e._v(e._s(t.id))]),a("cv-data-table-cell",[e._v(e._s(t.name))]),a("cv-data-table-cell",[e._v(e._s(t.sentinel_instance))])],1)})),1):e._e()],2)]],2)},si=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--col"},[a("p",[e._v("Procesado de las instancias de Sentinel para volver a cargar todas las parcelas en la instancia de nuevo")])])}],ri={name:"ParcelsToSentinelComponent",components:{},data(){return{rowSelects:[],listadoParcelas:Array,listadoParcelasFilter:Array,arrEmpresas:[],rowSize:"",autoWidth:!1,sortable:!1,title:"Listado de Empresas",actionBarAriaLabel:"Custom action bar aria label",batchCancelLabel:"Cancel",zebra:!0,columns:[{key:"id",label:"ID"},{key:"name",label:"Nombre de la empresa"},{key:"sentinel_instance",label:"Instancia de sentinel"}]}},methods:{refrescarInsancia(){const e=this.arrEmpresas.filter(e=>this.rowSelects.includes(e.id));console.info(e),e.map(async e=>{const a=Array();e.parcels.features.map(e=>{a.push(e.geometry.coordinates)}),console.info("parcelas de "+e.name,a),await oa(e.name,a,e.sentinel_instance).then(a=>{console.info("OK refrescado parcelas de "+e.name,a.data)}).catch(a=>console.info("ERROR refrescado parcelas de "+e.name,a))})}},mounted:function(){},beforeCreate(){ta().then(async e=>{this.arrEmpresas=e.data,this.flagIndicatingDataHasBeenLoadedInVariables=!0})}},ii=ri,oi=Object(u["a"])(ii,ti,si,!1,null,null,null),li=oi.exports,ni={name:"Home",components:{Board:Qe,SentinelInstancesRefreshParcels:li},mounted:function(){}},ci=ni,di=Object(u["a"])(ci,ei,ai,!1,null,null,null),pi=di.exports,hi=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("GenGraficosComponent")],1)],1)},mi=[],ui=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid",on:{mousedown:e.keepPositionScroll,mouseup:e.putPositionScroll}},[a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[e._m(0),a("p",[e._v(e._s(e.$t("adminEnterprise.info_nav")))])])]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(e.getSortedCooperativa(t).enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-sm-2 bx--col-md-2 bx--col-lg-2"},[a("cv-progress",{attrs:{"initial-step":e.rowSelects.length?e.selectValueCapa.length?e.timeValuesArr.length?3:2:1:0,steps:e.steps,vertical:!0}})],1),a("div",{staticClass:"bx--col"},[a("cv-accordion",{ref:"acc",on:{change:e.actionChangeAccordeon}},[a("cv-accordion-item",{attrs:{open:e.open[0]}},[a("template",{slot:"title"},[e._v("Nombre de informe y Selección de Parcelas ")]),a("template",{slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("Indica a continuación el nombre que le quieres poner al informe que se va a generar.")]),a("br"),a("cv-text-input",{attrs:{label:e.$t("graficos.nombre_informe"),disabled:!1},model:{value:e.nombreInforme,callback:function(a){e.nombreInforme=a},expression:"nombreInforme"}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{attrs:{id:"sentinelLayersList"}},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("br"),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"heactareas",label:this.$t("graficos.hectareas"),sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],title:e.$t("graficos.parcel_list"),searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button",[e._v(" Revisa la tabla-resumen de la parte inferior para generar el Informe ")])],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)})),1)],2)],1)])])])],2),a("cv-accordion-item",{attrs:{open:e.open[1]}},[a("template",{slot:"title"},[e._v("Selección de capas y Nubes")]),a("template",{staticStyle:{"padding-right":"0"},slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-sm-4 bx--col-md-4 bx--col-lg-4"},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("¿Qué información quieres consultar? Elige a continuación una de las opciones que se muestran.")]),a("br"),a("cv-select",{attrs:{label:e.$t("graficos.sel_layer_sen")},model:{value:e.selectValueCapa,callback:function(a){e.selectValueCapa=a},expression:"selectValueCapa"}},[a("cv-select-option",{attrs:{value:"NDVI"}},[e._v(e._s(e.$t("graficos.NDVI")))]),a("cv-select-option",{attrs:{value:"MOISTURE_INDEX"}},[e._v(e._s(e.$t("graficos.mostisture_index")))])],1)],1),a("div",{staticClass:"bx--col"},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("¿Quieres incluir detección de nubes en el informe? Esta información se verá reflejada en el informe, añadiendo una nueva imagen real y marcando en rojo la zona con cualquier tipo de nube así como el porcentaje de nubes.")]),a("br"),a("cv-toggle",{attrs:{checked:e.checked_clouds,label:"Incluir análisis de Nubes",value:"check-clouds",small:!1,disabled:!1,"hide-label":!1},model:{value:e.checked_clouds,callback:function(a){e.checked_clouds=a},expression:"checked_clouds"}},[a("template",{slot:"text-left"},[e._v("No")]),a("template",{slot:"text-right"},[e._v("Sí")])],2)],1)])])],2),a("cv-accordion-item",{attrs:{open:e.open[2]}},[a("template",{slot:"title"},[e._v("Selección de Fechas")]),a("template",{staticStyle:{"padding-right":"0"},slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("Especifica a continuación el intervalo de fechas sobre el que quieres realizar la consulta. A la hora de generar el informe se mostrarán únicamente las imágenes de fechas disponibles en Sentinel.")]),a("br"),a("cv-date-picker",{attrs:{kind:"range",dateLabel:e.$t("graficos.fecha_incio"),"date-end-label":e.$t("graficos.fecha_fin"),"cal-options":e.calOptions,value:e.valueRange},on:{change:e.actionChangeDateRange}}),e.verErrorIntervalo?a("p",{staticStyle:{"font-size":"12px",color:"red"}},[e._v("No se ha seleccionado ningún intervalo de fechas")]):e._e()],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("Utilizando la siguiente opción se puede ver las fechas en las que hay fotografías dentro del intervalo de fechas escogido.")]),a("br"),a("cv-date-picker",{ref:"cambiosFechas",staticStyle:{width:"100%!important"},attrs:{kind:"single","cal-options":e.calOptions,dateLabel:"Consultar fechas disponibles",value:e.valueDates,placeholder:"mm/dd/yyyy"}}),e.rowSelects.length&&e.timeValuesArr.length?a("cv-button",{attrs:{kind:"primary",disabled:!1},on:{click:function(a){return e.getFechasSentBBOX()}}},[e._v("Consultar")]):e._e(),e.verCargandoFechasBbox?a("cv-inline-loading",{attrs:{"ending-text":"Cargado","error-text":"Error","loading-text":"Cargando..","loaded-text":"Cargando..",state:"loading"}}):e._e()],1)])])],2),a("cv-accordion-item",{attrs:{open:e.open[3]}},[a("template",{slot:"title"},[e._v("Resumen de Informe")]),a("template",{staticStyle:{"padding-right":"0"},slot:"content"},[e.rowSelects.length?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("Puedes utilizar el botón de Ver número de imágenes para que se haga una comprobación a Sentinel de las imágenes disponibles en el intervalo de fechas seleccionado así como las fechas en las que hay imagen del satélite.")])])]):e._e(),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[e.disabledGenerar?a("p",{staticStyle:{"font-size":"14px",color:"red"}},[e._v("En el intervalo de fechas seleccionado no hay ninguna imagen disponible para generar. Por favor, especifica otro intervalo de fechas en la zona superior.")]):e._e(),a("br"),e.rowSelects.length?a("cv-button",{attrs:{kind:"primary"},on:{click:function(a){return e.getFechas()}}},[e._v("Ver número de imágenes")]):e._e(),e.verCargandoImagenes?a("cv-inline-loading",{attrs:{"ending-text":"Cargado","error-text":"Error","loading-text":"Cargando..","loaded-text":"Cargando..",state:"loading"}}):e._e(),e.verTimeoutNumImg?a("p",{staticStyle:{"font-size":"14px",color:"red"}},[e._v("Sentinel no ha podido procesar la previsualización de la obtención del número total de imágenes debido al volumen de datos. Esta previsualización es independiente de la generación del informe, por favor procede con la generación mediante el botón de Generar.")]):e._e()],1)]),a("br"),e.rowSelects.length?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-data-table",{attrs:{columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"imgnum",label:"Número de Imagenes",sortable:!1},{key:"fecha",label:"Fechas",sortable:!1},{key:"fecha",label:"Max. Porcentaje Nubes Encontrado",sortable:!1}]}},[a("template",{slot:"data"},e._l(e.rowSelects,(function(t){return a("cv-data-table-row",{key:""+t,attrs:{value:""+t,"aria-label-for-batch-checkbox":`Custom aria label for row ${t} batch`},domProps:{innerHTML:e._s(e.getData(t))}})})),1)],2)],1)]):e._e(),a("br"),e.rowSelects.length?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("Tomando como base las pruebas realizadas, el tiempo estimado de procesado será el siguiente")])])]):e._e(),a("br"),e.rowSelects.length?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{staticClass:"bx--grid"},[a("cv-list",{attrs:{ordered:!1}},[a("cv-list-item",[e._v("50 imágenes – 2 minutos")]),a("cv-list-item",[e._v("100 imágenes – 4 minutos")]),a("cv-list-item",[e._v("200 imágenes – 8 minutos")]),a("cv-list-item",[e._v("400 imágenes – 16 minutos")])],1)],1)])]):e._e(),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[e.rowSelects.length?a("cv-button",{attrs:{kind:"primary",disabled:e.disabledGenerar},on:{click:function(a){return e.generarInforme()}}},[e._v(e._s(e.$t("graficos.generar")))]):e._e()],1)])])],2)],1)],1)]),a("br"),a("br"),a("cv-modal",{ref:"modal_procesando"},[a("template",{slot:"label"},[e._v(e._s(this.$t("graficos.gen_iformes")))]),a("template",{slot:"title"},[e._v(e._s(this.$t("graficos.gen_iformes")))]),a("template",{slot:"content"},[a("p",[e._v(" "+e._s(this.$t("graficos.grafico_procensandose"))+" ")])]),a("template",{slot:"primary-button"},[e._v(e._s(this.$t("graficos.gen_informes_acceptar")))])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},fi=[function(){var e=this,a=e._self._c;return a("h2",[e._v("Generador de Informes "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("cd00")}})])}],vi={name:"ParcelsToSentinelComponent",components:{AlertaGeneral:Pe},data(){return{selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],activeEmpresas:[],start:0,length:10,rowSelects:[],selectValueCapa:"",SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:"",valueDates:[],valueRange:[],timeValuesArr:[],nombreInforme:"Gráfico - "+this.getNow(),checked_clouds:!1,tipoAlerta:"error",mensajeAlerta:"",fechasParcelasNumImages:{},verCargandoImagenes:!1,disabledGenerar:!1,verErrorIntervalo:!1,verCargandoFechasBbox:!1,initialStep:1,steps:["Nombre de informe y Selección de Parcelas","Selección de capas y Nubes","Selección de Fechas","Resumen de Informe"],open:[!1,!1,!1,!1],verTimeoutNumImg:!1,scrollPosition:0}},methods:{keepPositionScroll(){this.scrollPosition=window.scrollY},putPositionScroll(){setTimeout(()=>{window.scrollTo(0,this.scrollPosition)},0)},getSortedCooperativa(e){return{...e,enterprises:e.enterprises.slice().sort((e,a)=>e.name.localeCompare(a.name))}},actionChangeAccordeon(e){this.open=this.$refs.acc.state.map((a,t)=>t===e.changedIndex)},fetchActiveempresas(){sa().then(e=>{this.activeEmpresas=e.data}).catch(e=>{console.error("Error al obtener empresas activas:",e)})},getFechas(){if(this.verTimeoutNumImg=!1,0===this.timeValuesArr.length)return this.mensajeAlerta="No se ha seleccionado ningún intervalo de fechas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1;this.verCargandoImagenes=!0;let e=0;ba(this.rowSelects,this.timeValuesArr).then(a=>{console.info(a.data),this.fechasParcelasNumImages=a.data,this.verCargandoImagenes=!1,console.info(a.data,Object.entries(a.data)),Object.entries(a.data).forEach(a=>{const[t,s]=a;console.log(t,s),e+=s.resultados.length}),this.disabledGenerar=0===e}).catch(()=>{this.verCargandoImagenes=!1,this.verTimeoutNumImg=!0})},getFechasSentBBOX(){this.verCargandoFechasBbox=!0,_a(this.rowSelects,this.timeValuesArr).then(e=>{console.info(e.data);const a=e.data,t=Array();a.forEach(e=>{t.push(e.properties.date)}),this.valueDates=t.reverse(),this.verCargandoFechasBbox=!1}).catch(()=>this.verCargandoFechasBbox=!1)},getData(e){const a=this.allParcelsOfEnterprisesFilter.filter(a=>e==String(a.id)),t=[];let s=0,r=[];return this.fechasParcelasNumImages[e]&&(this.fechasParcelasNumImages[e].resultados.map(e=>{e.properties.cloudCoverPercentage>s&&(s=e.properties.cloudCoverPercentage),t.push(e.properties.date)}),r=[...new Set(t)]),`<td>${a[0].properties.name}</td>\n            <td>${this.fechasParcelasNumImages[e]?r.length:""}</td>\n            <td>${this.fechasParcelasNumImages[e]?r:""}</td>\n            <td>${this.checked_clouds?this.fechasParcelasNumImages[e]?s+"%":"":"n/a"}</td>`},toGenerar(e,a){return this.nombreInforme?0===this.timeValuesArr.length?(this.mensajeAlerta="No se ha seleccionado ningún intervalo de fechas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1):0===this.selectValueCapa.length?(this.mensajeAlerta="No se ha seleccionado ninguna capa de Sentinel",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1):void ha(this.nombreInforme,this.selectValueCapa,this.timeValuesArr,this.rowSelects,a,e,this.checked_clouds).then(()=>{this.$refs.modal_procesando.show()}):(this.mensajeAlerta="El campo Nombre de Informe no debe estar vacío",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1)},generarInforme(){const e=this.allParcelsOfEnterprisesFilter.filter(e=>this.rowSelects.includes(String(e.id))),a=[];e.map(e=>{a.push(e.properties.enterprise_id)}),console.info("Resultados empresa => ",a);const t=[...new Set(a)];if(console.info("Unificamos empresa => ",t),t.length>1){console.info("Seleccion Multiempresa");const e=[];if(this.arrCooperativas.map(a=>{a.enterprises.map(s=>{t.includes(s.id)&&e.push(a.id)})}),console.info("Resultado Cooperativas => ",e),e.length==t.length){console.info("Todas las empresas Pertenecen a cooperativas");const a=[...new Set(e)];a.length>1?(console.info("MultiCoop"),console.info("Cooperativas",a),console.info("No se puede generar el informe, parcelas de distintas Cooperativas"),this.mensajeAlerta="No se puede generar el informe, parcelas seleccionadas de distintas Cooperativas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()):(console.info("UniCoop"),console.info("Cooperativa",a),this.toGenerar(a[0],!0))}else console.info("No se puede generar el informe, Hay una empresa que no pertenece a ninguna cooperativa"),this.mensajeAlerta="No se puede generar el informe, en la selección hay parcelas que no pertenecen a ninguna cooperativa",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}else console.info("Seleccion Uniempresa"),this.toGenerar(t[0],!1)},actionChangeDateRange(e){this.disabledGenerar=!1,this.verErrorIntervalo=!1,console.info(e),this.timeValuesArr=[e.startDate,e.endDate],console.info(this.timeValuesArr),this.time=`${e.startDate}/${e.endDate}`},chageCapas(e){this.SentinelLayer=e},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),s=a+" "+t;return console.info(s),a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"1":t="name";break;case"2":t="area";break;case"3":t="enterprise";break;default:t="name"}"ascending"==s&&this.allParcelsOfEnterprisesFilter.sort((e,a)=>parseFloat(e.name)-parseFloat(a.name)),console.info(t)}},mounted:function(){console.info(this.$refs.acc),this.getNow(),this.fetchActiveempresas()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?(console.info("entra"),sa().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data.slice().sort((e,a)=>e.name.localeCompare(a.name));const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0})):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},bi=vi,_i=(t("dead"),Object(u["a"])(bi,ui,fi,!1,null,"3f36726a",null)),gi=_i.exports,Ai={name:"GenGraficos",components:{Board:Qe,GenGraficosComponent:gi},mounted:function(){}},yi=Ai,$i=Object(u["a"])(yi,hi,mi,!1,null,null,null),Ci=$i.exports,Ei=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("GenGraficosAnterioresComponent")],1)],1)},xi=[],wi=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid",on:{mousedown:e.keepPositionScroll,mouseup:e.putPositionScroll}},[e._m(0),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(e.getSortedCooperativa(t).enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1)]),a("br"),a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[e._m(1),a("br"),a("p",[e._v(e._s(e.$t("adminEnterprise.info_nav")))])])]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{attrs:{id:"sentinelLayersList"}},[a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.historicoAnterior.length,pageSizes:[10,15,20,25,e.historicoAnterior.length]},columns:e.columnas,title:"Informes Generados",searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort,"row-select-change":e.changeRowsUnique},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),1==e.rowSelects.length?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.verDatosFecha}},[e._v(" "+e._s(e.$t("graficos.ver_datos"))+" Ordenado por Fecha "),a("Charbar20",{staticClass:"bx--btn__icon"})],1)],1):e._e(),1==e.rowSelects.length?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.verDatosParcelas}},[e._v(" "+e._s(e.$t("graficos.ver_datos"))+" Agrupado por Parcelas "),a("Charbar20",{staticClass:"bx--btn__icon"})],1)],1):e._e(),1==e.rowSelects.length?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.descargaExcel}},[e._v(" "+e._s(e.$t("graficos.desc_excel"))+" "),a("Download16",{staticClass:"bx--btn__icon"})],1)],1):e._e(),1==e.rowSelects.length?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.descargaExcelConImagenes}},[e._v(" "+e._s(e.$t("graficos.desc_excel_img"))+" "),a("Download16",{staticClass:"bx--btn__icon"})],1)],1):e._e(),1==e.rowSelects.length?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.showEditarInforme}},[e._v(" "+e._s(e.$t("graficos.editar"))+" "),a("Edit32",{staticClass:"bx--btn__icon"})],1)],1):e._e(),e.rowSelects.length>1?a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.showModificarInformes}},[e._v(" "+e._s(e.$t("graficos.unificar_informes"))+" "),a("AppConnectivity32",{staticClass:"bx--btn__icon"})],1)],1):e._e(),a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.delInforme}},[e._v(" "+e._s(e.$t("graficos.del_informe"))+" "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1)],1),a("template",{slot:"data"},e._l(e.historicoAnterior.slice(e.start,e.start+e.length),(function(s){return a("cv-data-table-row",{key:""+s.id,attrs:{value:""+s.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${s.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(s.nombre))]),a("cv-data-table-cell",[e._v(e._s(s.capa))]),a("cv-data-table-cell",[e._v(e._s(e.dateFormat(s.created)))]),a("cv-data-table-cell",[e._v(e._s(e.getEstado(s))+" "),s.error?a("img",{staticStyle:{width:"15px",cursor:"pointer"},attrs:{src:t("f4ab"),title:"Parcelas reportadas por Sentinel"},on:{click:function(a){return e.modalerrores(s)}}}):e._e()]),a("cv-data-table-cell",[e._v(e._s(s.fechaInicio)+" - "+e._s(s.fechaFin))]),a("cv-data-table-cell",{staticStyle:{"text-aling":"center"}},[s.includeClouds?a("img",{staticStyle:{width:"15px"},attrs:{src:t("a56d")}}):a("img",{staticStyle:{width:"15px"},attrs:{src:t("5593")}}),s.includeClouds?a("label",[e._v(" Sí")]):a("label",[e._v(" No")])]),e.is_superuser?a("cv-data-table-cell",[e._v(e._s(e.getUserName(s.user_created)))]):e._e(),a("cv-data-table-cell",[e._v(e._s(e.getEnterpriseName(s.enterprise_id)))])],1)})),1)],2)],1)])]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[e.verGraficNDVI?a("ChartLine",{key:"chart_line_ndvi_"+e.timestamp,attrs:{datos:e.graficoData}}):e._e(),e.verGraficMois?a("ChartLineMois",{key:"chart_line_mois_"+e.timestamp,attrs:{datos:e.graficoData}}):e._e()],1)]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[e.verGraficNDVI?a("ChartBar",{key:"chart_bar_ndvi_"+e.timestamp,attrs:{datos:e.graficoData}}):e._e(),e.verGraficMois?a("ChartBarMois",{key:"chart_bar_mois_"+e.timestamp,attrs:{datos:e.graficoData}}):e._e()],1)]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[e.verGraficNDVI?a("TableColors",{key:"table_ndvi_"+e.timestamp,attrs:{urlMedia:e.$apiURLMedia,datos:e.graficoData}}):e._e(),e.verGraficMois?a("TableColorsMois",{key:"table_mois_"+e.timestamp,attrs:{urlMedia:e.$apiURLMedia,datos:e.graficoData}}):e._e()],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[e.verImagenSent?a("SentImage",{key:"imgs_"+e.timestamp,attrs:{urlMedia:e.$apiURLMedia,datos:e.graficoData}}):e._e()],1)]),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger"},on:{"primary-click":e.eliminarInformesConfirm}},[a("template",{slot:"label"},[e._v(e._s(e.$t("graficos.seguro")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("graficos.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("graficos.seguro_parcel_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.eliminar")))])],2),a("cv-modal",{ref:"editar_informe",on:{"primary-click":e.changeNameInforme}},[a("template",{slot:"label"},[e._v(e._s(e.$t("graficos.modifica_infor")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("graficos.modifica_infor")))]),a("template",{slot:"content"},[a("div",{staticClass:"bx--grid bx--grid--condensed"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{staticClass:"bx--form-item"},[a("label",{staticClass:"bx--label",attrs:{for:"text-input-Nombre"}},[e._v(e._s(e.$t("graficos.nombre_informe")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nombreInformeNew,expression:"nombreInformeNew"}],staticClass:"bx--text-input",attrs:{id:"text-input-Nombre",type:"text"},domProps:{value:e.nombreInformeNew},on:{input:function(a){a.target.composing||(e.nombreInformeNew=a.target.value)}}})])])])])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.guardar")))])],2),a("cv-modal",{ref:"unificarInformeForm",on:{"primary-click":e.unificaInformes,"secondary-click":function(a){return e.$refs.unificarInformeForm.hide()}}},[a("template",{slot:"label"}),a("template",{slot:"title"},[e._v(e._s(e.$t("graficos.unificar_informes")))]),a("template",{attrs:{id:"contenido"},slot:"content"},[a("div",{staticClass:"bx--grid bx--grid--condensed"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--form-item"},[a("label",{staticClass:"bx--label",attrs:{for:"text-input-Nombre"}},[e._v(e._s(e.$t("graficos.nombre")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nombreInformeNewUnificado,expression:"nombreInformeNewUnificado"}],staticClass:"bx--text-input",attrs:{id:"text-input-Nombre",type:"text",placeholder:e.$t("graficos.nombre")},domProps:{value:e.nombreInformeNewUnificado},on:{input:function(a){a.target.composing||(e.nombreInformeNewUnificado=a.target.value)}}})])]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{staticClass:"bx--form-item"},[a("cv-checkbox",{attrs:{label:e.$t("graficos.eliminar_informe_origin"),checked:!1,value:"true",mixed:!1},model:{value:e.checkDellInforme,callback:function(a){e.checkDellInforme=a},expression:"checkDellInforme"}})],1)])]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("h4",[e._v(e._s(e.$t("graficos.resumen_unifica")))]),a("cv-data-table",{attrs:{columns:[this.$t("graficos.parcelas"),"Capa",this.$t("graficos.rango_fechas_sel"),{label:this.$t("graficos.creado")}]}},[a("template",{slot:"data"},e._l(e.informesSeleccionados,(function(t){return a("cv-data-table-row",{key:String(t.id),attrs:{value:String(t.id)}},[a("cv-data-table-cell",[e._v(e._s(t.nombre))]),a("cv-data-table-cell",[e._v(e._s(t.capa))]),a("cv-data-table-cell",[e._v(e._s(e.dateFormat(t.created)))]),a("cv-data-table-cell",[e._v(e._s(t.fechaInicio)+" - "+e._s(t.fechaFin))])],1)})),1)],2)],1)])])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.unificar")))])],2),a("cv-modal",{ref:"errores",on:{"primary-click":function(a){return e.$refs.errores.hide()}}},[a("template",{slot:"title"},[e._v("Parcelas reportadas por Sentinel")]),a("template",{slot:"content"},[a("p",{staticStyle:{"white-space":"pre-line"}},[e._v("Sentinel ha reportado algún posible error al obtener los datos de la/s parcela/s: "),a("br"),e._v(" "+e._s(e.getErrores(e.informeErrores))+" Por favor, revisa el informe y solicita de nuevo esas parcelas en caso de que falte algún dato.")])]),a("template",{slot:"primary-button"},[e._v("OK")])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},Si=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("h2",[e._v("Informes Anteriores "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("855c")}})])])])},function(){var e=this,a=e._self._c;return a("p",[a("strong",[a("u",[e._v("IMPORTANTE:")])]),e._v(" Los informes anteriores al 04-08-2022 (incluido) se van a descargar siempre con imágenes, la opción de descargar los informes con/sin imágenes se implementó a partir de esa fecha.")])}],Pi=function(){var e=this,a=e._self._c;return a("div",[a("h4",[e._v(e._s(e.$t("graficos.imagen_sent"))+" "),a("img",{staticStyle:{width:"20px"},attrs:{src:t("24eb")}})]),a("br"),a("div",{staticClass:"bx--row"},e._l(e.keys,(function(t){return a("div",{key:t,staticClass:"bx--col-sm-2 bx--col-md-2 bx--col-lg-2",staticStyle:{"text-align":"center"},attrs:{value:String(t)}},[a("cv-interactive-tooltip",{attrs:{visible:!1}},[a("template",{slot:"trigger"},[a("img",{staticStyle:{width:"100%","max-width":"110px"},attrs:{alt:"",id:"",src:e.urlMedia+"/"+e.datos[t].img}})]),"n/a"!=e.datos[t].nubes.porcent?a("template",{slot:"content"},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"",id:"",src:e.urlMedia+"/cloud_"+e.datos[t].img}})]):e._e()],2),a("div",[a("p",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.datos[t].fecha))]),a("p",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.datos[t].nombre))])]),a("br")],1)})),0)])},ki=[],Ii={props:{datos:Object(),urlMedia:String},data(){return{time:"",srcImage:"",keys:Array()}},methods:{},mounted(){this.keys=Object.keys(this.datos)}},ji=Ii,Li=Object(u["a"])(ji,Pi,ki,!1,null,null,null),Mi=Li.exports,Oi=function(){var e=this,a=e._self._c;return a("div",[a("h4",[e._v(e._s(e.$t("graficos.tabla_colores"))+" "),a("img",{staticStyle:{width:"20px"},attrs:{src:t("a379")}})]),a("br"),a("cv-data-table",{ref:"table"},[a("template",{slot:"headings"},[a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_nombre")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_gen")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_altos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_medios")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_bajos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_altos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_medios")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_bajos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_altos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_medios")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_bajos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verdes_altos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verdes_medios")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.clouds")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagen")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagenClouds")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagenTrueColor")}})],1),a("template",{slot:"data"},e._l(e.keys,(function(t){return a("cv-data-table-row",{key:t,attrs:{value:String(t)}},[a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].nombre)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].fecha)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].rojos.altos.porcent+"%")+" "),e.datos[t].rojos.altos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].rojos.altos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].rojos.altos.porcent>1?e.datos[t].rojos.altos.porcent:2}%; height: 10px; background: #fe0103;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].rojos.medios.porcent+"%")+" "),e.datos[t].rojos.medios.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].rojos.medios.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].rojos.medios.porcent>1?e.datos[t].rojos.medios.porcent:2}%; height: 10px; background: #9b0004;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].rojos.bajos.porcent+"%")+" "),e.datos[t].rojos.bajos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].rojos.bajos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].rojos.bajos.porcent>1?e.datos[t].rojos.bajos.porcent:2}%; height: 10px; background: #680000;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].amarillos.altos.porcent+"%")+" "),e.datos[t].amarillos.altos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].amarillos.altos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].amarillos.altos.porcent>1?e.datos[t].amarillos.altos.porcent:2}%; height: 10px; background: #ffff33;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].amarillos.medios.porcent+"%")+" "),e.datos[t].amarillos.medios.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].amarillos.medios.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].amarillos.medios.porcent>1?e.datos[t].amarillos.medios.porcent:2}%; height: 10px; background: #cccc33;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].amarillos.bajos.porcent+"%")+" "),e.datos[t].amarillos.bajos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].amarillos.bajos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].amarillos.bajos.porcent>1?e.datos[t].amarillos.bajos.porcent:2}%; height: 10px; background: #666600;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azules.altos.porcent+"%")+" "),e.datos[t].azules.altos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azules.altos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].azules.altos.porcent>1?e.datos[t].azules.altos.porcent:2}%; height: 10px; background: #33ffff;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azules.medios.porcent+"%")+" "),e.datos[t].azules.medios.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azules.medios.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].azules.medios.porcent>1?e.datos[t].azules.medios.porcent:2}%; height: 10px; background: #33cccc;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azules.bajos.porcent+"%")+" "),e.datos[t].azules.bajos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azules.bajos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].azules.bajos.porcent>1?e.datos[t].azules.bajos.porcent:2}%; height: 10px; background: #006666;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].verdes.altos.porcent+"%")+" "),e.datos[t].verdes.altos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].verdes.altos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].verdes.altos.porcent>1?e.datos[t].verdes.altos.porcent:2}%; height: 10px; background: #33ff33;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].verdes.medios.porcent+"%")+" "),e.datos[t].verdes.medios.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].verdes.medios.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].verdes.medios.porcent>1?e.datos[t].verdes.medios.porcent:2}%; height: 10px; background: #33cc33;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s("n/a"!=e.datos[t].nubes.porcent?e.datos[t].nubes.porcent+"%":e.datos[t].nubes.porcent)+" "),a("br"),a("span",{style:`width: ${e.datos[t].nubes.porcent>1?e.datos[t].nubes.porcent:2}%; height: 10px; background: #f00;display: inline-block;`})]),a("cv-data-table-cell",[a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:e.urlMedia+"/"+e.datos[t].img}})]),a("cv-data-table-cell",["n/a"!=e.datos[t].nubes.porcent?a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:e.urlMedia+"/cloud_"+e.datos[t].img}}):e._e()]),a("cv-data-table-cell",[a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:e.urlMedia+"/trueColor_"+e.datos[t].img}})])],1)})),1)],2)],1)},Ni=[],Di={props:{datos:Object(),urlMedia:String},data(){return{time:"",srcImage:"",keys:Array(),columns:[this.$t("graficos.fecha_nombre"),this.$t("graficos.rojos_altos"),this.$t("graficos.rojos_medios"),this.$t("graficos.rojos_bajos"),this.$t("graficos.amarillos_altos"),this.$t("graficos.amarillos_medios"),this.$t("graficos.amarillos_bajos"),this.$t("graficos.azules_altos"),this.$t("graficos.azules_medios"),this.$t("graficos.azules_bajos"),this.$t("graficos.verdes_altos"),this.$t("graficos.verdes_medios"),"Nubes",this.$t("graficos.imagen")],verFechaGen:!1}},methods:{},mounted(){this.keys=Object.keys(this.datos),console.info(this.keys)},verFechaGenfun(){this.verFechaGen=!0}},zi=Di,Ri=Object(u["a"])(zi,Oi,Ni,!1,null,null,null),Gi=Ri.exports,Fi=function(){var e=this,a=e._self._c;return a("div",[a("h4",[e._v(e._s(e.$t("graficos.tabla_colores"))+" "),a("img",{staticStyle:{width:"20px"},attrs:{src:t("a379")}})]),a("br"),a("cv-data-table",{ref:"table",on:{sort:e.onSort}},[a("template",{slot:"headings"},[a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_nombre")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_gen")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojo_naran")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillo")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verde")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_claro")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_medio")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_oscuro")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.clouds")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagen")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagenClouds")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagenTrueColor")}})],1),a("template",{slot:"data"},e._l(e.keys,(function(t){return a("cv-data-table-row",{key:t,attrs:{value:String(t)}},[a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].nombre)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].fecha)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].naranja.porcent+"%")+" "),e.datos[t].naranja.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].naranja.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].naranja.porcent>1?a("span",{style:`width: ${e.datos[t].naranja.porcent}%; height: 10px; background: #ff8000;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #ff8000;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].amarillo.porcent+"%")+" "),e.datos[t].amarillo.area_porcen?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].amarillo.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].amarillo.porcent>1?a("span",{style:`width: ${e.datos[t].amarillo.porcent}%; height: 10px; background: #ffdf00;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #ffdf00;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].verdes.porcent+"%")+" "),e.datos[t].verdes.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].verdes.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].verdes.porcent>1?a("span",{style:`width: ${e.datos[t].verdes.porcent}%; height: 10px; background: #66ff98;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #66ff98;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azul_claro.porcent+"%")+" "),e.datos[t].azul_claro.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azul_claro.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].azul_claro.porcent>1?a("span",{style:`width: ${e.datos[t].azul_claro.porcent}%; height: 10px; background: #02fefc;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #02fefc;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azul_medio.porcent+"%")+" "),e.datos[t].azul_medio.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azul_medio.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].azul_medio.porcent>1?a("span",{style:`width: ${e.datos[t].azul_medio.porcent}%; height: 10px; background: #0087ff;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #0087ff;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azul_oscuro.porcent+"%")+" "),e.datos[t].azul_oscuro.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azul_oscuro.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].azul_oscuro.porcent>1?a("span",{style:`width: ${e.datos[t].azul_oscuro.porcent}%; height: 10px; background: #2000ff;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #2000ff;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s("n/a"!=e.datos[t].nubes.porcent?e.datos[t].nubes.porcent+"%":e.datos[t].nubes.porcent)+" "),a("br"),a("span",{style:`width: ${e.datos[t].nubes.porcent>1?e.datos[t].nubes.porcent:2}%; height: 10px; background: #f00;display: inline-block;`})]),a("cv-data-table-cell",[a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:e.urlMedia+"/"+e.datos[t].img}})]),a("cv-data-table-cell",["n/a"!=e.datos[t].nubes.porcent?a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:e.urlMedia+"/cloud_"+e.datos[t].img}}):e._e()]),a("cv-data-table-cell",[a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:e.urlMedia+"/trueColor_"+e.datos[t].img}})])],1)})),1)],2)],1)},Bi=[],Ui={props:{datos:Object(),urlMedia:String},data(){return{time:"",srcImage:"",keys:Array(),columns:[this.$t("graficos.fecha_nombre"),this.$t("graficos.rojo_naran"),this.$t("graficos.amarillo"),this.$t("graficos.verde"),this.$t("graficos.azul_claro"),this.$t("graficos.azul_medio"),this.$t("graficos.azul_oscuro"),"Nubes",this.$t("graficos.imagen")],verFechaGen:!1}},methods:{compare(e,a){return e.last_nom<a.last_nom?-1:e.last_nom>a.last_nom?1:0}},mounted(){this.keys=Object.keys(this.datos)}},Vi=Ui,Ti=Object(u["a"])(Vi,Fi,Bi,!1,null,null,null),Hi=Ti.exports,qi=t("1fca"),Yi={extends:qi["b"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object()},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataAmarillos:Array(),dataAzules:Array(),dataRojos:Array(),dataVerdes:Array(),dataAmarillosAltos:Array(),dataAmarillosMedios:Array(),dataAmarillosBajos:Array(),dataAzulesAltos:Array(),dataAzulesMedios:Array(),dataAzulesBajos:Array(),dataRojosAltos:Array(),dataRojosMedios:Array(),dataRojosBajos:Array(),dataVerdesAltos:Array(),dataVerdesMedios:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_ndvi")}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){const e=Object.keys(this.datos);e.forEach(e=>{this.datos[e],this.dataAmarillosAltos.push(this.datos[e].amarillos.altos.porcent),this.dataAmarillosMedios.push(this.datos[e].amarillos.medios.porcent),this.dataAmarillosBajos.push(this.datos[e].amarillos.bajos.porcent),this.dataAzulesAltos.push(this.datos[e].azules.altos.porcent),this.dataAzulesMedios.push(this.datos[e].azules.medios.porcent),this.dataAzulesBajos.push(this.datos[e].azules.bajos.porcent),this.dataRojosAltos.push(this.datos[e].rojos.altos.porcent),this.dataRojosMedios.push(this.datos[e].rojos.medios.porcent),this.dataRojosBajos.push(this.datos[e].rojos.bajos.porcent),this.dataVerdesAltos.push(this.datos[e].verdes.altos.porcent),this.dataVerdesMedios.push(this.datos[e].verdes.medios.porcent),this.fechas.push(`${this.datos[e].nombre} - ${this.datos[e].fecha}`)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojos_altos"),backgroundColor:"#fe0103",borderColor:"#fe0103",fill:!1,data:this.dataRojosAltos},{label:this.$t("graficos.rojos_medios"),backgroundColor:"#9b0004",borderColor:"#9b0004",fill:!1,data:this.dataRojosMedios},{label:this.$t("graficos.rojos_bajos"),backgroundColor:"#680000",borderColor:"#680000",fill:!1,data:this.dataRojosBajos},{label:this.$t("graficos.amarillos_altos"),backgroundColor:"#ffff33",borderColor:"#ffff33",fill:!1,data:this.dataAmarillosAltos},{label:this.$t("graficos.amarillos_medios"),backgroundColor:"#cccc33",borderColor:"#cccc33",fill:!1,data:this.dataAmarillosMedios},{label:this.$t("graficos.amarillos_bajos"),backgroundColor:"#666600",borderColor:"#666600",fill:!1,data:this.dataAmarillosBajos},{label:this.$t("graficos.azules_altos"),backgroundColor:"#33ffff",borderColor:"#33ffff",fill:!1,data:this.dataAzulesAltos},{label:this.$t("graficos.azules_medios"),backgroundColor:"#33cccc",borderColor:"#33cccc",fill:!1,data:this.dataAzulesMedios},{label:this.$t("graficos.azules_bajos"),backgroundColor:"#006666",borderColor:"#006666",fill:!1,data:this.dataAzulesBajos},{label:this.$t("graficos.verdes_altos"),backgroundColor:"#33cc33",borderColor:"#33cc33",fill:!1,data:this.dataVerdesMedios},{label:this.$t("graficos.verdes_medios"),backgroundColor:"#33ff33",borderColor:"#33ff33",fill:!1,data:this.dataVerdesAltos}]},this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},Zi=Yi,Qi=Object(u["a"])(Zi,Ir,jr,!1,null,null,null),Ji=Qi.exports,Xi={extends:qi["b"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object()},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataNaraja:Array(),dataAmarillos:Array(),dataVerdes:Array(),dataAzulClaro:Array(),dataAzulMedio:Array(),dataAzulOscuro:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_mois")}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){const e=Object.keys(this.datos);e.forEach(e=>{this.datos[e],this.dataNaraja.push(this.datos[e].naranja.porcent),this.dataAmarillos.push(this.datos[e].amarillo.porcent),this.dataVerdes.push(this.datos[e].verdes.porcent),this.dataAzulClaro.push(this.datos[e].azul_claro.porcent),this.dataAzulMedio.push(this.datos[e].azul_medio.porcent),this.dataAzulOscuro.push(this.datos[e].azul_oscuro.porcent),this.fechas.push(`${this.datos[e].nombre} - ${this.datos[e].fecha}`)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojo_naran"),backgroundColor:"#ff8000",borderColor:"#ff8000",fill:!1,data:this.dataNaraja},{label:this.$t("graficos.amarillo"),backgroundColor:"#ffdf00",borderColor:"#ffdf00",fill:!1,data:this.dataAmarillos},{label:this.$t("graficos.verde"),backgroundColor:"#66ff98",borderColor:"#66ff98",fill:!1,data:this.dataVerdes},{label:this.$t("graficos.azul_claro"),backgroundColor:"#02fefc",borderColor:"#02fefc",fill:!1,data:this.dataAzulClaro},{label:this.$t("graficos.azul_medio"),backgroundColor:"#0087ff",borderColor:"#0087ff",fill:!1,data:this.dataAzulMedio},{label:this.$t("graficos.azul_oscuro"),backgroundColor:"#2000ff",borderColor:"#2000ff",fill:!1,data:this.dataAzulOscuro}]},this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},Wi=Xi,Ki=Object(u["a"])(Wi,Lr,Mr,!1,null,null,null),eo=Ki.exports,ao={extends:qi["a"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object()},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataAmarillos:Array(),dataAzules:Array(),dataRojos:Array(),dataVerdes:Array(),dataAmarillosAltos:Array(),dataAmarillosMedios:Array(),dataAmarillosBajos:Array(),dataAzulesAltos:Array(),dataAzulesMedios:Array(),dataAzulesBajos:Array(),dataRojosAltos:Array(),dataRojosMedios:Array(),dataRojosBajos:Array(),dataVerdesAltos:Array(),dataVerdesMedios:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_ndvi")}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){const e=Object.keys(this.datos);e.forEach(e=>{this.datos[e],this.dataAmarillosAltos.push(this.datos[e].amarillos.altos.porcent),this.dataAmarillosMedios.push(this.datos[e].amarillos.medios.porcent),this.dataAmarillosBajos.push(this.datos[e].amarillos.bajos.porcent),this.dataAzulesAltos.push(this.datos[e].azules.altos.porcent),this.dataAzulesMedios.push(this.datos[e].azules.medios.porcent),this.dataAzulesBajos.push(this.datos[e].azules.bajos.porcent),this.dataRojosAltos.push(this.datos[e].rojos.altos.porcent),this.dataRojosMedios.push(this.datos[e].rojos.medios.porcent),this.dataRojosBajos.push(this.datos[e].rojos.bajos.porcent),this.dataVerdesAltos.push(this.datos[e].verdes.altos.porcent),this.dataVerdesMedios.push(this.datos[e].verdes.medios.porcent),this.fechas.push(`${this.datos[e].nombre} - ${this.datos[e].fecha}`)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojos_altos"),backgroundColor:"#fe0103",borderColor:"#fe0103",fill:!1,data:this.dataRojosAltos},{label:this.$t("graficos.rojos_medios"),backgroundColor:"#9b0004",borderColor:"#9b0004",fill:!1,data:this.dataRojosMedios},{label:this.$t("graficos.rojos_bajos"),backgroundColor:"#680000",borderColor:"#680000",fill:!1,data:this.dataRojosBajos},{label:this.$t("graficos.amarillos_altos"),backgroundColor:"#ffff33",borderColor:"#ffff33",fill:!1,data:this.dataAmarillosAltos},{label:this.$t("graficos.amarillos_medios"),backgroundColor:"#cccc33",borderColor:"#cccc33",fill:!1,data:this.dataAmarillosMedios},{label:this.$t("graficos.amarillos_bajos"),backgroundColor:"#666600",borderColor:"#666600",fill:!1,data:this.dataAmarillosBajos},{label:this.$t("graficos.azules_altos"),backgroundColor:"#33ffff",borderColor:"#33ffff",fill:!1,data:this.dataAzulesAltos},{label:this.$t("graficos.azules_medios"),backgroundColor:"#33cccc",borderColor:"#33cccc",fill:!1,data:this.dataAzulesMedios},{label:this.$t("graficos.azules_bajos"),backgroundColor:"#006666",borderColor:"#006666",fill:!1,data:this.dataAzulesBajos},{label:this.$t("graficos.verdes_altos"),backgroundColor:"#33cc33",borderColor:"#33cc33",fill:!1,data:this.dataVerdesMedios},{label:this.$t("graficos.verdes_medios"),backgroundColor:"#33ff33",borderColor:"#33ff33",fill:!1,data:this.dataVerdesAltos}]},this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},to=ao,so=Object(u["a"])(to,Or,Nr,!1,null,null,null),ro=so.exports,io={extends:qi["a"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object()},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataNaraja:Array(),dataAmarillos:Array(),dataVerdes:Array(),dataAzulClaro:Array(),dataAzulMedio:Array(),dataAzulOscuro:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_mois")}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){const e=Object.keys(this.datos);e.forEach(e=>{this.datos[e],this.dataNaraja.push(this.datos[e].naranja.porcent),this.dataAmarillos.push(this.datos[e].amarillo.porcent),this.dataVerdes.push(this.datos[e].verdes.porcent),this.dataAzulClaro.push(this.datos[e].azul_claro.porcent),this.dataAzulMedio.push(this.datos[e].azul_medio.porcent),this.dataAzulOscuro.push(this.datos[e].azul_oscuro.porcent),this.fechas.push(`${this.datos[e].nombre} - ${this.datos[e].fecha}`)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojo_naran"),backgroundColor:"#ff8000",borderColor:"#ff8000",fill:!1,data:this.dataNaraja},{label:this.$t("graficos.amarillo"),backgroundColor:"#ffdf00",borderColor:"#ffdf00",fill:!1,data:this.dataAmarillos},{label:this.$t("graficos.verde"),backgroundColor:"#66ff98",borderColor:"#66ff98",fill:!1,data:this.dataVerdes},{label:this.$t("graficos.azul_claro"),backgroundColor:"#02fefc",borderColor:"#02fefc",fill:!1,data:this.dataAzulClaro},{label:this.$t("graficos.azul_medio"),backgroundColor:"#0087ff",borderColor:"#0087ff",fill:!1,data:this.dataAzulMedio},{label:this.$t("graficos.azul_oscuro"),backgroundColor:"#2000ff",borderColor:"#2000ff",fill:!1,data:this.dataAzulOscuro}]},this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},oo=io,lo=Object(u["a"])(oo,Dr,zr,!1,null,null,null),no=lo.exports,co={name:"ParcelsToSentinelComponent",components:{SentImage:Mi,TableColors:Gi,TableColorsMois:Hi,ChartLine:Ji,ChartBar:ro,ChartBarMois:no,ChartLineMois:eo,AlertaGeneral:Pe},data(){return{selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:`${this.getNow()}/${this.getNow()}`,valueDates:[],valueRange:[],timeValuesArr:[this.getNow(),this.getNow()],nombreInforme:"Gráfico - "+this.getNow(),historicoAnterior:Array(),historicoAnteriorCoop:Array(),historicoSell:{},verGraficNDVI:!1,verGraficMois:!1,graficoData:{},verImagenSent:!1,keyTableColors:0,timestamp:0,mostrar:!0,tipoAlerta:"error",mensajeAlerta:"",nombreInformeNew:"",showUnificarInformes:!1,nombreInformeNewUnificado:"Gráfico Unificado - "+this.getNow(),checkDellInforme:!1,informesSeleccionados:[],uniqueEmpresasUnificarId:"",uniqueCapaUnificar:"",usersList:[],usersListProfile:[],informeErrores:{},columnas:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"capa",label:this.$t("graficos.capa"),sortable:!0},{label:this.$t("graficos.creado"),sortable:!0},{label:this.$t("graficos.estado"),sortable:!1},{label:this.$t("graficos.rango_fechas_sel"),sortable:!1},{label:this.$t("graficos.analisis_nubes"),sortable:!0},{label:this.$t("graficos.empresa"),sortable:!1}]}},methods:{keepPositionScroll(){this.scrollPosition=window.scrollY},putPositionScroll(){setTimeout(()=>{window.scrollTo(0,this.scrollPosition)},0)},getSortedCooperativa(e){return{...e,enterprises:e.enterprises.slice().sort((e,a)=>e.name.localeCompare(a.name))}},getUserName(e){if(this.usersList&&this.usersListProfile){const a=this.usersList.filter(a=>a.id==e);if(a){const e=this.usersListProfile.filter(e=>e.id==a[0].user);return`${a[0].first_name} - ${e[0].email}`}}},getEnterpriseName(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},getEstado(e){if(e.esUnificado)return"Informe unificado";if(e.error&&3==e.estado)return"Terminado con posibles errores";switch(e.estado){case"1":return"En Proceso (Obteniendo imagenes)";case"2":return"En proceso (Procesando excel)";case"3":return"Terminado";default:return"No finalizado (errores en Sentinel)"}},modalerrores(e){this.informeErrores=e,this.$refs.errores.dataVisible=!0},getErrores(e){let a="";if(null==e.parcelas_fallidas||0==e.parcelas_fallidas.length)return"No hay datos especificos de que parcelas pueden presentar errores \n";{const t=e.parcelas_fallidas.trim().split(" ");for(let e in t){const s=this.allParcelsOfEnterprises.filter(a=>a.id==t[e]);a+="ID= "+s[0].id+" Nombre= "+s[0].properties.name+"\n"}return console.log(a),a}},showModificarInformes(){if(this.comprobacionrows()){const e=this.historicoAnterior.filter(e=>this.rowSelects.includes(e.id)),a=[];e.map(e=>{a.push(e.enterprise_id)});const t=[...new Set(a)];if(t.length>1)return this.mensajeAlerta="Los informes seleccionados pertenecen a distintas empresas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;const s=[];e.map(e=>{s.push(e.capa)});const r=[...new Set(s)];if(r.length>1)return this.mensajeAlerta="Los informes seleccionados son de distintas capas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;this.uniqueEmpresasUnificarId=t[0],this.uniqueCapaUnificar=r[0],this.informesSeleccionados=e,this.$refs.unificarInformeForm.dataVisible=!0}else this.mensajeAlerta='"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente"',this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()},unificaInformes(){va(this.nombreInformeNewUnificado,this.uniqueEmpresasUnificarId,this.informesSeleccionados,this.checkDellInforme,this.uniqueCapaUnificar).then(()=>{this.mensajeAlerta="Informe Generado correctamente",this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta(),this.seleccionaEmpresa(this.selectValueEmpresa)}),this.$refs.unificarInformeForm.hide()},showEditarInforme(){if(this.comprobacionrows()){const e=this.historicoAnterior.filter(e=>this.rowSelects.includes(e.id));this.nombreInformeNew=e[0].nombre,this.$refs.editar_informe.dataVisible=!0}else this.mensajeAlerta='"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente"',this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()},changeNameInforme(){fa(this.rowSelects[0],this.nombreInformeNew).then(()=>{this.mensajeAlerta="Informe Guardado correctamente",this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta(),this.seleccionaEmpresa(this.selectValueEmpresa)}),this.$refs.editar_informe.hide()},eliminarInformesConfirm(){ua(this.rowSelects).then(e=>{console.info(e.data),this.seleccionaEmpresa(this.selectValueEmpresa),this.mensajeAlerta=this.$t("graficos.del_informe_ok"),this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta(),this.$refs.alerta_eliminar.hide()}),console.info("Delete Informe/s",this.rowSelects)},changeRowsUnique(e){console.info(e)},descargaExcel(){if(1===this.rowSelects.length&&this.comprobacionrows()){console.info("Correcta descarga de excel");const e=this.historicoAnterior.filter(e=>this.rowSelects.includes(e.id));window.URL=window.URL||window.webkitURL;let a,t=new XMLHttpRequest,s=document.createElement("a");t.open("GET",`${this.$apiURLMedia}/${e[0].xlsxFile}`,!0),t.responseType="blob",t.onload=function(){a=new Blob([t.response],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s.href=window.URL.createObjectURL(a),s.download=e[0].nombre+".xlsx",s.click()},t.send()}else this.mensajeAlerta='"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente"',this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta();console.info("Descarga Excel",this.rowSelects)},async descargaExcelConImagenes(){if(this.comprobacionrows()){let e=await this.nombreinforme(this.rowSelects[0]);console.log(e),await this.descargarinforme(e)}else this.mensajeAlerta='"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente"',this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()},nombreinforme(e){return ka(e)},descargarinforme(e){window.URL=window.URL||window.webkitURL;let a,t=new XMLHttpRequest,s=document.createElement("a");t.open("GET",`${this.$apiURLMedia}/${e["data"].data}`,!0),t.responseType="blob",t.onload=function(){a=new Blob([t.response],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s.href=window.URL.createObjectURL(a),s.download=e["data"].name+".xlsx",s.click()},t.send()},delInforme(){this.comprobacionrows()?this.$refs.alerta_eliminar.dataVisible=!0:(this.mensajeAlerta='"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente"',this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta())},getNowCache(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),s=a+" "+t;this.timestamp=s},verDatosFecha(){if(this.comprobacionrows()){const e=this.historicoAnterior.filter(e=>this.rowSelects.includes(e.id));this.historicoSell=e[0],ga("order_"+e[0].jsonFile).then(a=>{this.graficoData=a.data,this.verImagenSent=!0,"NDVI"===e[0].capa?(this.verGraficNDVI=!0,this.verGraficMois=!1):(this.verGraficNDVI=!1,this.verGraficMois=!0),this.getNowCache()})}else this.mensajeAlerta='"Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente"',this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()},verDatosParcelas(){if(this.comprobacionrows()){const e=this.historicoAnterior.filter(e=>this.rowSelects.includes(e.id));this.historicoSell=e[0],ga(""+e[0].jsonFile).then(a=>{this.graficoData=a.data,this.verImagenSent=!0,"NDVI"===e[0].capa?(this.verGraficNDVI=!0,this.verGraficMois=!1):(this.verGraficNDVI=!1,this.verGraficMois=!0),this.getNowCache()})}else this.mensajeAlerta="Las acciones a realizar sobre el informe se habilitarán una vez se haya generado completamente",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()},toGenerar(e,a){ha(this.nombreInforme,this.SentinelLayer,this.timeValuesArr,this.rowSelects,a,e)},dateFormat(e){const a=new Date(e),t=a.toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-");return t},generarInforme(){const e=this.allParcelsOfEnterprisesFilter.filter(e=>this.rowSelects.includes(String(e.id))),a=[];e.map(e=>{a.push(e.properties.enterprise_id)});const t=[...new Set(a)];if(t.length>1){const e=[];if(this.arrCooperativas.map(a=>{a.enterprises.map(s=>{t.includes(s.id)&&e.push(a.id)})}),e.length==t.length){console.info("Todas las empresas Pertenecen a cooperativas");const a=[...new Set(e)];a.length>1?(console.info("MultiCoop"),console.info("Cooperativas",a),console.info("No se puede generar el informe, parcelas de distintas Cooperativas")):(console.info("UniCoop"),console.info("Cooperativa",a),this.toGenerar(a[0],!0))}else console.info("No se puede generar el informe, Hay una empresa que no pertenece a ninguna cooperativa")}else console.info("Seleccion Uniempresa"),this.toGenerar(t[0],!1)},actionChangeDateRange(e){console.info(e),this.timeValuesArr=[e.startDate,e.endDate],console.info(this.timeValuesArr),this.time=`${e.startDate}/${e.endDate}`},chageCapas(e){this.SentinelLayer=e},seleccionaEmpresa(e,a="created",t="descending"){const s=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{s.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=s,this.allParcelsOfEnterprisesFilter=s}),ma(e,a,t).then(e=>{console.info(e.data),this.historicoAnterior=e.data});else{const r=e.split("_");"coop"==r[0]?(La(r[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{s.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=s,this.allParcelsOfEnterprisesFilter=s}),ma(r[1],a,t).then(e=>{console.info(e.data),this.historicoAnterior=e.data})):(aa(e).then(async e=>{e.data.parcels.features.map(e=>{s.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=s,this.allParcelsOfEnterprisesFilter=s}),ma(e,a,t).then(e=>{console.info(e.data),this.historicoAnterior=e.data}))}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),s=a+" "+t;return console.info(s),a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){console.info(e);const a=e.index;let t="";const s=e.order;switch(a){case"0":t="nombre";break;case"1":t="capa";break;case"2":t="created";break;case"4":t="includeClouds";break;default:t="created"}this.seleccionaEmpresa(this.selectValueEmpresa,t,s).then(e=>{this.historicoAnterior=e.data}),console.info(t)},comprobacionrows(){let e;const a=this.historicoAnterior.filter(e=>this.rowSelects.includes(e.id));for(let t in a){if(3!=a[t].estado&&1!=a[t].esUnificado)return!1;e=!0}return console.log(e),e}},mounted:function(){this.getNow()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser&&(this.columnas.splice(6,0,{label:this.$t("graficos.solicitante_informe"),sortable:!1}),Aa().then(e=>{this.usersList=e.data}),ya().then(e=>{this.usersListProfile=e.data})),this.is_superuser||this.is_systemadmin?(console.info("entra"),ta().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data.slice().sort((e,a)=>e.name.localeCompare(a.name));const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),ma().then(e=>{console.info(e.data),this.historicoAnterior=e.data})):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):(aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),ma(a.enterprise_id).then(e=>{console.info(e.data),this.historicoAnterior=e.data})),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},po=co,ho=Object(u["a"])(po,wi,Si,!1,null,null,null),mo=ho.exports,uo={name:"GenGraficos",components:{Board:Qe,GenGraficosAnterioresComponent:mo},mounted:function(){}},fo=uo,vo=Object(u["a"])(fo,Ei,xi,!1,null,null,null),bo=vo.exports,_o=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"GraficosView"},[a("GraficosController")],1),a("AlertaGeneral",{ref:"alertaGeneral",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},go=[],Ao=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("cv-tabs",{attrs:{container:!1,"aria-label":"navigation tab label"}},[a("cv-tab",{attrs:{label:e.$t("graficos.grafico_ant")}},[a("br"),a("br"),e.flagIndicatingDataHasBeenLoadedInVariables?a("div",{staticClass:"bx--grid"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("h3",[e._v(e._s(e.$t("graficos.grafico_ant")))])])]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[e.flagIndicatingDataHasBeenLoadedInVariables&&e.is_superuser||e.is_systemadmin||e.is_coop_user?a("GraficosAnterioresController",{attrs:{"arr-enterprises":e.arrEmpresas,"arr-cooperativas":e.arrCooperativas,is_superuser:e.is_superuser,is_systemadmin:e.is_systemadmin,is_staff:e.is_staff,is_enterpriseadmin:e.is_enterpriseadmin,is_coop_user:e.is_coop_user,"all-parcels-of-enterprises":e.allParcelsOfEnterprises,"all-parcels-of-enterprises-filter":e.allParcelsOfEnterprisesFilter},on:{setEnterprise:function(a){e.arrEmpresas=a},setAllParcelsOfEnterprises:function(a){e.allParcelsOfEnterprises=a,e.allParcelsOfEnterprisesFilter=a},setEmpresaSeleccionadaObj:function(a){e.empresaSeleccionadaObj=a},setGetGraficosAnteriores:function(a){return e.getInformesAnteriores(a)},setCooperativaSeleccionadaObj:function(a){e.cooperativaSeleccionadaObj=a},setGetGraficosAnterioresCoop:function(a){return e.getInformesAnterioresCoop(a)}}}):e._e()],1)]),a("br"),0==Object.keys(e.cooperativaSeleccionadaObj).length?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{attrs:{id:"sentinelLayersList"}},[a("h4",[e._v(e._s(e.$t("graficos.inform_ant_de"))+" "+e._s(e.empresaSeleccionadaObj.name))]),a("cv-data-table",{key:e.componentTableHist,ref:"tableHist",attrs:{pagination:{numberOfItems:e.historicoAnterior.length,pageSizes:[10,15,20,25,e.historicoAnterior.length]},columns:[this.$t("graficos.parcela"),this.$t("graficos.rango_fechas_sel"),{label:this.$t("graficos.creado"),sortable:!0},{label:this.$t("graficos.tipo"),sortable:!0},{label:this.$t("graficos.capa"),sortable:!0},{key:"",label:""}]},on:{sort:e.onSort,"row-select-changes":e.agruparCompatible,pagination:e.actionOnPagination}},[a("template",{slot:"batch-actions"},[e.showUnificar?a("cv-button",{on:{click:e.showModificarInformes}},[e._v(" "+e._s(e.$t("graficos.unificar_informes"))+" "),a("AppConnectivity32",{staticClass:"bx--btn__icon"})],1):e._e(),e.showEditar?a("cv-button",{on:{click:e.showEditarInforme}},[e._v(" "+e._s(e.$t("graficos.editar"))+" "),a("Edit32",{staticClass:"bx--btn__icon"})],1):e._e(),a("cv-button",{on:{click:e.verDatos}},[e._v(" "+e._s(e.$t("graficos.ver_datos"))+" "),a("Charbar20",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.descargaExcel}},[e._v(" "+e._s(e.$t("graficos.desc_excel"))+" "),a("Download16",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.delInforme}},[e._v(" "+e._s(e.$t("graficos.del_informe"))+" "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1)],1),a("template",{slot:"data"},e._l(e.historicoAnterior.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:String(t.id),attrs:{value:String(t.id)},on:{click:e.verDatos}},[1!=t.tipo||t.alias?1==t.tipo&&t.alias?a("cv-data-table-cell",[e._v(" "+e._s(t.alias)+" ")]):a("cv-data-table-cell",[e._v(" "+e._s(t.parcela)+" ")]):a("cv-data-table-cell",[e._v(" "+e._s(e.parcelaName(t.parcela))+" - "+e._s(t.alias)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(t.finifin)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.dateFormat(t.created))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.$t("graficos.grafico_tipo"))+" "+e._s(t.tipo)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(t.capa)+" ")])],1)})),1)],2)],1)])]):e._e(),0!=Object.keys(e.cooperativaSeleccionadaObj).length?a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("h4",[e._v("Gáficos Anteriores de la Cooperativa "+e._s(e.cooperativaSeleccionadaObj.name))]),a("cv-data-table",{key:e.componentTableHist2,ref:"tableHist2",attrs:{pagination:{numberOfItems:e.historicoAnteriorCoop.length,pageSizes:[10,15,20,25,e.historicoAnteriorCoop.length]},columns:[this.$t("graficos.parcela"),this.$t("graficos.rango_fechas_sel"),{label:this.$t("graficos.creado"),sortable:!0},{label:this.$t("graficos.tipo"),sortable:!0},{label:this.$t("graficos.capa"),sortable:!0},{key:"",label:""}]},on:{sort:e.onSort,"row-select-changes":e.agruparCompatible,pagination:e.actionOnPagination2}},[a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.verDatos2}},[e._v(" "+e._s(e.$t("graficos.ver_datos"))+" "),a("Charbar20",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.descargaExcel2}},[e._v(" "+e._s(e.$t("graficos.desc_excel"))+" "),a("Download16",{staticClass:"bx--btn__icon"})],1),a("cv-button",{on:{click:e.delInforme2}},[e._v(" "+e._s(e.$t("graficos.del_informe"))+" "),a("TrashCan32",{staticClass:"bx--btn__icon"})],1)],1),a("template",{slot:"data"},e._l(e.historicoAnteriorCoop.slice(e.start2,e.start2+e.length2),(function(t){return a("cv-data-table-row",{key:String(t.id),attrs:{value:String(t.id)},on:{click:e.verDatos}},[1!=t.tipo||t.alias?1==t.tipo&&t.alias?a("cv-data-table-cell",[e._v(" "+e._s(t.alias)+" ")]):a("cv-data-table-cell",[e._v(" "+e._s(t.parcela)+" ")]):a("cv-data-table-cell",[e._v(" "+e._s(e.parcelaName(t.parcela))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(t.finifin)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.dateFormat(t.created))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.$t("graficos.grafico_tipo"))+" "+e._s(t.tipo)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(t.capa)+" ")]),a("cv-data-table-cell",[a("cv-overflow-menu",{staticStyle:{margin:"0 auto"},attrs:{"flip-menu":""}},[a("cv-overflow-menu-item",{on:{click:function(a){e.verDatosRow2(String(t.id))}}},[e._v(e._s(e.$t("graficos.ver_datos")))]),a("cv-overflow-menu-item",{on:{click:function(a){e.descargaExcelRow2(String(t.id))}}},[e._v(e._s(e.$t("graficos.desc_excel")))]),a("cv-overflow-menu-item",{on:{click:function(a){e.delInformeRow2(String(t.id))}}},[e._v(e._s(e.$t("graficos.del_informe")))])],1)],1)],1)})),1)],2)],1)]):e._e(),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-12 bx--col-lg-12"},[a("br"),e.verGraficNDVI?a("ChartLine",{key:e.keyComponent,attrs:{datos:e.dataSent}}):e._e(),e.verGraficMois?a("ChartLineMois",{key:e.keyComponent,attrs:{datos:e.dataSent}}):e._e(),a("br"),e._e(),a("br"),e.verGraficNDVI?a("ChartBar",{key:e.keyComponent,attrs:{datos:e.dataSent}}):e._e(),e.verGraficMois?a("ChartBarMois",{key:e.keyComponent,attrs:{datos:e.dataSent}}):e._e(),a("br"),a("br"),e.verGraficNDVI?a("TableColors",{key:e.keyComponent,attrs:{urlMedia:e.$apiURLMedia,datos:e.dataSent}}):e._e(),e.verGraficMois?a("TableColorsMois",{key:e.keyComponent,attrs:{urlMedia:e.$apiURLMedia,datos:e.dataSent}}):e._e(),a("br"),e.verImagenSent?a("SentImage",{key:e.keyComponent,attrs:{urlMedia:e.$apiURLMedia,datos:e.dataSent}}):e._e(),a("br")],1)]),a("cv-modal",{ref:"modal_procesando",on:{"modal-shown":e.actionShown,"modal-hidden":e.actionHidden}},[a("template",{slot:"label"},[e._v(e._s(this.$t("graficos.gen_iformes")))]),a("template",{slot:"title"},[e._v(e._s(this.$t("graficos.grafico_tipo_uno")))]),a("template",{slot:"content"},[a("p",[e._v(" "+e._s(this.$t("graficos.grafico_procensandose"))+" ")])]),a("template",{slot:"primary-button"},[e._v(e._s(this.$t("graficos.gen_informes_acceptar")))])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta},on:{"update:tituloAlert":function(a){e.mensajeAlerta=a},"update:titulo-alert":function(a){e.mensajeAlerta=a},"update:tipoAlert":function(a){e.tipoAlerta=a},"update:tipo-alert":function(a){e.tipoAlerta=a}}}),a("UnificarInformes",{ref:"unificarInformes",attrs:{"informes-sell":e.informesSell,"informes-seleccionados":e.informesSell,historico:e.historicoAnterior,tipo:e.tipoInforUni,capa:e.capaInforUni,enterpriseID:e.empresaSeleccionadaObj.id,"all-parcels-of-enterprises":e.allParcelsOfEnterprises},on:{"update:informesSell":function(a){e.informesSell=a},"update:informes-sell":function(a){e.informesSell=a},"update:informesSeleccionados":function(a){e.informesSell=a},"update:informes-seleccionados":function(a){e.informesSell=a},"update:historico":function(a){e.historicoAnterior=a},"update:enterpriseID":function(a){return e.$set(e.empresaSeleccionadaObj,"id",a)},"update:enterprise-i-d":function(a){return e.$set(e.empresaSeleccionadaObj,"id",a)},mensajeAlerta:function(a){e.mensajeAlerta=a},tipoAlerta:function(a){e.tipoAlerta=a},verAlerta:function(a){return e.$refs.alertaGenerall.verAlerta()},getInformesAnt:function(a){return e.getInformesAnteriores(e.empresaSeleccionadaObj.id)}}}),a("EditarInforme",{ref:"editarInforme",attrs:{informesSeleccionados:e.informeSell,historico:e.historicoAnterior,"all-parcels-of-enterprises":e.allParcelsOfEnterprises},on:{"update:informesSeleccionados":function(a){e.informeSell=a},"update:informes-seleccionados":function(a){e.informeSell=a},"update:historico":function(a){e.historicoAnterior=a},"update:allParcelsOfEnterprises":function(a){e.allParcelsOfEnterprises=a},"update:all-parcels-of-enterprises":function(a){e.allParcelsOfEnterprises=a},mensajeAlerta:function(a){e.mensajeAlerta=a},tipoAlerta:function(a){e.tipoAlerta=a},verAlerta:function(a){return e.$refs.alertaGenerall.verAlerta()},getInformesAnt:function(a){return e.getInformesAnteriores(e.empresaSeleccionadaObj.id)}}}),a("cv-modal",{ref:"alerta_eliminar",attrs:{kind:"danger"},on:{"primary-click":e.eliminarUsuario}},[a("template",{slot:"label"},[e._v(e._s(e.$t("graficos.seguro")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("graficos.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("graficos.seguro_parcel_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.eliminar")))])],2),a("cv-modal",{ref:"alerta_eliminar2",attrs:{kind:"danger"},on:{"primary-click":e.eliminarUsuario2}},[a("template",{slot:"label"},[e._v(e._s(e.$t("graficos.seguro")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("graficos.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("graficos.seguro_parcel_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.eliminar")))])],2),a("cv-modal",{ref:"alerta_eliminar3",attrs:{kind:"danger"},on:{"primary-click":e.eliminarUsuario3}},[a("template",{slot:"label"},[e._v(e._s(e.$t("graficos.seguro")))]),a("template",{slot:"title"},[e._v(e._s(e.$t("graficos.eliminar")))]),a("template",{slot:"content"},[a("p",[e._v(e._s(e.$t("graficos.seguro_parcel_del")))])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.eliminar")))])],2)],1):e._e()])],1)],1)},yo=[],$o=function(){var e=this,a=e._self._c;return e.is_superuser||e.is_systemadmin||e.is_coop_user?a("div",[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa}},[a("cv-select-option",{attrs:{disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.listadoEmpresas,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1):e._e()},Co=[],Eo=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"unificarInformeForm",attrs:{"auto-hide-off":!1,"close-aria-label":"Close"},on:{"primary-click":e.unificaInformes,"secondary-click":function(a){return e.$refs.unificarInformeForm.hide()}}},[a("template",{slot:"label"}),a("template",{slot:"title"},[e._v(e._s(e.$t("graficos.unificar_informes")))]),a("template",{attrs:{id:"contenido"},slot:"content"},[a("div",{staticClass:"bx--grid bx--grid--condensed"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{staticClass:"bx--form-item"},[a("label",{staticClass:"bx--label",attrs:{for:"text-input-Nombre"}},[e._v(e._s(e.$t("graficos.nombre")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nombreInformeNew,expression:"nombreInformeNew"}],staticClass:"bx--text-input",attrs:{id:"text-input-Nombre",type:"text",placeholder:e.$t("graficos.nombre")},domProps:{value:e.nombreInformeNew},on:{input:function(a){a.target.composing||(e.nombreInformeNew=a.target.value)}}})])])]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{staticClass:"bx--form-item"},[a("cv-checkbox",{attrs:{label:e.label_check,checked:!1,value:"true",mixed:!1},model:{value:e.checkDellInforme,callback:function(a){e.checkDellInforme=a},expression:"checkDellInforme"}})],1)])]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("h4",[e._v(e._s(e.$t("graficos.resumen_unifica")))]),a("p",[e._v(e._s(e.$t("graficos.capa"))+" "+e._s(e.capa))]),a("p",[e._v(e._s(e.$t("graficos.tipo"))+" "+e._s(e.tipo))]),a("cv-data-table",{attrs:{columns:[this.$t("graficos.parcelas"),this.$t("graficos.rango_fechas_sel"),{label:this.$t("graficos.creado")}]}},[a("template",{slot:"data"},e._l(e.informesSeleccionados,(function(t){return a("cv-data-table-row",{key:String(t.id),attrs:{value:String(t.id)}},[1==t.tipo?a("cv-data-table-cell",[e._v(" "+e._s(e.parcelaName(t.parcela))+" ")]):a("cv-data-table-cell",[e._v(" "+e._s(t.parcela)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(t.finifin)+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.dateFormat(t.created))+" ")])],1)})),1)],2)],1)])])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.unificar")))])],2)},xo=[],wo={name:"UnificarInforme",props:{informesSell:[],informesSeleccionados:Array(),historico:Array(),tipo:String(),capa:String(),enterpriseID:String(),allParcelsOfEnterprises:Array()},data(){return{title_card:this.$t("graficos.unificar_informes"),text_input_label:this.$t("graficos.nombre"),label_check:this.$t("graficos.eliminar_informe_origin"),columnsHistorico:[this.$t("graficos.parcelas"),this.$t("graficos.rango_fechas_sel"),{label:this.$t("graficos.creado")}],nombreInformeNew:"",checkDellInforme:!1,alias:""}},methods:{parcelaName(e){const a=this.allParcelsOfEnterprises.filter(a=>a.id==e);return a.length>0?a[0].properties.name:"Gráfico Generado de Parcela Eliminada"},dateFormat(e){const a=e.split("T");return a[0]},openModal(){1==parseInt(this.tipo)&&(this.parcela=this.informesSeleccionados[0].parcela),this.$refs.unificarInformeForm.show()},unificaInformes(){2==parseInt(this.tipo)&&(this.parcela=this.nombreInformeNew);const e=this.$apiURL+"/unificarInforme/";c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.post(e,{parcela:this.parcela,urlSentinel:["pruebas"],polygon:[this.informesSeleccionados],enterprise_id:this.enterpriseID,capa:this.capa,tipo:this.tipo,checkDellOtros:this.checkDellInforme,alias:this.nombreInformeNew}).then(e=>{console.info(e),this.$parent.mensajeAlerta=this.$t("graficos.informe_gen_ok"),this.$parent.tipoAlerta="success",this.$emit("mensajeAlerta",this.$t("graficos.informe_gen_ok")),this.$emit("tipoAlerta","success"),this.$emit("verAlerta"),this.$emit("getInformesAnt"),this.$refs.unificarInformeForm.hide()}).catch(e=>{console.warn(e)})}}},So=wo,Po=Object(u["a"])(So,Eo,xo,!1,null,null,null),ko=Po.exports,Io=function(){var e=this,a=e._self._c;return a("cv-modal",{ref:"EditarInformeForm",attrs:{"auto-hide-off":!1,"close-aria-label":"Close"},on:{"primary-click":e.unificaInformes,"secondary-click":function(a){return e.$refs.unificarInformeForm.hide()}}},[a("template",{slot:"label"}),a("template",{slot:"title"},[e._v(e._s(e.$t("graficos.modifica_infor")))]),a("template",{attrs:{id:"contenido"},slot:"content"},[a("div",{staticClass:"bx--grid bx--grid--condensed"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{staticClass:"bx--form-item"},[a("label",{staticClass:"bx--label",attrs:{for:"text-input-Nombre"}},[e._v(e._s(e.$t("graficos.nombre_informe")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nombreInformeNew,expression:"nombreInformeNew"}],staticClass:"bx--text-input",attrs:{id:"text-input-Nombre",type:"text",placeholder:e.text_input_label},domProps:{value:e.nombreInformeNew},on:{input:function(a){a.target.composing||(e.nombreInformeNew=a.target.value)}}})])])])]),e._v(" "+e._s(e.allParcelsOfEnterprises)+" ")]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.guardar")))])],2)},jo=[],Lo={name:"UnificarInforme",props:{informesSeleccionados:Array(),historico:Array(),allParcelsOfEnterprises:Array()},data(){return{title_card:"Modificar Informe",text_input_label:"Nombre del Informe",nombreInformeNew:"",alias:"",parcela:Object(),mensajeAlerta:"",tipoAlerta:"error"}},methods:{openModal(){let e=`${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(e).then(e=>{e.data.alias?this.nombreInformeNew=e.data.alias:this.parcela=this.historico.filter(e=>{e.id==this.informesSeleccionados[0]&&(this.nombreInformeNew=1==e.tipo?this.parcelaName(e.parcela):e.parcela)})}).catch(e=>{console.warn(e)}),this.$refs.EditarInformeForm.show()},parcelaName(e){const a=this.allParcelsOfEnterprises.filter(a=>a.id==e);return a.length>0?a[0].properties.name:(this.parcela={tipo:1},"Gráfico Generado de Parcela Eliminada")},unificaInformes(){const e=`${this.$apiURL}/ver_hist/${this.informesSeleccionados[0]}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),1==this.parcela.tipo?c.a.put(e,{alias:this.nombreInformeNew}).then(e=>{console.info(e),this.$parent.mensajeAlerta="Informe Guardado correctamente",this.$parent.tipoAlerta="success",this.$emit("mensajeAlerta","Informe Guardado correctamente"),this.$emit("tipoAlerta","success"),this.$emit("verAlerta"),this.$emit("getInformesAnt"),this.$refs.EditarInformeForm.hide()}).catch(e=>{console.warn(e)}):c.a.put(e,{parcela:this.nombreInformeNew}).then(e=>{console.info(e),this.$parent.mensajeAlerta="Informe Guardado correctamente",this.$parent.tipoAlerta="success",this.$emit("mensajeAlerta","Informe Guardado correctamente"),this.$emit("tipoAlerta","success"),this.$emit("verAlerta"),this.$emit("getInformesAnt"),this.$refs.EditarInformeForm.hide()}).catch(e=>{console.warn(e)})}},mounted:function(){console.info("Pruebas")}},Mo=Lo,Oo=Object(u["a"])(Mo,Io,jo,!1,null,null,null),No=Oo.exports,Do={extends:qi["b"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object()},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataAmarillos:Array(),dataAzules:Array(),dataRojos:Array(),dataVerdes:Array(),dataAmarillosAltos:Array(),dataAmarillosMedios:Array(),dataAmarillosBajos:Array(),dataAzulesAltos:Array(),dataAzulesMedios:Array(),dataAzulesBajos:Array(),dataRojosAltos:Array(),dataRojosMedios:Array(),dataRojosBajos:Array(),dataVerdesAltos:Array(),dataVerdesMedios:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_ndvi")}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){const e=Object.keys(this.datos);e.forEach(e=>{this.datos[e],this.dataAmarillosAltos.push(this.datos[e].amarillos.altos.porcent),this.dataAmarillosMedios.push(this.datos[e].amarillos.medios.porcent),this.dataAmarillosBajos.push(this.datos[e].amarillos.bajos.porcent),this.dataAzulesAltos.push(this.datos[e].azules.altos.porcent),this.dataAzulesMedios.push(this.datos[e].azules.medios.porcent),this.dataAzulesBajos.push(this.datos[e].azules.bajos.porcent),this.dataRojosAltos.push(this.datos[e].rojos.altos.porcent),this.dataRojosMedios.push(this.datos[e].rojos.medios.porcent),this.dataRojosBajos.push(this.datos[e].rojos.bajos.porcent),this.dataVerdesAltos.push(this.datos[e].verdes.altos.porcent),this.dataVerdesMedios.push(this.datos[e].verdes.medios.porcent),this.fechas.push(this.datos[e].fecha)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojos_altos"),backgroundColor:"#fe0103",borderColor:"#fe0103",fill:!1,data:this.dataRojosAltos},{label:this.$t("graficos.rojos_medios"),backgroundColor:"#9b0004",borderColor:"#9b0004",fill:!1,data:this.dataRojosMedios},{label:this.$t("graficos.rojos_bajos"),backgroundColor:"#680000",borderColor:"#680000",fill:!1,data:this.dataRojosBajos},{label:this.$t("graficos.amarillos_altos"),backgroundColor:"#ffff33",borderColor:"#ffff33",fill:!1,data:this.dataAmarillosAltos},{label:this.$t("graficos.amarillos_medios"),backgroundColor:"#cccc33",borderColor:"#cccc33",fill:!1,data:this.dataAmarillosMedios},{label:this.$t("graficos.amarillos_bajos"),backgroundColor:"#666600",borderColor:"#666600",fill:!1,data:this.dataAmarillosBajos},{label:this.$t("graficos.azules_altos"),backgroundColor:"#33ffff",borderColor:"#33ffff",fill:!1,data:this.dataAzulesAltos},{label:this.$t("graficos.azules_medios"),backgroundColor:"#33cccc",borderColor:"#33cccc",fill:!1,data:this.dataAzulesMedios},{label:this.$t("graficos.azules_bajos"),backgroundColor:"#006666",borderColor:"#006666",fill:!1,data:this.dataAzulesBajos},{label:this.$t("graficos.verdes_altos"),backgroundColor:"#33cc33",borderColor:"#33cc33",fill:!1,data:this.dataVerdesMedios},{label:this.$t("graficos.verdes_medios"),backgroundColor:"#33ff33",borderColor:"#33ff33",fill:!1,data:this.dataVerdesAltos}]},this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},zo=Do,Ro=Object(u["a"])(zo,Rr,Gr,!1,null,null,null),Go=Ro.exports,Fo={extends:qi["b"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object()},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataNaraja:Array(),dataAmarillos:Array(),dataVerdes:Array(),dataAzulClaro:Array(),dataAzulMedio:Array(),dataAzulOscuro:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_mois")}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){const e=Object.keys(this.datos);e.forEach(e=>{this.datos[e],this.dataNaraja.push(this.datos[e].naranja.porcent),this.dataAmarillos.push(this.datos[e].amarillo.porcent),this.dataVerdes.push(this.datos[e].verdes.porcent),this.dataAzulClaro.push(this.datos[e].azul_claro.porcent),this.dataAzulMedio.push(this.datos[e].azul_medio.porcent),this.dataAzulOscuro.push(this.datos[e].azul_oscuro.porcent),this.fechas.push(this.datos[e].fecha)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojo_naran"),backgroundColor:"#ff8000",borderColor:"#ff8000",fill:!1,data:this.dataNaraja},{label:this.$t("graficos.amarillo"),backgroundColor:"#ffdf00",borderColor:"#ffdf00",fill:!1,data:this.dataAmarillos},{label:this.$t("graficos.verde"),backgroundColor:"#66ff98",borderColor:"#66ff98",fill:!1,data:this.dataVerdes},{label:this.$t("graficos.azul_claro"),backgroundColor:"#02fefc",borderColor:"#02fefc",fill:!1,data:this.dataAzulClaro},{label:this.$t("graficos.azul_medio"),backgroundColor:"#0087ff",borderColor:"#0087ff",fill:!1,data:this.dataAzulMedio},{label:this.$t("graficos.azul_oscuro"),backgroundColor:"#2000ff",borderColor:"#2000ff",fill:!1,data:this.dataAzulOscuro}]},this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},Bo=Fo,Uo=Object(u["a"])(Bo,Fr,Br,!1,null,null,null),Vo=Uo.exports,To=function(){var e=this,a=e._self._c;return a("div",[a("h4",[e._v(e._s(e.$t("graficos.imagen_sent")))]),a("br"),a("div",{staticClass:"bx--row"},e._l(e.keys,(function(t){return a("div",{key:t,staticClass:"bx--col-sm-2 bx--col-md-2 bx--col-lg-1",attrs:{value:String(t)}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"",id:"",src:e.urlMedia+"/"+e.datos[t].img}}),a("p",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.datos[t].fecha))]),e.datos[t].fechaGenerada?a("p",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.datos[t].fechaGenerada)+" ")]):e._e(),a("br")])})),0)])},Ho=[],qo={props:{datos:Object(),urlMedia:String},data(){return{time:"",srcImage:"",keys:Array()}},methods:{},mounted(){this.keys=Object.keys(this.datos)}},Yo=qo,Zo=Object(u["a"])(Yo,To,Ho,!1,null,null,null),Qo=Zo.exports,Jo={extends:qi["a"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object()},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataAmarillos:Array(),dataAzules:Array(),dataRojos:Array(),dataVerdes:Array(),dataAmarillosAltos:Array(),dataAmarillosMedios:Array(),dataAmarillosBajos:Array(),dataAzulesAltos:Array(),dataAzulesMedios:Array(),dataAzulesBajos:Array(),dataRojosAltos:Array(),dataRojosMedios:Array(),dataRojosBajos:Array(),dataVerdesAltos:Array(),dataVerdesMedios:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_ndvi")}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){const e=Object.keys(this.datos);e.forEach(e=>{this.datos[e],this.dataAmarillosAltos.push(this.datos[e].amarillos.altos.porcent),this.dataAmarillosMedios.push(this.datos[e].amarillos.medios.porcent),this.dataAmarillosBajos.push(this.datos[e].amarillos.bajos.porcent),this.dataAzulesAltos.push(this.datos[e].azules.altos.porcent),this.dataAzulesMedios.push(this.datos[e].azules.medios.porcent),this.dataAzulesBajos.push(this.datos[e].azules.bajos.porcent),this.dataRojosAltos.push(this.datos[e].rojos.altos.porcent),this.dataRojosMedios.push(this.datos[e].rojos.medios.porcent),this.dataRojosBajos.push(this.datos[e].rojos.bajos.porcent),this.dataVerdesAltos.push(this.datos[e].verdes.altos.porcent),this.dataVerdesMedios.push(this.datos[e].verdes.medios.porcent),this.fechas.push(this.datos[e].fecha)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojos_altos"),backgroundColor:"#fe0103",borderColor:"#fe0103",fill:!1,data:this.dataRojosAltos},{label:this.$t("graficos.rojos_medios"),backgroundColor:"#9b0004",borderColor:"#9b0004",fill:!1,data:this.dataRojosMedios},{label:this.$t("graficos.rojos_bajos"),backgroundColor:"#680000",borderColor:"#680000",fill:!1,data:this.dataRojosBajos},{label:this.$t("graficos.amarillos_altos"),backgroundColor:"#ffff33",borderColor:"#ffff33",fill:!1,data:this.dataAmarillosAltos},{label:this.$t("graficos.amarillos_medios"),backgroundColor:"#cccc33",borderColor:"#cccc33",fill:!1,data:this.dataAmarillosMedios},{label:this.$t("graficos.amarillos_bajos"),backgroundColor:"#666600",borderColor:"#666600",fill:!1,data:this.dataAmarillosBajos},{label:this.$t("graficos.azules_altos"),backgroundColor:"#33ffff",borderColor:"#33ffff",fill:!1,data:this.dataAzulesAltos},{label:this.$t("graficos.azules_medios"),backgroundColor:"#33cccc",borderColor:"#33cccc",fill:!1,data:this.dataAzulesMedios},{label:this.$t("graficos.azules_bajos"),backgroundColor:"#006666",borderColor:"#006666",fill:!1,data:this.dataAzulesBajos},{label:this.$t("graficos.verdes_altos"),backgroundColor:"#33cc33",borderColor:"#33cc33",fill:!1,data:this.dataVerdesMedios},{label:this.$t("graficos.verdes_medios"),backgroundColor:"#33ff33",borderColor:"#33ff33",fill:!1,data:this.dataVerdesAltos}]},this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},Xo=Jo,Wo=Object(u["a"])(Xo,Ur,Vr,!1,null,null,null),Ko=Wo.exports,el={extends:qi["a"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object()},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataNaraja:Array(),dataAmarillos:Array(),dataVerdes:Array(),dataAzulClaro:Array(),dataAzulMedio:Array(),dataAzulOscuro:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_mois")}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){const e=Object.keys(this.datos);e.forEach(e=>{this.datos[e],this.dataNaraja.push(this.datos[e].naranja.porcent),this.dataAmarillos.push(this.datos[e].amarillo.porcent),this.dataVerdes.push(this.datos[e].verdes.porcent),this.dataAzulClaro.push(this.datos[e].azul_claro.porcent),this.dataAzulMedio.push(this.datos[e].azul_medio.porcent),this.dataAzulOscuro.push(this.datos[e].azul_oscuro.porcent),this.fechas.push(this.datos[e].fecha)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojo_naran"),backgroundColor:"#ff8000",borderColor:"#ff8000",fill:!1,data:this.dataNaraja},{label:this.$t("graficos.amarillo"),backgroundColor:"#ffdf00",borderColor:"#ffdf00",fill:!1,data:this.dataAmarillos},{label:this.$t("graficos.verde"),backgroundColor:"#66ff98",borderColor:"#66ff98",fill:!1,data:this.dataVerdes},{label:this.$t("graficos.azul_claro"),backgroundColor:"#02fefc",borderColor:"#02fefc",fill:!1,data:this.dataAzulClaro},{label:this.$t("graficos.azul_medio"),backgroundColor:"#0087ff",borderColor:"#0087ff",fill:!1,data:this.dataAzulMedio},{label:this.$t("graficos.azul_oscuro"),backgroundColor:"#2000ff",borderColor:"#2000ff",fill:!1,data:this.dataAzulOscuro}]},this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},al=el,tl=Object(u["a"])(al,Tr,Hr,!1,null,null,null),sl=tl.exports,rl=function(){var e=this,a=e._self._c;return a("div",[a("h4",[e._v(e._s(e.$t("graficos.tabla_colores")))]),a("br"),a("cv-data-table",{ref:"table"},[a("template",{slot:"headings"},[a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_nombre")}}),e.verFechaGen?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_gen")}}):e._e(),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_altos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_medios")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_bajos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_altos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_medios")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_bajos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_altos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_medios")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_bajos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verdes_altos")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verdes_medios")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagen")}})],1),a("template",{slot:"data"},e._l(e.keys,(function(t){return a("cv-data-table-row",{key:t,attrs:{value:String(t)}},[a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].fecha)+" ")]),e.datos[t].fechaGenerada?a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].fechaGenerada)+" "),a("div",{staticStyle:{display:"none"}},[e._v(e._s(e.verFechaGen=!0))])]):e._e(),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].rojos.altos.porcent+"%")+" "),e.datos[t].rojos.altos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].rojos.altos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].rojos.altos.porcent>1?e.datos[t].rojos.altos.porcent:2}%; height: 10px; background: #fe0103;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].rojos.medios.porcent+"%")+" "),e.datos[t].rojos.medios.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].rojos.medios.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].rojos.medios.porcent>1?e.datos[t].rojos.medios.porcent:2}%; height: 10px; background: #9b0004;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].rojos.bajos.porcent+"%")+" "),e.datos[t].rojos.bajos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].rojos.bajos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].rojos.bajos.porcent>1?e.datos[t].rojos.bajos.porcent:2}%; height: 10px; background: #680000;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].amarillos.altos.porcent+"%")+" "),e.datos[t].amarillos.altos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].amarillos.altos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].amarillos.altos.porcent>1?e.datos[t].amarillos.altos.porcent:2}%; height: 10px; background: #ffff33;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].amarillos.medios.porcent+"%")+" "),e.datos[t].amarillos.medios.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].amarillos.medios.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].amarillos.medios.porcent>1?e.datos[t].amarillos.medios.porcent:2}%; height: 10px; background: #cccc33;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].amarillos.bajos.porcent+"%")+" "),e.datos[t].amarillos.bajos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].amarillos.bajos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].amarillos.bajos.porcent>1?e.datos[t].amarillos.bajos.porcent:2}%; height: 10px; background: #666600;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azules.altos.porcent+"%")+" "),e.datos[t].azules.altos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azules.altos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].azules.altos.porcent>1?e.datos[t].azules.altos.porcent:2}%; height: 10px; background: #33ffff;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azules.medios.porcent+"%")+" "),e.datos[t].azules.medios.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azules.medios.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].azules.medios.porcent>1?e.datos[t].azules.medios.porcent:2}%; height: 10px; background: #33cccc;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azules.bajos.porcent+"%")+" "),e.datos[t].azules.bajos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azules.bajos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].azules.bajos.porcent>1?e.datos[t].azules.bajos.porcent:2}%; height: 10px; background: #006666;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].verdes.altos.porcent+"%")+" "),e.datos[t].verdes.altos.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].verdes.altos.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].verdes.altos.porcent>1?e.datos[t].verdes.altos.porcent:2}%; height: 10px; background: #33ff33;display: inline-block;`})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].verdes.medios.porcent+"%")+" "),e.datos[t].verdes.medios.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].verdes.medios.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${e.datos[t].verdes.medios.porcent>1?e.datos[t].verdes.medios.porcent:2}%; height: 10px; background: #33cc33;display: inline-block;`})]),a("cv-data-table-cell",[a("img",{staticStyle:{width:"100px"},attrs:{alt:"",id:"",src:e.urlMedia+"/"+e.datos[t].img}})])],1)})),1)],2)],1)},il=[],ol={props:{datos:Object(),urlMedia:String},data(){return{time:"",srcImage:"",keys:Array(),columns:[this.$t("graficos.fecha_nombre"),this.$t("graficos.rojos_altos"),this.$t("graficos.rojos_medios"),this.$t("graficos.rojos_bajos"),this.$t("graficos.amarillos_altos"),this.$t("graficos.amarillos_medios"),this.$t("graficos.amarillos_bajos"),this.$t("graficos.azules_altos"),this.$t("graficos.azules_medios"),this.$t("graficos.azules_bajos"),this.$t("graficos.verdes_altos"),this.$t("graficos.verdes_medios"),this.$t("graficos.imagen")],verFechaGen:!1}},methods:{},mounted(){this.keys=Object.keys(this.datos)},verFechaGenfun(){this.verFechaGen=!0}},ll=ol,nl=Object(u["a"])(ll,rl,il,!1,null,null,null),cl=nl.exports,dl=function(){var e=this,a=e._self._c;return a("div",[a("h4",[e._v(e._s(e.$t("graficos.tabla_colores")))]),a("br"),a("cv-data-table",{ref:"table",on:{sort:e.onSort}},[a("template",{slot:"headings"},[a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_nombre")}}),e.verFechaGen?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_gen")}}):e._e(),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojo_naran")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillo")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verde")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_claro")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_medio")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_oscuro")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagen")}})],1),a("template",{slot:"data"},e._l(e.keys,(function(t){return a("cv-data-table-row",{key:t,attrs:{value:String(t)}},[a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].fecha)+" ")]),e.datos[t].fechaGenerada?a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].fechaGenerada)+" "),a("div",{staticStyle:{display:"none"}},[e._v(e._s(e.verFechaGen=!0))])]):e._e(),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].naranja.porcent+"%")+" "),e.datos[t].naranja.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].naranja.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].naranja.porcent>1?a("span",{style:`width: ${e.datos[t].naranja.porcent}%; height: 10px; background: #ff8000;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #ff8000;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].amarillo.porcent+"%")+" "),e.datos[t].amarillo.area_porcen?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].amarillo.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].amarillo.porcent>1?a("span",{style:`width: ${e.datos[t].amarillo.porcent}%; height: 10px; background: #ffdf00;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #ffdf00;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].verdes.porcent+"%")+" "),e.datos[t].verdes.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].verdes.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].verdes.porcent>1?a("span",{style:`width: ${e.datos[t].verdes.porcent}%; height: 10px; background: #66ff98;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #66ff98;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azul_claro.porcent+"%")+" "),e.datos[t].azul_claro.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azul_claro.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].azul_claro.porcent>1?a("span",{style:`width: ${e.datos[t].azul_claro.porcent}%; height: 10px; background: #02fefc;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #02fefc;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azul_medio.porcent+"%")+" "),e.datos[t].azul_medio.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azul_medio.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].azul_medio.porcent>1?a("span",{style:`width: ${e.datos[t].azul_medio.porcent}%; height: 10px; background: #0087ff;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #0087ff;display: inline-block;"})]),a("cv-data-table-cell",[e._v(" "+e._s(e.datos[t].azul_oscuro.porcent+"%")+" "),e.datos[t].azul_oscuro.area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(e.datos[t].azul_oscuro.area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),e.datos[t].azul_oscuro.porcent>1?a("span",{style:`width: ${e.datos[t].azul_oscuro.porcent}%; height: 10px; background: #2000ff;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #2000ff;display: inline-block;"})]),a("cv-data-table-cell",[a("img",{staticStyle:{width:"100px"},attrs:{alt:"",id:"",src:e.urlMedia+"/"+e.datos[t].img}})])],1)})),1)],2)],1)},pl=[],hl={props:{datos:Object(),urlMedia:String},data(){return{time:"",srcImage:"",keys:Array(),columns:[this.$t("graficos.fecha_nombre"),this.$t("graficos.rojo_naran"),this.$t("graficos.amarillo"),this.$t("graficos.verde"),this.$t("graficos.azul_claro"),this.$t("graficos.azul_medio"),this.$t("graficos.azul_oscuro"),this.$t("graficos.imagen")],verFechaGen:!1}},methods:{compare(e,a){return e.last_nom<a.last_nom?-1:e.last_nom>a.last_nom?1:0}},mounted(){this.keys=Object.keys(this.datos)}},ml=hl,ul=Object(u["a"])(ml,dl,pl,!1,null,null,null),fl=ul.exports,vl={name:"GraficosAnterioresController",components:{},props:{arrEnterprises:Array,arrCooperativas:Array,is_superuser:Boolean,is_systemadmin:Boolean,is_staff:Boolean,is_enterpriseadmin:Boolean,is_coop_user:Boolean,allParcelsOfEnterprises:Array,allParcelsOfEnterprisesFilter:Array,ChartLine:Go,SentImage:Qo,ChartBar:Ko,TableColors:cl,AlertaGeneral:Pe,ChartLineMois:Vo,ChartBarMois:sl,TableColorsMois:fl,UnificarInformes:ko,EditarInforme:No},data(){return{start:0,length:10,start2:0,length2:10,listadoEmpresas:this.arrEnterprises,historicoAnterior:Array(),historicoAnteriorCoop:Array(),columnsHistorico:[this.$t("graficos.parcela"),this.$t("graficos.rango_fechas_sel"),{label:this.$t("graficos.creado"),sortable:!0},{label:this.$t("graficos.tipo"),sortable:!0},{label:this.$t("graficos.capa"),sortable:!0},{key:"",label:""}],showUnificar:!1,showEditar:!1,verGraficNDVI:!1,verGraficMois:!1,verImagenSent:!1,informesSell:Array(),informeSell:Array(),capaInforUni:"",tipoInforUni:"",componentTableHist:0,empresaSeleccionadaID:"",empresaSeleccionadaObj:Object(),cooperativaSeleccionadaObj:Object(),column:"created",orden:"descending"}},methods:{actionOnPagination(e){this.start=e.start-1,this.length=e.length},actionOnPagination2(e){this.start2=e.start-1,this.length2=e.length},dateFormat(e){const a=e.split("T");return a[0]},showEditarInforme(){console.info(this.editarInforme),this.$refs.editarInforme.openModal()},verDatos(){if(1!=this.$refs.tableHist.selectedRows.length)return this.mensajeAlerta=this.$t("graficos.select_one_informe"),this.tipoAlerta="error",console.info(this.$refs),this.$refs.alertaGenerall.verAlerta(),!1;const e=this.$refs.tableHist.selectedRows;let a=`${this.$apiURL}/ver_hist/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{"NDVI"==e.data.capa?(this.verGraficNDVI=!0,this.verGraficMois=!1):(this.verGraficNDVI=!1,this.verGraficMois=!0),a=`${this.$apiURLMedia}/${e.data.imagen}/`,c.a.get(a).then(e=>{this.dataSent=e.data,this.verImagenSent=!0,this.keyComponent+=1})}).catch(e=>{console.warn(e)})},verDatosRow2(e){this.$refs.tableHist2.selectedRows.forEach(()=>{this.$refs.tableHist2.selectedRows.pop()}),this.$refs.tableHist2.selectedRows.push(e),this.verDatos2()},verDatos2(){if(1!=this.$refs.tableHist2.selectedRows.length)return this.mensajeAlerta=this.$t("graficos.select_one_informe"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;const e=this.$refs.tableHist2.selectedRows;let a=`${this.$apiURL}/ver_hist/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{"NDVI"==e.data.capa?(this.verGraficNDVI=!0,this.verGraficMois=!1):(this.verGraficNDVI=!1,this.verGraficMois=!0),a=`${this.$apiURLMedia}/${e.data.imagen}/`,c.a.get(a).then(e=>{this.dataSent=e.data,this.verImagenSent=!0,this.keyComponent+=1})}).catch(e=>{console.warn(e)})},parcelaName(e){const a=this.allParcelsOfEnterprises.filter(a=>a.id==e);return a.length>0?a[0].properties.name:"Gráfico Generado de Parcela Eliminada"},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.$emit("setEnterprise",e.data),this.$emit("setAllParcelsOfEnterprises",a),this.$emit("setEmpresaSeleccionadaObj",e.data[0]),this.$emit("setGetGraficosAnteriores",e.data[0].id)});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.$emit("setEnterprise",e.data.enterprises),this.$emit("setAllParcelsOfEnterprises",a),this.$emit("setEmpresaSeleccionadaObj",e.data.enterprises[0]),this.$emit("setGetGraficosAnteriores",e.data.enterprises[0].id),this.$emit("setCooperativaSeleccionadaObj",e.data),this.$emit("setGetGraficosAnterioresCoop",e.data.id),this.cooperativaSeleccionadaObj=e.data,this.getInformesAnterioresCoop(e.data.id)}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.$emit("setEnterprise",[e.data]),this.$emit("setAllParcelsOfEnterprises",a),this.$emit("setEmpresaSeleccionadaObj",e.data),this.$emit("setGetGraficosAnteriores",e.data.id),this.$emit("setCooperativaSeleccionadaObj",{}),this.$emit("setGetGraficosAnterioresCoop",{})})}},showModificarInformes(){this.$refs.unificarInformes.openModal()},agruparCompatible(e){let a="",t="",s="",r=!0;var i={};let o=Array(),l=Array();try{if(!(e.length>1))throw r=!1,i;e.forEach(e=>{l=this.historicoAnterior.filter(o=>{if(o.id==e){if(a){if(a!=o.capa)throw r=!1,i}else a=o.capa;if(t){if(parseInt(t)!=parseInt(o.tipo))throw r=!1,i;if(1==parseInt(t)&&s!=o.parcela)throw r=!1,i}else t=o.tipo,s=o.parcela;return o}}),o.push(l[0])})}catch(n){if(!r)throw this.showUnificar=!1,1==e.length?(this.showEditar=!0,this.informeSell=e):this.showEditar=!1,n}this.informesSell=o,this.capaInforUni=a,this.tipoInforUni=t,this.showUnificar=!0},getHistorico(){this.empresaSeleccionadaObj=this.arrEnterprises[0],this.getInformesAnteriores(this.arrEnterprises[0].id),this.arrCooperativas.length&&(this.cooperativaSeleccionadaObj=this.arrCooperativas[0],this.getInformesAnterioresCoop(this.arrCooperativas[0].id))},getInformesAnteriores(e){let a=`${this.$apiURL}/procesado/?enterprise_id=${e}&colum_name=${this.column}&order=${this.orden}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{console.info("informes de la empresa:",this.empresaSeleccionadaObj.name),console.info(e.data),this.historicoAnterior=e.data}).catch(e=>{console.warn(e)})},getInformesAnterioresCoop(e){let a=`${this.$apiURL}/procesado/?enterprise_id=${e}&colum_name=${this.column}&order=${this.orden}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{console.info("informes de la Cooperativa:",this.cooperativaSeleccionadaObj.name),console.info(e.data),this.historicoAnteriorCoop=e.data}).catch(e=>{console.warn(e)})},descargaExcelRow(e){this.$refs.tableHist.selectedRows.forEach(()=>{this.$refs.tableHist.selectedRows.pop()}),this.$refs.tableHist.selectedRows.push(e),this.descargaExcel()},descargaExcel(){if(1!=this.$refs.tableHist.selectedRows.length)return this.mensajeAlerta=this.$t("graficos.select_one_informe"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;const e=this.$refs.tableHist.selectedRows,a=this.historicoAnterior.filter(a=>a.id==e);let t="";t=a[0].alias?a[0].alias:1==a[0].tipo?this.parcelaName(a[0].parcela):a[0].parcela,window.URL=window.URL||window.webkitURL;var s,r=new XMLHttpRequest,i=document.createElement("a");r.open("GET",`${this.$apiURLMedia}/${a[0].xlsxFile}`,!0),r.responseType="blob",r.onload=function(){s=new Blob([r.response],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i.href=window.URL.createObjectURL(s),i.download=t+".xlsx",i.click()},r.send()},descargaExcelRow2(e){this.$refs.tableHist2.selectedRows.forEach(()=>{this.$refs.tableHist2.selectedRows.pop()}),this.$refs.tableHist2.selectedRows.push(e),this.descargaExcel2()},descargaExcel2(){if(1!=this.$refs.tableHist2.selectedRows.length)return this.mensajeAlerta=this.$t("graficos.select_one_informe"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;const e=this.$refs.tableHist2.selectedRows,a=this.historicoAnteriorCoop.filter(a=>a.id==e);let t="";t=a[0].alias?a[0].alias:1==a[0].tipo?this.parcelaName(a[0].parcela):a[0].parcela,window.URL=window.URL||window.webkitURL;var s,r=new XMLHttpRequest,i=document.createElement("a");r.open("GET",`${this.$apiURLMedia}/${a[0].xlsxFile}`,!0),r.responseType="blob",r.onload=function(){s=new Blob([r.response],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i.href=window.URL.createObjectURL(s),i.download=t+".xlsx",i.click()},r.send()},delInformeRow(e){this.$refs.tableHist.selectedRows.forEach(()=>{this.$refs.tableHist.selectedRows.pop()}),this.$refs.tableHist.selectedRows.push(e),this.delInforme()},delInforme(){this.$refs.alerta_eliminar.dataVisible=!0},delInformeRow2(e){this.$refs.tableHist2.selectedRows.forEach(()=>{this.$refs.tableHist2.selectedRows.pop()}),this.$refs.tableHist2.selectedRows.push(e),this.delInforme2()},delInformeRow3(e){this.$refs.tableHist2.selectedRows.forEach(()=>{this.$refs.tableHist2.selectedRows.pop()}),this.$refs.tableHist2.selectedRows.push(e),this.delInforme3()},delInforme2(){this.$refs.alerta_eliminar2.dataVisible=!0},delInforme3(){this.$refs.alerta_eliminar3.dataVisible=!0},eliminarUsuario(){const e=this.$refs.tableHist.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const a=`${this.$apiURL}/ver_hist/${e}/`;c.a.delete(a).then(()=>{this.getInformesAnteriores(),this.componentTableHist+=1,this.mensajeAlerta=this.$t("graficos.del_informe_ok"),this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(()=>{this.getInformesAnteriores(),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})}),a?(console.error("error"),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},eliminarUsuario2(){const e=this.$refs.tableHist2.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const a=`${this.$apiURL}/ver_hist/${e}/`;c.a.delete(a).then(()=>{this.getInformesAnterioresCoop(),this.componentTableHist+=1,this.mensajeAlerta=this.$t("graficos.del_informe_ok"),this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(()=>{this.getInformesAnterioresCoop(),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})}),a?(console.error("error"),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},eliminarUsuario3(){const e=this.$refs.tableHist2.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const a=`${this.$apiURL}/ver_hist/${e}/`;c.a.delete(a).then(()=>{this.getInformesAnterioresCoopADM(this.cooperativeSelectObj.id),this.componentTableHist+=1,this.mensajeAlerta=this.$t("graficos.del_informe_ok"),this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(()=>{this.getInformesAnterioresCoopADM(this.cooperativeSelectObj.id),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})}),a?(console.error("error"),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()}},beforeMount(){this.getHistorico()},mounted:function(){},beforeCreate(){}},bl=vl,_l=Object(u["a"])(bl,$o,Co,!1,null,null,null),gl=_l.exports,Al={name:"GraficosController",components:{GraficosAnterioresController:gl,ChartLine:Go,SentImage:Qo,ChartBar:Ko,TableColors:cl,AlertaGeneral:Pe,ChartLineMois:Vo,ChartBarMois:sl,TableColorsMois:fl,UnificarInformes:ko,EditarInforme:No},data(){return{flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,start2:0,length2:10,listadoEmpresas:this.arrEnterprises,historicoAnterior:Array(),historicoAnteriorCoop:Array(),columnsHistorico:[this.$t("graficos.parcela"),this.$t("graficos.rango_fechas_sel"),{label:this.$t("graficos.creado"),sortable:!0},{label:this.$t("graficos.tipo"),sortable:!0},{label:this.$t("graficos.capa"),sortable:!0},{key:"",label:""}],showUnificar:!1,showEditar:!1,verGraficNDVI:!1,verGraficMois:!1,verImagenSent:!1,informesSell:Array(),informeSell:Array(),capaInforUni:"",tipoInforUni:"",componentTableHist:0,empresaSeleccionadaID:"",empresaSeleccionadaObj:Object(),cooperativaSeleccionadaObj:Object(),column:"created",orden:"descending",keyComponent:0,mensajeAlerta:"",tipoAlerta:"error"}},methods:{actionOnPagination(e){this.start=e.start-1,this.length=e.length},actionOnPagination2(e){this.start2=e.start-1,this.length2=e.length},dateFormat(e){const a=e.split("T");return a[0]},showEditarInforme(){console.info(this.editarInforme),this.$refs.editarInforme.openModal()},verDatosRow(e){this.$refs.tableHist.selectedRows.forEach(()=>{this.$refs.tableHist.selectedRows.pop()}),this.$refs.tableHist.selectedRows.push(e),this.verDatos()},verDatos(){if(1!=this.$refs.tableHist.selectedRows.length)return this.mensajeAlerta=this.$t("graficos.select_one_informe"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;const e=this.$refs.tableHist.selectedRows;let a=`${this.$apiURL}/ver_hist/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{"NDVI"==e.data.capa?(this.verGraficNDVI=!0,this.verGraficMois=!1):(this.verGraficNDVI=!1,this.verGraficMois=!0),a=`${this.$apiURLMedia}/${e.data.imagen}/`,c.a.get(a).then(e=>{this.dataSent=e.data,this.verImagenSent=!0,this.keyComponent+=1})}).catch(e=>{console.warn(e)})},verDatosRow2(e){this.$refs.tableHist2.selectedRows.forEach(()=>{this.$refs.tableHist2.selectedRows.pop()}),this.$refs.tableHist2.selectedRows.push(e),this.verDatos2()},verDatos2(){if(1!=this.$refs.tableHist2.selectedRows.length)return this.mensajeAlerta=this.$t("graficos.select_one_informe"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;const e=this.$refs.tableHist2.selectedRows;let a=`${this.$apiURL}/ver_hist/${e}/`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{"NDVI"==e.data.capa?(this.verGraficNDVI=!0,this.verGraficMois=!1):(this.verGraficNDVI=!1,this.verGraficMois=!0),a=`${this.$apiURLMedia}/${e.data.imagen}/`,c.a.get(a).then(e=>{this.dataSent=e.data,this.verImagenSent=!0,this.keyComponent+=1})}).catch(e=>{console.warn(e)})},descargaExcelRow(e){this.$refs.tableHist.selectedRows.forEach(()=>{this.$refs.tableHist.selectedRows.pop()}),this.$refs.tableHist.selectedRows.push(e),this.descargaExcel()},descargaExcel(){if(1!=this.$refs.tableHist.selectedRows.length)return this.mensajeAlerta=this.$t("graficos.select_one_informe"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;const e=this.$refs.tableHist.selectedRows,a=this.historicoAnterior.filter(a=>a.id==e);let t="";t=a[0].alias?a[0].alias:1==a[0].tipo?this.parcelaName(a[0].parcela):a[0].parcela,window.URL=window.URL||window.webkitURL;var s,r=new XMLHttpRequest,i=document.createElement("a");r.open("GET",`${this.$apiURLMedia}/${a[0].xlsxFile}`,!0),r.responseType="blob",r.onload=function(){s=new Blob([r.response],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i.href=window.URL.createObjectURL(s),i.download=t+".xlsx",i.click()},r.send()},descargaExcelRow2(e){this.$refs.tableHist2.selectedRows.forEach(()=>{this.$refs.tableHist2.selectedRows.pop()}),this.$refs.tableHist2.selectedRows.push(e),this.descargaExcel2()},descargaExcel2(){if(1!=this.$refs.tableHist2.selectedRows.length)return this.mensajeAlerta=this.$t("graficos.select_one_informe"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),!1;const e=this.$refs.tableHist2.selectedRows,a=this.historicoAnteriorCoop.filter(a=>a.id==e);let t="";t=a[0].alias?a[0].alias:1==a[0].tipo?this.parcelaName(a[0].parcela):a[0].parcela,window.URL=window.URL||window.webkitURL;var s,r=new XMLHttpRequest,i=document.createElement("a");r.open("GET",`${this.$apiURLMedia}/${a[0].xlsxFile}`,!0),r.responseType="blob",r.onload=function(){s=new Blob([r.response],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i.href=window.URL.createObjectURL(s),i.download=t+".xlsx",i.click()},r.send()},parcelaName(e){const a=this.allParcelsOfEnterprises.filter(a=>a.id==e);return a.length>0?a[0].properties.name:"Gráfico Generado de Parcela Eliminada"},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.empresaSeleccionadaObj=e.data[0],this.getInformesAnteriores(e.data[0].id)});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.empresaSeleccionadaObj=e.data.enterprises[0],this.getInformesAnteriores(e.data.enterprises[0].id),this.cooperativaSeleccionadaObj=e.data,this.getInformesAnterioresCoop(e.data.id)}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.empresaSeleccionadaObj=e.data,this.getInformesAnteriores(e.data.id)})}},delInformeRow(e){this.$refs.tableHist.selectedRows.forEach(()=>{this.$refs.tableHist.selectedRows.pop()}),this.$refs.tableHist.selectedRows.push(e),this.delInforme()},delInforme(){this.$refs.alerta_eliminar.dataVisible=!0},delInformeRow2(e){this.$refs.tableHist2.selectedRows.forEach(()=>{this.$refs.tableHist2.selectedRows.pop()}),this.$refs.tableHist2.selectedRows.push(e),this.delInforme2()},delInformeRow3(e){this.$refs.tableHist2.selectedRows.forEach(()=>{this.$refs.tableHist2.selectedRows.pop()}),this.$refs.tableHist2.selectedRows.push(e),this.delInforme3()},delInforme2(){this.$refs.alerta_eliminar2.dataVisible=!0},delInforme3(){this.$refs.alerta_eliminar3.dataVisible=!0},eliminarUsuario(){const e=this.$refs.tableHist.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const a=`${this.$apiURL}/ver_hist/${e}/`;c.a.delete(a).then(()=>{this.getInformesAnteriores(this.empresaSeleccionadaObj.id),this.componentTableHist+=1,this.mensajeAlerta=this.$t("graficos.del_informe_ok"),this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(()=>{this.getInformesAnteriores(this.empresaSeleccionadaObj.id),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})}),a?(console.error("error"),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},eliminarUsuario2(){const e=this.$refs.tableHist2.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const a=`${this.$apiURL}/ver_hist/${e}/`;c.a.delete(a).then(()=>{this.getInformesAnterioresCoop(),this.componentTableHist+=1,this.mensajeAlerta=this.$t("graficos.del_informe_ok"),this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(()=>{this.getInformesAnterioresCoop(),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})}),a?(console.error("error"),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},eliminarUsuario3(){const e=this.$refs.tableHist2.selectedRows;let a=!1;e.forEach(e=>{console.log(e);const a=`${this.$apiURL}/ver_hist/${e}/`;c.a.delete(a).then(()=>{this.getInformesAnterioresCoopADM(this.cooperativeSelectObj.id),this.componentTableHist+=1,this.mensajeAlerta=this.$t("graficos.del_informe_ok"),this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(()=>{this.getInformesAnterioresCoopADM(this.cooperativeSelectObj.id),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})}),a?(console.error("error"),this.mensajeAlerta=this.$t("graficos.del_informe_error"),this.$refs.alerta.verAlerta()):this.$refs.alerta_eliminar.hide()},showModificarInformes(){this.$refs.unificarInformes.openModal()},agruparCompatible(e){let a="",t="",s="",r=!0;var i={};let o=Array(),l=Array();try{if(!(e.length>1))throw r=!1,i;e.forEach(e=>{l=this.historicoAnterior.filter(o=>{if(o.id==e){if(a){if(a!=o.capa)throw r=!1,i}else a=o.capa;if(t){if(parseInt(t)!=parseInt(o.tipo))throw r=!1,i;if(1==parseInt(t)&&s!=o.parcela)throw r=!1,i}else t=o.tipo,s=o.parcela;return o}}),o.push(l[0])})}catch(n){if(!r)throw this.showUnificar=!1,1==e.length?(this.showEditar=!0,this.informeSell=e):this.showEditar=!1,n}this.informesSell=o,this.capaInforUni=a,this.tipoInforUni=t,this.showUnificar=!0},getHistorico(){this.arrEmpresas.length&&(this.empresaSeleccionadaObj=this.arrEmpresas[0],this.getInformesAnteriores(this.arrEmpresas[0].id)),this.arrCooperativas.length&&(this.cooperativaSeleccionadaObj=this.arrCooperativas[0],this.getInformesAnterioresCoop(this.arrCooperativas[0].id))},getInformesAnteriores(e){let a=`${this.$apiURL}/procesado/?enterprise_id=${e}&colum_name=${this.column}&order=${this.orden}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{console.info("informes de la empresa:",this.empresaSeleccionadaObj.name),console.info(e.data),this.historicoAnterior=e.data}).catch(e=>{console.warn(e)})},getInformesAnterioresCoop(e){let a=`${this.$apiURL}/procesado/?enterprise_id=${e}&colum_name=${this.column}&order=${this.orden}`;c.a.defaults.headers.common["Authorization"]="Bearer "+sessionStorage.getItem("apiAccess"),c.a.get(a).then(e=>{console.info("informes de la Cooperativa:",this.cooperativaSeleccionadaObj.name),console.info(e.data),this.historicoAnteriorCoop=e.data}).catch(e=>{console.warn(e)})}},beforeMount(){},mounted:function(){},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?(console.info("entra"),ta().then(async e=>{this.arrEmpresas=e.data;const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0,this.getHistorico()})):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0,this.getHistorico()}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0,this.getHistorico()}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},yl=Al,$l=Object(u["a"])(yl,Ao,yo,!1,null,null,null),Cl=$l.exports,El={name:"Home",components:{GraficosController:Cl,Board:Qe},data(){return{mensajeAlerta:"",tipoAlerta:"error"}},mounted:function(){}},xl=El,wl=Object(u["a"])(xl,_o,go,!1,null,null,null),Sl=wl.exports,Pl=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("MonitorComponent")],1)],1)},kl=[],Il=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("br"),e._m(0),a("br"),a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Desde el Monitor podrás revisar de una forma rápida y visual la evolución de los cultivos en las parcelas seleccionadas y durante el intervalo de fechas deseado. Utiliza los filtros que encontrarás a continuación para concretar los datos, el informe de nubes se incluirá siempre independientemente de la selección que se haga.")]),a("br"),a("p",[a("b",[e._v(e._s(e.$t("adminEnterprise.info_nav")))])])])]),a("br"),a("div",{staticClass:"bx--row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-2 bx--col-lg-2"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(e.getSortedCooperativa(t).enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-2 bx--col-lg-2"},[a("cv-button",{staticStyle:{"margin-top":"17px"},attrs:{kind:"primary"},on:{click:function(a){return e.actionVisibleModal(!0)}}},[e._v("Seleccionar Parcelas")])],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-2 bx--col-lg-2"},[a("cv-select",{attrs:{label:e.$t("graficos.sel_layer_sen")},on:{change:function(a){return e.onChangeLayer()}},model:{value:e.selectValueCapa,callback:function(a){e.selectValueCapa=a},expression:"selectValueCapa"}},[a("cv-select-option",{attrs:{value:"NDVI"}},[e._v(e._s(e.$t("graficos.NDVI")))]),a("cv-select-option",{attrs:{value:"MOISTURE_INDEX"}},[e._v(e._s(e.$t("graficos.mostisture_index")))])],1)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-date-picker",{attrs:{kind:"range",dateLabel:e.$t("graficos.fecha_incio"),"date-end-label":e.$t("graficos.fecha_fin"),"cal-options":e.calOptions,value:e.valueRange},on:{change:e.actionChangeDateRange}})],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-2 bx--col-lg-2"},[e.rowSelects.length?a("cv-button",{staticStyle:{"margin-top":"17px"},attrs:{kind:"primary",disabled:e.disabledGenerar},on:{click:function(a){return e.generarInforme()}}},[e._v("Mostrar datos")]):e._e()],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-1 bx--col-lg-1"},[e.exportarExcel?a("cv-button",{staticStyle:{"margin-top":"17px"},attrs:{kind:"primary"},on:{click:function(a){return e.showModalImagesUser(!0)}}},[e._v("Exportar")]):e._e()],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[e.exportarExcel?a("cv-button",{staticStyle:{"margin-top":"17px"},attrs:{kind:"primary"},on:{click:function(a){return e.showModalImagesUser(!1)}}},[e._v("Exportar sólo datos")]):e._e()],1)]),a("br"),e._m(1),a("br"),a("Visor",{key:e.keyComponentMonitor,attrs:{data:e.data,fechasArr:e.fechasArr,layer:e.selectValueCapa,dataCampana:e.dataCampana,dataProduccion:e.dataProduccion,empresa:e.selectValueEmpresa}}),a("cv-modal",{attrs:{"close-aria-label":"Cerrar",size:"large",visible:e.visibleModal,"auto-hide-off":!1},on:{"primary-click":e.actionPrimary,"modal-hidden":function(a){return e.actionVisibleModal(!1)}}},[a("template",{slot:"title"},[e._v("Selección de Parcelas")]),e._e(),a("template",{staticStyle:{"padding-right":"0%"},slot:"content"},[a("p",[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"heactareas",label:this.$t("graficos.hectareas"),sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button")],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)})),1)],2)],1),a("template",{slot:"primary-button"},[e._v("Seleccionar")])],2),a("cv-modal",{ref:"alerta_eliminar",attrs:{visible:e.visibleModalImages,kind:"info"},on:{"primary-click":function(a){return e.addImageReport(!0)},"secondary-click":function(a){return e.addImageReport(!1)}}},[a("template",{slot:"label"}),a("template",{slot:"title"},[e._v("Se va a descargar un archivo Excel con los datos de las parcelas y rango de fechas seleccionados.")]),a("template",{slot:"content"},[e._v(" ¿Quieres incluir las imágenes en el archivo? ")]),a("template",{slot:"secondary-button"},[e._v("No")]),a("template",{slot:"primary-button"},[e._v("Si")])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{ishidden:!0,tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("AlertaGeneral",{ref:"alertaGenerallModalReport",attrs:{ishidden:!1,tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},jl=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("h2",[e._v("Evolución de cultivo (Monitor) "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("855c")}})])])])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[e._v("En la gráfica se mostrarán solo los datos de los que se disponga información, es posible que se muestren parcelas sin datos en alguna fecha concreta. Dentro del rango de fechas seleccionado únicamente serán seleccionables en el slide aquellas que tengan algún dato.")])])])}];t("0541");const Ll="https://monitord4sf.devsmb.es";function Ml(e,a,t){return c.a.post(Ll+"/moisturemonitor/data/",{finicio:e,ffin:a,parcels:t})}function Ol(e,a,t){return c.a.post(Ll+"/ndvimonitor/data/",{finicio:e,ffin:a,parcels:t})}function Nl(e,a,t,s){return c.a.post(Ll+"/moisturemonitor/parcelas/",{finicio:e,ffin:a,parcels:t,enterprise:s,email:sessionStorage.getItem("email")})}function Dl(e,a,t,s){return c.a.post(Ll+"/ndvimonitor/parcelas/",{finicio:e,ffin:a,parcels:t,enterprise:s,email:sessionStorage.getItem("email")})}function zl(e,a=""){let t={data:e,email:sessionStorage.getItem("email")},s=Ll+"/moisturemonitor/exportexcel/";return""!=a&&(s=`${Ll}/moisturemonitor/exportexcel/${a}`),c.a.post(s,t)}function Rl(e,a=""){let t={data:e,email:sessionStorage.getItem("email")},s=Ll+"/ndvimonitor/exportexcel/";return""!=a&&(s=`${Ll}/ndvimonitor/exportexcel/${a}`),c.a.post(s,t)}var Gl,Fl,Bl=function(){var e=this,a=e._self._c;return a("div",[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[e.verNDVI?a("ChartLine",{key:e.keyComponent,attrs:{datos:e.dataSent,layer:e.layer}}):e._e()],1)]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"}),a("div",{staticClass:"bx--col-sm-12 bx--col-md-6 bx--col-lg-6",staticStyle:{"margin-top":"60px"},attrs:{id:"colSlider"}},[a("cv-slider",{attrs:{id:"pruebasSlider",label:"Selecciona una fecha",minLabel:e.fechasArr[0],maxLabel:e.fechasArr[e.fechasArr.length-1],hideTextInput:!0,min:"0",value:e.value,max:e.fechasArr.length-1},on:{change:e.onChangeSlider}})],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"})]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-5"}),a("div",{staticClass:"bx--col-sm-12 bx--col-md-6 bx--col-lg-2",staticStyle:{"text-align":"center","margin-top":"12px","font-weight":"bold","margin-bottom":"12px"}},[a("cv-text-input",{attrs:{id:"inputCursor",label:"Fecha Seleccionada",value:e.fechaSel}})],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-5"})]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col",staticStyle:{"margin-top":"20px","margin-bottom":"120px"}},[e._m(0),e.verNDVITabla?a("cv-accordion",{staticStyle:{"padding-right":"0%"}},[a("cv-accordion-item",[a("template",{slot:"title"},[e._v("Ver detalles")]),a("template",{slot:"content"},[e.verNDVITabla?a("TableColors",{key:e.keyComponent,attrs:{datos:e.dataSent,datosCampana:e.dataCampana,datosProduccion:e.dataProduccion,datoempresa:e.empresa}}):e._e()],1)],2)],1):e._e(),e.verMOIS?a("cv-accordion",[a("cv-accordion-item",[a("template",{slot:"title"},[e._v("Ver detalles")]),a("template",{slot:"content"},[e.verMOIS?a("TableColorsMois",{key:e.keyComponent,attrs:{datos:e.dataSent,datosCampana:e.dataCampana,datosProduccion:e.dataProduccion,datoempresa:e.empresa}}):e._e()],1)],2)],1):e._e()],1)])])},Ul=[function(){var e=this,a=e._self._c;return a("p",[a("strong",[e._v("Recuerda: ")]),e._v("la información de fecha teórica de recogida sólo se podrá introducir en las parcelas de la empresa con campaña de producción activa, en este caso únicamente Agraz.")])}],Vl={extends:qi["a"],props:{bbox:String,sentinelLay:String,rangeTime:String,datos:Object(),layer:String},components:{LineChart:qi["LineChart"]},data(){return{isActiveLoading:!1,isVisibleLoad:!0,dataAmarillos:Array(),dataAzules:Array(),dataRojos:Array(),dataVerdes:Array(),dataAmarillosAltos:Array(),dataAmarillosMedios:Array(),dataAmarillosBajos:Array(),dataAzulesAltos:Array(),dataAzulesMedios:Array(),dataAzulesBajos:Array(),dataRojosAltos:Array(),dataRojosMedios:Array(),dataRojosBajos:Array(),dataVerdesAltos:Array(),dataVerdesMedios:Array(),dataNaraja:Array(),dataAzulClaro:Array(),dataAzulMedio:Array(),dataAzulOscuro:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",scaleShowValues:!0,scales:{xAxes:[{stacked:!0,autoSkip:!1}],yAxes:[{stacked:!0}]},title:{display:!0}},data:Array()}},methods:{isMobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},mounted(){console.info(this.layer),"NDVI"===this.layer?(this.datos.forEach(e=>{this.fechas.push(`${e.name} - ${e.nubes_porcent}%`),this.dataAmarillosAltos.push(e.pix_amarillo_altos_porcent),this.dataAmarillosMedios.push(e.pix_amarillo_medios_porcent),this.dataAmarillosBajos.push(e.pix_amarillo_bajos_porcent),this.dataAzulesAltos.push(e.pix_azul_altos_porcent),this.dataAzulesMedios.push(e.pix_azul_medios_porcent),this.dataAzulesBajos.push(e.pix_azul_bajos_porcent),this.dataRojosAltos.push(e.pix_rojo_altos_porcent),this.dataRojosMedios.push(e.pix_rojo_medios_porcent),this.dataRojosBajos.push(e.pix_rojo_bajos_porcent),this.dataVerdesAltos.push(e.pix_verde_altos_porcent),this.dataVerdesMedios.push(e.pix_verde_medios_porcent)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojos_altos"),backgroundColor:"#fe0103",borderColor:"#fe0103",fill:!1,data:this.dataRojosAltos},{label:this.$t("graficos.rojos_medios"),backgroundColor:"#9b0004",borderColor:"#9b0004",fill:!1,data:this.dataRojosMedios},{label:this.$t("graficos.rojos_bajos"),backgroundColor:"#680000",borderColor:"#680000",fill:!1,data:this.dataRojosBajos},{label:this.$t("graficos.amarillos_altos"),backgroundColor:"#ffff33",borderColor:"#ffff33",fill:!1,data:this.dataAmarillosAltos},{label:this.$t("graficos.amarillos_medios"),backgroundColor:"#cccc33",borderColor:"#cccc33",fill:!1,data:this.dataAmarillosMedios},{label:this.$t("graficos.amarillos_bajos"),backgroundColor:"#666600",borderColor:"#666600",fill:!1,data:this.dataAmarillosBajos},{label:this.$t("graficos.azules_altos"),backgroundColor:"#33ffff",borderColor:"#33ffff",fill:!1,data:this.dataAzulesAltos},{label:this.$t("graficos.azules_medios"),backgroundColor:"#33cccc",borderColor:"#33cccc",fill:!1,data:this.dataAzulesMedios},{label:this.$t("graficos.azules_bajos"),backgroundColor:"#006666",borderColor:"#006666",fill:!1,data:this.dataAzulesBajos},{label:this.$t("graficos.verdes_altos"),backgroundColor:"#33cc33",borderColor:"#33cc33",fill:!1,data:this.dataVerdesMedios},{label:this.$t("graficos.verdes_medios"),backgroundColor:"#33ff33",borderColor:"#33ff33",fill:!1,data:this.dataVerdesAltos}]}):(this.datos.forEach(e=>{this.fechas.push(`${e.name} - ${e.nubes_porcent}%`),this.dataNaraja.push(e.pix_naranja_porcent),this.dataAmarillos.push(e.pix_amarillo_porcent),this.dataVerdes.push(e.pix_verde_porcent),this.dataAzulClaro.push(e.pix_azul_claro_porcent),this.dataAzulMedio.push(e.pix_azul_medio_porcent),this.dataAzulOscuro.push(e.pix_azul_oscuro_porcent)}),this.data={labels:this.fechas,datasets:[{label:this.$t("graficos.rojo_naran"),backgroundColor:"#ff8000",borderColor:"#ff8000",fill:!1,data:this.dataNaraja},{label:this.$t("graficos.amarillo"),backgroundColor:"#ffdf00",borderColor:"#ffdf00",fill:!1,data:this.dataAmarillos},{label:this.$t("graficos.verde"),backgroundColor:"#66ff98",borderColor:"#66ff98",fill:!1,data:this.dataVerdes},{label:this.$t("graficos.azul_claro"),backgroundColor:"#02fefc",borderColor:"#02fefc",fill:!1,data:this.dataAzulClaro},{label:this.$t("graficos.azul_medio"),backgroundColor:"#0087ff",borderColor:"#0087ff",fill:!1,data:this.dataAzulMedio},{label:this.$t("graficos.azul_oscuro"),backgroundColor:"#2000ff",borderColor:"#2000ff",fill:!1,data:this.dataAzulOscuro}]}),this.chartdata=this.data,this.renderChart(this.chartdata,this.options)}},Tl=Vl,Hl=Object(u["a"])(Tl,Gl,Fl,!1,null,null,null),ql=Hl.exports,Yl=function(){var e=this,a=e._self._c;return a("div",[a("h4",[e._v(e._s(e.$t("graficos.tabla_colores"))+" "),a("img",{staticStyle:{width:"20px"},attrs:{src:t("a379")}})]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-toggle",{attrs:{checked:!0,label:"Ver columnas de colores",value:"check-2",small:!0,"hide-label":!0},on:{change:e.actionChangedToggleColores}},[a("template",{slot:"text-left"},[e._v("Desactivadas las columnas con colores")]),a("template",{slot:"text-right"},[e._v("Activadas las columnas con colores")])],2)],1),a("div",{staticClass:"bx--col"},[a("cv-toggle",{attrs:{checked:!0,label:"ver columnas de imagenes",value:"check-1",small:!0,"hide-label":!0},on:{change:e.actionChangedToggleImagenes}},[a("template",{slot:"text-left"},[e._v("Desactivada la presentacion de imagenes")]),a("template",{slot:"text-right"},[e._v("Activada la presentacion de imagenes")])],2)],1)]),a("br"),a("cv-data-table",{ref:"table",attrs:{searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"headings"},[a("cv-data-table-heading",{attrs:{heading:e.$t("adminEnterprise.nombre")}}),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_altos")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_medios")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojos_bajos")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_altos")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_medios")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillos_bajos")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_altos")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_medios")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azules_bajos")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verdes_altos")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verdes_medios")}}):e._e(),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.clouds")}}),e.verimagenes?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagen")}}):e._e(),e.verimagenes?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagenClouds")}}):e._e(),e.verimagenes?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagenTrueColor")}}):e._e(),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.plantas")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.cosecha")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_recogida")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_estimada_recogida")}})],1),a("template",{slot:"batch-actions"},[e.datoempresa==e.id_agraz?a("cv-button"):e._e()],1),a("template",{slot:"batch-actions"},[e.datoempresa==e.id_agraz?a("cv-button",{on:{click:e.fechateorica}},[e._v(" Establecer fecha teórica de recogida "),a("Edit32",{staticClass:"bx--btn__icon"})],1):e._e()],1),a("template",{slot:"data"},e._l(e.datos,(function(t){return a("cv-data-table-row",{key:t,attrs:{value:String(t.parcel),"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(" "+e._s(t.name)+" ")]),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_rojo_altos_porcent+"%")+" "),t.pix_rojo_altos_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_rojo_altos_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_rojo_altos_porcent>1?t.pix_rojo_altos_porcent:2}%; height: 10px; background: #fe0103;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_rojo_medios_porcent+"%")+" "),t.pix_rojo_medios_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_rojo_medios_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_rojo_medios_porcent>1?t.pix_rojo_medios_porcent:2}%; height: 10px; background: #9b0004;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_rojo_bajos_porcent+"%")+" "),t.pix_rojo_bajos_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_rojo_bajos_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_rojo_bajos_porcent>1?t.pix_rojo_bajos_porcent:2}%; height: 10px; background: #680000;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_amarillo_altos_porcent+"%")+" "),t.pix_amarillo_altos_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_amarillo_altos_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_amarillo_altos_porcent>1?t.pix_amarillo_altos_porcent:2}%; height: 10px; background: #ffff33;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_amarillo_medios_porcent+"%")+" "),t.pix_amarillo_medios_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_amarillo_medios_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_amarillo_medios_porcent>1?t.pix_amarillo_medios_porcent:2}%; height: 10px; background: #cccc33;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_amarillo_bajos_porcent+"%")+" "),t.pix_amarillo_bajos_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_amarillo_bajos_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_amarillo_bajos_porcent>1?t.pix_amarillo_bajos_porcent:2}%; height: 10px; background: #666600;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_azul_altos_porcent+"%")+" "),t.pix_azul_altos_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_azul_altos_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_azul_altos_porcent>1?t.pix_azul_altos_porcent:2}%; height: 10px; background: #33ffff;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_azul_medios_porcent+"%")+" "),t.pix_azul_medios_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_azul_medios_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_azul_medios_porcent>1?t.pix_azul_medios_porcent:2}%; height: 10px; background: #33cccc;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_azul_bajos_porcent+"%")+" "),t.pix_azul_bajos_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_azul_bajos_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_azul_bajos_porcent>1?t.pix_azul_bajos_porcent:2}%; height: 10px; background: #006666;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_verde_altos_porcent+"%")+" "),t.pix_verde_altos_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_verde_altos_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_verde_altos_porcent>1?t.pix_verde_altos_porcent:2}%; height: 10px; background: #33ff33;display: inline-block;`})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_verde_medios_porcent+"%")+" "),t.pix_verde_medios_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_verde_medios_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),a("span",{style:`width: ${t.pix_verde_medios_porcent>1?t.pix_verde_medios_porcent:2}%; height: 10px; background: #33cc33;display: inline-block;`})]):e._e(),a("cv-data-table-cell",[e._v(" "+e._s(t.nubes_porcent+"%")+" "),a("span",{style:`width: ${t.nubes_porcent>1?t.nubes_porcent:2}%; height: 10px; background: #f904bb;display: inline-block;`})]),e.verimagenes?a("cv-data-table-cell",[a("img",{staticStyle:{width:"100px"},attrs:{alt:"",id:"",src:"https://monitord4sf.devsmb.es/"+t.image}})]):e._e(),e.verimagenes?a("cv-data-table-cell",[a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:"https://monitord4sf.devsmb.es/"+t.nubesImage}})]):e._e(),e.verimagenes?a("cv-data-table-cell",[a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:"https://monitord4sf.devsmb.es/"+t.trueColorImage}})]):e._e(),a("cv-data-table-cell",[e._v(" "+e._s(e.getdatoPlantas(t))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.getdatoCosecha(t))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.getdatofecha(t))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.getdatoestimacion(t))+" ")])],1)})),1)],2),a("cv-modal",{ref:"establecer_fecha",on:{"primary-click":e.establecer_fecha}},[a("template",{slot:"label"},[e._v("Introduce a continuación la fecha estimada de recogida de las parcelas seleccionadas.")]),a("template",{slot:"title"},[e._v("Introduce a continuación la fecha estimada de recogida de las parcelas seleccionadas.")]),a("template",{slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-date-picker",{ref:"cambiosFechas",staticStyle:{width:"100%!important"},attrs:{kind:"single","cal-options":e.calOptions,dateLabel:e.$t("map.fecha"),placeholder:"mm/dd/yyyy"},on:{change:e.actionChangeDate},model:{value:e.fechaRecogida,callback:function(a){e.fechaRecogida=a},expression:"fechaRecogida"}})],1)])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.guardar")))])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},Zl=[],Ql={components:{AlertaGeneral:Pe},props:{datosCampana:Object(),datosProduccion:Object(),datos:Object(),urlMedia:String,datoempresa:String},data(){return{time:"",srcImage:"",keys:Array(),calOptions:{dateFormat:"Y-m-d"},columns:[this.$t("adminEnterprise.nombre"),this.$t("graficos.rojos_altos"),this.$t("graficos.rojos_medios"),this.$t("graficos.rojos_bajos"),this.$t("graficos.amarillos_altos"),this.$t("graficos.amarillos_medios"),this.$t("graficos.amarillos_bajos"),this.$t("graficos.azules_altos"),this.$t("graficos.azules_medios"),this.$t("graficos.azules_bajos"),this.$t("graficos.verdes_altos"),this.$t("graficos.verdes_medios"),this.$t("graficos.clouds"),this.$t("graficos.imagen"),this.$t("graficos.imagenClouds"),this.$t("graficos.plantas"),this.$t("graficos.cosecha"),this.$t("graficos.fecha_recogida"),this.$t("graficos.fecha_estimada_recogida")],verFechaGen:!1,vercolores:!0,verimagenes:!0,rowSelects:[],fechaRecogida:"",tipoAlerta:"error",mensajeAlerta:"",id_agraz:"7de27d39-1e42-4c6a-be53-67a72e1c98dc"}},methods:{getdatoPlantas(e){try{const a=e.parcel,t=e.date.substring(0,4);let s=this.datosCampana[t].resultado.filter(e=>e.parcela==a);return s[0].plantas}catch(a){return"No hay datos"}},getdatoCosecha(e){try{const a=e.date.substring(0,4),t=e.parcel;let s=this.datosProduccion[a].resultado.filter(e=>e.parcela==t);return s[0].produccion}catch(a){return"No hay datos"}},getdatoestimacion(e){try{const a=e.parcel,t=e.date.substring(0,4);let s=this.datosCampana[t].resultado.filter(e=>e.parcela==a);return null!=s[0].fecha_recogida_estimada?s[0].fecha_recogida_estimada:"No hay datos"}catch(a){return"No hay datos"}},getdatofecha(e){try{const a=e.date.substring(0,4),t=e.parcel;let s=this.datosProduccion[a].resultado.filter(e=>e.parcela==t);return s[0].fecha_fin}catch(a){return"No hay datos"}},actionChangedToggleColores(e){this.vercolores=e},actionChangedToggleImagenes(e){this.verimagenes=e},fechateorica(){this.rowSelects.length<=0?(this.mensajeAlerta="No hay parcelas seleccionadas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()):this.$refs.establecer_fecha.dataVisible=!0},async establecer_fecha(){console.log(this.fechaRecogida),await Pa(this.rowSelects,this.fechaRecogida).then(()=>{this.mensajeAlerta="Fecha actualizada correctamente",this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(()=>{this.mensajeAlerta="Error al actualizar la fecha",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}),this.$refs.establecer_fecha.hide()}},mounted(){this.keys=Object.keys(this.datos),console.info(this.datos)},verFechaGenfun(){this.verFechaGen=!0}},Jl=Ql,Xl=Object(u["a"])(Jl,Yl,Zl,!1,null,null,null),Wl=Xl.exports,Kl=function(){var e=this,a=e._self._c;return a("div",[a("h4",[e._v(e._s(e.$t("graficos.tabla_colores"))+" "),a("img",{staticStyle:{width:"20px"},attrs:{src:t("a379")}})]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-toggle",{attrs:{checked:!0,label:"Ver columnas de colores",value:"check-2",small:!0,"hide-label":!0},on:{change:e.actionChangedToggleColores}},[a("template",{slot:"text-left"},[e._v("Desactivadas las columnas con colores")]),a("template",{slot:"text-right"},[e._v("Activadas las columnas con colores")])],2)],1),a("div",{staticClass:"bx--col"},[a("cv-toggle",{attrs:{checked:!0,label:"ver columnas de imagenes",value:"check-1",small:!0,"hide-label":!0},on:{change:e.actionChangedToggleImagenes}},[a("template",{slot:"text-left"},[e._v("Desactivada la presentacion de imagenes")]),a("template",{slot:"text-right"},[e._v("Activada la presentacion de imagenes")])],2)],1)]),a("br"),a("cv-data-table",{ref:"table",attrs:{searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"headings"},[a("cv-data-table-heading",{attrs:{heading:e.$t("adminEnterprise.nombre")}}),e.verFechaGen?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_gen")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.rojo_naran")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.amarillo")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.verde")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_claro")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_medio")}}):e._e(),e.vercolores?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.azul_oscuro")}}):e._e(),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.clouds")}}),e.verimagenes?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagen")}}):e._e(),e.verimagenes?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagenClouds")}}):e._e(),e.verimagenes?a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.imagenTrueColor")}}):e._e(),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.plantas")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.cosecha")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_recogida")}}),a("cv-data-table-heading",{attrs:{heading:e.$t("graficos.fecha_estimada_recogida")}})],1),a("template",{slot:"batch-actions"},[e.datoempresa==e.id_agraz?a("cv-button"):e._e()],1),a("template",{slot:"batch-actions"},[e.datoempresa==e.id_agraz?a("cv-button",{on:{click:e.fechateorica}},[e._v(" Establecer fecha teórica de recogida "),a("Edit32",{staticClass:"bx--btn__icon"})],1):e._e()],1),a("template",{slot:"data"},e._l(e.datos,(function(t){return a("cv-data-table-row",{key:t,attrs:{value:String(t.parcel),"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(" "+e._s(t.name)+" ")]),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_naranja_porcent+"%")+" "),t.pix_naranja_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_naranja_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),t.pix_naranja_porcent>1?a("span",{style:`width: ${t.pix_naranja_porcent}%; height: 10px; background: #ff8000;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #ff8000;display: inline-block;"})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_amarillo_porcent+"%")+" "),t.pix_amarillo_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_amarillo_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),t.pix_amarillo_porcent>1?a("span",{style:`width: ${t.pix_amarillo_porcent}%; height: 10px; background: #ffdf00;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #ffdf00;display: inline-block;"})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_verde_porcent+"%")+" "),t.pix_verde_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_verde_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),t.pix_verde_porcent>1?a("span",{style:`width: ${t.pix_verde_porcent}%; height: 10px; background: #66ff98;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #66ff98;display: inline-block;"})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_azul_claro_porcent+"%")+" "),t.pix_azul_claro_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_azul_claro_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),t.pix_azul_claro_porcent>1?a("span",{style:`width: ${t.pix_azul_claro_porcent}%; height: 10px; background: #02fefc;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #02fefc;display: inline-block;"})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_azul_medio_porcent+"%")+" "),t.pix_azul_medio_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_azul_medio_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),t.pix_azul_medio_porcent>1?a("span",{style:`width: ${t.pix_azul_medio_porcent}%; height: 10px; background: #0087ff;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #0087ff;display: inline-block;"})]):e._e(),e.vercolores?a("cv-data-table-cell",[e._v(" "+e._s(t.pix_azul_oscuro_porcent+"%")+" "),t.pix_azul_oscuro_area_porcent?a("span",[e._v(" "+e._s("-")+" "+e._s(Math.round(100*(t.pix_azul_oscuro_area_porcent+Number.EPSILON))/100+"Ha")+" ")]):e._e(),a("br"),t.pix_azul_oscuro_porcent>1?a("span",{style:`width: ${t.pix_azul_oscuro_porcent}%; height: 10px; background: #2000ff;display: inline-block;`}):a("span",{style:"width: 2%; height: 10px; background: #2000ff;display: inline-block;"})]):e._e(),a("cv-data-table-cell",[e._v(" "+e._s(t.nubes_porcent+"%")+" "),a("span",{style:`width: ${t.nubes_porcent>1?t.nubes_porcent:2}%; height: 10px; background: #f904bb;display: inline-block;`})]),e.verimagenes?a("cv-data-table-cell",[a("img",{staticStyle:{width:"100px"},attrs:{alt:"",id:"",src:"https://monitord4sf.devsmb.es/"+t.image}})]):e._e(),e.verimagenes?a("cv-data-table-cell",[a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:"https://monitord4sf.devsmb.es/"+t.nubesImage}})]):e._e(),e.verimagenes?a("cv-data-table-cell",[a("img",{staticStyle:{width:"80px"},attrs:{alt:"",id:"",src:"https://monitord4sf.devsmb.es/"+t.trueColorImage}})]):e._e(),a("cv-data-table-cell",[e._v(" "+e._s(e.getdatoPlantas(t))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.getdatoCosecha(t))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.getdatofecha(t))+" ")]),a("cv-data-table-cell",[e._v(" "+e._s(e.getdatoestimacion(t))+" ")])],1)})),1)],2),a("cv-modal",{ref:"establecer_fecha",on:{"primary-click":e.establecer_fecha}},[a("template",{slot:"label"},[e._v("Introduce a continuación la fecha estimada de recogida de las parcelas seleccionadas.")]),a("template",{slot:"title"},[e._v("Introduce a continuación la fecha estimada de recogida de las parcelas seleccionadas.")]),a("template",{slot:"content"},[a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-date-picker",{ref:"cambiosFechas",staticStyle:{width:"100%!important"},attrs:{kind:"single","cal-options":e.calOptions,dateLabel:e.$t("map.fecha"),placeholder:"mm/dd/yyyy"},on:{change:e.actionChangeDate},model:{value:e.fechaRecogida,callback:function(a){e.fechaRecogida=a},expression:"fechaRecogida"}})],1)])]),a("template",{slot:"secondary-button"},[e._v(e._s(e.$t("graficos.cancelar")))]),a("template",{slot:"primary-button"},[e._v(e._s(e.$t("graficos.guardar")))])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},en=[],an={components:{AlertaGeneral:Pe},props:{datosCampana:Object(),datosProduccion:Object(),datos:Object(),urlMedia:String,datoempresa:String},data(){return{time:"",srcImage:"",keys:Array(),calOptions:{dateFormat:"Y-m-d"},columns:[this.$t("adminEnterprise.nombre"),this.$t("graficos.rojo_naran"),this.$t("graficos.amarillo"),this.$t("graficos.verde"),this.$t("graficos.azul_claro"),this.$t("graficos.azul_medio"),this.$t("graficos.azul_oscuro"),this.$t("graficos.clouds"),this.$t("graficos.imagen"),this.$t("graficos.imagenClouds"),this.$t("graficos.plantas"),this.$t("graficos.cosecha"),this.$t("graficos.fecha_recogida"),this.$t("graficos.fecha_estimada_recogida")],verFechaGen:!1,vercolores:!0,verimagenes:!0,rowSelects:[],fechaRecogida:"",tipoAlerta:"error",mensajeAlerta:"",id_agraz:"7de27d39-1e42-4c6a-be53-67a72e1c98dc"}},methods:{compare(e,a){return e.last_nom<a.last_nom?-1:e.last_nom>a.last_nom?1:0},getdatoPlantas(e){try{const a=e.date.substring(0,4),t=e.parcel;let s=this.datosCampana[a].resultado.filter(e=>e.parcela==t);return s[0].plantas}catch(a){return"No hay datos"}},getdatoCosecha(e){try{const a=e.date.substring(0,4),t=e.parcel;let s=this.datosProduccion[a].resultado.filter(e=>e.parcela==t);return s[0].produccion}catch(a){return"No hay datos"}},getdatofecha(e){try{const a=e.date.substring(0,4),t=e.parcel;let s=this.datosProduccion[a].resultado.filter(e=>e.parcela==t);return s[0].fecha_fin}catch(a){return"No hay datos"}},getdatoestimacion(e){try{const a=e.parcel,t=e.date.substring(0,4);let s=this.datosCampana[t].resultado.filter(e=>e.parcela==a);return s[0].fecha_recogida_estimada}catch(a){return"No hay datos"}},actionChangedToggleColores(e){this.vercolores=e},actionChangedToggleImagenes(e){this.verimagenes=e},fechateorica(){console.log(this.rowSelects),console.log(this.rowSelects.length),this.rowSelects.length<=0?(this.mensajeAlerta="No hay parcelas seleccionadas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()):this.$refs.establecer_fecha.dataVisible=!0},async establecer_fecha(){await Pa(this.rowSelects,this.fechaRecogida).then(()=>{this.mensajeAlerta="Fecha actualizada correctamente",this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(()=>{this.mensajeAlerta="Error al actualizar la fecha",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}),this.$refs.establecer_fecha.hide()}},mounted(){this.keys=Object.keys(this.datos)}},tn=an,sn=Object(u["a"])(tn,Kl,en,!1,null,null,null),rn=sn.exports,on={name:"Visor",props:{data:Object(),dataCampana:Object(),dataProduccion:Object(),fechasArr:Array(),fechaSel:String,layer:String,empresa:String},components:{ChartLine:ql,TableColors:Wl,TableColorsMois:rn},data(){return{verNDVI:!1,verNDVITabla:!1,verMOIS:!1,prueba:"Prueba",value:0,isActiveLoading:!1,isVisibleLoad:!0,dataAmarillos:Array(),dataAzules:Array(),dataRojos:Array(),dataVerdes:Array(),dataAmarillosAltos:Array(),dataAmarillosMedios:Array(),dataAmarillosBajos:Array(),dataAzulesAltos:Array(),dataAzulesMedios:Array(),dataAzulesBajos:Array(),dataRojosAltos:Array(),dataRojosMedios:Array(),dataRojosBajos:Array(),dataVerdesAltos:Array(),dataVerdesMedios:Array(),dataC1:Array(),dataC2:Array(),fechasC0:Array(),fechasC1:Array(),fechasC2:Array(),fechas:Array(),options:{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",stacked:this.isMobile(),title:{display:!0,text:this.$t("graficos.grafico_ndvi")}},datosCampana:{},datosProduccion:{},datoempresa:"",fechasKeys:[],dataSent:Object(),keyComponent:0}},methods:{onChangeSlider(e){this.value=e,this.fechaSel=this.fechasArr[e],"No hay datos disponibles"!==this.data[this.fechasArr[e]].resultado?(this.dataSent=this.data[this.fechasArr[e]].resultado,this.datosCampana=this.dataCampana,this.datosProduccion=this.dataProduccion,this.verNDVI=!0,"NDVI"===this.layer?(this.verNDVITabla=!0,this.verMOIS=!1):(this.verNDVITabla=!1,this.verMOIS=!0),this.keyComponent+=1):this.verNDVI=!1}},mounted:function(){const e=Object.keys(this.data);this.fechasKeys=e},beforeCreate(){const e=Object.keys(this.data);this.fechasKeys=e}},ln=on,nn=(t("9b1ec"),Object(u["a"])(ln,Bl,Ul,!1,null,null,null)),cn=nn.exports,dn={name:"Monitor",components:{AlertaGeneral:Pe,Visor:cn},data(){return{iswithGraphic:!1,exportarExcel:!1,keyComponentMonitor:0,visibleModal:!1,visibleModalImages:!1,data:{},dataCampana:{},dataProduccion:{},fechasArr:Array(),selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],selectValueCapa:"",SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:"",valueDates:[],valueRange:[],timeValuesArr:[],nombreInforme:"Gráfico - "+this.getNow(),checked_clouds:!1,tipoAlerta:"error",mensajeAlerta:"",fechasParcelasNumImages:{},verCargandoImagenes:!1,disabledGenerar:!1,verErrorIntervalo:!1,verCargandoFechasBbox:!1,initialStep:1,steps:["Nombre de informe y Selección de Parcelas","Selección de capas y Nubes","Selección de Fechas","Resumen de Informe"],open:[!1,!1,!1,!1],verTimeoutNumImg:!1}},methods:{getSortedCooperativa(e){return{...e,enterprises:e.enterprises.slice().sort((e,a)=>e.name.localeCompare(a.name))}},onChangeLayer(){this.exportarExcel=!1},actionVisibleModal(e){this.visibleModal=e},actionChangeAccordeon(e){this.open=this.$refs.acc.state.map((a,t)=>t===e.changedIndex)},getFechas(){},getFechasSentBBOX(){},getData(e){const a=this.allParcelsOfEnterprisesFilter.filter(a=>e==String(a.id)),t=[];let s=0,r=[];return this.fechasParcelasNumImages[e]&&(this.fechasParcelasNumImages[e].resultados.map(e=>{e.properties.cloudCoverPercentage>s&&(s=e.properties.cloudCoverPercentage),t.push(e.properties.date)}),r=[...new Set(t)]),`<td>${a[0].properties.name}</td>\n            <td>${this.fechasParcelasNumImages[e]?r.length:""}</td>\n            <td>${this.fechasParcelasNumImages[e]?r:""}</td>\n            <td>${this.checked_clouds?this.fechasParcelasNumImages[e]?s+"%":"":"n/a"}</td>`},toGenerar(){},showModalImagesUser(e){this.iswithGraphic=e,this.$refs.alerta_eliminar.show()},addImageReport(e){this.exportar(e)},exportar(e=!1){let a=e?"?image=true":"?image=false";a+="&IswithGraphic="+this.iswithGraphic,this.$refs.alerta_eliminar.hide(),this.mensajeAlerta="El proceso se ha lanzado correctamente. Tenga paciencia, puede requerir varios minutos para completarse. En caso de error recibirá un correo electrónico informativo",this.tipoAlerta="info",this.$refs.alertaGenerallModalReport.verAlerta(),this.verErrorIntervalo=!0,"NDVI"===this.selectValueCapa?Rl(this.data,a).then(e=>{if(Object.hasOwn(e.data,"data")&&window.open("https://monitord4sf.devsmb.es/media/parcels/"+e.data.data),e.data.message)return this.mensajeAlerta=e.data.message,this.tipoAlerta=e.data.error?"error":"warning",this.$refs.alertaGenerallModalReport.verAlerta(!1),this.verErrorIntervalo=!0,!1}).catch(()=>(this.mensajeAlerta="No se ha podido completar la solicitud",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1)):zl(this.data,a).then(e=>{if(Object.hasOwn(e.data,"data")&&window.open("https://monitord4sf.devsmb.es/media/parcels/"+e.data.data),e.data.message)return this.mensajeAlerta=e.data.message,this.tipoAlerta=e.data.error?"error":"warning",this.$refs.alertaGenerallModalReport.verAlerta(),this.verErrorIntervalo=!0,!1}).catch(()=>(this.mensajeAlerta="No se ha podido completar la solicitud",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1))},generarInforme(){const e=this.allParcelsOfEnterprisesFilter.filter(e=>this.rowSelects.includes(String(e.id))),a=[];return e.map(e=>a.push(e.id)),0===this.timeValuesArr.length?(this.mensajeAlerta="No se ha seleccionado ningún intervalo de fechas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1):0===this.selectValueCapa.length?(this.mensajeAlerta="No se ha seleccionado ninguna capa de Sentinel",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1):("NDVI"===this.selectValueCapa?Ol(this.timeValuesArr[0],this.timeValuesArr[1],a).then(e=>{const t=Object.keys(e.data),s=a.toString();t.map(a=>{const t=s.split(",");e.data[a].resultado.map(e=>{t.splice(t.indexOf(e.parcel.toString()),1)});const r=this.allParcelsOfEnterprisesFilter.filter(e=>t.includes(String(e.id)));r.map(t=>{e.data[a].resultado.push({id:t.id,parcel:t.id,name:t.properties.name,pix_azul_total:0,pix_azul_total_porcent:0,pix_azul_altos_total:0,pix_azul_altos_porcent:0,pix_azul_altos_area_porcent:0,pix_azul_medios_total:0,pix_azul_medios_porcent:0,pix_azul_medios_area_porcent:0,pix_azul_bajos_total:0,pix_azul_bajos_porcent:0,pix_azul_bajos_area_porcent:0,pix_amarillo_total:0,pix_amarillo_total_porcent:0,pix_amarillo_altos_total:0,pix_amarillo_altos_porcent:0,pix_amarillo_altos_area_porcent:0,pix_amarillo_medios_total:0,pix_amarillo_medios_porcent:0,pix_amarillo_medios_area_porcent:0,pix_amarillo_bajos_total:0,pix_amarillo_bajos_porcent:0,pix_amarillo_bajos_area_porcent:0,pix_rojo_total:0,pix_rojo_total_porcent:0,pix_rojo_altos_total:0,pix_rojo_altos_porcent:0,pix_rojo_altos_area_porcent:0,pix_rojo_medios_total:0,pix_rojo_medios_porcent:0,pix_rojo_medios_area_porcent:0,pix_rojo_bajos_total:0,pix_rojo_bajos_porcent:0,pix_rojo_bajos_area_porcent:0,pix_verde_total:0,pix_verde_total_porcent:0,pix_verde_altos_total:0,pix_verde_altos_porcent:0,pix_verde_altos_area_porcent:0,pix_verde_medios_total:0,pix_verde_medios_porcent:0,pix_verde_medios_area_porcent:0,nubes_porcent:0,plantas_reales:0,cosecha:0}),e.data[a].resultado.sort((e,a)=>e.name>a.name?1:a.name>e.name?-1:0)})}),this.exportarExcel=!0,this.data=e.data,this.fechasArr=Object.keys(e.data),this.keyComponentMonitor+=1}).catch(()=>(this.mensajeAlerta="No se ha podido completar la solicitud",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1)):Ml(this.timeValuesArr[0],this.timeValuesArr[1],a).then(e=>{const t=Object.keys(e.data),s=a.toString();t.map(a=>{const t=s.split(",");e.data[a].resultado.map(e=>{t.splice(t.indexOf(e.parcel.toString()),1)});const r=this.allParcelsOfEnterprisesFilter.filter(e=>t.includes(String(e.id)));r.map(t=>{e.data[a].resultado.push({id:t.id,parcel:t.id,name:t.properties.name,pix_naranja_total:0,pix_naranja_porcent:0,pix_naranja_area_porcent:0,pix_amarillo_total:0,pix_amarillo_porcent:0,pix_amarillo_area_porcent:0,pix_verde_total:0,pix_verde_porcent:0,pix_verde_area_porcent:0,pix_azul_claro_total:0,pix_azul_claro_porcent:0,pix_azul_claro_area_porcent:0,pix_azul_medio_total:0,pix_azul_medio_porcent:0,pix_azul_medio_area_porcent:0,pix_azul_oscuro_total:0,pix_azul_oscuro_porcent:0,pix_azul_oscuro_area_porcent:0,nubes_porcent:0,plantas_reales:0,cosecha:0}),e.data[a].resultado.sort((e,a)=>e.name>a.name?1:a.name>e.name?-1:0)})}),this.exportarExcel=!0,this.data=e.data,this.fechasArr=Object.keys(e.data),this.keyComponentMonitor+=1}).catch(()=>(this.mensajeAlerta="No se ha podido completar la solicitud",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1)),wa(this.timeValuesArr[0],this.timeValuesArr[1],a).then(e=>{this.dataCampana=e.data}),void Sa(this.timeValuesArr[0],this.timeValuesArr[1],a).then(e=>{this.dataProduccion=e.data}))},actionChangeDateRange(e){this.disabledGenerar=!1,this.verErrorIntervalo=!1,this.timeValuesArr=[e.startDate,e.endDate],this.time=`${e.startDate}/${e.endDate}`},chageCapas(e){this.SentinelLayer=e},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"1":t="name";break;case"2":t="area";break;case"3":t="enterprise";break;default:t="name"}"ascending"==s&&this.allParcelsOfEnterprisesFilter.sort((e,a)=>parseFloat(e.name)-parseFloat(a.name)),console.info(t)}},mounted:function(){this.getNow()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?ta().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data.slice().sort((e,a)=>e.name.localeCompare(a.name));const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},pn=dn,hn=(t("3f3e"),t("f19dc"),Object(u["a"])(pn,Il,jl,!1,null,"07db9fac",null)),mn=hn.exports,un={name:"GenGraficos",components:{Board:Qe,MonitorComponent:mn},mounted:function(){}},fn=un,vn=Object(u["a"])(fn,Pl,kl,!1,null,null,null),bn=vn.exports,_n=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("InportParcelsComponent")],1)],1)},gn=[],An=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("br"),e._m(0),a("br"),e._m(1),a("br"),a("div",{staticClass:"bx--row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-file-uploader",{ref:"fileUploader",attrs:{kind:"",label:"Subir Archivo",helperText:"El formato permitido es .zip",accept:[".zip"],"clear-on-reselect":!1,"initial-state-uploading":!1,multiple:!1,removable:!0,"remove-aria-label":"Custom remove aria label"},on:{change:e.onChangeFiles}})],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-button",{attrs:{kind:"primary",disabled:!1},on:{click:e.importarParcelas}},[e._v(" Subir archivo y ver resumen de importación ")]),a("p"),e._m(2)],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Parcelas compatibles con Sentinel "+e._s(e.procesadas.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.procesadas}})],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Errores en Sentinel "+e._s(e.errores.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.errores}})],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Cambiadas con respecto a la importación anterior "+e._s(e.cambiadas.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.cambiadas}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Se van a importar "+e._s(e.totalParcelas)+" Parcelas")]),a("cv-button",{attrs:{kind:"primary",disabled:!e.totalParcelas},on:{click:e.importarParcelasConfirmar}},[e._v(" Confirmar importación ")])],1)]),a("br"),a("cv-modal",{attrs:{"close-aria-label":"Cerrar",size:"large",visible:e.visibleModal,"auto-hide-off":!1},on:{"primary-click":e.actionPrimary,"modal-hidden":function(a){return e.actionVisibleModal(!1)}}},[a("template",{slot:"title"},[e._v("Selección de Parcelas")]),e._e(),a("template",{staticStyle:{"padding-right":"0%"},slot:"content"},[a("p",[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"heactareas",label:this.$t("graficos.hectareas"),sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button")],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)})),1)],2)],1),a("template",{slot:"primary-button"},[e._v("Seleccionar")])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("cv-loading",{attrs:{active:e.isActiveLoading,overlay:!0}})],1)},yn=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("h2",[e._v("Importar Parcelas desde .zip "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("855c")}})])])])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Para poder importar parcelas desde un .zip, este tiene que contener archivos con las extensiones xxx.dbf, xxx.prf, xxx.shp, xxx.shx")])])])},function(){var e=this,a=e._self._c;return a("div",{staticStyle:{"margin-top":"15px"}},[a("p",{staticStyle:{"line-height":"1.3"}},[a("b",{staticStyle:{color:"red","font-weight":"bold"}},[e._v("Importante:")]),e._v(" Las parcelas importadas "),a("b",{staticStyle:{"font-weight":"bold"}},[e._v("NO")]),e._v(" actualizarán la descripción "),a("span",{staticStyle:{"font-style":"italic"}},[e._v("(campo description)")]),e._v(" ni el nombre de las parcelas ya existentes en la empresa. ")])])}],$n={name:"Monitor",components:{AlertaGeneral:Pe},data(){return{isActiveLoading:!1,exportarExcel:!1,keyComponentMonitor:0,visibleModal:!1,data:{},fechasArr:Array(),selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],selectValueCapa:"",SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:"",valueDates:[],valueRange:[],timeValuesArr:[],nombreInforme:"Gráfico - "+this.getNow(),checked_clouds:!1,tipoAlerta:"error",mensajeAlerta:"",fechasParcelasNumImages:{},verCargandoImagenes:!1,disabledGenerar:!1,verErrorIntervalo:!1,verCargandoFechasBbox:!1,initialStep:1,steps:["Nombre de informe y Selección de Parcelas","Selección de capas y Nubes","Selección de Fechas","Resumen de Informe"],open:[!1,!1,!1,!1],verTimeoutNumImg:!1,file:null,procesadas:[],errores:[],cambiadas:[],totalParcelas:0}},methods:{actionVisibleModal(e){this.visibleModal=e},onChangeFiles(e){this.file=e},importarParcelas(){return this.file?this.selectValueEmpresa?(console.info("Importando parcelas"),this.isActiveLoading=!0,void $a(this.file[0].file,this.selectValueEmpresa,!1).then(e=>{this.isActiveLoading=!1,console.info(e.data);const a=[];e.data.procesadas.map(e=>{a.push([e])});const t=[];e.data.Overlaps.map(e=>{t.push([e])});const s=[];e.data.cambiadas.map(e=>{s.push([e])}),this.procesadas=a,this.errores=t,this.totalParcelas=e.data.totalparcelas,this.cambiadas=s}).catch(e=>{this.isActiveLoading=!1,console.error(e),this.mensajeAlerta="Error al importar parcelas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},importarParcelasConfirmar(){return this.file?this.selectValueEmpresa?(console.info("Importando parcelas"),this.isActiveLoading=!0,$a(this.file[0].file,this.selectValueEmpresa,!0).then(()=>{this.isActiveLoading=!1,this.mensajeAlerta="Parcelas importadas correctamente",this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(e=>{this.isActiveLoading=!1,console.error(e),this.mensajeAlerta="Error al importar parcelas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}),this.mensajeAlerta="Parcelas importadas correctamente",this.tipoAlerta="success",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"1":t="name";break;case"2":t="area";break;case"3":t="enterprise";break;default:t="name"}"ascending"==s&&this.allParcelsOfEnterprisesFilter.sort((e,a)=>parseFloat(e.name)-parseFloat(a.name)),console.info(t)}},mounted:function(){this.getNow()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?ta().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data;const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},Cn=$n,En=(t("a0cd"),Object(u["a"])(Cn,An,yn,!1,null,"9965773a",null)),xn=En.exports,wn={name:"GenGraficos",components:{Board:Qe,InportParcelsComponent:xn},mounted:function(){}},Sn=wn,Pn=Object(u["a"])(Sn,_n,gn,!1,null,null,null),kn=Pn.exports,In=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("InportParcelsKMLComponent")],1)],1)},jn=[],Ln=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("br"),e._m(0),a("br"),e._m(1),a("br"),a("div",{staticClass:"bx--row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-file-uploader",{ref:"fileUploader",attrs:{kind:"",label:"Subir Archivo",helperText:"Los formatos permitidos son .kml y .kmz",accept:[".kml"][".kmz"],"clear-on-reselect":!1,"initial-state-uploading":!1,multiple:!1,removable:!0,"remove-aria-label":"Custom remove aria label"},on:{change:e.onChangeFiles}})],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-button",{attrs:{kind:"primary",disabled:!1},on:{click:e.importarParcelas}},[e._v(" Subir archivo y ver resumen de importación ")])],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Parcelas compatibles con Sentinel "+e._s(e.procesadas.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.procesadas}})],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Errores en Sentinel "+e._s(e.errores.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.errores}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Se van a importar "+e._s(e.totalParcelas)+" Parcelas")]),a("cv-button",{attrs:{kind:"primary",disabled:!e.totalParcelas},on:{click:e.importarParcelasConfirmar}},[e._v(" Confirmar importación ")])],1)]),a("br"),a("cv-modal",{attrs:{"close-aria-label":"Cerrar",size:"large",visible:e.visibleModal,"auto-hide-off":!1},on:{"primary-click":e.actionPrimary,"modal-hidden":function(a){return e.actionVisibleModal(!1)}}},[a("template",{slot:"title"},[e._v("Selección de Parcelas")]),e._e(),a("template",{staticStyle:{"padding-right":"0%"},slot:"content"},[a("p",[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"heactareas",label:this.$t("graficos.hectareas"),sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button")],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)})),1)],2)],1),a("template",{slot:"primary-button"},[e._v("Seleccionar")])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("cv-loading",{attrs:{active:e.isActiveLoading,overlay:!0}})],1)},Mn=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("h2",[e._v("Importar Parcelas desde .kml o .kmz "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("855c")}})])])])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[a("b",[e._v("ATENCION: ")]),e._v("Confirmar la exportacion supone el borrado de las parcelas de la empresa seleccionada para crear las parcelas del archivo sin duplicados.")])])])}],On={name:"Monitor",components:{AlertaGeneral:Pe},data(){return{isActiveLoading:!1,exportarExcel:!1,keyComponentMonitor:0,visibleModal:!1,data:{},fechasArr:Array(),selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],selectValueCapa:"",SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:"",valueDates:[],valueRange:[],timeValuesArr:[],nombreInforme:"Gráfico - "+this.getNow(),checked_clouds:!1,tipoAlerta:"error",mensajeAlerta:"",fechasParcelasNumImages:{},verCargandoImagenes:!1,disabledGenerar:!1,verErrorIntervalo:!1,verCargandoFechasBbox:!1,initialStep:1,steps:["Nombre de informe y Selección de Parcelas","Selección de capas y Nubes","Selección de Fechas","Resumen de Informe"],open:[!1,!1,!1,!1],verTimeoutNumImg:!1,file:null,procesadas:[],errores:[],cambiadas:[],totalParcelas:0}},methods:{actionVisibleModal(e){this.visibleModal=e},onChangeFiles(e){this.file=e},importarParcelas(){return this.file?this.selectValueEmpresa?(console.info("Importando parcelas"),this.isActiveLoading=!0,void Ca(this.file[0].file,this.selectValueEmpresa,!1).then(e=>{this.isActiveLoading=!1,console.info(e.data);const a=[];e.data.procesadas.map(e=>{a.push([e])});const t=[];e.data.Overlaps.map(e=>{t.push([e])});const s=[];e.data.cambiadas.map(e=>{s.push([e])}),this.procesadas=a,this.errores=t,this.totalParcelas=e.data.totalparcelas,this.cambiadas=s}).catch(e=>{this.isActiveLoading=!1,console.error(e),this.mensajeAlerta="Error al importar parcelas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},importarParcelasConfirmar(){return this.file?this.selectValueEmpresa?(console.info("Importando parcelas"),this.isActiveLoading=!0,Ca(this.file[0].file,this.selectValueEmpresa,!0).then(e=>{console.log(e),this.isActiveLoading=!1,this.mensajeAlerta="Parcelas importadas correctamente",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}).catch(e=>{console.log(e),this.isActiveLoading=!1,this.mensajeAlerta="Error al importar parcelas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}),this.mensajeAlerta="Parcelas importadas correctamente",this.tipoAlerta="success",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"1":t="name";break;case"2":t="area";break;case"3":t="enterprise";break;default:t="name"}"ascending"==s&&this.allParcelsOfEnterprisesFilter.sort((e,a)=>parseFloat(e.name)-parseFloat(a.name)),console.info(t)}},mounted:function(){this.getNow()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?ta().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data;const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},Nn=On,Dn=(t("bdd0"),Object(u["a"])(Nn,Ln,Mn,!1,null,"0d9e1dbe",null)),zn=Dn.exports,Rn={name:"GenGraficos",components:{Board:Qe,InportParcelsKMLComponent:zn},mounted:function(){}},Gn=Rn,Fn=Object(u["a"])(Gn,In,jn,!1,null,null,null),Bn=Fn.exports,Un=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("InportHitParcelsKMLComponent")],1)],1)},Vn=[],Tn=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("br"),e._m(0),a("br"),e._m(1),a("br"),a("div",{staticClass:"bx--row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-file-uploader",{ref:"fileUploader",attrs:{kind:"",label:"Subir Archivo",helperText:"Los formatos permitidos son .kml y .kmz",accept:[".kml"][".kmz"],"clear-on-reselect":!1,"initial-state-uploading":!1,multiple:!1,removable:!0,"remove-aria-label":"Custom remove aria label"},on:{change:e.onChangeFiles}})],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-button",{attrs:{kind:"primary",disabled:!1},on:{click:e.importarParcelas}},[e._v(" Subir archivo y ver resumen de importación ")])],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Parcelas compatibles con Sentinel "+e._s(e.procesadas.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.procesadas}})],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Errores en Sentinel "+e._s(e.errores.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.errores}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Se van a importar "+e._s(e.totalParcelas)+" Parcelas")]),a("cv-button",{attrs:{kind:"primary",disabled:!e.totalParcelas},on:{click:e.importarParcelasConfirmar}},[e._v(" Confirmar importación ")])],1)]),a("br"),a("cv-modal",{attrs:{"close-aria-label":"Cerrar",size:"large",visible:e.visibleModal,"auto-hide-off":!1},on:{"primary-click":e.actionPrimary,"modal-hidden":function(a){return e.actionVisibleModal(!1)}}},[a("template",{slot:"title"},[e._v("Selección de Parcelas")]),e._e(),a("template",{staticStyle:{"padding-right":"0%"},slot:"content"},[a("p",[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"heactareas",label:this.$t("graficos.hectareas"),sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button")],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)})),1)],2)],1),a("template",{slot:"primary-button"},[e._v("Seleccionar")])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("cv-loading",{attrs:{active:e.isActiveLoading,overlay:!0}})],1)},Hn=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("h2",[e._v("Importar Parcelas para Hit22 desde .kml o .kmz "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("855c")}})])])])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[a("b",[e._v("ATENCION: ")]),e._v("Confirmar la exportacion supone el borrado de las parcelas de la empresa seleccionada para crear las parcelas del archivo sin duplicados.")])])])}],qn={name:"Monitor",components:{AlertaGeneral:Pe},data(){return{isActiveLoading:!1,exportarExcel:!1,keyComponentMonitor:0,visibleModal:!1,data:{},fechasArr:Array(),selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],selectValueCapa:"",SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:"",valueDates:[],valueRange:[],timeValuesArr:[],nombreInforme:"Gráfico - "+this.getNow(),checked_clouds:!1,tipoAlerta:"error",mensajeAlerta:"",fechasParcelasNumImages:{},verCargandoImagenes:!1,disabledGenerar:!1,verErrorIntervalo:!1,verCargandoFechasBbox:!1,initialStep:1,steps:["Nombre de informe y Selección de Parcelas","Selección de capas y Nubes","Selección de Fechas","Resumen de Informe"],open:[!1,!1,!1,!1],verTimeoutNumImg:!1,file:null,procesadas:[],errores:[],cambiadas:[],totalParcelas:0}},methods:{actionVisibleModal(e){this.visibleModal=e},onChangeFiles(e){this.file=e},importarParcelas(){return this.file?this.selectValueEmpresa?(console.info("Importando parcelas"),this.isActiveLoading=!0,void Ca(this.file[0].file,this.selectValueEmpresa,!1,"true").then(e=>{this.isActiveLoading=!1,console.info(e.data);const a=[];e.data.procesadas.map(e=>{a.push([e])});const t=[];e.data.Overlaps.map(e=>{t.push([e])});const s=[];e.data.cambiadas.map(e=>{s.push([e])}),this.procesadas=a,this.errores=t,this.totalParcelas=e.data.totalparcelas,this.cambiadas=s}).catch(e=>{this.isActiveLoading=!1,console.error(e),this.mensajeAlerta="Error al importar parcelas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},importarParcelasConfirmar(){return this.file?this.selectValueEmpresa?(console.info("Importando parcelas"),this.isActiveLoading=!0,Ca(this.file[0].file,this.selectValueEmpresa,!0,"true").then(e=>{console.log(e),this.isActiveLoading=!1,this.mensajeAlerta="Parcelas importadas correctamente",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}).catch(e=>{console.log(e),this.isActiveLoading=!1,this.mensajeAlerta="Error al importar parcelas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}),this.mensajeAlerta="Parcelas importadas correctamente",this.tipoAlerta="success",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"1":t="name";break;case"2":t="area";break;case"3":t="enterprise";break;default:t="name"}"ascending"==s&&this.allParcelsOfEnterprisesFilter.sort((e,a)=>parseFloat(e.name)-parseFloat(a.name)),console.info(t)}},mounted:function(){this.getNow()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?ta().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data;const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},Yn=qn,Zn=(t("eda3"),Object(u["a"])(Yn,Tn,Hn,!1,null,"71c99730",null)),Qn=Zn.exports,Jn={name:"GenGraficos",components:{Board:Qe,InportHitParcelsKMLComponent:Qn},mounted:function(){}},Xn=Jn,Wn=Object(u["a"])(Xn,Un,Vn,!1,null,null,null),Kn=Wn.exports,ec=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("InportParcelsGeoJSONComponent")],1)],1)},ac=[],tc=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("br"),e._m(0),a("br"),e._m(1),a("br"),a("div",{staticClass:"bx--row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-file-uploader",{ref:"fileUploader",attrs:{kind:"",label:"Subir Archivo",helperText:"El formato permitido es .zip",accept:[".zip"],"clear-on-reselect":!1,"initial-state-uploading":!1,multiple:!1,removable:!0,"remove-aria-label":"Custom remove aria label"},on:{change:e.onChangeFiles}})],1),a("div",{staticClass:"bx--col"},[a("cv-select",{attrs:{theme:"",label:"Acción a realizar","hide-label":!1,inline:!1,disabled:!1},on:{change:e.actionChangedToggleModo}},[a("cv-select-option",{attrs:{value:"true"}},[e._v("Eliminar")]),a("cv-select-option",{attrs:{value:"false"}},[e._v("Añadir")])],1)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-button",{attrs:{kind:"primary",disabled:!1},on:{click:e.importarParcelas}},[e._v(" Subir archivo y ver resumen de importación ")])],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Parcelas compatibles con Sentinel "+e._s(e.procesadas.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.procesadas}})],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Errores en Sentinel "+e._s(e.errores.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.errores}})],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Cambiadas con respecto a la importación anterior "+e._s(e.cambiadas.length))]),a("br"),a("cv-data-table",{ref:"table",attrs:{columns:["Nombre de parcela"],data:e.cambiadas}})],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Se van a importar "+e._s(e.totalParcelas)+" Parcelas")]),a("cv-button",{attrs:{kind:"primary",disabled:!e.totalParcelas},on:{click:e.importarParcelasConfirmar}},[e._v(" Confirmar importación ")])],1)]),a("br"),a("cv-modal",{attrs:{"close-aria-label":"Cerrar",size:"large",visible:e.visibleModal,"auto-hide-off":!1},on:{"primary-click":e.actionPrimary,"modal-hidden":function(a){return e.actionVisibleModal(!1)}}},[a("template",{slot:"title"},[e._v("Selección de Parcelas")]),e._e(),a("template",{staticStyle:{"padding-right":"0%"},slot:"content"},[a("p",[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"heactareas",label:this.$t("graficos.hectareas"),sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button")],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)})),1)],2)],1),a("template",{slot:"primary-button"},[e._v("Seleccionar")])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("cv-loading",{attrs:{active:e.isActiveLoading,overlay:!0}})],1)},sc=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("h2",[e._v("Importar Parcelas desde GeoJSON "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("855c")}})])])])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Para poder importar parcelas desde un .zip, este tiene que contener archivos con las extensiones xxx.geojson")])])])}],rc={name:"Monitor",components:{AlertaGeneral:Pe},data(){return{isActiveLoading:!1,exportarExcel:!1,keyComponentMonitor:0,visibleModal:!1,data:{},fechasArr:Array(),selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],selectValueCapa:"",SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:"",valueDates:[],valueRange:[],timeValuesArr:[],nombreInforme:"Gráfico - "+this.getNow(),checked_clouds:!1,tipoAlerta:"error",mensajeAlerta:"",fechasParcelasNumImages:{},verCargandoImagenes:!1,disabledGenerar:!1,verErrorIntervalo:!1,verCargandoFechasBbox:!1,initialStep:1,steps:["Nombre de informe y Selección de Parcelas","Selección de capas y Nubes","Selección de Fechas","Resumen de Informe"],open:[!1,!1,!1,!1],verTimeoutNumImg:!1,file:null,procesadas:[],errores:[],cambiadas:[],totalParcelas:0,eliminar:""}},methods:{actionVisibleModal(e){this.visibleModal=e},onChangeFiles(e){this.file=e},importarParcelas(){return this.file?this.selectValueEmpresa?(console.log(this.eliminar),""==this.eliminar?(console.info("No hay acción"),this.mensajeAlerta="Debe seleccionar una acción",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("Importando parcelas"),this.isActiveLoading=!0,void Ea(this.file[0].file,this.selectValueEmpresa,!1,this.eliminar).then(e=>{this.isActiveLoading=!1,console.info(e.data);const a=[];e.data.procesadas.map(e=>{a.push([e])});const t=[];e.data.Overlaps.map(e=>{t.push([e])});const s=[];e.data.cambiadas.map(e=>{s.push([e])}),this.procesadas=a,this.errores=t,this.totalParcelas=e.data.totalparcelas,this.cambiadas=s}).catch(e=>{this.isActiveLoading=!1,console.error(e),this.mensajeAlerta="Error al importar parcelas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}))):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},importarParcelasConfirmar(){return this.file?this.selectValueEmpresa?""==this.eliminar?(console.info("No hay accion"),this.mensajeAlerta="Debe seleccionar una acción",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("Importando parcelas"),this.isActiveLoading=!0,Ea(this.file[0].file,this.selectValueEmpresa,!0,this.eliminar).then(()=>{this.isActiveLoading=!1,this.mensajeAlerta="Parcelas importadas correctamente",this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(e=>{this.isActiveLoading=!1,console.error(e),this.mensajeAlerta="Error al importar parcelas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()}),this.mensajeAlerta="Parcelas importadas correctamente",this.tipoAlerta="success",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"1":t="name";break;case"2":t="area";break;case"3":t="enterprise";break;default:t="name"}"ascending"==s&&this.allParcelsOfEnterprisesFilter.sort((e,a)=>parseFloat(e.name)-parseFloat(a.name)),console.info(t)},actionChangedToggleModo(e){this.eliminar=e,console.log(this.eliminar)}},mounted:function(){this.getNow()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?ta().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data;const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},ic=rc,oc=(t("8af2"),Object(u["a"])(ic,tc,sc,!1,null,"0d9986de",null)),lc=oc.exports,nc={name:"GenGraficos",components:{Board:Qe,InportParcelsGeoJSONComponent:lc},mounted:function(){}},cc=nc,dc=Object(u["a"])(cc,ec,ac,!1,null,null,null),pc=dc.exports,hc=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("InportCampanaComponent")],1)],1)},mc=[],uc=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("br"),e._m(0),a("br"),e._m(1),a("br"),a("div",{staticClass:"bx--row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-file-uploader",{ref:"fileUploader",attrs:{kind:"",label:"Subir Archivo",helperText:"El formato permitido es .xlsx o .xls",accept:[".xlsx",".xls"],"clear-on-reselect":!1,"initial-state-uploading":!1,multiple:!1,removable:!0,"remove-aria-label":"Custom remove aria label"},on:{change:e.onChangeFiles}})],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-button",{attrs:{kind:"primary",disabled:!1},on:{click:e.importarCampana}},[e._v(" Importar ")])],1)]),a("br"),a("h2",[e._v("Pestaña parcelas")]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Parcelas importadas "+e._s(e.procesadas.length))]),a("br"),a("cv-data-table",{attrs:{columns:["ID","PARCELA","CULTIVO","VARIEDAD","PLANTAS POR HA"]}},[e._l(e.procesadas,(function(t){return a("template",{slot:"data"},e._l(t,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.ID_FINCA))]),a("cv-data-table-cell",[e._v(e._s(t.PARCELA))]),a("cv-data-table-cell",[e._v(e._s(t.CULTIVO))]),a("cv-data-table-cell",[e._v(e._s(t.VARIEDAD))]),a("cv-data-table-cell",[e._v(e._s(t.PLANTAS_HA))])],1)})),1)}))],2)],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Errores parcelas "+e._s(e.erroresParcelas.length))]),a("br"),a("cv-data-table",{attrs:{columns:["ID FINCA","PARCELA","ERROR"]}},[e._l(e.erroresParcelas,(function(t){return a("template",{slot:"data"},e._l(t,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.ID_FINCA))]),a("cv-data-table-cell",[e._v(e._s(t.PARCELA))]),a("cv-data-table-cell",[e._v(e._s(t.ERROR))])],1)})),1)}))],2)],1)]),a("br"),a("h2",[e._v("Pestaña siembra")]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Siembras importadas "+e._s(e.siembras.length))]),a("br"),a("cv-data-table",{attrs:{columns:["ID","PARCELA","FECHAS","VARIEDAD","PLANTAS REALES HA"]}},[e._l(e.siembras,(function(t){return a("template",{slot:"data"},e._l(t,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.ID_FINCA))]),a("cv-data-table-cell",[e._v(e._s(t.PARCELA))]),a("cv-data-table-cell",[e._v(e._s(t.FECHA_INICIO)+" - "+e._s(t.FECHA_FIN))]),a("cv-data-table-cell",[e._v(e._s(t.VARIEDAD))]),a("cv-data-table-cell",[e._v(e._s(t.PLANTAS_REALES_HA))])],1)})),1)}))],2)],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Errores siembras "+e._s(e.erroresSiembras.length))]),a("br"),a("cv-data-table",{attrs:{columns:["ID FINCA","PARCELA","ERROR"]}},[e._l(e.erroresSiembras,(function(t){return a("template",{slot:"data"},e._l(t,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.ID_FINCA))]),a("cv-data-table-cell",[e._v(e._s(t.PARCELA))]),a("cv-data-table-cell",[e._v(e._s(t.ERROR))])],1)})),1)}))],2)],1)]),a("br"),a("h2",[e._v("Pestaña Producción")]),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Producciones importadas "+e._s(e.producciones.length))]),a("br"),a("cv-data-table",{attrs:{columns:["ID","PARCELA","CULTIVO","VARIEDAD","PRODUCCION","FECHA TERMINO"]}},[e._l(e.producciones,(function(t){return a("template",{slot:"data"},e._l(t,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.ID_FINCA))]),a("cv-data-table-cell",[e._v(e._s(t.PARCELA))]),a("cv-data-table-cell",[e._v(e._s(t.CULTIVO))]),a("cv-data-table-cell",[e._v(e._s(t.VARIEDAD))]),a("cv-data-table-cell",[e._v(e._s(t.PRODUCCION)+" "+e._s(t.TIPO_UD))]),a("cv-data-table-cell",[e._v(e._s(t.FECHA_FIN))])],1)})),1)}))],2)],1),a("div",{staticClass:"bx--col"},[a("p",[e._v("Errores producción "+e._s(e.erroresProducciones.length))]),a("br"),a("cv-data-table",{attrs:{columns:["ID FINCA","PARCELA","ERROR"]}},[e._l(e.erroresProducciones,(function(t){return a("template",{slot:"data"},e._l(t,(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.ID_FINCA))]),a("cv-data-table-cell",[e._v(e._s(t.PARCELA))]),a("cv-data-table-cell",[e._v(e._s(t.ERROR))])],1)})),1)}))],2)],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-button",{attrs:{kind:"primary",disabled:!e.totalParcelas},on:{click:e.importarCampanaConfirmar}},[e._v(" Confirmar importación ")])],1)]),a("br"),a("cv-modal",{attrs:{"close-aria-label":"Cerrar",size:"large",visible:e.visibleModal,"auto-hide-off":!1},on:{"primary-click":e.actionPrimary,"modal-hidden":function(a){return e.actionVisibleModal(!1)}}},[a("template",{slot:"title"},[e._v("Selección de Parcelas")]),e._e(),a("template",{staticStyle:{"padding-right":"0%"},slot:"content"},[a("p",[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"heactareas",label:this.$t("graficos.hectareas"),sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button")],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)})),1)],2)],1),a("template",{slot:"primary-button"},[e._v("Seleccionar")])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}}),a("cv-loading",{attrs:{active:e.isActiveLoading,overlay:!0}})],1)},fc=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("h2",[e._v("Importar Campaña desde .xlsx "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("855c")}})])])])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[e._v('Para poder importar los datos de campaña, el Excel debe contener las pestañas "Parcelas", "Datos Producción" y "Siembras"')])])])}],vc={name:"Monitor",components:{AlertaGeneral:Pe},data(){return{isActiveLoading:!1,exportarExcel:!1,keyComponentMonitor:0,visibleModal:!1,data:{},fechasArr:Array(),selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],selectValueCapa:"",SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:"",valueDates:[],valueRange:[],timeValuesArr:[],nombreInforme:"Gráfico - "+this.getNow(),checked_clouds:!1,tipoAlerta:"error",mensajeAlerta:"",fechasParcelasNumImages:{},verCargandoImagenes:!1,disabledGenerar:!1,verErrorIntervalo:!1,verCargandoFechasBbox:!1,initialStep:1,steps:["Nombre de informe y Selección de Parcelas","Selección de capas y Nubes","Selección de Fechas","Resumen de Informe"],open:[!1,!1,!1,!1],verTimeoutNumImg:!1,file:null,procesadas:[],erroresParcelas:[],cambiadas:[],totalParcelas:0,siembras:[],erroresSiembras:[],producciones:[],erroresProducciones:[]}},methods:{actionVisibleModal(e){this.visibleModal=e},onChangeFiles(e){this.file=e},importarCampana(){return this.file?this.selectValueEmpresa?(console.info("Importando campaña"),this.isActiveLoading=!0,void xa(this.file[0].file,this.selectValueEmpresa,!1).then(e=>{this.isActiveLoading=!1;const a=[];var t=0;e.data.campanas.map(e=>{a.push([e]),t++});const s=[];e.data.erroresParcelas.map(e=>{s.push([e])});const r=[];e.data.siembra.map(e=>{r.push([e])});const i=[];e.data.erroresSiembra.map(e=>{i.push([e])});const o=[];e.data.produccion.map(e=>{o.push([e])});const l=[];e.data.erroresProduccion.map(e=>{l.push([e])}),this.procesadas=a,this.erroresParcelas=s,this.siembras=r,this.erroresSiembras=i,this.producciones=o,this.erroresProducciones=l,this.totalParcelas=t}).catch(e=>{this.isActiveLoading=!1,console.error(e),this.mensajeAlerta="Error al importar campaña",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},importarCampanaConfirmar(){return this.file?this.selectValueEmpresa?(console.info("Importando campaña"),this.isActiveLoading=!0,void xa(this.file[0].file,this.selectValueEmpresa,!0).then(()=>{this.isActiveLoading=!1,this.mensajeAlerta="Campaña importada correctamente",this.tipoAlerta="success",this.$refs.alertaGenerall.verAlerta()}).catch(e=>{this.isActiveLoading=!1,console.error(e),this.mensajeAlerta="Error al importar campaña",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta()})):(console.info("No hay empresa"),this.mensajeAlerta="Debe seleccionar una empresa",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta()):(console.info("No hay archivo"),this.mensajeAlerta="Debe seleccionar un archivo",this.tipoAlerta="error",void this.$refs.alertaGenerall.verAlerta())},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"1":t="name";break;case"2":t="area";break;case"3":t="enterprise";break;default:t="name"}"ascending"==s&&this.allParcelsOfEnterprisesFilter.sort((e,a)=>parseFloat(e.name)-parseFloat(a.name)),console.info(t)}},mounted:function(){this.getNow()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?ta().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data;const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},bc=vc,_c=(t("1b79"),Object(u["a"])(bc,uc,fc,!1,null,"6bb2b28c",null)),gc=_c.exports,Ac={name:"GenGraficos",components:{Board:Qe,InportCampanaComponent:gc},mounted:function(){}},yc=Ac,$c=Object(u["a"])(yc,hc,mc,!1,null,null,null),Cc=$c.exports,Ec=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("MonitorComponent")],1)],1)},xc=[],wc=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid"},[a("br"),e._m(0),a("br"),a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Utiliza los filtros que encontrarás a continuación para solicitar a Sentinel la actualización de los datos.")]),a("br"),a("p",[a("b",[e._v(e._s(e.$t("adminEnterprise.info_nav")))])])])]),a("br"),a("div",{staticClass:"bx--row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"bx--col-sm-12 bx--col-md-2 bx--col-lg-2"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),e.is_superuser||e.is_systemadmin?a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[e.is_superuser||e.is_systemadmin?a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]):e._e(),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2):e._e(),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(e.getSortedCooperativa(t).enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-2 bx--col-lg-2"},[a("cv-button",{staticStyle:{"margin-top":"17px"},attrs:{kind:"primary"},on:{click:function(a){return e.actionVisibleModal(!0)}}},[e._v("Seleccionar Parcelas")])],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-2 bx--col-lg-2"},[a("cv-select",{attrs:{label:e.$t("graficos.sel_layer_sen")},model:{value:e.selectValueCapa,callback:function(a){e.selectValueCapa=a},expression:"selectValueCapa"}},[a("cv-select-option",{attrs:{value:"NDVI"}},[e._v(e._s(e.$t("graficos.NDVI")))]),a("cv-select-option",{attrs:{value:"MOISTURE_INDEX"}},[e._v(e._s(e.$t("graficos.mostisture_index")))])],1)],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-3 bx--col-lg-3"},[a("cv-date-picker",{attrs:{kind:"range",dateLabel:e.$t("graficos.fecha_incio"),"date-end-label":e.$t("graficos.fecha_fin"),"cal-options":e.calOptions,value:e.valueRange},on:{change:e.actionChangeDateRange}})],1),a("div",{staticClass:"bx--col-sm-12 bx--col-md-2 bx--col-lg-2"},[a("cv-button",{staticStyle:{"margin-top":"17px"},attrs:{kind:"primary",disabled:e.disabledGenerar},on:{click:function(a){return e.generarInforme()}}},[e._v("Actualizar datos")])],1)]),a("br"),a("cv-modal",{attrs:{"close-aria-label":"Cerrar",size:"large",visible:e.visibleModal,"auto-hide-off":!1},on:{"primary-click":e.actionPrimary,"modal-hidden":function(a){return e.actionVisibleModal(!1)}}},[a("template",{slot:"title"},[e._v("Selección de Parcelas")]),e._e(),a("template",{staticStyle:{"padding-right":"0%"},slot:"content"},[a("p",[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"heactareas",label:this.$t("graficos.hectareas"),sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination,sort:e.onSort},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button")],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(e.is_superuser?t.id+" - ":"")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id)))])],1)})),1)],2)],1),a("template",{slot:"primary-button"},[e._v("Seleccionar")])],2),a("cv-modal",{ref:"modal_procesando"},[a("template",{slot:"label"},[e._v("Solicitud en proceso")]),a("template",{slot:"title"},[e._v("Solicitud en proceso")]),a("template",{slot:"content"},[a("p",[e._v(" La solicitud ha sido recibida y se está procesando ")])]),a("template",{slot:"primary-button"},[e._v("Aceptar")])],2),a("AlertaGeneral",{ref:"alertaGenerall",attrs:{tituloAlert:e.mensajeAlerta,tipoAlert:e.tipoAlerta}})],1)},Sc=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("h2",[e._v("Actualizar monitor "),a("img",{staticStyle:{width:"40px"},attrs:{src:t("855c")}})])])])}],Pc={name:"Monitor",components:{AlertaGeneral:Pe},data(){return{exportarExcel:!1,keyComponentMonitor:0,visibleModal:!1,data:{},fechasArr:Array(),selectValueEmpresa:"",flagIndicatingDataHasBeenLoadedInVariables:!1,is_superuser:!1,is_staff:!1,is_systemadmin:!1,is_enterpriseadmin:!1,is_coop_user:!1,arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],selectValueCapa:"",SentinelLayer:"NDVI",calOptions:{dateFormat:"Y-m-d"},time:"",valueDates:[],valueRange:[],timeValuesArr:[],nombreInforme:"Gráfico - "+this.getNow(),checked_clouds:!1,tipoAlerta:"error",mensajeAlerta:"",fechasParcelasNumImages:{},verCargandoImagenes:!1,disabledGenerar:!1,verErrorIntervalo:!1,verCargandoFechasBbox:!1,initialStep:1,steps:["Nombre de informe y Selección de Parcelas","Selección de capas y Nubes","Selección de Fechas","Resumen de Informe"],open:[!1,!1,!1,!1],verTimeoutNumImg:!1}},methods:{getSortedCooperativa(e){return{...e,enterprises:e.enterprises.slice().sort((e,a)=>e.name.localeCompare(a.name))}},actionVisibleModal(e){this.visibleModal=e},actionChangeAccordeon(e){this.open=this.$refs.acc.state.map((a,t)=>t===e.changedIndex)},getData(e){const a=this.allParcelsOfEnterprisesFilter.filter(a=>e==String(a.id)),t=[];let s=0,r=[];return this.fechasParcelasNumImages[e]&&(this.fechasParcelasNumImages[e].resultados.map(e=>{e.properties.cloudCoverPercentage>s&&(s=e.properties.cloudCoverPercentage),t.push(e.properties.date)}),r=[...new Set(t)]),`<td>${a[0].properties.name}</td>\n            <td>${this.fechasParcelasNumImages[e]?r.length:""}</td>\n            <td>${this.fechasParcelasNumImages[e]?r:""}</td>\n            <td>${this.checked_clouds?this.fechasParcelasNumImages[e]?s+"%":"":"n/a"}</td>`},generarInforme(){const e=this.allParcelsOfEnterprisesFilter.filter(e=>this.rowSelects.includes(String(e.id))),a=[];return e.map(e=>a.push(e.id)),0===this.timeValuesArr.length?(this.mensajeAlerta="No se ha seleccionado ningún intervalo de fechas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1):0===this.selectValueCapa.length?(this.mensajeAlerta="No se ha seleccionado ninguna capa de Sentinel",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1):3==this.selectValueEmpresa.length?(this.mensajeAlerta="No se pueden seleccionar todas las empresas",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1):36!=this.selectValueEmpresa.length?(this.mensajeAlerta="No se ha seleccionado ninguna empresa",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1):void("NDVI"===this.selectValueCapa?Dl(this.timeValuesArr[0],this.timeValuesArr[1],a,this.selectValueEmpresa).then(e=>{this.data=e.data,this.fechasArr=Object.keys(e.data),this.keyComponentMonitor+=1,this.$refs.modal_procesando.show()}).catch(()=>(this.mensajeAlerta="No se ha podido completar la solicitud",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1)):Nl(this.timeValuesArr[0],this.timeValuesArr[1],a,this.selectValueEmpresa).then(e=>{this.data=e.data,this.fechasArr=Object.keys(e.data),this.keyComponentMonitor+=1,this.$refs.modal_procesando.show()}).catch(()=>(this.mensajeAlerta="No se ha podido completar la solicitud",this.tipoAlerta="error",this.$refs.alertaGenerall.verAlerta(),this.verErrorIntervalo=!0,!1)))},actionChangeDateRange(e){this.disabledGenerar=!1,this.verErrorIntervalo=!1,this.timeValuesArr=[e.startDate,e.endDate],this.time=`${e.startDate}/${e.endDate}`},chageCapas(e){this.SentinelLayer=e},seleccionaEmpresa(e){const a=[];if("all"==e)ra().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}},getNow(){const e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return a},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onSort(e){const a=e.index;let t="";const s=e.order;switch(a){case"0":t="name";break;case"1":t="name";break;case"2":t="area";break;case"3":t="enterprise";break;default:t="name"}"ascending"==s&&this.allParcelsOfEnterprisesFilter.sort((e,a)=>parseFloat(e.name)-parseFloat(a.name)),console.info(t)}},mounted:function(){this.getNow()},beforeCreate(){Te().then(e=>{const a=e.data[0];He(e.data[0].user).then(e=>{this.is_superuser=e.data.is_superuser,this.is_staff=e.data.is_staff,this.is_systemadmin=e.data.is_systemadmin,this.is_enterpriseadmin=e.data.is_enterpriseadmin,this.is_coop_user=a.cooperative_user,this.is_superuser||this.is_systemadmin?ra().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data.slice().sort((e,a)=>e.name.localeCompare(a.name));const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}):!this.is_enterpriseadmin&&!this.is_staff||this.is_coop_user?this.is_coop_user&&La(a.enterprise_id).then(e=>{this.arrCooperativas=[e.data],this.flagIndicatingDataHasBeenLoadedInVariables=!0}):aa(a.enterprise_id).then(async e=>{this.arrEmpresas=[e.data],this.arrEmpresasList=[e.data];const a=[];e.data.parcels.features.map(e=>{a.push(e)}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0}),(this.is_superuser||this.is_systemadmin)&&ja().then(async e=>{this.arrCooperativas=e.data}),this.isActiveLoading=!1,this.isVisibleLoad=!1})})}},kc=Pc,Ic=(t("7d05"),Object(u["a"])(kc,wc,Sc,!1,null,"bd2e0dc8",null)),jc=Ic.exports,Lc={name:"GenGraficos",components:{Board:Qe,MonitorComponent:jc},mounted:function(){}},Mc=Lc,Oc=Object(u["a"])(Mc,Ec,xc,!1,null,null,null),Nc=Oc.exports,Dc=function(){var e=this,a=e._self._c;return a("div",[a("Board"),a("div",{staticClass:"MapView"},[a("ParcelsToCheckHasComponent")],1)],1)},zc=[],Rc=function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--grid",on:{mousedown:e.keepPositionScroll,mouseup:e.putPositionScroll}},[e._m(0),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("cv-select",{attrs:{theme:"",label:e.$t("map.listado_empresas"),"hide-label":!1,inline:!1,disabled:!1},on:{change:e.seleccionaEmpresa},model:{value:e.selectValueEmpresa,callback:function(a){e.selectValueEmpresa=a},expression:"selectValueEmpresa"}},[a("cv-select-option",{attrs:{value:"",disabled:"",selected:"",hidden:""}},[e._v(e._s(e.$t("map.sel_empresa")))]),a("cv-select-optgroup",{attrs:{label:"Todas las Empresas"}},[a("cv-select-option",{attrs:{value:"all"}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(e.arrEmpresasList,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2),e._l(e.arrCooperativas,(function(t){return a("cv-select-optgroup",{key:t.id,attrs:{label:"Cooperativa "+t.name}},[a("cv-select-option",{attrs:{value:"coop_"+t.id}},[e._v(e._s(e.$t("map.most_todas_empresas")))]),e._l(t.enterprises,(function(t){return a("cv-select-option",{key:t.id,attrs:{value:String(t.id)}},[e._v(" "+e._s(t.name)+" ")])}))],2)}))],2)],1)]),a("br"),a("div",{staticClass:"bx--row"},[a("div",{staticClass:"bx--col"},[a("div",{attrs:{id:"sentinelLayersList"}},[a("p",{staticStyle:{"font-size":"14px"}},[e._v("Selecciona a continuación las parcelas sobre las que quieres realizar la consulta. Puedes utilizar el buscador para encontrar la/s parcela/s que necesitas. Para poder ver el nombre de todas las parcelas, por favor utiliza el selector que encontrarás en la parte inferior de la tabla.")]),a("br"),a("cv-data-table",{ref:"tableLstadoT2MultiCoop",attrs:{sortable:!1,pagination:{numberOfItems:e.allParcelsOfEnterprisesFilter.length,pageSizes:[{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:e.allParcelsOfEnterprisesFilter.length,label:"Todas"}]},columns:[{key:"name",label:this.$t("graficos.nombre"),sortable:!1},{key:"description",label:this.$t("graficos.descrip"),sortable:!1},{key:"Puntos",label:this.$t("graficos.puntos"),sortable:!1},{key:"heactareas en BBDD",label:"Back",sortable:!1},{key:"heactareas Recalculadas",label:"Front",sortable:!1},{key:"enterprise",label:"Empresa",sortable:!1}],title:e.$t("graficos.parcel_list"),searchLabel:"Filter",searchPlaceholder:"Filter",searchClearLabel:"Clear filter"},on:{pagination:e.actionOnPagination},model:{value:e.rowSelects,callback:function(a){e.rowSelects=a},expression:"rowSelects"}},[a("template",{slot:"actions"},[a("cv-search",{attrs:{placeholder:e.$t("graficos.buscar_nombre")},on:{input:e.onBuscar}})],1),a("template",{slot:"batch-actions"},[a("cv-button",{on:{click:e.crear_excel}},[e._v(" Exportar Excel ")])],1),a("template",{slot:"data"},e._l(e.allParcelsOfEnterprisesFilter.slice(e.start,e.start+e.length),(function(t){return a("cv-data-table-row",{key:""+t.id,attrs:{value:""+t.id,"aria-label-for-batch-checkbox":`Custom aria label for row ${t.id} batch`}},[a("cv-data-table-cell",[e._v(e._s(t.id+" - ")+e._s(t.properties.name))]),a("cv-data-table-cell",[e._v(e._s(t.properties.description))]),a("cv-data-table-cell",{class:{errorDraw:e.getPuntos(t.id)>80}},[e._v(e._s(e.getPuntos(t.id)))]),a("cv-data-table-cell",[e._v(e._s(t.properties.area.toFixed(2)))]),a("cv-data-table-cell",[e._v(e._s(e.getCalculateHas(t.id))+" "+e._s(e.getCalculateHas(t.id)!=t.properties.area.toFixed(2)?"⚠":""))]),a("cv-data-table-cell",[e._v(e._s(e.getNameEnterprise(t.properties.enterprise_id))+" ")])],1)})),1)],2)],1)])])])},Gc=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"bx--row",attrs:{id:"txt-explicativo"}},[a("div",{staticClass:"bx--col"},[a("p",[e._v("Check las has de la parcelas")])])])}],Fc=t("4cdf"),Bc=t("5bc3"),Uc=t("25ca"),Vc={name:"ParcelsToSentinelComponent",components:{},data(){return{selectValueEmpresa:"",arrEmpresas:[],arrEmpresasList:[],arrCooperativas:[],allParcelsOfEnterprises:[],allParcelsOfEnterprisesFilter:[],start:0,length:10,rowSelects:[],listadoParcelas:Array,listadoParcelasFilter:Array,rowSize:"",autoWidth:!1,sortable:!1,title:"Listado de parcelas sin Instancia en Sentinel",actionBarAriaLabel:"Custom action bar aria label",batchCancelLabel:"Cancel",zebra:!0,columns:[{key:"name",label:this.$t("graficos.nombre")},{key:"description",label:this.$t("graficos.descrip")},{key:"heactareas",label:this.$t("graficos.hectareas")},{key:"enterprise",label:"Empresa"}]}},methods:{keepPositionScroll(){this.scrollPosition=window.scrollY},putPositionScroll(){setTimeout(()=>{window.scrollTo(0,this.scrollPosition)},0)},crear_excel(){var e=[];const a=this.allParcelsOfEnterprises.filter(e=>this.rowSelects.includes(String(e.id)));a.forEach(a=>{e.push({"Nombre de la parcela":a.properties.name,"Numero de puntos":this.getPuntos(a.id),Back:a.properties.area.toFixed(2),Front:this.getCalculateHas(a.id),Empresa:this.getNameEnterprise(a.properties.enterprise_id)})});const t=Uc["a"].json_to_sheet(e),s=Uc["a"].book_new();Uc["a"].book_append_sheet(s,t,"Hectareas por empresa"),Uc["b"](s,"data.xlsx")},comprobar(){console.info(this.rowSelects);const e=this.allParcelsOfEnterprises.filter(e=>this.rowSelects.includes(String(e.id)));console.info(e),console.info(e[0].geometry);const a=new Fc["a"]({geometry:new Bc["b"](e[0].geometry.coordinates)});a.getGeometry().transform("EPSG:4326","EPSG:3857"),console.info(a.getGeometry());const t=Math.round(Object(ne["a"])(a.getGeometry())/1e4*1e4)/1e4;console.info(t)},getCalculateHas(e){const a=this.allParcelsOfEnterprises.filter(a=>e==a.id),t=new Fc["a"]({geometry:new Bc["b"](a[0].geometry.coordinates)});return t.getGeometry().transform("EPSG:4326","EPSG:3857"),(Math.round(Object(ne["a"])(t.getGeometry())/1e4*1e4)/1e4).toFixed(2)},getPuntos(e){const a=this.allParcelsOfEnterprises.filter(a=>e==a.id),t=new Fc["a"]({geometry:new Bc["b"](a[0].geometry.coordinates)});t.getGeometry().transform("EPSG:4326","EPSG:3857");const s=t.getGeometry();return s.flatCoordinates.length/2},getNameEnterprise(e){const a=this.arrEmpresas.filter(a=>a.id==e);return a[0].name},actionOnPagination(e){this.start=e.start-1,this.length=e.length},onBuscar(e){if(e){const a=this.allParcelsOfEnterprises.filter(a=>a.properties.name.toUpperCase().includes(e.toUpperCase()));this.allParcelsOfEnterprisesFilter=a}else this.allParcelsOfEnterprisesFilter=this.allParcelsOfEnterprises},seleccionaEmpresa(e){const a=[];if("all"==e)ta().then(async e=>{e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a});else{const t=e.split("_");"coop"==t[0]?La(t[1]).then(e=>{e.data.enterprises.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.arrEmpresas=e.data.enterprises,this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a}):aa(e).then(async e=>{e.data.parcels.features.map(e=>{a.push(e)}),this.arrEmpresas=[e.data],this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a})}}},mounted:function(){},beforeCreate(){ta().then(async e=>{this.arrEmpresas=e.data,this.arrEmpresasList=e.data;const a=[];e.data.map(e=>{e.parcels.features.map(e=>{a.push(e)})}),this.allParcelsOfEnterprises=a,this.allParcelsOfEnterprisesFilter=a,this.flagIndicatingDataHasBeenLoadedInVariables=!0})}},Tc=Vc,Hc=(t("4ecd"),Object(u["a"])(Tc,Rc,Gc,!1,null,"9dd42d52",null)),qc=Hc.exports,Yc={name:"Home",components:{Board:Qe,ParcelsToCheckHasComponent:qc},mounted:function(){}},Zc=Yc,Qc=Object(u["a"])(Zc,Dc,zc,!1,null,null,null),Jc=Qc.exports;s["default"].use(i["a"]);const Xc=[{path:"/login",name:"Login",component:Ft},{path:"/",name:"index",component:$t,meta:{requiresAuth:!0}},{path:"/parcelstosent",name:"parcelstosent",component:Kr,meta:{requiresAuth:!0,is_admin:!0}},{path:"/parcelstocheckhas",name:"parcelstocheckhas",component:Jc,meta:{requiresAuth:!0,is_admin:!0}},{path:"/sentinelinstancesrefresh",name:"sentinelinstancesrefresh",component:pi,meta:{requiresAuth:!0,is_admin:!0}},{path:"/gengraficosnew",name:"gengraficosnew",component:Ci,meta:{requiresAuth:!0}},{path:"/monitor",name:"monitor",component:bn,meta:{requiresAuth:!0}},{path:"/importparcelsfromfile",name:"importparcelsfromfile",component:kn,meta:{requiresAuth:!0}},{path:"/importparcelsfromfileKML",name:"importparcelsfromfileKML",component:Bn,meta:{requiresAuth:!0}},{path:"/importparcelsHitfromfileKML",name:"importparcelsHitfromfileKML",component:Kn,meta:{requiresAuth:!0}},{path:"/importparcelsfromGeoJSON",name:"importparcelsfromGeoJSON",component:pc,meta:{requiresAuth:!0}},{path:"/importcampanafromfile",name:"importcampanafromfile",component:Cc,meta:{requiresAuth:!0}},{path:"/actualizarMonitor",name:"actualizarMonitor",component:Nc,meta:{requiresAuth:!0}},{path:"/gengraficosanterioresnew",name:"gengraficosanterioresnew",component:bo,meta:{requiresAuth:!0}},{path:"/about",name:"About",component:()=>t.e("about").then(t.bind(null,"f820"))},{path:"/employees",name:"Employees",component:w,meta:{requiresAuth:!0}},{path:"/groups",name:"Groups",component:R,meta:{requiresAuth:!0}},{path:"/roles",name:"Roles",component:J,meta:{requiresAuth:!0}},{path:"/administracion",name:"Administracion",component:te,meta:{requiresAuth:!0}},{path:"/parcelas",name:"Parcels",component:Le,meta:{requiresAuth:!0}},{path:"/map",name:"Map",component:$t,meta:{requiresAuth:!0}},{path:"/chart",name:"Charts",component:Sl,meta:{requiresAuth:!0,is_admin:!0}},{path:"/admin-enterprises",name:"AdminEnterprises",component:rs,meta:{requiresAuth:!0}},{path:"/admin-users",name:"AdminUsers",component:ds,meta:{requiresAuth:!0}},{path:"/edit-enterprise",name:"EditarEmpresa",component:Ps,meta:{requiresAuth:!0}},{path:"/reset_password",name:"ResetPasswordView",component:Fs,meta:{requiresAuth:!1}},{path:"/admin-cooperatives",name:"AdminCooperatives",component:Ws,meta:{requiresAuth:!0}},{path:"/edit-cooperative",name:"EditCooperative",component:$r,meta:{requiresAuth:!0}}],Wc=new i["a"]({mode:"history",routes:Xc});Wc.beforeEach((e,a,t)=>{e.matched.some(e=>e.meta.requiresAuth),e.matched.some(e=>e.meta.requiresAuth)?null==sessionStorage.getItem("apiAccess")?t({path:"/login",params:{nextUrl:e.fullPath}}):Te().then(a=>{He(a.data[0].user).then(a=>{e.matched.some(e=>e.meta.is_admin)?1==a.data.is_superuser?t():t({name:"/"}):t()})}):e.matched.some(e=>e.meta.guest)?null==localStorage.getItem("apiAccess")?t():t({name:"index"}):t()});var Kc=Wc,ed=t("a925"),ad=(t("5e20"),t("e615")),td=t("27ad"),sd=t("2afe"),rd=t("1dc2"),id=t("3cdf"),od=t("cdb2"),ld=t("1b96"),nd=t("9047"),cd=t("12e5"),dd=t("77ff"),pd=t("fff8"),hd=t("be45"),md=t("268d"),ud=t("4bb8"),fd=t("c4cf"),vd=t("ac8c"),bd=t("4328"),_d=t.n(bd),gd=t("1cf8"),Ad=(t("2b69"),t("0628")),yd=t.n(Ad),$d=t("755e"),Cd=t("ebfd"),Ed=t.n(Cd),xd=t("c1df"),wd=t.n(xd);s["default"].use(Ed.a),s["default"].use($d,{load:{key:"AIzaSyCUm1xbbEuxPBCHkQJ8oXmCgtB8NotFsMo",libraries:"places"}}),s["default"].filter("formatDate",(function(e){if(e)return wd()(String(e)).format("DD/MM/YYYY hh:mm")})),s["default"].prototype.$sentinelURL="https://services.sentinel-hub.com",s["default"].prototype.$apiURL="https://api-d4sf.smartbits-es.com/api/v1.0",s["default"].prototype.$apiURLMedia="https://api-d4sf.smartbits-es.com/media",console.log("https://api-d4sf.smartbits-es.com/api/v1.0"),s["default"].prototype.$apiKeyBing="Ajf7rbOuQ1cg5-D5vOeqPxZ7PR1k5Uc_3XMYEZSRGqqx0-LdXnYfflWQfQfIHD5-",s["default"].prototype.$enterprise="";const Sd="33467c23-fada-4405-8a5b-33ee38169273",Pd="&O97/<>sWmmUrI2KctxxVf9iCQi*~eN|:I6R%o6:",kd=c.a.create({baseURL:"https://services.sentinel-hub.com"}),Id={headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}},jd=_d.a.stringify({client_id:Sd,client_secret:Pd,grant_type:"client_credentials"});kd.post("/oauth/token",jd,Id).then(e=>{Object.assign(kd.defaults,{headers:{authorization:"Bearer "+e.data.access_token}}),localStorage.setItem("ApiAccessToken",e.data.access_token)}),s["default"].use(ad["a"]),s["default"].use(ad["a"]),s["default"].use(td["a"],{components:{TrashCan32:sd["a"],Edit32:rd["a"],Download16:id["a"],Logout20:od["a"],UserAvatarFilledAlt20:ld["a"],ChevronSortUp20:nd["a"],ChevronSortDown20:cd["a"],Charbar20:dd["a"],Analytics20:pd["a"],Translate20:hd["a"],Language20:md["a"],Location16:ud["a"],AppConnectivity32:fd["a"],Account:vd["a"]}}),s["default"].use(gd["a"],{dataProjection:"EPSG:4326"}),s["default"].use(qi["d"]),s["default"].use(yd.a),s["default"].use(ed["a"]),s["default"].config.productionTip=!1;const Ld={es:{app:{monitor:"Monitor",dashboard:"Dashboard",administracion:"Administración",administracion_empresas:"Administración de Empresas",administracion_usuarios:"Administración de Usuarios",graficos:"Gráficos",alertas:"Alertas",perfil:"Perfil",desconect:"Desconectar",administracion_cooperativas:"Administración de Cooperativas",emprise:"Empresa"},map:{most_todas_empresas:"Mostrar todas las Parcelas",sel_empresa:"Selecciona una Empresa",listado_empresas:"Listado de Empresas",listado_parcelas:"Listado de parcelas",listado_usuarios:"Listado de usuarios",parcelas_de:"Parcelas de",colors:"Colores",fechas_disponibles:"Fechas Disponibles",edit_rapido:"Edición Rápida",guardar:"Guardar",cancelar:"Cancelar",elimina_parcela:"Eliminar Parcela",eliminar:"Eliminar",parcela_nueva:"Nueva Parcela",crear_parcela:"Crear Parcela",seguro:"¿Estás seguro?",seguro_parcel_del:"¿Seguro que quieres eliminar la parcela?",sent_layers:"Sentinel Layers",sent_layers_sel:"Selecciona un Layer de Sentinel",fecha:"Fecha",opacidad:"Opacidad",nombre_parcela:"Nombre de la parcela",place_nombre_parcela:"Nombre...",desc_parcela:"Descripción de la Parcela",place_desc_parcela:"Descripción...",parcela_solapada_con:"La parcela se está solapando con",parcela_solapada_misma:"La parcela se esta solapando a sí misma",sup_area_parcel:"Se ha superado el Límite para la edición de parcelas, reduzca el area",establecer_limites_parcela:"Tienes que establecer los límites de la parcela",intro_ubica:"Introduce una ubicación",loc_no_disponible:"La localización no es complatible con este dispositivo"},adminEnterprise:{listado_empresas:"Listado de Empresas",info_nav:"Para el correcto funcionamiento de la aplicación se recomienda utilizar los navegadores Chrome, Edge, Opera o Safari.",add_empresa:"Añadir nueva Empresa",eliminar:"Eliminar",guardar:"Guardar",editar:"Editar",seguro:"¿Estás seguro?",seguro_enterprise_del:"¿Seguro que quieres eliminar el/las empresas/s?",txt_seguro_enterprise_status:"Selecciona el estado que quieras proporcionar a esta empresa. Recuerda que si una empresa está Inactiva, no podrá consultarse en el mapa, solicitar nuevos informes y dejará de recibir actualizaciones del Monitor diario.",cancelar:"Cancelar",activo:"Activa",inactivo:"Inactiva",nombre:"Nombre",cif:"CIF",editar_estado:"Cambiar Estado",estado:"Estado",hectareas_disponibles:"Área disponible",hectareas_usadas:"Área usada",solo_una_empresa:"Solo tienes que seleccionar una empresa para esta acción",del_empresa_error:"Ha ocurrido un error con la eliminación de la/s empresa/s",update_state_empresa_error:"Ha ocurrido un error con la actualización del estado de la empresa"},newEnterprise:{editar_enterprise:"Editar empresa",nueva:"Nueva Empresa",tel_enterprise:"Teléfono de la empresa",usuarioAdministrador:"Usuario Administrador",guardar:"Guardar",nombre_enterprise:"Nombre de la Empresa",cif_enterprise:"CIF de la Empresa",direccion_enterprise:"Dirección de la Empresa",hectareas_disponible:"Hectáreas Disponibles",tipo_Metrica:"Tipo de Métrica",campo_requerido:"Este campo es requerido",save_enterprise:"Empresa Guardada Correctamente",save_status:"Estado de la Empresa Guardado Correctamente"},empleados:{empleados_lista:"Lista de Empleados",add:"Añadir",eliminar:"Eliminar",editar:"Editar",seguro:"¿Estás seguro?",seguro_user_del:"¿Seguro que quieres eliminar el/los usuario/s?",cancelar:"Cancelar",nombre:"Nombre",apellido:"Apellido",telefono:"Teléfono",desarrollo:"En desarrollo",un_user_selec:"Solo tienes que seleccionar un usuario para esta acción",user_error:"Ha ocurrido un error con la eliminación de los usuarios",guardar:"Guardar",admin_enterprise:"Administrador de la empresa",empleado_enterprise:"Empleado",select_row:"Debes seleccionar un rol",rol:"Rol del Usuario",password:"Contraseña",user_name:"Nombre de Usuario",user_lastname:"Apellido/s de Usuario",user_email:"Correo electrónico",user_phone:"Número de Teléfono",user_edit:"Editar usuario",user_new:"Nuevo Usuario",campo_requerido:"Este campo es requerido",user_generado:"Usuario Generado Correctamente, Le hemos enviado un email",user_guardado:"Usuario Guardado Correctamente",perfil_guardado:"Perfil Guardado Correctamente",label_lang:"Idioma",esp:"Español",eng:"Inglés",edit_perfil:"Editar Perfil"},parcelas:{parcel_list:"Lista de Parcelas",place_buscar:"Buscar Nombre",place_nuevo:"Añadir nuevo",eliminar:"Eliminar",editar:"Editar",seguro:"¿Estás seguro?",seguro_parcel_del:"¿Seguro que quieres eliminar la/s parcela/s?",cancelar:"Cancelar",nombre:"Nombre",descrip:"Descripción",hectareas:"Área",desarrollo:"En desarrollo",parcel_limit:"Se ha superado el límite para la creación de nuevas parcelas",parcel_sel_alert:"Solo tienes que seleccionar una parcela para esta acción",parcel_del_error:"Ha ocurrido un error con la eliminación de las parcelas",guardar:"Guardar",sigpac_pro:"SIGPAC Progresivo",sigpac_direc:"SIGPAC Directo",sigpac_error:"Error En la Búsqueda",buscar:"Buscar",ubicacion:"Introduce una ubicación",comunidad:"Comunidad",comunidad_sel:"Selecciona Comunidad",provincia:"Provincia",provincia_sel:"Selecciona Provincia",municipio:"Municipio",municipio_sel:"Selecciona Municipio",agregado:"Agregado",agregado_sel:"Selecciona Agregado",zona:"Zona",zona_sel:"Selecciona Zona",poligono:"Poligono",poligono_sel:"Selecciona Poligono",parcela:"Parcela",parcela_sel:"Selecciona Parcela",recinto:"Recinto",recinto_sel:"Selecciona Recinto",parcel_name:"Nombre de la parcela",place_name:"Nombre...",parcel_descrip:"Descripción de la Parcela",place_descrip:"Descripción...",parcel_edit:"Editar Parcela",parcela_solapada_con:"La parcela se está solapando con",parcela_solapada_si:"La parcela se esta solapando a sí misma",parcela_limite:"Tienes que establecer los límites de la parcela",parcela_limite_area:"Se ha superado el Límite para la edición de parcelas, reduzca el area",parcela_guardada:"Parcela Guardada Correctamente",parcela_guardada_2:"Parcela guardada correctamente. Recargue la pantalla para visualizarla en el mapa.",parcel_guardada_error_sent:"Ha ocurrido un error en la creación de la parcela error: Conexión con Sentinel",parcel_nueva:"Crear Nueva Parcela"},graficos:{grafico_procensandose:"Tu informe se esta procesando, te enviaremos un mail cuando esté disponible",gen_iformes:"Generación de Informes",gen_informes_acceptar:"Aceptar",grafico_tipo_uno:"Gráfico Tipo 1",grafico_tipo_dos:"Gráfico Tipo 2",grafico_ant:"Gáficos Anteriores",enterprise_list:"Listado de Empresas",enterprise_sel:"Selecciona una Empresa",inform_ant_de:"Informes Anteriores de",unificar_informes:"Unificar Informes",editar:"Editar Nombre",ver_datos:"Ver Datos",desc_excel:"Informe sin imagenes",desc_excel_img:"Informe con imagenes",del_informe:"Eliminar Informe",grafico_tipo:"Gráfico tipo",eliminar:"Eliminar",seguro:"¿Estás seguro?",seguro_parcel_del:"¿Seguro que quieres eliminar el/los Informes/s?",cancelar:"Cancelar",parcela:"Parcela",rango_fechas_sel:"Rango de Fechas Seleccionadas",creado:"Creado",analisis_nubes:"Análisis de Nubes",solicitante_informe:"Solicitante",tipo:"Tipo",capa:"Capa",del_informe_ok:"Informe Eliminado correctamente",del_informe_error:"Ha ocurrido un error con la eliminación del/los informe/s",select_one_informe:"Solo debes seleccionar un Informe",gen_grafico_t_one:"Generar Gráfico Tipo 1",ndvi:"NDVI",NDVI:"NDVI",mostisture_index:"MOISTURE INDEX",parcels_de:"Parcelas de",descrip:"Descripción",hectareas:"Hectáreas",puntos:"Puntos",prev_pag:"Página anterior",next_page:"Página siguente",por_pagina:"Por Página",imagen_por_gen:"Imagenes por Generar:",gen_informe:"Generar Informe",sel_layer_sen:"Selecciona un Layer de Sentinel",sent_layers:"Sentinel Layers",fecha_incio:"Fecha Inicio",fecha_fin:"Fecha Fin",parcelas:"Parcela",rang_fechas:"Rango de Fechas",informe_gen_ok:"Informe generado correctamente",informe_gen_error:"Ha ocurrido un error, intentelo más tarde",empresa:"Empresa",estado:"Estado del informe",nombre_informe:"Nombre de informe",gen_grafico_t_two:"Generar Gráfico Tipo 2",fecha:"Fecha",buscar_nombre:"Buscar Nombre",parcel_list:"Lista de Parcelas",generar:"Generar",nombre:"Nombre",fecha_recogida:"Fecha de recogida",fecha_estimada_recogida:"Fecha estimada de recogida",grafico_ndvi:"Gráfico NDVI",rojos_altos:"Rojos Altos",rojos_medios:"Rojos Medios",rojos_bajos:"Rojos Bajos",amarillos_altos:"Amarillos Altos",amarillos_medios:"Amarillos Medios",amarillos_bajos:"Amarillos Bajos",azules_altos:"Azules Altos",azules_medios:"Azules Medios",azules_bajos:"Azules Bajos",verdes_medios:"Verdes Medios",verdes_altos:"Verdes Altos",tabla_colores:"Tabla Colores",fecha_nombre:"Fecha/Nombre",fecha_gen:"Fecha Generación",imagen:"Imagen",imagenClouds:"Imagen Nubes",imagenTrueColor:"Imagen True Color",clouds:"Nubes",details:"Ver detalles",grafico_mois:"Gráfico MOISTURE INDEX",rojo_naran:"Rojo/Naranja",amarillo:"Amarillo",verde:"Verde",azul_claro:"Azul Claro",azul_medio:"Azul Medio",azul_oscuro:"Azul Oscuro",imagen_sent:"Imágenes Sentinel",plantas:"Plantas",cosecha:"Cosecha",resumen_unifica:"Resumen de Unificación",unificar:"Unificar",eliminar_informe_origin:"Eliminar los Informes Originales",modifica_infor:"Modificar Informe",guardar:"Guardar"},login:{email:"Email",password:"Contraseña",login_error:"Usuario o contraseña inválidos",olvidar_pass:"He olvidado la contraseña",login:"login",recordar_contrasena:"Recordar Contraseña",recordar_contrasena_error:"Debes introducir un correo electrónico",introduce_correo:"Introduce tu correo electrónico",recordar:"Recordar",envio_mail:"Le hemos enviado un email",recordar_error:"No hay un usuario activo asociado con esta dirección de correo electrónico o la contraseña no se puede cambiar",reestablecer_pass:"Reestablecer Contraseña",nueva_pass:"Nueva contraseña",confirma_pass:"Confirmar contraseña",reestablecer:"Reestablecer",ir_login:"Ir al Login",pass_no_iguales:"Las contraseñas no son iguales",pass_reestablece:"Se ha reestablecido la contraseña",pass_tiempo_exp:"Ha expirado el tiempo para resetear la contraseña o ya se ha establecido la contraseña con este enlace"},adminCoop:{nombre:"Nombre",cif:"CIF",direction:"Dirección",listado_coop:"Listado de Cooperativas",add_coop:"Nueva Cooperativa",editar_coop:"Editar Cooperativa",delete_coop:"Eliminar Cooperativa",seguro:"¿Estás seguro?",seguro_coop_del:"¿Seguro que quieres eliminar la/las Cooperativa/s?",cancelar:"Cancelar",del_coop_ok:"Se ha eliminado la/s Cooperativa/s correctamente",del_coop_ko:"Ha ocurrido un error con el eliminado",eliminar:"Eliminar"},newCoop:{nueva:"Nueva Cooperativa",nombre:"Nombre",nombrePlace:"Jonh Doe Coop.",direction:"Dirección",directionPlace:"Amazing Ave.",phone:"Teléfono de la Cooperativa",phonePlace:"91000000000",cif:"CIF/Identificación de la Cooperativa",cifPlace:"B819...",invalido_blank:"Este campo es requerido",create_coop_success:"Cooperativa creada correctamente"},editCoop:{title:"Editar Cooperativa",edit_coop_success:"Cooperativa Guardada correctamente",edit_coop_enterprises:"Empresas de la Cooperativa",add_enterprise_coop:"Editar empresas"}},en:{app:{monitor:"Monitor",dashboard:"Dashboard",administracion:"Administration",administracion_empresas:"Business Administration",graficos:"Graphics",alertas:"Alerts",perfil:"Profile",desconect:"Log Out",administracion_cooperativas:"Cooperatives Administration",emprise:"Emprise"},map:{most_todas_empresas:"Show all Parcels",sel_empresa:"Select a Company",listado_empresas:"List of Companies",listado_parcelas:"List of parcels",listado_usuarios:"List of users",parcelas_de:"Parcels of",colors:"Colors",fechas_disponibles:"Available Dates",edit_rapido:"Quick Edit",guardar:"Save",cancelar:"Cancel",elimina_parcela:"Delete Parcel",eliminar:"Delete",parcela_nueva:"New Parcel",crear_parcela:"Create Parcel",seguro:"Are you sure?",seguro_parcel_del:"Are you sure you want to delete the parcel",sent_layers:"Sentinel Layers",sent_layers_sel:"Select a Sentinel Layer",fecha:"Date",opacidad:"Opacity",nombre_parcela:"Parcel name",place_nombre_parcela:"Name ...",desc_parcela:"Description of the Parcel",place_desc_parcela:"Description...",parcela_solapada_con:"The parcel is overlapping with",parcela_solapada_misma:"The parcel is overlapping itself",sup_area_parcel:"The limit for editing parcels has been exceeded, reduce the area",establecer_limites_parcela:"You have to set the parcel limits",intro_ubica:"Enter a location",loc_no_disponible:"The location is not compliant with this device"},adminEnterprise:{listado_empresas:"List of Companies",add_empresa:"Add new Company",eliminar:"Delete",editar:"Edit",seguro:"Are you sure?",seguro_enterprise_del:"Are you sure you want to delete the company / ies?",cancelar:"Candel",nombre:"Name",cif:"CIF",estado:"Status",hectareas_disponibles:"Available area",hectareas_usadas:"Used area",solo_una_empresa:"You only have to select a company for this action",del_empresa_error:"An error has occurred with the deletion of the company / ies"},newEnterprise:{editar_enterprise:"Edit Company",nueva:"New Company",tel_enterprise:"Company phone",usuarioAdministrador:"Administrator User",guardar:"Save",nombre_enterprise:"Company Name",cif_enterprise:"Company CIF",direccion_enterprise:"Company Address",hectareas_disponible:"Available Hectares",tipo_Metrica:"Type of metrics",campo_requerido:"This field is required",save_enterprise:"Company Saved Successfully"},empleados:{empleados_lista:"Employees List",add:"Add",eliminar:"Delete",editar:"Edit",seguro:"Are you sure?",seguro_user_del:"Are you sure you want to delete the user / s?",cancelar:"Cancel",nombre:"Name",apellido:"Surname",telefono:"Phone",desarrollo:"In development",un_user_selec:"You only have to select a user for this action",user_error:"An error occurred with the deletion of users",guardar:"Save",admin_enterprise:"Company administrator",empleado_enterprise:"Employee",select_row:"You must select a role",rol:"User Role",password:"Password",user_name:"Username",user_lastname:"User last name / s",user_email:"Email",user_phone:"Phone Number",user_edit:"Edit user",user_new:"New User",campo_requerido:"This field is required",user_generado:"User Generated Correctly, We have sent you an email",user_guardado:"User Saved Correctly",perfil_guardado:"Profile Saved Correctly",label_lang:"Language",esp:"Spanish",eng:"English",edit_perfil:"Edit Profile"},parcelas:{parcel_list:"List of Parcels",place_buscar:"Search Name",place_nuevo:"Add new",eliminar:"Delete",editar:"Edit",seguro:"Are you sure?",seguro_parcel_del:"Are you sure you want to delete the parcel / s?",cancelar:"Cancel",nombre:"Name",descrip:"Description",hectareas:"Area",puntos:"Points",desarrollo:"In development",parcel_limit:"The limit for creating new parcels has been exceeded",parcel_sel_alert:"You only have to select a parcel for this action",parcel_del_error:"An error occurred with the removal of parcels",guardar:"Save",sigpac_pro:"SIGPAC Progressive",sigpac_direc:"SIGPAC Direct",sigpac_error:"Search Error",buscar:"Search",ubicacion:"Enter a location",comunidad:"Community",comunidad_sel:"Select Community",provincia:"Province",provincia_sel:"Select Province",municipio:"Municipality",municipio_sel:"Select Municipality",agregado:"Added",agregado_sel:"Select Aggregate",zona:"Zone",zona_sel:"Select Zone",poligono:"Polygon",poligono_sel:"Select Polygon",parcela:"Parcel",parcela_sel:"Select Parcel",recinto:"Enclosure",recinto_sel:"Select Enclosure",parcel_name:"Parcel name",place_name:"Name...",parcel_descrip:"Description of the Parcel",place_descrip:"Description...",parcel_edit:"Edit Parcel",parcela_solapada_con:"The parcel is overlapping with",parcela_solapada_si:"The parcel is overlapping itself",parcela_limite:"You have to set the boundaries of the parcel",parcela_limite_area:"The limit for the edition of parcels has been exceeded, reduce the area",parcela_guardada:"Parcel Saved Correctly",parcela_guardada_2:"Parcel saved correctly. Please reload the website to view the new parcel in the map.",parcel_guardada_error_sent:"An error occurred in the creation of the parcel error: Connection with Sentinel",parcel_nueva:"Create New Parcel"},graficos:{grafico_procensandose:"Your report is being processed, we will send you an email when it is generated",gen_iformes:"Report generation",gen_informes_acceptar:"Accept",grafico_tipo_uno:"Graph Type 1",grafico_tipo_dos:"Graph Type 2",grafico_ant:"Previous Graphics",enterprise_list:"List of Companies",enterprise_sel:"Select a Company",inform_ant_de:"Previous Reports of",unificar_informes:"Unify Reports",editar:"Edit Name",ver_datos:"View Data",desc_excel:"Report without images",desc_excel_img:"Report with images",del_informe:"Delete Report",grafico_tipo:"Graph type",eliminar:"Delete",seguro:"Are you sure?",seguro_parcel_del:"Are you sure you want to delete the Report / s?",cancelar:"Cancel",parcela:"Parcel",rango_fechas_sel:"Range of Selected Dates",analisis_nubes:"Cloud analysis",solicitante_informe:"Requester",creado:"Created",tipo:"Type",capa:"Layer",del_informe_ok:"Report Deleted successfully",del_informe_error:"An error has occurred with the deletion of the report (s",select_one_informe:"You should only select a Report",empresa:"Enterprise",gen_grafico_t_one:"Generate Type 1 Chart",ndvi:"NDVI",NDVI:"NDVI",mostisture_index:"MOISTURE INDEX",parcels_de:"Parcels of",descrip:"Description",hectareas:"Hectares",prev_pag:"Previous page",next_page:"Next page",por_pagina:"Per Page",imagen_por_gen:"Images to Generate:",gen_informe:"Generate Report",sel_layer_sen:"Select a Sentinel Layer",sent_layers:"Sentinel Layers",fecha_incio:"Start date",fecha_fin:"End date",parcelas:"Parcel",rang_fechas:"Date Range",informe_gen_ok:"Report generated successfully",informe_gen_error:"An error has occurred, please try again later",estado:"Report status",nombre_informe:"Report name",gen_grafico_t_two:"Generate Type 2 Chart",fecha:"Date",buscar_nombre:"Search Name",parcel_list:"List of Parcels",generar:"Generate",nombre:"Name",fecha_recogida:"Picking date",fecha_estimada_recogida:"Estimated picking date",grafico_ndvi:"NDVI graph",rojos_altos:"Tall Reds",rojos_medios:"Medium Reds",rojos_bajos:"Low Reds",amarillos_altos:"Tall Yellows",amarillos_medios:"Medium Yellows",amarillos_bajos:"Low Yellows",azules_altos:"Tall Blues",azules_medios:"Medium Blue",azules_bajos:"Low Blues",verdes_medios:"Medium green",verdes_altos:"Verdes Altos",tabla_colores:"Table Colors",fecha_nombre:"Date / Name",fecha_gen:"Generation Date",imagen:"Image",imagenClouds:"Image Clouds",imagenTrueColor:"Image True Color",clouds:"Clouds",details:"See details",grafico_mois:"Chart MOISTURE INDEX",rojo_naran:"Red / Orange",amarillo:"Yellow",verde:"Green",azul_claro:"Light Blue",azul_medio:"Medium Blue",azul_oscuro:"Dark Blue",imagen_sent:"Sentinel Images",plantas:"Plants",cosecha:"Harvest",resumen_unifica:"Summary of Unification",unificar:"Unify",eliminar_informe_origin:"Delete Original Reports",modifica_infor:"Modify Report",guardar:"Save"},login:{email:"Email",password:"Password",login_error:"Invalid username or password",olvidar_pass:"I have forgotten the password",login:"login",recordar_contrasena:"Remember Password",recordar_contrasena_error:"You must enter an email",introduce_correo:"Enter your email",recordar:"Remember",envio_mail:"We have sent you an email",recordar_error:"There is no active user associated with this email address or the password cannot be changed",reestablecer_pass:""},adminCoop:{nombre:"Name",cif:"CIF",direction:"Direction",listado_coop:"List of Cooperatives",add_coop:"New Cooperative",editar_coop:"Edit Cooperative",delete_coop:"Delete Cooperativa",seguro:"Are you sure?",seguro_coop_del:"Are you sure you want to delete the Cooperative / s?",cancelar:"Cancel",del_coop_ok:"The Cooperativa / s has been deleted successfully",del_coop_ko:"An error occurred with the deleted one",eliminar:"Delete"},newCoop:{nueva:"New Cooperative",nombre:"Name",nombrePlace:"Jonh Doe Coop.",direction:"Direction",directionPlace:"Amazing Ave.",phone:"Cooperativa telephone",phonePlace:"91000000000",cif:"CIF / Identification of the Cooperative",cifPlace:"B819...",invalido_blank:"This field is required",create_coop_success:"Cooperative created successfully"},editCoop:{title:"Edit Cooperative",edit_coop_success:"Cooperative Saved successfully",edit_coop_enterprises:"Cooperative Companies",add_enterprise_coop:"Edit companies"}}};s["default"].prototype.$locale_lang="es";const Md=new ed["a"]({locale:s["default"].prototype.$locale_lang,messages:Ld});new s["default"]({router:Kc,i18n:Md,render:e=>e(r["default"])}).$mount("#app")},"580f":function(e,a,t){},"583f":function(e,a,t){"use strict";t("6927")},"63b4":function(e,a,t){"use strict";t("cd39")},"63bd":function(e,a,t){},6927:function(e,a,t){},"6b2ca":function(e,a,t){"use strict";t("4a9c")},"74a7":function(e,a,t){"use strict";t("988a")},"75c7":function(e,a,t){"use strict";t("580f")},7819:function(e,a,t){},"793b":function(e,a,t){"use strict";t("dba1")},"7a11":function(e,a,t){},"7d05":function(e,a,t){"use strict";t("4a4c")},"855c":function(e,a,t){e.exports=t.p+"img/agriculture-analytics.c355f676.svg"},"88b3":function(e,a,t){"use strict";t("9db8")},"8af2":function(e,a,t){"use strict";t("1a42")},"921b":function(e,a,t){},"96a9":function(e,a,t){},"96bc":function(e,a,t){"use strict";t("4cd8")},"988a":function(e,a,t){},"9a4a":function(e,a,t){e.exports=t.p+"img/logo-cabecera.547ab55d.png"},"9b1ec":function(e,a,t){"use strict";t("4198")},"9b88":function(e,a,t){},"9d81":function(e,a,t){},"9db8":function(e,a,t){},"9e413":function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAAxCAYAAADeOA6cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJENDNERTNCQzczQjExRUE4RjdGOTg2MjVEMDc5Q0JDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJENDNERTNDQzczQjExRUE4RjdGOTg2MjVEMDc5Q0JDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QkQ0M0RFMzlDNzNCMTFFQThGN0Y5ODYyNUQwNzlDQkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QkQ0M0RFM0FDNzNCMTFFQThGN0Y5ODYyNUQwNzlDQkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5tKhwmAAAE6ElEQVR42uyc3VHkOBCApfEwB3dPeyHMhkAKbAobwmwIEMISwmxdBEcIbAgQAoSwvB+2dd1yy9YYw80Axy6a76vq0l9LqLoltW1N4Z1z9yJzBwAA4FwdA8JM5A+RI5HDPPVdejjVlqf+P9ondH4XCRaVGp2JpqFL66wu5ftymG6fSlU311NpTcI47zfrw4TuoOef1tE0G0/n4CvnqgPvZtXMVWL1mUg1n7mZ1mm+8lL2nY6mUcfKVVfWdtWv+vaZ6doY83wM06+6cj9eGqPywxxin0w/6lh57vt+/Rz6eWX9dfx+bl27UxuIAYIYom27fNNaOVidSQiDzlDvh/5Ze2i6tbLRb6NvcE2j0rq67tJOJF9LXWxrJB+G+qg76MTygz4j3Wxs/Tu1GK1dHLkwP3LtwW+SP3RtzEt6cGRtKX8Y9Rpt03pNU5vpx7pFqk9tVp/GqES83zRGNJibMG7KD0b1Y2dstLfugQMsH+pa/NC4tqljvlWRcmi6fGyrN/OxLfW5r7s0tg392mzcmK8tH/+OnBZV42aLIOurcf4gyJqT3Sgy0/wi5a08bptb20Lbhv7anvr5Raprh/7z0B2Xttm9HgL55h8dAD4dJhOHhG9HB8Po4OjHlrYga6qVtdXKmmvrLg1arh/W6Vrs2oY+qazrN6RxJI3jxr5DXSxr/T9ySv4VYkwAAADoITAAAACBAQAACAwAAEBgAAAAAgMAABAYAACAwAAAAAQGAAAgMAAAAIEBAAAIDAAAQGAAAAACAwAAEBgAAIDAAAAABAYAACAwAAAAgQEAAAgMAABAYAAAACAwAAAAgQEAAAgMAABAYAAAAAIDAAAQGAAA4LXxIvcic0wBAABC7UMImAEAAHr4lAQAAAQGAAAgMAAAAIEBAAAIDAAAQGAAAAACAwAAEBgAAIDAAAAA7yMweO/HcixyJRJMVhM6SdaZ3o32xQVvx5SvSpz/hJ7ml6X68JG9tsx0kpwWvr53sc/NhH1CKevkV3hj+Cpy7br/u/RZZC0yZdxjq/8YQvDWZ40L3pToK7N/9NU72wjbzl/X2oXp/Wl1pyX5cIv99kHkzvSSnO/LGt/CPh9Htvli/W45JgT9X0m7yMTiC7YRE1dPbcJsnJOuGBzy/0vuq6wu+qr0+dt6vCzJh1vsN91fNy/d7wXbZ4zqrUq30bby0jeG5IDrrO7aHLRN3++E5jfj2Bb9c3z1budvnyt1w1+U4sMt99vSJJhcPfLkXNwaf8Z5dGK2ueCYeL1PSe6R19inNuvSovgZLvjpfChx/vo9Xb8Z24F4KwHl25758Fv2mSR9Tluzxic5tc9sdxwHzwgMdtmXnkAun/MHLSho37PR0x/Aa34iPdc7Brtn0HV3ucfmuLOHsBNWxuSb1QlvCy8IDPbUlZ5CPmWvbMej17nbJyK3btDzwp/gfkWu7YDc1lclzf+8kENx1/023nt3+7DGd7TPqQUFLp1Hh/1LLp+dHfR/Wz69USyzV9erbGHGCx4ud37a5Vz0leV7X5Uwf9ddtH7NLpuXo35XJfnwkf0WbZC1LUd7b134+t7FPskuYfzQwFkRXuWO4YsbLrnWVp6KviuL3uvR74ZXhOc3I/rKvr1HX8kiuC1w/rrh+9+pW93nkny4xX5LB6Hq/TCds31Z41vaZ2VvGfwIZsS/AgwAuCGRz0rVd2AAAAAASUVORK5CYII="},a0cd:function(e,a,t){"use strict";t("96a9")},a145:function(e,a,t){e.exports=t.p+"img/location--hazard.d0e351e4.svg"},a338:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYYAAAAxCAYAAADeOA6cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIwQzcwNzg2QzczQjExRUE4NTc5RkEzNTYxMDQzRDg3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIwQzcwNzg3QzczQjExRUE4NTc5RkEzNTYxMDQzRDg3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjBDNzA3ODRDNzNCMTFFQTg1NzlGQTM1NjEwNDNEODciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjBDNzA3ODVDNzNCMTFFQTg1NzlGQTM1NjEwNDNEODciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz58LhC1AAADSUlEQVR42uzc8VXaQBwH8EToAK5gR2CFOoKMYEewf/bPOkIdoY6gI8AIdQQ7gGh6h7+0IU0CWBF87/N57x4kXpIjHPnmOJ5lURQPqYwLACiKxTIQvqbyIdJh1CrjnuWuuu316+qO4rhDxytHAzsZRzna4IDjDRo9HmjIaE2d8QuOt0n98Zo3ouN5dVQWVVEWT+nE1I916V6f6w/Vqf9er99sv13P+7bbpE7z8TG92P5jPrf3sdXWzbfvr7N6TkaNc9L9uofP5+q5bZ/jbc/ntu/19u9JLqPVNj+lD99jvpQUz4/tstji+bp9LAb2/dJjLF7Y5nXtG3r+lEpVbdiQdQ1c18ht9/uwTIQj4QhAk2AAQDAAIBgAEAwACAYABAMAggEAwQCAYABAMAAgGAAQDAAIBgAEAwCCAQDBAIBgAEAwACAYABAMACAYABAMAAgGAAQDAIIBAMEAwGsrU3lIZexUAJAsyqqqnAYA/vBVEgCCAQDBAIBgAEAwACAYABAMAAgGAAQDAIcTDGVZTlKZpVJFOe/bQfrbRaPe/VBdeCupH3b247weDrVv9pQfjXqz2HYvI4ZvqcyrqspHn6byPTXkpOMFnkTdadS9jGU4BMt+XDz/T7BlP07lxGnhHfXNfKP9KZWPUfdXKhdvPmJIF/vjaMhVXk4X/Ot4AWcd2x836mS3eV3sA/ZppR8nQ/0YDrVvHsff7hrX2J3f3HSNGCZxsZ831s3rEGiKOvMUBDcRBjn1LtP6X9579mzS6LuD/RgOuG9eR/2LeMwjiMtdN3Cbf7fd94H6nMoslfucaikUvnjfOfC7NXgvffOuWP2K/irCYrcjhpj0qCc2brbZOOYY8jY5DD7G6OGnr5IAXsVZjBJOo+RRw4+dB0O6w7/KE8dRTuvhTZ75bg197noanSep89dHebQwjfWfvJ/s2bw1bB/qx3CoffM8Rgm3UaZx3d3pzfc/cwwxP5AbcBEBcR6Nvo7l/AulWVTPdSd1iKTHHAgnPnwcgJV+HB+wyVsMw+E/++bP4u9XR3etIDiL7Xc6j9s3x5DnDZa/na2X84igI0SuIgxmjd/VfmlNXMO+fI5hd9VYdtPCe+qbl1HvvhEU01037rcAAwCRssnqxRnFpgAAAABJRU5ErkJggg=="},a379:function(e,a,t){e.exports=t.p+"img/crop-health.b1e759e4.svg"},a56d:function(e,a,t){e.exports=t.p+"img/mostly-cloudy.e8d7dd44.svg"},aecc:function(e,a,t){},bdd0:function(e,a,t){"use strict";t("e5bf")},be13:function(e,a,t){e.exports=t.p+"img/logo-D4SF-login.d3464d58.png"},c8ae:function(e,a,t){"use strict";t("273f")},cd00:function(e,a,t){e.exports=t.p+"img/crop-growth.0ea1fcf8.svg"},cd0d:function(e,a,t){e.exports=t.p+"img/airport-location.d9ff9d91.svg"},cd39:function(e,a,t){},dba1:function(e,a,t){},dead:function(e,a,t){"use strict";t("921b")},ded4:function(e,a,t){},df5f:function(e,a,t){},df88:function(e,a,t){},e5bf:function(e,a,t){},e908:function(e,a,t){"use strict";t("ded4")},eda3:function(e,a,t){"use strict";t("f3a3")},f19dc:function(e,a,t){"use strict";t("df5f")},f1c3:function(e,a,t){"use strict";t("aecc")},f3a3:function(e,a,t){},f4ab:function(e,a,t){e.exports=t.p+"img/information--square--filled.ca7449db.svg"},f4ef:function(e,a,t){},f64a:function(e,a,t){},f70a:function(e,a,t){},f87b:function(e,a,t){"use strict";t("5524")}});
//# sourceMappingURL=app.3e36abe8.js.map